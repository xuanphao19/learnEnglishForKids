//jquery.ui.touch-punch.js 2.2.0
(function($) {
    $.support.touch = 'ontouchend'in document;
    if (!$.support.touch) {
        return;
    }
    var mouseProto = $.ui.mouse.prototype, _mouseInit = mouseProto._mouseInit, touchHandled;
    function simulateMouseEvent(event, simulatedType) {
        if (event.originalEvent.touches.length > 1) {
            return;
        }
        event.preventDefault();
        var touch = event.originalEvent.changedTouches[0]
          , simulatedEvent = document.createEvent('MouseEvents');
        simulatedEvent.initMouseEvent(simulatedType, true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
        event.target.dispatchEvent(simulatedEvent);
    }
    mouseProto._touchStart = function(event) {
        var self = this;
        if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {
            return;
        }
        touchHandled = true;
        self._touchMoved = false;
        simulateMouseEvent(event, 'mouseover');
        simulateMouseEvent(event, 'mousemove');
        simulateMouseEvent(event, 'mousedown');
    }
    ;
    mouseProto._touchMove = function(event) {
        if (!touchHandled) {
            return;
        }
        this._touchMoved = true;
        simulateMouseEvent(event, 'mousemove');
    }
    ;
    mouseProto._touchEnd = function(event) {
        if (!touchHandled) {
            return;
        }
        simulateMouseEvent(event, 'mouseup');
        simulateMouseEvent(event, 'mouseout');
        if (!this._touchMoved) {
            simulateMouseEvent(event, 'click');
        }
        touchHandled = false;
    }
    ;
    mouseProto._mouseInit = function() {
        var self = this;
        self.element.bind('touchstart', $.proxy(self, '_touchStart')).bind('touchmove', $.proxy(self, '_touchMove')).bind('touchend', $.proxy(self, '_touchEnd'));
        _mouseInit.call(self);
    }
    ;
}
)(jQuery);
/*! jQuery Mobile v1.4.3*/
(function(e, t, n) {
    typeof define == "function" && define.amd ? define(["jquery"], function(r) {
        return n(r, e, t),
        r.mobile
    }) : n(e.jQuery, e, t)
}
)(this, document, function(e, t, n, r) {
    (function(e, t, r) {
        "$:nomunge";
        function l(e) {
            return e = e || location.href,
            "#" + e.replace(/^[^#]*#?(.*)$/, "$1")
        }
        var i = "hashchange", s = n, o, u = e.event.special, a = s.documentMode, f = "on" + i in t && (a === r || a > 7);
        e.fn[i] = function(e) {
            return e ? this.bind(i, e) : this.trigger(i)
        }
        ,
        e.fn[i].delay = 50,
        u[i] = e.extend(u[i], {
            setup: function() {
                if (f)
                    return !1;
                e(o.start)
            },
            teardown: function() {
                if (f)
                    return !1;
                e(o.stop)
            }
        }),
        o = function() {
            function p() {
                var n = l()
                  , r = h(u);
                n !== u ? (c(u = n, r),
                e(t).trigger(i)) : r !== u && (location.href = location.href.replace(/#.*/, "") + r),
                o = setTimeout(p, e.fn[i].delay)
            }
            var n = {}, o, u = l(), a = function(e) {
                return e
            }, c = a, h = a;
            return n.start = function() {
                o || p()
            }
            ,
            n.stop = function() {
                o && clearTimeout(o),
                o = r
            }
            ,
            t.attachEvent && !t.addEventListener && !f && function() {
                var t, r;
                n.start = function() {
                    t || (r = e.fn[i].src,
                    r = r && r + l(),
                    t = e('<iframe tabindex="-1" title="empty"/>').hide().one("load", function() {
                        r || c(l()),
                        p()
                    }).attr("src", r || "javascript:0").insertAfter("body")[0].contentWindow,
                    s.onpropertychange = function() {
                        try {
                            event.propertyName === "title" && (t.document.title = s.title)
                        } catch (e) {}
                    }
                    )
                }
                ,
                n.stop = a,
                h = function() {
                    return l(t.location.href)
                }
                ,
                c = function(n, r) {
                    var o = t.document
                      , u = e.fn[i].domain;
                    n !== r && (o.title = s.title,
                    o.open(),
                    u && o.write('<script>document.domain="' + u + '"</script>'),
                    o.close(),
                    t.location.hash = n)
                }
            }(),
            n
        }()
    }
    )(e, this),
    function(e) {
        e.mobile = {}
    }(e),
    function(e, t, n) {
        e.extend(e.mobile, {
            version: "1.4.3",
            subPageUrlKey: "ui-page",
            hideUrlBar: !0,
            keepNative: ":jqmData(role='none'), :jqmData(role='nojs')",
            activePageClass: "ui-page-active",
            activeBtnClass: "ui-btn-active",
            focusClass: "ui-focus",
            ajaxEnabled: !0,
            hashListeningEnabled: !0,
            linkBindingEnabled: !0,
            defaultPageTransition: "fade",
            maxTransitionWidth: !1,
            minScrollBack: 0,
            defaultDialogTransition: "pop",
            pageLoadErrorMessage: "Error Loading Page",
            pageLoadErrorMessageTheme: "a",
            phonegapNavigationEnabled: !1,
            autoInitializePage: !0,
            pushStateEnabled: !0,
            ignoreContentEnabled: !1,
            buttonMarkup: {
                hoverDelay: 200
            },
            dynamicBaseEnabled: !0,
            pageContainer: e(),
            allowCrossDomainPages: !1,
            dialogHashKey: "&ui-state=dialog"
        })
    }(e, this),
    function(e, t, n) {
        var r = {}
          , i = e.find
          , s = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/
          , o = /:jqmData\(([^)]*)\)/g;
        e.extend(e.mobile, {
            ns: "",
            getAttribute: function(t, n) {
                var r;
                t = t.jquery ? t[0] : t,
                t && t.getAttribute && (r = t.getAttribute("data-" + e.mobile.ns + n));
                try {
                    r = r === "true" ? !0 : r === "false" ? !1 : r === "null" ? null : +r + "" === r ? +r : s.test(r) ? JSON.parse(r) : r
                } catch (i) {}
                return r
            },
            nsNormalizeDict: r,
            nsNormalize: function(t) {
                return r[t] || (r[t] = e.camelCase(e.mobile.ns + t))
            },
            closestPageData: function(e) {
                return e.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")
            }
        }),
        e.fn.jqmData = function(t, r) {
            var i;
            return typeof t != "undefined" && (t && (t = e.mobile.nsNormalize(t)),
            arguments.length < 2 || r === n ? i = this.data(t) : i = this.data(t, r)),
            i
        }
        ,
        e.jqmData = function(t, n, r) {
            var i;
            return typeof n != "undefined" && (i = e.data(t, n ? e.mobile.nsNormalize(n) : n, r)),
            i
        }
        ,
        e.fn.jqmRemoveData = function(t) {
            return this.removeData(e.mobile.nsNormalize(t))
        }
        ,
        e.jqmRemoveData = function(t, n) {
            return e.removeData(t, e.mobile.nsNormalize(n))
        }
        ,
        e.find = function(t, n, r, s) {
            return t.indexOf(":jqmData") > -1 && (t = t.replace(o, "[data-" + (e.mobile.ns || "") + "$1]")),
            i.call(this, t, n, r, s)
        }
        ,
        e.extend(e.find, i)
    }(e, this),
    function(e, t) {
        function s(t, n) {
            var r, i, s, u = t.nodeName.toLowerCase();
            return "area" === u ? (r = t.parentNode,
            i = r.name,
            !t.href || !i || r.nodeName.toLowerCase() !== "map" ? !1 : (s = e("img[usemap=#" + i + "]")[0],
            !!s && o(s))) : (/input|select|textarea|button|object/.test(u) ? !t.disabled : "a" === u ? t.href || n : n) && o(t)
        }
        function o(t) {
            return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
                return e.css(this, "visibility") === "hidden"
            }).length
        }
        var r = 0
          , i = /^ui-id-\d+$/;
        e.ui = e.ui || {},
        e.extend(e.ui, {
            version: "c0ab71056b936627e8a7821f03c044aec6280a40",
            keyCode: {
                BACKSPACE: 8,
                COMMA: 188,
                DELETE: 46,
                DOWN: 40,
                END: 35,
                ENTER: 13,
                ESCAPE: 27,
                HOME: 36,
                LEFT: 37,
                PAGE_DOWN: 34,
                PAGE_UP: 33,
                PERIOD: 190,
                RIGHT: 39,
                SPACE: 32,
                TAB: 9,
                UP: 38
            }
        }),
        e.fn.extend({
            focus: function(t) {
                return function(n, r) {
                    return typeof n == "number" ? this.each(function() {
                        var t = this;
                        setTimeout(function() {
                            e(t).focus(),
                            r && r.call(t)
                        }, n)
                    }) : t.apply(this, arguments)
                }
            }(e.fn.focus),
            scrollParent: function() {
                var t;
                return e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? t = this.parents().filter(function() {
                    return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                }).eq(0) : t = this.parents().filter(function() {
                    return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                }).eq(0),
                /fixed/.test(this.css("position")) || !t.length ? e(this[0].ownerDocument || n) : t
            },
            uniqueId: function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++r)
                })
            },
            removeUniqueId: function() {
                return this.each(function() {
                    i.test(this.id) && e(this).removeAttr("id")
                })
            }
        }),
        e.extend(e.expr[":"], {
            data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
                return function(n) {
                    return !!e.data(n, t)
                }
            }) : function(t, n, r) {
                return !!e.data(t, r[3])
            }
            ,
            focusable: function(t) {
                return s(t, !isNaN(e.attr(t, "tabindex")))
            },
            tabbable: function(t) {
                var n = e.attr(t, "tabindex")
                  , r = isNaN(n);
                return (r || n >= 0) && s(t, !r)
            }
        }),
        e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(n, r) {
            function u(t, n, r, s) {
                return e.each(i, function() {
                    n -= parseFloat(e.css(t, "padding" + this)) || 0,
                    r && (n -= parseFloat(e.css(t, "border" + this + "Width")) || 0),
                    s && (n -= parseFloat(e.css(t, "margin" + this)) || 0)
                }),
                n
            }
            var i = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"]
              , s = r.toLowerCase()
              , o = {
                innerWidth: e.fn.innerWidth,
                innerHeight: e.fn.innerHeight,
                outerWidth: e.fn.outerWidth,
                outerHeight: e.fn.outerHeight
            };
            e.fn["inner" + r] = function(n) {
                return n === t ? o["inner" + r].call(this) : this.each(function() {
                    e(this).css(s, u(this, n) + "px")
                })
            }
            ,
            e.fn["outer" + r] = function(t, n) {
                return typeof t != "number" ? o["outer" + r].call(this, t) : this.each(function() {
                    e(this).css(s, u(this, t, !0, n) + "px")
                })
            }
        }),
        e.fn.addBack || (e.fn.addBack = function(e) {
            return this.add(e == null ? this.prevObject : this.prevObject.filter(e))
        }
        ),
        e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
            return function(n) {
                return arguments.length ? t.call(this, e.camelCase(n)) : t.call(this)
            }
        }(e.fn.removeData)),
        e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),
        e.support.selectstart = "onselectstart"in n.createElement("div"),
        e.fn.extend({
            disableSelection: function() {
                return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                    e.preventDefault()
                })
            },
            enableSelection: function() {
                return this.unbind(".ui-disableSelection")
            },
            zIndex: function(r) {
                if (r !== t)
                    return this.css("zIndex", r);
                if (this.length) {
                    var i = e(this[0]), s, o;
                    while (i.length && i[0] !== n) {
                        s = i.css("position");
                        if (s === "absolute" || s === "relative" || s === "fixed") {
                            o = parseInt(i.css("zIndex"), 10);
                            if (!isNaN(o) && o !== 0)
                                return o
                        }
                        i = i.parent()
                    }
                }
                return 0
            }
        }),
        e.ui.plugin = {
            add: function(t, n, r) {
                var i, s = e.ui[t].prototype;
                for (i in r)
                    s.plugins[i] = s.plugins[i] || [],
                    s.plugins[i].push([n, r[i]])
            },
            call: function(e, t, n, r) {
                var i, s = e.plugins[t];
                if (!s)
                    return;
                if (!r && (!e.element[0].parentNode || e.element[0].parentNode.nodeType === 11))
                    return;
                for (i = 0; i < s.length; i++)
                    e.options[s[i][0]] && s[i][1].apply(e.element, n)
            }
        }
    }(e),
    function(e, t, r) {
        var i = function(t, n) {
            var r = t.parent()
              , i = []
              , s = r.children(":jqmData(role='header')")
              , o = t.children(":jqmData(role='header')")
              , u = r.children(":jqmData(role='footer')")
              , a = t.children(":jqmData(role='footer')");
            return o.length === 0 && s.length > 0 && (i = i.concat(s.toArray())),
            a.length === 0 && u.length > 0 && (i = i.concat(u.toArray())),
            e.each(i, function(t, r) {
                n -= e(r).outerHeight()
            }),
            Math.max(0, n)
        };
        e.extend(e.mobile, {
            window: e(t),
            document: e(n),
            keyCode: e.ui.keyCode,
            behaviors: {},
            silentScroll: function(n) {
                e.type(n) !== "number" && (n = e.mobile.defaultHomeScroll),
                e.event.special.scrollstart.enabled = !1,
                setTimeout(function() {
                    t.scrollTo(0, n),
                    e.mobile.document.trigger("silentscroll", {
                        x: 0,
                        y: n
                    })
                }, 20),
                setTimeout(function() {
                    e.event.special.scrollstart.enabled = !0
                }, 150)
            },
            getClosestBaseUrl: function(t) {
                var n = e(t).closest(".ui-page").jqmData("url")
                  , r = e.mobile.path.documentBase.hrefNoHash;
                if (!e.mobile.dynamicBaseEnabled || !n || !e.mobile.path.isPath(n))
                    n = r;
                return e.mobile.path.makeUrlAbsolute(n, r)
            },
            removeActiveLinkClass: function(t) {
                !!e.mobile.activeClickedLink && (!e.mobile.activeClickedLink.closest("." + e.mobile.activePageClass).length || t) && e.mobile.activeClickedLink.removeClass(e.mobile.activeBtnClass),
                e.mobile.activeClickedLink = null
            },
            getInheritedTheme: function(e, t) {
                var n = e[0], r = "", i = /ui-(bar|body|overlay)-([a-z])\b/, s, o;
                while (n) {
                    s = n.className || "";
                    if (s && (o = i.exec(s)) && (r = o[2]))
                        break;
                    n = n.parentNode
                }
                return r || t || "a"
            },
            enhanceable: function(e) {
                return this.haveParents(e, "enhance")
            },
            hijackable: function(e) {
                return this.haveParents(e, "ajax")
            },
            haveParents: function(t, n) {
                if (!e.mobile.ignoreContentEnabled)
                    return t;
                var r = t.length, i = e(), s, o, u, a, f;
                for (a = 0; a < r; a++) {
                    o = t.eq(a),
                    u = !1,
                    s = t[a];
                    while (s) {
                        f = s.getAttribute ? s.getAttribute("data-" + e.mobile.ns + n) : "";
                        if (f === "false") {
                            u = !0;
                            break
                        }
                        s = s.parentNode
                    }
                    u || (i = i.add(o))
                }
                return i
            },
            getScreenHeight: function() {
                return t.innerHeight || e.mobile.window.height()
            },
            resetActivePageHeight: function(t) {
                var n = e("." + e.mobile.activePageClass)
                  , r = n.height()
                  , s = n.outerHeight(!0);
                t = i(n, typeof t == "number" ? t : e.mobile.getScreenHeight()),
                n.css("min-height", ""),
                n.height() < t && n.css("min-height", t - (s - r))
            },
            loading: function() {
                var t = this.loading._widget || e(e.mobile.loader.prototype.defaultHtml).loader()
                  , n = t.loader.apply(t, arguments);
                return this.loading._widget = t,
                n
            }
        }),
        e.addDependents = function(t, n) {
            var r = e(t)
              , i = r.jqmData("dependents") || e();
            r.jqmData("dependents", e(i).add(n))
        }
        ,
        e.fn.extend({
            removeWithDependents: function() {
                e.removeWithDependents(this)
            },
            enhanceWithin: function() {
                var t, n = {}, r = e.mobile.page.prototype.keepNativeSelector(), i = this;
                e.mobile.nojs && e.mobile.nojs(this),
                e.mobile.links && e.mobile.links(this),
                e.mobile.degradeInputsWithin && e.mobile.degradeInputsWithin(this),
                e.fn.buttonMarkup && this.find(e.fn.buttonMarkup.initSelector).not(r).jqmEnhanceable().buttonMarkup(),
                e.fn.fieldcontain && this.find(":jqmData(role='fieldcontain')").not(r).jqmEnhanceable().fieldcontain(),
                e.each(e.mobile.widgets, function(t, s) {
                    if (s.initSelector) {
                        var o = e.mobile.enhanceable(i.find(s.initSelector));
                        o.length > 0 && (o = o.not(r)),
                        o.length > 0 && (n[s.prototype.widgetName] = o)
                    }
                });
                for (t in n)
                    n[t][t]();
                return this
            },
            addDependents: function(t) {
                e.addDependents(this, t)
            },
            getEncodedText: function() {
                return e("<a>").text(this.text()).html()
            },
            jqmEnhanceable: function() {
                return e.mobile.enhanceable(this)
            },
            jqmHijackable: function() {
                return e.mobile.hijackable(this)
            }
        }),
        e.removeWithDependents = function(t) {
            var n = e(t);
            (n.jqmData("dependents") || e()).remove(),
            n.remove()
        }
        ,
        e.addDependents = function(t, n) {
            var r = e(t)
              , i = r.jqmData("dependents") || e();
            r.jqmData("dependents", e(i).add(n))
        }
        ,
        e.find.matches = function(t, n) {
            return e.find(t, null, null, n)
        }
        ,
        e.find.matchesSelector = function(t, n) {
            return e.find(n, null, null, [t]).length > 0
        }
    }(e, this),
    function(e, r) {
        t.matchMedia = t.matchMedia || function(e, t) {
            var n, r = e.documentElement, i = r.firstElementChild || r.firstChild, s = e.createElement("body"), o = e.createElement("div");
            return o.id = "mq-test-1",
            o.style.cssText = "position:absolute;top:-100em",
            s.style.background = "none",
            s.appendChild(o),
            function(e) {
                return o.innerHTML = '&shy;<style media="' + e + '"> #mq-test-1 { width: 42px; }</style>',
                r.insertBefore(s, i),
                n = o.offsetWidth === 42,
                r.removeChild(s),
                {
                    matches: n,
                    media: e
                }
            }
        }(n),
        e.mobile.media = function(e) {
            return t.matchMedia(e).matches
        }
    }(e),
    function(e, t) {
        var r = {
            touch: "ontouchend"in n
        };
        e.mobile.support = e.mobile.support || {},
        e.extend(e.support, r),
        e.extend(e.mobile.support, r)
    }(e),
    function(e, n) {
        e.extend(e.support, {
            orientation: "orientation"in t && "onorientationchange"in t
        })
    }(e),
    function(e, r) {
        function i(e) {
            var t = e.charAt(0).toUpperCase() + e.substr(1), n = (e + " " + u.join(t + " ") + t).split(" "), i;
            for (i in n)
                if (o[n[i]] !== r)
                    return !0
        }
        function h() {
            var n = t
              , r = !!n.document.createElementNS && !!n.document.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect && (!n.opera || navigator.userAgent.indexOf("Chrome") !== -1)
              , i = function(t) {
                (!t || !r) && e("html").addClass("ui-nosvg")
            }
              , s = new n.Image;
            s.onerror = function() {
                i(!1)
            }
            ,
            s.onload = function() {
                i(s.width === 1 && s.height === 1)
            }
            ,
            s.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
        }
        function p() {
            var i = "transform-3d", o = e.mobile.media("(-" + u.join("-" + i + "),(-") + "-" + i + "),(" + i + ")"), a, f, l;
            if (o)
                return !!o;
            a = n.createElement("div"),
            f = {
                MozTransform: "-moz-transform",
                transform: "transform"
            },
            s.append(a);
            for (l in f)
                a.style[l] !== r && (a.style[l] = "translate3d( 100px, 1px, 1px )",
                o = t.getComputedStyle(a).getPropertyValue(f[l]));
            return !!o && o !== "none"
        }
        function d() {
            var t = location.protocol + "//" + location.host + location.pathname + "ui-dir/", n = e("head base"), r = null, i = "", o, u;
            return n.length ? i = n.attr("href") : n = r = e("<base>", {
                href: t
            }).appendTo("head"),
            o = e("<a href='testurl' />").prependTo(s),
            u = o[0].href,
            n[0].href = i || location.pathname,
            r && r.remove(),
            u.indexOf(t) === 0
        }
        function v() {
            var e = n.createElement("x"), r = n.documentElement, i = t.getComputedStyle, s;
            return "pointerEvents"in e.style ? (e.style.pointerEvents = "auto",
            e.style.pointerEvents = "x",
            r.appendChild(e),
            s = i && i(e, "").pointerEvents === "auto",
            r.removeChild(e),
            !!s) : !1
        }
        function m() {
            var e = n.createElement("div");
            return typeof e.getBoundingClientRect != "undefined"
        }
        function g() {
            var e = t
              , n = navigator.userAgent
              , r = navigator.platform
              , i = n.match(/AppleWebKit\/([0-9]+)/)
              , s = !!i && i[1]
              , o = n.match(/Fennec\/([0-9]+)/)
              , u = !!o && o[1]
              , a = n.match(/Opera Mobi\/([0-9]+)/)
              , f = !!a && a[1];
            return (r.indexOf("iPhone") > -1 || r.indexOf("iPad") > -1 || r.indexOf("iPod") > -1) && s && s < 534 || e.operamini && {}.toString.call(e.operamini) === "[object OperaMini]" || a && f < 7458 || n.indexOf("Android") > -1 && s && s < 533 || u && u < 6 || "palmGetResource"in t && s && s < 534 || n.indexOf("MeeGo") > -1 && n.indexOf("NokiaBrowser/8.5.0") > -1 ? !1 : !0
        }
        var s = e("<body>").prependTo("html"), o = s[0].style, u = ["Webkit", "Moz", "O"], a = "palmGetResource"in t, f = t.operamini && {}.toString.call(t.operamini) === "[object OperaMini]", l = t.blackberry && !i("-webkit-transform"), c;
        e.extend(e.mobile, {
            browser: {}
        }),
        e.mobile.browser.oldIE = function() {
            var e = 3
              , t = n.createElement("div")
              , r = t.all || [];
            do
                t.innerHTML = "<!--[if gt IE " + ++e + "]><br><![endif]-->";
            while (r[0]);
            return e > 4 ? e : !e
        }(),
        e.extend(e.support, {
            pushState: "pushState"in history && "replaceState"in history && !(t.navigator.userAgent.indexOf("Firefox") >= 0 && t.top !== t) && t.navigator.userAgent.search(/CriOS/) === -1,
            mediaquery: e.mobile.media("only all"),
            cssPseudoElement: !!i("content"),
            touchOverflow: !!i("overflowScrolling"),
            cssTransform3d: p(),
            boxShadow: !!i("boxShadow") && !l,
            fixedPosition: g(),
            scrollTop: ("pageXOffset"in t || "scrollTop"in n.documentElement || "scrollTop"in s[0]) && !a && !f,
            dynamicBaseTag: d(),
            cssPointerEvents: v(),
            boundingRect: m(),
            inlineSVG: h
        }),
        s.remove(),
        c = function() {
            var e = t.navigator.userAgent;
            return e.indexOf("Nokia") > -1 && (e.indexOf("Symbian/3") > -1 || e.indexOf("Series60/5") > -1) && e.indexOf("AppleWebKit") > -1 && e.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)
        }(),
        e.mobile.gradeA = function() {
            return (e.support.mediaquery && e.support.cssPseudoElement || e.mobile.browser.oldIE && e.mobile.browser.oldIE >= 8) && (e.support.boundingRect || e.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/) !== null)
        }
        ,
        e.mobile.ajaxBlacklist = t.blackberry && !t.WebKitPoint || f || c,
        c && e(function() {
            e("head link[rel='stylesheet']").attr("rel", "alternate stylesheet").attr("rel", "stylesheet")
        }),
        e.support.boxShadow || e("html").addClass("ui-noboxshadow")
    }(e),
    function(e, t) {
        var n = e.mobile.window, r, i = function() {};
        e.event.special.beforenavigate = {
            setup: function() {
                n.on("navigate", i)
            },
            teardown: function() {
                n.off("navigate", i)
            }
        },
        e.event.special.navigate = r = {
            bound: !1,
            pushStateEnabled: !0,
            originalEventName: t,
            isPushStateEnabled: function() {
                return e.support.pushState && e.mobile.pushStateEnabled === !0 && this.isHashChangeEnabled()
            },
            isHashChangeEnabled: function() {
                return e.mobile.hashListeningEnabled === !0
            },
            popstate: function(t) {
                var r = new e.Event("navigate")
                  , i = new e.Event("beforenavigate")
                  , s = t.originalEvent.state || {};
                i.originalEvent = t,
                n.trigger(i);
                if (i.isDefaultPrevented())
                    return;
                t.historyState && e.extend(s, t.historyState),
                r.originalEvent = t,
                setTimeout(function() {
                    n.trigger(r, {
                        state: s
                    })
                }, 0)
            },
            hashchange: function(t) {
                var r = new e.Event("navigate")
                  , i = new e.Event("beforenavigate");
                i.originalEvent = t,
                n.trigger(i);
                if (i.isDefaultPrevented())
                    return;
                r.originalEvent = t,
                n.trigger(r, {
                    state: t.hashchangeState || {}
                })
            },
            setup: function() {
                if (r.bound)
                    return;
                r.bound = !0,
                r.isPushStateEnabled() ? (r.originalEventName = "popstate",
                n.bind("popstate.navigate", r.popstate)) : r.isHashChangeEnabled() && (r.originalEventName = "hashchange",
                n.bind("hashchange.navigate", r.hashchange))
            }
        }
    }(e),
    function(e) {
        e.event.special.throttledresize = {
            setup: function() {
                e(this).bind("resize", n)
            },
            teardown: function() {
                e(this).unbind("resize", n)
            }
        };
        var t = 250, n = function() {
            s = (new Date).getTime(),
            o = s - r,
            o >= t ? (r = s,
            e(this).trigger("throttledresize")) : (i && clearTimeout(i),
            i = setTimeout(n, t - o))
        }, r = 0, i, s, o
    }(e),
    function(e, t) {
        function p() {
            var e = s();
            e !== o && (o = e,
            r.trigger(i))
        }
        var r = e(t), i = "orientationchange", s, o, u, a, f = {
            0: !0,
            180: !0
        }, l, c, h;
        if (e.support.orientation) {
            l = t.innerWidth || r.width(),
            c = t.innerHeight || r.height(),
            h = 50,
            u = l > c && l - c > h,
            a = f[t.orientation];
            if (u && a || !u && !a)
                f = {
                    "-90": !0,
                    90: !0
                }
        }
        e.event.special.orientationchange = e.extend({}, e.event.special.orientationchange, {
            setup: function() {
                if (e.support.orientation && !e.event.special.orientationchange.disabled)
                    return !1;
                o = s(),
                r.bind("throttledresize", p)
            },
            teardown: function() {
                if (e.support.orientation && !e.event.special.orientationchange.disabled)
                    return !1;
                r.unbind("throttledresize", p)
            },
            add: function(e) {
                var t = e.handler;
                e.handler = function(e) {
                    return e.orientation = s(),
                    t.apply(this, arguments)
                }
            }
        }),
        e.event.special.orientationchange.orientation = s = function() {
            var r = !0
              , i = n.documentElement;
            return e.support.orientation ? r = f[t.orientation] : r = i && i.clientWidth / i.clientHeight < 1.1,
            r ? "portrait" : "landscape"
        }
        ,
        e.fn[i] = function(e) {
            return e ? this.bind(i, e) : this.trigger(i)
        }
        ,
        e.attrFn && (e.attrFn[i] = !0)
    }(e, this),
    function(e, t, n, r) {
        function T(e) {
            while (e && typeof e.originalEvent != "undefined")
                e = e.originalEvent;
            return e
        }
        function N(t, n) {
            var i = t.type, s, o, a, l, c, h, p, d, v;
            t = e.Event(t),
            t.type = n,
            s = t.originalEvent,
            o = e.event.props,
            i.search(/^(mouse|click)/) > -1 && (o = f);
            if (s)
                for (p = o.length,
                l; p; )
                    l = o[--p],
                    t[l] = s[l];
            i.search(/mouse(down|up)|click/) > -1 && !t.which && (t.which = 1);
            if (i.search(/^touch/) !== -1) {
                a = T(s),
                i = a.touches,
                c = a.changedTouches,
                h = i && i.length ? i[0] : c && c.length ? c[0] : r;
                if (h)
                    for (d = 0,
                    v = u.length; d < v; d++)
                        l = u[d],
                        t[l] = h[l]
            }
            return t
        }
        function C(t) {
            var n = {}, r, s;
            while (t) {
                r = e.data(t, i);
                for (s in r)
                    r[s] && (n[s] = n.hasVirtualBinding = !0);
                t = t.parentNode
            }
            return n
        }
        function k(t, n) {
            var r;
            while (t) {
                r = e.data(t, i);
                if (r && (!n || r[n]))
                    return t;
                t = t.parentNode
            }
            return null
        }
        function L() {
            g = !1
        }
        function A() {
            g = !0
        }
        function O() {
            E = 0,
            v.length = 0,
            m = !1,
            A()
        }
        function M() {
            L()
        }
        function _() {
            D(),
            c = setTimeout(function() {
                c = 0,
                O()
            }, e.vmouse.resetTimerDuration)
        }
        function D() {
            c && (clearTimeout(c),
            c = 0)
        }
        function P(t, n, r) {
            var i;
            if (r && r[t] || !r && k(n.target, t))
                i = N(n, t),
                e(n.target).trigger(i);
            return i
        }
        function H(t) {
            var n = e.data(t.target, s), r;
            !m && (!E || E !== n) && (r = P("v" + t.type, t),
            r && (r.isDefaultPrevented() && t.preventDefault(),
            r.isPropagationStopped() && t.stopPropagation(),
            r.isImmediatePropagationStopped() && t.stopImmediatePropagation()))
        }
        function B(t) {
            var n = T(t).touches, r, i, o;
            n && n.length === 1 && (r = t.target,
            i = C(r),
            i.hasVirtualBinding && (E = w++,
            e.data(r, s, E),
            D(),
            M(),
            d = !1,
            o = T(t).touches[0],
            h = o.pageX,
            p = o.pageY,
            P("vmouseover", t, i),
            P("vmousedown", t, i)))
        }
        function j(e) {
            if (g)
                return;
            d || P("vmousecancel", e, C(e.target)),
            d = !0,
            _()
        }
        function F(t) {
            if (g)
                return;
            var n = T(t).touches[0]
              , r = d
              , i = e.vmouse.moveDistanceThreshold
              , s = C(t.target);
            d = d || Math.abs(n.pageX - h) > i || Math.abs(n.pageY - p) > i,
            d && !r && P("vmousecancel", t, s),
            P("vmousemove", t, s),
            _()
        }
        function I(e) {
            if (g)
                return;
            A();
            var t = C(e.target), n, r;
            P("vmouseup", e, t),
            d || (n = P("vclick", e, t),
            n && n.isDefaultPrevented() && (r = T(e).changedTouches[0],
            v.push({
                touchID: E,
                x: r.clientX,
                y: r.clientY
            }),
            m = !0)),
            P("vmouseout", e, t),
            d = !1,
            _()
        }
        function q(t) {
            var n = e.data(t, i), r;
            if (n)
                for (r in n)
                    if (n[r])
                        return !0;
            return !1
        }
        function R() {}
        function U(t) {
            var n = t.substr(1);
            return {
                setup: function() {
                    q(this) || e.data(this, i, {});
                    var r = e.data(this, i);
                    r[t] = !0,
                    l[t] = (l[t] || 0) + 1,
                    l[t] === 1 && b.bind(n, H),
                    e(this).bind(n, R),
                    y && (l.touchstart = (l.touchstart || 0) + 1,
                    l.touchstart === 1 && b.bind("touchstart", B).bind("touchend", I).bind("touchmove", F).bind("scroll", j))
                },
                teardown: function() {
                    --l[t],
                    l[t] || b.unbind(n, H),
                    y && (--l.touchstart,
                    l.touchstart || b.unbind("touchstart", B).unbind("touchmove", F).unbind("touchend", I).unbind("scroll", j));
                    var r = e(this)
                      , s = e.data(this, i);
                    s && (s[t] = !1),
                    r.unbind(n, R),
                    q(this) || r.removeData(i)
                }
            }
        }
        var i = "virtualMouseBindings", s = "virtualTouchID", o = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "), u = "clientX clientY pageX pageY screenX screenY".split(" "), a = e.event.mouseHooks ? e.event.mouseHooks.props : [], f = e.event.props.concat(a), l = {}, c = 0, h = 0, p = 0, d = !1, v = [], m = !1, g = !1, y = "addEventListener"in n, b = e(n), w = 1, E = 0, S, x;
        e.vmouse = {
            moveDistanceThreshold: 10,
            clickDistanceThreshold: 10,
            resetTimerDuration: 1500
        };
        for (x = 0; x < o.length; x++)
            e.event.special[o[x]] = U(o[x]);
        y && n.addEventListener("click", function(t) {
            var n = v.length, r = t.target, i, o, u, a, f, l;
            if (n) {
                i = t.clientX,
                o = t.clientY,
                S = e.vmouse.clickDistanceThreshold,
                u = r;
                while (u) {
                    for (a = 0; a < n; a++) {
                        f = v[a],
                        l = 0;
                        if (u === r && Math.abs(f.x - i) < S && Math.abs(f.y - o) < S || e.data(u, s) === f.touchID) {
                            t.preventDefault(),
                            t.stopPropagation();
                            return
                        }
                    }
                    u = u.parentNode
                }
            }
        }, !0)
    }(e, t, n),
    function(e, t, r) {
        function l(t, n, i, s) {
            var o = i.type;
            i.type = n,
            s ? e.event.trigger(i, r, t) : e.event.dispatch.call(t, i),
            i.type = o
        }
        var i = e(n)
          , s = e.mobile.support.touch
          , o = "touchmove scroll"
          , u = s ? "touchstart" : "mousedown"
          , a = s ? "touchend" : "mouseup"
          , f = s ? "touchmove" : "mousemove";
        e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "), function(t, n) {
            e.fn[n] = function(e) {
                return e ? this.bind(n, e) : this.trigger(n)
            }
            ,
            e.attrFn && (e.attrFn[n] = !0)
        }),
        e.event.special.scrollstart = {
            enabled: !0,
            setup: function() {
                function s(e, n) {
                    r = n,
                    l(t, r ? "scrollstart" : "scrollstop", e)
                }
                var t = this, n = e(t), r, i;
                n.bind(o, function(t) {
                    if (!e.event.special.scrollstart.enabled)
                        return;
                    r || s(t, !0),
                    clearTimeout(i),
                    i = setTimeout(function() {
                        s(t, !1)
                    }, 50)
                })
            },
            teardown: function() {
                e(this).unbind(o)
            }
        },
        e.event.special.tap = {
            tapholdThreshold: 750,
            emitTapOnTaphold: !0,
            setup: function() {
                var t = this
                  , n = e(t)
                  , r = !1;
                n.bind("vmousedown", function(s) {
                    function a() {
                        clearTimeout(u)
                    }
                    function f() {
                        a(),
                        n.unbind("vclick", c).unbind("vmouseup", a),
                        i.unbind("vmousecancel", f)
                    }
                    function c(e) {
                        f(),
                        !r && o === e.target ? l(t, "tap", e) : r && e.preventDefault()
                    }
                    r = !1;
                    if (s.which && s.which !== 1)
                        return !1;
                    var o = s.target, u;
                    n.bind("vmouseup", a).bind("vclick", c),
                    i.bind("vmousecancel", f),
                    u = setTimeout(function() {
                        e.event.special.tap.emitTapOnTaphold || (r = !0),
                        l(t, "taphold", e.Event("taphold", {
                            target: o
                        }))
                    }, e.event.special.tap.tapholdThreshold)
                })
            },
            teardown: function() {
                e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),
                i.unbind("vmousecancel")
            }
        },
        e.event.special.swipe = {
            scrollSupressionThreshold: 30,
            durationThreshold: 1e3,
            horizontalDistanceThreshold: 30,
            verticalDistanceThreshold: 30,
            getLocation: function(e) {
                var n = t.pageXOffset
                  , r = t.pageYOffset
                  , i = e.clientX
                  , s = e.clientY;
                if (e.pageY === 0 && Math.floor(s) > Math.floor(e.pageY) || e.pageX === 0 && Math.floor(i) > Math.floor(e.pageX))
                    i -= n,
                    s -= r;
                else if (s < e.pageY - r || i < e.pageX - n)
                    i = e.pageX - n,
                    s = e.pageY - r;
                return {
                    x: i,
                    y: s
                }
            },
            start: function(t) {
                var n = t.originalEvent.touches ? t.originalEvent.touches[0] : t
                  , r = e.event.special.swipe.getLocation(n);
                return {
                    time: (new Date).getTime(),
                    coords: [r.x, r.y],
                    origin: e(t.target)
                }
            },
            stop: function(t) {
                var n = t.originalEvent.touches ? t.originalEvent.touches[0] : t
                  , r = e.event.special.swipe.getLocation(n);
                return {
                    time: (new Date).getTime(),
                    coords: [r.x, r.y]
                }
            },
            handleSwipe: function(t, n, r, i) {
                if (n.time - t.time < e.event.special.swipe.durationThreshold && Math.abs(t.coords[0] - n.coords[0]) > e.event.special.swipe.horizontalDistanceThreshold && Math.abs(t.coords[1] - n.coords[1]) < e.event.special.swipe.verticalDistanceThreshold) {
                    var s = t.coords[0] > n.coords[0] ? "swipeleft" : "swiperight";
                    return l(r, "swipe", e.Event("swipe", {
                        target: i,
                        swipestart: t,
                        swipestop: n
                    }), !0),
                    l(r, s, e.Event(s, {
                        target: i,
                        swipestart: t,
                        swipestop: n
                    }), !0),
                    !0
                }
                return !1
            },
            eventInProgress: !1,
            setup: function() {
                var t, n = this, r = e(n), s = {};
                t = e.data(this, "mobile-events"),
                t || (t = {
                    length: 0
                },
                e.data(this, "mobile-events", t)),
                t.length++,
                t.swipe = s,
                s.start = function(t) {
                    if (e.event.special.swipe.eventInProgress)
                        return;
                    e.event.special.swipe.eventInProgress = !0;
                    var r, o = e.event.special.swipe.start(t), u = t.target, l = !1;
                    s.move = function(t) {
                        if (!o)
                            return;
                        r = e.event.special.swipe.stop(t),
                        l || (l = e.event.special.swipe.handleSwipe(o, r, n, u),
                        l && (e.event.special.swipe.eventInProgress = !1)),
                        Math.abs(o.coords[0] - r.coords[0]) > e.event.special.swipe.scrollSupressionThreshold && t.preventDefault()
                    }
                    ,
                    s.stop = function() {
                        l = !0,
                        e.event.special.swipe.eventInProgress = !1,
                        i.off(f, s.move),
                        s.move = null
                    }
                    ,
                    i.on(f, s.move).one(a, s.stop)
                }
                ,
                r.on(u, s.start)
            },
            teardown: function() {
                var t, n;
                t = e.data(this, "mobile-events"),
                t && (n = t.swipe,
                delete t.swipe,
                t.length--,
                t.length === 0 && e.removeData(this, "mobile-events")),
                n && (n.start && e(this).off(u, n.start),
                n.move && i.off(f, n.move),
                n.stop && i.off(a, n.stop))
            }
        },
        e.each({
            scrollstop: "scrollstart",
            taphold: "tap",
            swipeleft: "swipe.left",
            swiperight: "swipe.right"
        }, function(t, n) {
            e.event.special[t] = {
                setup: function() {
                    e(this).bind(n, e.noop)
                },
                teardown: function() {
                    e(this).unbind(n)
                }
            }
        })
    }(e, this)
});
//detect event
var touchstart = $.support.touch ? "touchstart" : "mousedown";
var touchend = $.support.touch ? "touchend" : "mouseup";
var tap = $.support.touch ? "tap" : "click";
var taphold = $.support.touch ? "taphold" : "false";
var swipe = $.support.touch ? "swipe" : "false";
var swipeleft = $.support.touch ? "swipeleft" : "false";
var swiperight = $.support.touch ? "swiperight" : "false";
var mouseover = $.support.touch ? "vmouseover" : "mouseover";
var mouseout = $.support.touch ? "vmouseout" : "mouseout";
var mousedown = $.support.touch ? "vmousedown" : "mousedown";
var mousemove = $.support.touch ? "vmousemove" : "mousemove";
var mouseup = $.support.touch ? "vmouseup" : "mouseup";
var click = $.support.touch ? "vclick" : "click";
/*
var touchstart = $.support.touch?"touchstart":"mousedown";
var touchmove = $.support.touch?"touchmove":"false";
var click = $.support.touch?"touchend":"click";
*/
if (!window.console)
    window.console = {};
if (!window.console.log)
    window.console.log = function() {}
    ;
//$("#kids img").load(function(){}).error(function(){var imgSrc = $(this).attr('src');$(this).attr('src',imgSrc);});
$.ajaxSetup({
    cache: true
});
//Excanvas
if (!document.createElement('canvas').getContext) {
    (function() {
        var m = Math;
        var mr = m.round;
        var ms = m.sin;
        var mc = m.cos;
        var abs = m.abs;
        var sqrt = m.sqrt;
        var Z = 10;
        var Z2 = Z / 2;
        function getContext() {
            return this.context_ || (this.context_ = new CanvasRenderingContext2D_(this));
        }
        var slice = Array.prototype.slice;
        function bind(f, obj, var_args) {
            var a = slice.call(arguments, 2);
            return function() {
                return f.apply(obj, a.concat(slice.call(arguments)));
            }
            ;
        }
        var G_vmlCanvasManager_ = {
            init: function(opt_doc) {
                if (/MSIE/.test(navigator.userAgent) && !window.opera) {
                    var doc = opt_doc || document;
                    doc.createElement('canvas');
                    doc.attachEvent('onreadystatechange', bind(this.init_, this, doc));
                }
            },
            init_: function(doc) {
                if (!doc.namespaces['g_vml_']) {
                    doc.namespaces.add('g_vml_', 'urn:schemas-microsoft-com:vml', '#default#VML');
                }
                if (!doc.namespaces['g_o_']) {
                    doc.namespaces.add('g_o_', 'urn:schemas-microsoft-com:office:office', '#default#VML');
                }
                if (!doc.styleSheets['ex_canvas_']) {
                    var ss = doc.createStyleSheet();
                    ss.owningElement.id = 'ex_canvas_';
                    ss.cssText = 'canvas{display:inline-block;overflow:hidden;' + 'text-align:left;width:300px;height:150px}' + 'g_vml_\\:*{behavior:url(#default#VML)}' + 'g_o_\\:*{behavior:url(#default#VML)}';
                }
                var els = doc.getElementsByTagName('canvas');
                for (var i = 0; i < els.length; i++) {
                    this.initElement(els[i]);
                }
            },
            initElement: function(el) {
                if (!el.getContext) {
                    el.getContext = getContext;
                    el.innerHTML = '';
                    el.attachEvent('onpropertychange', onPropertyChange);
                    el.attachEvent('onresize', onResize);
                    var attrs = el.attributes;
                    if (attrs.width && attrs.width.specified) {
                        el.style.width = attrs.width.nodeValue + 'px';
                    } else {
                        el.width = el.clientWidth;
                    }
                    if (attrs.height && attrs.height.specified) {
                        el.style.height = attrs.height.nodeValue + 'px';
                    } else {
                        el.height = el.clientHeight;
                    }
                }
                return el;
            }
        };
        function onPropertyChange(e) {
            var el = e.srcElement;
            switch (e.propertyName) {
            case 'width':
                el.style.width = el.attributes.width.nodeValue + 'px';
                el.getContext().clearRect();
                break;
            case 'height':
                el.style.height = el.attributes.height.nodeValue + 'px';
                el.getContext().clearRect();
                break;
            }
        }
        function onResize(e) {
            var el = e.srcElement;
            if (el.firstChild) {
                el.firstChild.style.width = el.clientWidth + 'px';
                el.firstChild.style.height = el.clientHeight + 'px';
            }
        }
        G_vmlCanvasManager_.init();
        var dec2hex = [];
        for (var i = 0; i < 16; i++) {
            for (var j = 0; j < 16; j++) {
                dec2hex[i * 16 + j] = i.toString(16) + j.toString(16);
            }
        }
        function createMatrixIdentity() {
            return [[1, 0, 0], [0, 1, 0], [0, 0, 1]];
        }
        function matrixMultiply(m1, m2) {
            var result = createMatrixIdentity();
            for (var x = 0; x < 3; x++) {
                for (var y = 0; y < 3; y++) {
                    var sum = 0;
                    for (var z = 0; z < 3; z++) {
                        sum += m1[x][z] * m2[z][y];
                    }
                    result[x][y] = sum;
                }
            }
            return result;
        }
        function copyState(o1, o2) {
            o2.fillStyle = o1.fillStyle;
            o2.lineCap = o1.lineCap;
            o2.lineJoin = o1.lineJoin;
            o2.lineWidth = o1.lineWidth;
            o2.miterLimit = o1.miterLimit;
            o2.shadowBlur = o1.shadowBlur;
            o2.shadowColor = o1.shadowColor;
            o2.shadowOffsetX = o1.shadowOffsetX;
            o2.shadowOffsetY = o1.shadowOffsetY;
            o2.strokeStyle = o1.strokeStyle;
            o2.globalAlpha = o1.globalAlpha;
            o2.arcScaleX_ = o1.arcScaleX_;
            o2.arcScaleY_ = o1.arcScaleY_;
            o2.lineScale_ = o1.lineScale_;
        }
        function processStyle(styleString) {
            var str, alpha = 1;
            styleString = String(styleString);
            if (styleString.substring(0, 3) == 'rgb') {
                var start = styleString.indexOf('(', 3);
                var end = styleString.indexOf(')', start + 1);
                var guts = styleString.substring(start + 1, end).split(',');
                str = '#';
                for (var i = 0; i < 3; i++) {
                    str += dec2hex[Number(guts[i])];
                }
                if (guts.length == 4 && styleString.substr(3, 1) == 'a') {
                    alpha = guts[3];
                }
            } else {
                str = styleString;
            }
            return {
                color: str,
                alpha: alpha
            };
        }
        function processLineCap(lineCap) {
            switch (lineCap) {
            case 'butt':
                return 'flat';
            case 'round':
                return 'round';
            case 'square':
            default:
                return 'square';
            }
        }
        function CanvasRenderingContext2D_(surfaceElement) {
            this.m_ = createMatrixIdentity();
            this.mStack_ = [];
            this.aStack_ = [];
            this.currentPath_ = [];
            this.strokeStyle = '#000';
            this.fillStyle = '#000';
            this.lineWidth = 1;
            this.lineJoin = 'miter';
            this.lineCap = 'butt';
            this.miterLimit = Z * 1;
            this.globalAlpha = 1;
            this.canvas = surfaceElement;
            var el = surfaceElement.ownerDocument.createElement('div');
            el.style.width = surfaceElement.clientWidth + 'px';
            el.style.height = surfaceElement.clientHeight + 'px';
            el.style.overflow = 'hidden';
            el.style.position = 'absolute';
            surfaceElement.appendChild(el);
            this.element_ = el;
            this.arcScaleX_ = 1;
            this.arcScaleY_ = 1;
            this.lineScale_ = 1;
        }
        var contextPrototype = CanvasRenderingContext2D_.prototype;
        contextPrototype.clearRect = function() {
            this.element_.innerHTML = '';
        }
        ;
        contextPrototype.beginPath = function() {
            this.currentPath_ = [];
        }
        ;
        contextPrototype.moveTo = function(aX, aY) {
            var p = this.getCoords_(aX, aY);
            this.currentPath_.push({
                type: 'moveTo',
                x: p.x,
                y: p.y
            });
            this.currentX_ = p.x;
            this.currentY_ = p.y;
        }
        ;
        contextPrototype.lineTo = function(aX, aY) {
            var p = this.getCoords_(aX, aY);
            this.currentPath_.push({
                type: 'lineTo',
                x: p.x,
                y: p.y
            });
            this.currentX_ = p.x;
            this.currentY_ = p.y;
        }
        ;
        contextPrototype.bezierCurveTo = function(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {
            var p = this.getCoords_(aX, aY);
            var cp1 = this.getCoords_(aCP1x, aCP1y);
            var cp2 = this.getCoords_(aCP2x, aCP2y);
            bezierCurveTo(this, cp1, cp2, p);
        }
        ;
        function bezierCurveTo(self, cp1, cp2, p) {
            self.currentPath_.push({
                type: 'bezierCurveTo',
                cp1x: cp1.x,
                cp1y: cp1.y,
                cp2x: cp2.x,
                cp2y: cp2.y,
                x: p.x,
                y: p.y
            });
            self.currentX_ = p.x;
            self.currentY_ = p.y;
        }
        contextPrototype.quadraticCurveTo = function(aCPx, aCPy, aX, aY) {
            var cp = this.getCoords_(aCPx, aCPy);
            var p = this.getCoords_(aX, aY);
            var cp1 = {
                x: this.currentX_ + 2.0 / 3.0 * (cp.x - this.currentX_),
                y: this.currentY_ + 2.0 / 3.0 * (cp.y - this.currentY_)
            };
            var cp2 = {
                x: cp1.x + (p.x - this.currentX_) / 3.0,
                y: cp1.y + (p.y - this.currentY_) / 3.0
            };
            bezierCurveTo(this, cp1, cp2, p);
        }
        ;
        contextPrototype.arc = function(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {
            aRadius *= Z;
            var arcType = aClockwise ? 'at' : 'wa';
            var xStart = aX + mc(aStartAngle) * aRadius - Z2;
            var yStart = aY + ms(aStartAngle) * aRadius - Z2;
            var xEnd = aX + mc(aEndAngle) * aRadius - Z2;
            var yEnd = aY + ms(aEndAngle) * aRadius - Z2;
            if (xStart == xEnd && !aClockwise) {
                xStart += 0.125;
            }
            var p = this.getCoords_(aX, aY);
            var pStart = this.getCoords_(xStart, yStart);
            var pEnd = this.getCoords_(xEnd, yEnd);
            this.currentPath_.push({
                type: arcType,
                x: p.x,
                y: p.y,
                radius: aRadius,
                xStart: pStart.x,
                yStart: pStart.y,
                xEnd: pEnd.x,
                yEnd: pEnd.y
            });
        }
        ;
        contextPrototype.rect = function(aX, aY, aWidth, aHeight) {
            this.moveTo(aX, aY);
            this.lineTo(aX + aWidth, aY);
            this.lineTo(aX + aWidth, aY + aHeight);
            this.lineTo(aX, aY + aHeight);
            this.closePath();
        }
        ;
        contextPrototype.strokeRect = function(aX, aY, aWidth, aHeight) {
            var oldPath = this.currentPath_;
            this.beginPath();
            this.moveTo(aX, aY);
            this.lineTo(aX + aWidth, aY);
            this.lineTo(aX + aWidth, aY + aHeight);
            this.lineTo(aX, aY + aHeight);
            this.closePath();
            this.stroke();
            this.currentPath_ = oldPath;
        }
        ;
        contextPrototype.fillRect = function(aX, aY, aWidth, aHeight) {
            var oldPath = this.currentPath_;
            this.beginPath();
            this.moveTo(aX, aY);
            this.lineTo(aX + aWidth, aY);
            this.lineTo(aX + aWidth, aY + aHeight);
            this.lineTo(aX, aY + aHeight);
            this.closePath();
            this.fill();
            this.currentPath_ = oldPath;
        }
        ;
        contextPrototype.createLinearGradient = function(aX0, aY0, aX1, aY1) {
            var gradient = new CanvasGradient_('gradient');
            gradient.x0_ = aX0;
            gradient.y0_ = aY0;
            gradient.x1_ = aX1;
            gradient.y1_ = aY1;
            return gradient;
        }
        ;
        contextPrototype.createRadialGradient = function(aX0, aY0, aR0, aX1, aY1, aR1) {
            var gradient = new CanvasGradient_('gradientradial');
            gradient.x0_ = aX0;
            gradient.y0_ = aY0;
            gradient.r0_ = aR0;
            gradient.x1_ = aX1;
            gradient.y1_ = aY1;
            gradient.r1_ = aR1;
            return gradient;
        }
        ;
        contextPrototype.drawImage = function(image, var_args) {
            var dx, dy, dw, dh, sx, sy, sw, sh;
            var oldRuntimeWidth = image.runtimeStyle.width;
            var oldRuntimeHeight = image.runtimeStyle.height;
            image.runtimeStyle.width = 'auto';
            image.runtimeStyle.height = 'auto';
            var w = image.width;
            var h = image.height;
            image.runtimeStyle.width = oldRuntimeWidth;
            image.runtimeStyle.height = oldRuntimeHeight;
            if (arguments.length == 3) {
                dx = arguments[1];
                dy = arguments[2];
                sx = sy = 0;
                sw = dw = w;
                sh = dh = h;
            } else if (arguments.length == 5) {
                dx = arguments[1];
                dy = arguments[2];
                dw = arguments[3];
                dh = arguments[4];
                sx = sy = 0;
                sw = w;
                sh = h;
            } else if (arguments.length == 9) {
                sx = arguments[1];
                sy = arguments[2];
                sw = arguments[3];
                sh = arguments[4];
                dx = arguments[5];
                dy = arguments[6];
                dw = arguments[7];
                dh = arguments[8];
            } else {
                throw Error('Invalid number of arguments');
            }
            var d = this.getCoords_(dx, dy);
            var w2 = sw / 2;
            var h2 = sh / 2;
            var vmlStr = [];
            var W = 10;
            var H = 10;
            vmlStr.push(' <g_vml_:group', ' coordsize="', Z * W, ',', Z * H, '"', ' coordorigin="0,0"', ' style="width:', W, 'px;height:', H, 'px;position:absolute;');
            if (this.m_[0][0] != 1 || this.m_[0][1]) {
                var filter = [];
                filter.push('M11=', this.m_[0][0], ',', 'M12=', this.m_[1][0], ',', 'M21=', this.m_[0][1], ',', 'M22=', this.m_[1][1], ',', 'Dx=', mr(d.x / Z), ',', 'Dy=', mr(d.y / Z), '');
                var max = d;
                var c2 = this.getCoords_(dx + dw, dy);
                var c3 = this.getCoords_(dx, dy + dh);
                var c4 = this.getCoords_(dx + dw, dy + dh);
                max.x = m.max(max.x, c2.x, c3.x, c4.x);
                max.y = m.max(max.y, c2.y, c3.y, c4.y);
                vmlStr.push('padding:0 ', mr(max.x / Z), 'px ', mr(max.y / Z), 'px 0;filter:progid:DXImageTransform.Microsoft.Matrix(', filter.join(''), ", sizingmethod='clip');")
            } else {
                vmlStr.push('top:', mr(d.y / Z), 'px;left:', mr(d.x / Z), 'px;');
            }
            vmlStr.push(' ">', '<g_vml_:image src="', image.src, '"', ' style="width:', Z * dw, 'px;', ' height:', Z * dh, 'px;"', ' cropleft="', sx / w, '"', ' croptop="', sy / h, '"', ' cropright="', (w - sx - sw) / w, '"', ' cropbottom="', (h - sy - sh) / h, '"', ' />', '</g_vml_:group>');
            this.element_.insertAdjacentHTML('BeforeEnd', vmlStr.join(''));
        }
        ;
        contextPrototype.stroke = function(aFill) {
            var lineStr = [];
            var lineOpen = false;
            var a = processStyle(aFill ? this.fillStyle : this.strokeStyle);
            var color = a.color;
            var opacity = a.alpha * this.globalAlpha;
            var W = 10;
            var H = 10;
            lineStr.push('<g_vml_:shape', ' filled="', !!aFill, '"', ' style="position:absolute;width:', W, 'px;height:', H, 'px;"', ' coordorigin="0 0" coordsize="', Z * W, ' ', Z * H, '"', ' stroked="', !aFill, '"', ' path="');
            var newSeq = false;
            var min = {
                x: null,
                y: null
            };
            var max = {
                x: null,
                y: null
            };
            for (var i = 0; i < this.currentPath_.length; i++) {
                var p = this.currentPath_[i];
                var c;
                switch (p.type) {
                case 'moveTo':
                    c = p;
                    lineStr.push(' m ', mr(p.x), ',', mr(p.y));
                    break;
                case 'lineTo':
                    lineStr.push(' l ', mr(p.x), ',', mr(p.y));
                    break;
                case 'close':
                    lineStr.push(' x ');
                    p = null;
                    break;
                case 'bezierCurveTo':
                    lineStr.push(' c ', mr(p.cp1x), ',', mr(p.cp1y), ',', mr(p.cp2x), ',', mr(p.cp2y), ',', mr(p.x), ',', mr(p.y));
                    break;
                case 'at':
                case 'wa':
                    lineStr.push(' ', p.type, ' ', mr(p.x - this.arcScaleX_ * p.radius), ',', mr(p.y - this.arcScaleY_ * p.radius), ' ', mr(p.x + this.arcScaleX_ * p.radius), ',', mr(p.y + this.arcScaleY_ * p.radius), ' ', mr(p.xStart), ',', mr(p.yStart), ' ', mr(p.xEnd), ',', mr(p.yEnd));
                    break;
                }
                if (p) {
                    if (min.x == null || p.x < min.x) {
                        min.x = p.x;
                    }
                    if (max.x == null || p.x > max.x) {
                        max.x = p.x;
                    }
                    if (min.y == null || p.y < min.y) {
                        min.y = p.y;
                    }
                    if (max.y == null || p.y > max.y) {
                        max.y = p.y;
                    }
                }
            }
            lineStr.push(' ">');
            if (!aFill) {
                var lineWidth = this.lineScale_ * this.lineWidth;
                if (lineWidth < 1) {
                    opacity *= lineWidth;
                }
                lineStr.push('<g_vml_:stroke', ' opacity="', opacity, '"', ' joinstyle="', this.lineJoin, '"', ' miterlimit="', this.miterLimit, '"', ' endcap="', processLineCap(this.lineCap), '"', ' weight="', lineWidth, 'px"', ' color="', color, '" />');
            } else if (typeof this.fillStyle == 'object') {
                var fillStyle = this.fillStyle;
                var angle = 0;
                var focus = {
                    x: 0,
                    y: 0
                };
                var shift = 0;
                var expansion = 1;
                if (fillStyle.type_ == 'gradient') {
                    var x0 = fillStyle.x0_ / this.arcScaleX_;
                    var y0 = fillStyle.y0_ / this.arcScaleY_;
                    var x1 = fillStyle.x1_ / this.arcScaleX_;
                    var y1 = fillStyle.y1_ / this.arcScaleY_;
                    var p0 = this.getCoords_(x0, y0);
                    var p1 = this.getCoords_(x1, y1);
                    var dx = p1.x - p0.x;
                    var dy = p1.y - p0.y;
                    angle = Math.atan2(dx, dy) * 180 / Math.PI;
                    if (angle < 0) {
                        angle += 360;
                    }
                    if (angle < 1e-6) {
                        angle = 0;
                    }
                } else {
                    var p0 = this.getCoords_(fillStyle.x0_, fillStyle.y0_);
                    var width = max.x - min.x;
                    var height = max.y - min.y;
                    focus = {
                        x: (p0.x - min.x) / width,
                        y: (p0.y - min.y) / height
                    };
                    width /= this.arcScaleX_ * Z;
                    height /= this.arcScaleY_ * Z;
                    var dimension = m.max(width, height);
                    shift = 2 * fillStyle.r0_ / dimension;
                    expansion = 2 * fillStyle.r1_ / dimension - shift;
                }
                var stops = fillStyle.colors_;
                stops.sort(function(cs1, cs2) {
                    return cs1.offset - cs2.offset;
                });
                var length = stops.length;
                var color1 = stops[0].color;
                var color2 = stops[length - 1].color;
                var opacity1 = stops[0].alpha * this.globalAlpha;
                var opacity2 = stops[length - 1].alpha * this.globalAlpha;
                var colors = [];
                for (var i = 0; i < length; i++) {
                    var stop = stops[i];
                    colors.push(stop.offset * expansion + shift + ' ' + stop.color);
                }
                lineStr.push('<g_vml_:fill type="', fillStyle.type_, '"', ' method="none" focus="100%"', ' color="', color1, '"', ' color2="', color2, '"', ' colors="', colors.join(','), '"', ' opacity="', opacity2, '"', ' g_o_:opacity2="', opacity1, '"', ' angle="', angle, '"', ' focusposition="', focus.x, ',', focus.y, '" />');
            } else {
                lineStr.push('<g_vml_:fill color="', color, '" opacity="', opacity, '" />');
            }
            lineStr.push('</g_vml_:shape>');
            this.element_.insertAdjacentHTML('beforeEnd', lineStr.join(''));
        }
        ;
        contextPrototype.fill = function() {
            this.stroke(true);
        }
        contextPrototype.closePath = function() {
            this.currentPath_.push({
                type: 'close'
            });
        }
        ;
        contextPrototype.getCoords_ = function(aX, aY) {
            var m = this.m_;
            return {
                x: Z * (aX * m[0][0] + aY * m[1][0] + m[2][0]) - Z2,
                y: Z * (aX * m[0][1] + aY * m[1][1] + m[2][1]) - Z2
            }
        }
        ;
        contextPrototype.save = function() {
            var o = {};
            copyState(this, o);
            this.aStack_.push(o);
            this.mStack_.push(this.m_);
            this.m_ = matrixMultiply(createMatrixIdentity(), this.m_);
        }
        ;
        contextPrototype.restore = function() {
            copyState(this.aStack_.pop(), this);
            this.m_ = this.mStack_.pop();
        }
        ;
        function matrixIsFinite(m) {
            for (var j = 0; j < 3; j++) {
                for (var k = 0; k < 2; k++) {
                    if (!isFinite(m[j][k]) || isNaN(m[j][k])) {
                        return false;
                    }
                }
            }
            return true;
        }
        function setM(ctx, m, updateLineScale) {
            if (!matrixIsFinite(m)) {
                return;
            }
            ctx.m_ = m;
            if (updateLineScale) {
                var det = m[0][0] * m[1][1] - m[0][1] * m[1][0];
                ctx.lineScale_ = sqrt(abs(det));
            }
        }
        contextPrototype.translate = function(aX, aY) {
            var m1 = [[1, 0, 0], [0, 1, 0], [aX, aY, 1]];
            setM(this, matrixMultiply(m1, this.m_), false);
        }
        ;
        contextPrototype.rotate = function(aRot) {
            var c = mc(aRot);
            var s = ms(aRot);
            var m1 = [[c, s, 0], [-s, c, 0], [0, 0, 1]];
            setM(this, matrixMultiply(m1, this.m_), false);
        }
        ;
        contextPrototype.scale = function(aX, aY) {
            this.arcScaleX_ *= aX;
            this.arcScaleY_ *= aY;
            var m1 = [[aX, 0, 0], [0, aY, 0], [0, 0, 1]];
            setM(this, matrixMultiply(m1, this.m_), true);
        }
        ;
        contextPrototype.transform = function(m11, m12, m21, m22, dx, dy) {
            var m1 = [[m11, m12, 0], [m21, m22, 0], [dx, dy, 1]];
            setM(this, matrixMultiply(m1, this.m_), true);
        }
        ;
        contextPrototype.setTransform = function(m11, m12, m21, m22, dx, dy) {
            var m = [[m11, m12, 0], [m21, m22, 0], [dx, dy, 1]];
            setM(this, m, true);
        }
        ;
        contextPrototype.clip = function() {}
        ;
        contextPrototype.arcTo = function() {}
        ;
        contextPrototype.createPattern = function() {
            return new CanvasPattern_;
        }
        ;
        function CanvasGradient_(aType) {
            this.type_ = aType;
            this.x0_ = 0;
            this.y0_ = 0;
            this.r0_ = 0;
            this.x1_ = 0;
            this.y1_ = 0;
            this.r1_ = 0;
            this.colors_ = [];
        }
        CanvasGradient_.prototype.addColorStop = function(aOffset, aColor) {
            aColor = processStyle(aColor);
            this.colors_.push({
                offset: aOffset,
                color: aColor.color,
                alpha: aColor.alpha
            });
        }
        ;
        function CanvasPattern_() {}
        G_vmlCanvasManager = G_vmlCanvasManager_;
        CanvasRenderingContext2D = CanvasRenderingContext2D_;
        CanvasGradient = CanvasGradient_;
        CanvasPattern = CanvasPattern_;
    }
    )();
}
//Jquery rotate
(function($) {
    var supportedCSS, styles = document.getElementsByTagName("head")[0].style, toCheck = "transformProperty WebkitTransform OTransform msTransform MozTransform".split(" ");
    for (var a = 0; a < toCheck.length; a++)
        if (styles[toCheck[a]] !== undefined)
            supportedCSS = toCheck[a];
    var IE = eval('"v"=="\v"');
    jQuery.fn.extend({
        rotate: function(parameters) {
            if (this.length === 0 || typeof parameters == "undefined")
                return;
            if (typeof parameters == "number")
                parameters = {
                    angle: parameters
                };
            var returned = [];
            for (var i = 0, i0 = this.length; i < i0; i++) {
                var element = this.get(i);
                if (!element.Wilq32 || !element.Wilq32.PhotoEffect) {
                    var paramClone = $.extend(true, {}, parameters);
                    var newRotObject = new Wilq32.PhotoEffect(element,paramClone)._rootObj;
                    returned.push($(newRotObject));
                } else {
                    element.Wilq32.PhotoEffect._handleRotation(parameters);
                }
            }
            return returned;
        },
        getRotateAngle: function() {
            var ret = [];
            for (var i = 0, i0 = this.length; i < i0; i++) {
                var element = this.get(i);
                if (element.Wilq32 && element.Wilq32.PhotoEffect) {
                    ret[i] = element.Wilq32.PhotoEffect._angle;
                }
            }
            return ret;
        },
        stopRotate: function() {
            for (var i = 0, i0 = this.length; i < i0; i++) {
                var element = this.get(i);
                if (element.Wilq32 && element.Wilq32.PhotoEffect) {
                    clearTimeout(element.Wilq32.PhotoEffect._timer);
                }
            }
        }
    });
    Wilq32 = window.Wilq32 || {};
    Wilq32.PhotoEffect = (function() {
        if (supportedCSS) {
            return function(img, parameters) {
                img.Wilq32 = {
                    PhotoEffect: this
                };
                this._img = this._rootObj = this._eventObj = img;
                this._handleRotation(parameters);
            }
        } else {
            return function(img, parameters) {
                this._img = img;
                this._rootObj = document.createElement('span');
                this._rootObj.style.display = "inline-block";
                this._rootObj.Wilq32 = {
                    PhotoEffect: this
                };
                img.parentNode.insertBefore(this._rootObj, img);
                if (img.complete) {
                    this._Loader(parameters);
                } else {
                    var self = this;
                    jQuery(this._img).bind("load", function() {
                        self._Loader(parameters);
                    });
                }
            }
        }
    }
    )();
    Wilq32.PhotoEffect.prototype = {
        _setupParameters: function(parameters) {
            this._parameters = this._parameters || {};
            if (typeof this._angle !== "number")
                this._angle = 0;
            if (typeof parameters.angle === "number")
                this._angle = parameters.angle;
            this._parameters.animateTo = (typeof parameters.animateTo === "number") ? (parameters.animateTo) : (this._angle);
            this._parameters.step = parameters.step || this._parameters.step || null;
            this._parameters.easing = parameters.easing || this._parameters.easing || function(x, t, b, c, d) {
                return -c * ((t = t / d - 1) * t * t * t - 1) + b;
            }
            this._parameters.duration = parameters.duration || this._parameters.duration || 1000;
            this._parameters.callback = parameters.callback || this._parameters.callback || function() {}
            ;
            if (parameters.bind && parameters.bind != this._parameters.bind)
                this._BindEvents(parameters.bind);
        },
        _handleRotation: function(parameters) {
            this._setupParameters(parameters);
            if (this._angle == this._parameters.animateTo) {
                this._rotate(this._angle);
            } else {
                this._animateStart();
            }
        },
        _BindEvents: function(events) {
            if (events && this._eventObj) {
                if (this._parameters.bind) {
                    var oldEvents = this._parameters.bind;
                    for (var a in oldEvents)
                        if (oldEvents.hasOwnProperty(a))
                            jQuery(this._eventObj).unbind(a, oldEvents[a]);
                }
                this._parameters.bind = events;
                for (var a in events)
                    if (events.hasOwnProperty(a))
                        jQuery(this._eventObj).bind(a, events[a]);
            }
        },
        _Loader: (function() {
            if (IE)
                return function(parameters) {
                    var width = this._img.width;
                    var height = this._img.height;
                    this._img.parentNode.removeChild(this._img);
                    this._vimage = this.createVMLNode('image');
                    this._vimage.src = this._img.src;
                    this._vimage.style.height = height + "px";
                    this._vimage.style.width = width + "px";
                    this._vimage.style.position = "absolute";
                    this._vimage.style.top = "0px";
                    this._vimage.style.left = "0px";
                    this._container = this.createVMLNode('group');
                    this._container.style.width = width;
                    this._container.style.height = height;
                    this._container.style.position = "absolute";
                    this._container.setAttribute('coordsize', width - 1 + ',' + (height - 1));
                    this._container.appendChild(this._vimage);
                    this._rootObj.appendChild(this._container);
                    this._rootObj.style.position = "relative";
                    this._rootObj.style.width = width + "px";
                    this._rootObj.style.height = height + "px";
                    this._rootObj.setAttribute('id', this._img.getAttribute('id'));
                    this._rootObj.className = this._img.className;
                    this._eventObj = this._rootObj;
                    this._handleRotation(parameters);
                }
            else
                return function(parameters) {
                    this._rootObj.setAttribute('id', this._img.getAttribute('id'));
                    this._rootObj.className = this._img.className;
                    this._width = this._img.width;
                    this._height = this._img.height;
                    this._widthHalf = this._width / 2;
                    this._heightHalf = this._height / 2;
                    var _widthMax = Math.sqrt((this._height) * (this._height) + (this._width) * (this._width));
                    this._widthAdd = _widthMax - this._width;
                    this._heightAdd = _widthMax - this._height;
                    this._widthAddHalf = this._widthAdd / 2;
                    this._heightAddHalf = this._heightAdd / 2;
                    this._img.parentNode.removeChild(this._img);
                    this._aspectW = ((parseInt(this._img.style.width, 10)) || this._width) / this._img.width;
                    this._aspectH = ((parseInt(this._img.style.height, 10)) || this._height) / this._img.height;
                    this._canvas = document.createElement('canvas');
                    this._canvas.setAttribute('width', this._width);
                    this._canvas.style.position = "relative";
                    this._canvas.style.left = -this._widthAddHalf + "px";
                    this._canvas.style.top = -this._heightAddHalf + "px";
                    this._canvas.Wilq32 = this._rootObj.Wilq32;
                    this._rootObj.appendChild(this._canvas);
                    this._rootObj.style.width = this._width + "px";
                    this._rootObj.style.height = this._height + "px";
                    this._eventObj = this._canvas;
                    this._cnv = this._canvas.getContext('2d');
                    this._handleRotation(parameters);
                }
        }
        )(),
        _animateStart: function() {
            if (this._timer) {
                clearTimeout(this._timer);
            }
            this._animateStartTime = +new Date;
            this._animateStartAngle = this._angle;
            this._animate();
        },
        _animate: function() {
            var actualTime = +new Date;
            var checkEnd = actualTime - this._animateStartTime > this._parameters.duration;
            if (checkEnd && !this._parameters.animatedGif) {
                clearTimeout(this._timer);
            } else {
                if (this._canvas || this._vimage || this._img) {
                    var angle = this._parameters.easing(0, actualTime - this._animateStartTime, this._animateStartAngle, this._parameters.animateTo - this._animateStartAngle, this._parameters.duration);
                    this._rotate((~~(angle * 10)) / 10);
                }
                if (this._parameters.step) {
                    this._parameters.step(this._angle);
                }
                var self = this;
                this._timer = setTimeout(function() {
                    self._animate.call(self);
                }, 10);
            }
            if (this._parameters.callback && checkEnd) {
                this._angle = this._parameters.animateTo;
                this._rotate(this._angle);
                this._parameters.callback.call(this._rootObj);
            }
        },
        _rotate: (function() {
            var rad = Math.PI / 180;
            if (IE)
                return function(angle) {
                    this._angle = angle;
                    this._container.style.rotation = (angle % 360) + "deg";
                }
            else if (supportedCSS)
                return function(angle) {
                    this._angle = angle;
                    this._img.style[supportedCSS] = "rotate(" + (angle % 360) + "deg)";
                }
            else
                return function(angle) {
                    this._angle = angle;
                    angle = (angle % 360) * rad;
                    this._canvas.width = this._width + this._widthAdd;
                    this._canvas.height = this._height + this._heightAdd;
                    this._cnv.translate(this._widthAddHalf, this._heightAddHalf);
                    this._cnv.translate(this._widthHalf, this._heightHalf);
                    this._cnv.rotate(angle);
                    this._cnv.translate(-this._widthHalf, -this._heightHalf);
                    this._cnv.scale(this._aspectW, this._aspectH);
                    this._cnv.drawImage(this._img, 0, 0);
                }
        }
        )()
    }
    if (IE) {
        Wilq32.PhotoEffect.prototype.createVMLNode = (function() {
            document.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
            try {
                !document.namespaces.rvml && document.namespaces.add("rvml", "urn:schemas-microsoft-com:vml");
                return function(tagName) {
                    return document.createElement('<rvml:' + tagName + ' class="rvml">');
                }
                ;
            } catch (e) {
                return function(tagName) {
                    return document.createElement('<' + tagName + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');
                }
                ;
            }
        }
        )();
    }
}
)(jQuery);
//QTransform
(function($) {
    var div = document.createElement('div')
      , divStyle = div.style;
    $.cssProps.transform = divStyle.MozTransform === '' ? 'MozTransform' : (divStyle.msTransform === '' ? 'msTransform' : (divStyle.WebkitTransform === '' ? 'WebkitTransform' : (divStyle.OTransform === '' ? 'OTransform' : (divStyle.Transform === '' ? 'Transform' : false))));
    $.cssProps.transformOrigin = divStyle.MozTransformOrigin === '' ? 'MozTransformOrigin' : (divStyle.msTransformOrigin === '' ? 'msTransformOrigin' : (divStyle.WebkitTransformOrigin === '' ? 'WebkitTransformOrigin' : (divStyle.OTransformOrigin === '' ? 'OTransformOrigin' : (divStyle.TransformOrigin === '' ? 'TransformOrigin' : false))));
    $.support.transform = $.cssProps.transform !== false || divStyle.filter === '' ? true : false;
    $.support.transformOrigin = $.cssProps.transformOrigin !== false ? true : false;
    $.support.matrixFilter = (divStyle.filter === '' && $.cssProps.transform === false) ? true : false;
    div = null;
    if ($.support.transform === false)
        return;
    $.cssNumber.skew = $.cssNumber.skewX = $.cssNumber.skewY = $.cssNumber.scale = $.cssNumber.scaleX = $.cssNumber.scaleY = $.cssNumber.rotate = $.cssNumber.matrix = true;
    $.cssNumber.transformOrigin = $.cssNumber.transformOriginX = $.cssNumber.transformOriginY = true;
    if ($.support.matrixFilter) {
        $.cssNumber.transformOrigin = $.cssNumber.transformOriginX = $.cssNumber.transformOriginY = true;
        $.cssProps.transformOrigin = 'matrixFilter';
    }
    $.cssHooks.transform = {
        set: function(elem, val, unit) {
            if ($.support.matrixFilter) {
                elem.style.filter = [val].join('');
            } else {
                elem.style[$.cssProps.transform] = val + '%';
            }
        },
        get: function(elem, computed) {
            if ($.support.matrixFilter) {
                return elem.style.filter;
            } else {
                return elem.style[$.cssProps.transform];
            }
        }
    };
    $.cssHooks.transformOrigin = {
        set: function(elem, val, unit) {
            if (!$.support.matrixFilter) {
                val = (typeof val === 'string') ? val : val + (unit || '%');
                elem.style[$.cssProps.transformOrigin] = val;
            } else {
                val = val.split(",");
                $.cssHooks.transformOriginX.set(elem, val[0]);
                if (val.length > 1) {
                    $.cssHooks.transformOriginY.set(elem, val[1]);
                }
            }
        },
        get: function(elem, computed) {
            if (!$.support.matrixFilter) {
                return elem.style[$.cssProps.transformOrigin];
            } else {
                var originX = $.data(elem, 'transformOriginX');
                var originY = $.data(elem, 'transformOriginY');
                return originX && originY && originX === originY ? originX : '50%';
            }
        }
    };
    $.fx.step.transformOrigin = function(fx) {
        $.cssHooks.transformOrigin.set(fx.elem, fx.now, fx.unit);
    }
    ;
    $.cssHooks.transformOriginX = {
        set: function(elem, val, unit) {
            if (!$.support.matrixFilter) {
                val = (typeof val === 'string') ? val : val + (unit || '%');
                elem.style[$.cssProps.transformOrigin + 'X'] = val;
            } else {
                $.data(elem, 'transformOriginX', unit ? val + unit : val);
                setIEMatrix(elem);
            }
        },
        get: function(elem, computed) {
            if (!$.support.matrixFilter) {
                return elem.style[$.cssProps.transformOrigin + 'X'];
            } else {
                var originX = $.data(elem, 'transformOriginX');
                switch (originX) {
                case 'left':
                    return '0%';
                case 'center':
                    return '50%';
                case 'right':
                    return '100%';
                }
                return originX ? originX : '50%';
            }
        }
    };
    $.fx.step.transformOriginX = function(fx) {
        $.cssHooks.transformOriginX.set(fx.elem, fx.now, fx.unit);
    }
    ;
    $.cssHooks.transformOriginY = {
        set: function(elem, val, unit) {
            if (!$.support.matrixFilter) {
                val = (typeof val === 'string') ? val : val + (unit || '%');
                elem.style[$.cssProps.transformOrigin + 'Y'] = val;
            } else {
                $.data(elem, 'transformOriginY', unit ? val + unit : val);
                setIEMatrix(elem);
            }
        },
        get: function(elem, computed) {
            if (!$.support.matrixFilter) {
                return elem.style[$.cssProps.transformOrigin + 'Y'];
            } else {
                var originY = $.data(elem, 'transformOriginY');
                switch (originY) {
                case 'top':
                    return '0%';
                case 'center':
                    return '50%';
                case 'bottom':
                    return '100%';
                }
                return originY ? originY : '50%';
            }
        }
    };
    $.fx.step.transformOriginY = function(fx) {
        $.cssHooks.transformOriginY.set(fx.elem, fx.now, fx.unit);
    }
    ;
    var rtn = function(v) {
        return v;
    };
    var xy = [['X', 'Y'], 'X', 'Y'];
    var abcdxy = [['A', 'B', 'C', 'D', 'X', 'Y'], 'A', 'B', 'C', 'D', 'X', 'Y']
    var props = [{
        prop: 'rotate',
        matrix: [function(v) {
            return Math.cos(v);
        }
        , function(v) {
            return -Math.sin(v);
        }
        , function(v) {
            return Math.sin(v);
        }
        , function(v) {
            return Math.cos(v);
        }
        ],
        unit: 'rad',
        subProps: [''],
        fnc: toRadian
    }, {
        prop: 'scale',
        matrix: [[rtn, 0, 0, rtn], [rtn, 0, 0, 1], [1, 0, 0, rtn]],
        unit: '',
        subProps: xy,
        fnc: parseFloat,
        _default: 1
    }, {
        prop: 'skew',
        matrix: [[1, rtn, rtn, 1], [1, rtn, 0, 1], [1, 0, rtn, 1]],
        unit: 'rad',
        subProps: xy,
        fnc: toRadian
    }, {
        prop: 'translate',
        matrix: [[1, 0, 0, 1, rtn, rtn], [1, 0, 0, 1, rtn, 0], [1, 0, 0, 1, 0, rtn]],
        standardUnit: 'px',
        subProps: xy,
        fnc: parseFloat
    }, {
        prop: 'matrix',
        matrix: [[rtn, rtn, rtn, rtn, rtn, rtn], [rtn, 0, 0, 1, 0, 0], [1, rtn, 0, 1, 0, 0], [1, 0, rtn, 1, 0, 0], [1, 0, 0, rtn, 0, 0], [1, 0, 0, 1, 0, rtn]],
        subProps: abcdxy,
        fnc: parseFloat
    }];
    jQuery.each(props, function(n, prop) {
        jQuery.each(prop.subProps, function(num, sub) {
            var _cssProp, _prop = prop;
            if ($.isArray(sub)) {
                _cssProp = _prop.prop;
                var _sub = sub;
                $.cssHooks[_cssProp] = {
                    set: function(elem, val, unit) {
                        jQuery.each(_sub, function(num, x) {
                            $.cssHooks[_cssProp + x].set(elem, val, unit);
                        });
                    },
                    get: function(elem, computed) {
                        var val = [];
                        jQuery.each(_sub, function(num, x) {
                            val.push($.cssHooks[_cssProp + x].get(elem, val));
                        });
                        return val[0] || val[1];
                    }
                }
            } else {
                _cssProp = _prop.prop + sub;
                $.cssHooks[_cssProp] = {
                    set: function(elem, val, unit) {
                        $.data(elem, _cssProp, unit ? val + unit : val);
                        setCSSTransform(elem, _prop.fnc(unit ? val + unit : val), _cssProp, _prop.unit || unit || _prop.standardUnit);
                    },
                    get: function(elem, computed) {
                        var p = $.data(elem, _cssProp);
                        return p && p !== undefined ? p : _prop._default || 0;
                    }
                };
            }
            $.fx.step[_cssProp] = function(fx) {
                fx.unit = fx.unit === 'px' && $.cssNumber[_cssProp] ? _prop.standardUnit : fx.unit;
                var unit = ($.cssNumber[_cssProp] ? '' : fx.unit);
                $.cssHooks[_cssProp].set(fx.elem, fx.now, fx.unit);
            }
            ;
        })
    });
    function setCSSTransform(elem, val, prop, unit) {
        if ($.support.matrixFilter) {
            return setIEMatrix(elem, val);
        }
        var allProps = parseCSSTransform(elem);
        var a = /[X|Y]/.exec(prop);
        a = (a === null ? '' : a[0] ? a[0] : a);
        prop = /.*[^XY]/.exec(prop)[0];
        unit = unit === undefined ? '' : unit;
        var result = '';
        var wasUpdated = false;
        var arr;
        if (allProps !== null) {
            for (var item in allProps) {
                arr = allProps[item];
                if (prop === item) {
                    if (prop !== 'matrix') {
                        result += prop + '(';
                        result += a === 'X' || a === '' ? val + unit : (arr[0] !== '' ? arr[0] : $.cssHooks[prop + 'X'].get(elem) + unit);
                        result += a === 'Y' ? ', ' + val + unit : (arr[1] !== '' ? ', ' + arr[1] : (prop + 'Y'in $.cssHooks ? ', ' + $.cssHooks[prop + 'Y'].get(elem) + unit : ''));
                        result += ') ';
                    } else {
                        result += val + ' ';
                    }
                    wasUpdated = true;
                } else {
                    result += item + '(';
                    for (var i = 0; i < arr.length; i++) {
                        result += arr[i];
                        if (i < arr.length - 1 && arr[i + 1] !== '')
                            result += ', '
                        else
                            break;
                    }
                    result += ') ';
                }
            }
        }
        if (!wasUpdated)
            result += prop + a + '(' + val + unit + ') ';
        elem.style[$.cssProps.transform] = result;
    }
    function parseCSSTransform(elem) {
        var props, prop, name, transform;
        $(elem.style[$.cssProps.transform].replace(/(?:\,\s|\)|\()/g, "|").split(" ")).each(function(i, item) {
            if (item !== '') {
                if (props === undefined)
                    props = {}
                prop = item.split("|");
                name = prop.shift();
                transform = /.*[^XY]/.exec(name)[0];
                if (!props[transform])
                    props[transform] = ['', '', '', '', '', ''];
                if (!/Y/.test(name))
                    props[transform][0] = prop[0];
                if (!/X/.test(name))
                    props[transform][1] = prop[1];
                if (prop.length == 6) {
                    props[transform][2] = prop[2];
                    props[transform][3] = prop[3];
                    props[transform][4] = prop[4];
                    props[transform][5] = prop[5];
                }
            }
        });
        return props !== undefined ? props : null;
    }
    function ieOrigin(o, n, percent) {
        return percent * (o - n);
    }
    function toRadian(value) {
        if (typeof value === 'number') {
            return parseFloat(value);
        }
        if (value.indexOf("deg") != -1) {
            return parseInt(value, 10) * (Math.PI * 2 / 360);
        } else if (value.indexOf("grad") != -1) {
            return parseInt(value, 10) * (Math.PI / 200);
        }
    }
    $.rotate = {
        radToDeg: function radToDeg(rad) {
            return rad * 180 / Math.PI;
        }
    };
    function setIEMatrix(elem, mat) {
        var inverse, current, ang, org, originX, originY, runTransform = $.cssProps.transformOrigin === 'matrixFilter' ? true : false;
        current = [$.cssHooks.scaleX.get(elem), toRadian($.cssHooks.skewY.get(elem)), toRadian($.cssHooks.skewX.get(elem)), $.cssHooks.scaleY.get(elem), $.cssHooks.translateX.get(elem), $.cssHooks.translateY.get(elem)];
        if (runTransform) {
            elem.style.filter = ["progid:DXImageTransform.Microsoft.Matrix" + "(M11=1,M12=0,M21=0,M22=1,SizingMethod='auto expand')"].join('');
            var Wp = $.cssHooks.transformOriginX.get(elem);
            var Hp = $.cssHooks.transformOriginY.get(elem);
            Wp = Wp.indexOf('%') > 0 ? (/[\d]*/.exec(Wp) / 100) : Wp;
            Hp = Hp.indexOf('%') > 0 ? (/[\d]*/.exec(Hp) / 100) : Hp;
            var Wb = elem.offsetWidth;
            var Hb = elem.offsetHeight;
        }
        if (typeof mat !== 'array' || mat.length !== 6) {
            mat = current;
        } else {
            mat = [((current[0] * mat[0]) + (current[1] * mat[2])), ((current[0] * mat[1]) + (current[1] * mat[3])), ((current[2] * mat[0]) + (current[3] * mat[2])), ((current[2] * mat[1]) + (current[3] * mat[3])), mat[4], mat[5]];
        }
        ang = $.data(elem, 'rotate');
        if (ang) {
            ang = toRadian(ang);
            var cos = Math.cos(ang);
            var sin = Math.sin(ang);
            ang = [cos, -sin, sin, cos];
            mat = [((mat[0] * ang[0]) + (mat[1] * ang[2])), ((mat[0] * ang[1]) + (mat[1] * ang[3])), ((mat[2] * ang[0]) + (mat[3] * ang[2])), ((mat[2] * ang[1]) + (mat[3] * ang[3])), mat[4], mat[5]];
        }
        elem.style.filter = ["progid:DXImageTransform.Microsoft.Matrix(", "M11=" + mat[0] + ", ", "M12=" + mat[1] + ", ", "M21=" + mat[2] + ", ", "M22=" + mat[3] + ", ", "SizingMethod='auto expand'", ")"].join('');
        if (runTransform) {
            var Wo = elem.offsetWidth;
            var Ho = elem.offsetHeight;
            elem.style.position = 'relative';
            elem.style.left = Wp * (Wb - Wo) + (parseInt(mat[4]) || 0);
            elem.style.top = Hp * (Hb - Ho) + (parseInt(mat[5]) || 0);
        }
    }
}
)(jQuery);
//kfw -- Animation
$.fn.kfwsp = function(options) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj] = {};
    var defaults = {
        fps: 3,
        no_of_frames: false,
        on_last_frame: false,
        state: 0,
        stop: false,
        back_fist_frame: false,
        list_frames: [],
        index_frame: 0,
        list_coordinates: [],
        on_frame: {},
        play_frames: false,
        call_back_play_frame: false,
        coordinates_y: 0
    }
    $[$obj].settings = $.extend({}, defaults, options);
    $[$obj].duration_one_frame = Math.floor(1000 / $[$obj].settings.fps);
    $[$obj].width = $this.width();
    $[$obj].height = $this.height();
    ($[$obj].kfwglc = function() {
        $[$obj].settings.list_coordinates = [];
        if ($[$obj].settings.no_of_frames != false) {
            for (var i = 0; i < $[$obj].settings.no_of_frames; i++) {
                $[$obj].settings.list_coordinates[i] = -(i * $[$obj].width);
                $[$obj].settings.list_frames[i] = i;
            }
        } else {
            $[$obj].settings.list_coordinates = $.map($[$obj].settings.list_frames, function(value, index) {
                return -((value - 1) * $[$obj].width);
            });
        }
    }
    )();
    ($[$obj].kfwrs = function() {
        $[$obj].settings.index_frame = 0;
        $this.css({
            'background-position': $[$obj].settings.list_coordinates[0] + 'px ' + $[$obj].settings.coordinates_y + 'px'
        });
    }
    )();
    ($[$obj].kfwofc = function() {
        $[$obj].settings.list_key_on_frame = $.map($[$obj].settings.on_frame, function(value, index) {
            return parseInt(index);
        });
    }
    )();
    ($[$obj].kfwrlf = function() {
        if ($.isNumeric($[$obj].settings.play_frames)) {
            if ($[$obj].settings.play_frames > 0) {
                $[$obj].settings.play_frames--;
            } else {
                $[$obj].settings.stop = true;
                setTimeout(function() {
                    if ($[$obj].settings.call_back_play_frame) {
                        $[$obj].settings.call_back_play_frame();
                    }
                }, $[$obj].duration_one_frame)
            }
        }
        if (!$[$obj].settings.stop) {
            if ($[$obj].settings.index_frame >= $[$obj].settings.list_coordinates.length) {
                $[$obj].settings.index_frame = 0;
                if ($[$obj].settings.on_last_frame != false) {
                    $[$obj].settings.on_last_frame();
                }
            }
            $[$obj].timeout_fn = setTimeout(function() {
                $this.css({
                    'background-position': $[$obj].settings.list_coordinates[$[$obj].settings.index_frame] + 'px ' + $[$obj].settings.coordinates_y + 'px'
                });
                if ($.inArray($[$obj].settings.list_frames[$[$obj].settings.index_frame], $[$obj].settings.list_key_on_frame) != -1) {
                    $[$obj].settings.on_frame[$[$obj].settings.list_frames[$[$obj].settings.index_frame]]();
                }
                $[$obj].settings.index_frame++;
                $[$obj].kfwrlf();
            }, $[$obj].duration_one_frame);
        } else {
            clearTimeout($[$obj].timeout_fn);
        }
    }
    )();
    return $this;
}
$.fn.kfwspState = function(state) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.state = (state != undefined) ? (state) : $[$obj].settings.state;
    $[$obj].settings.coordinates_y = ($[$obj].height * $[$obj].settings.state != 0) ? -($[$obj].height * $[$obj].settings.state) : 0;
    return $this;
}
$.fn.kfwspStop = function(back_fist_frame) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.stop = true;
    clearTimeout($[$obj].timeout_fn);
    if (back_fist_frame) {
        $[$obj].settings.back_fist_frame = true;
        $[$obj].kfwrs();
    } else {
        $[$obj].settings.back_fist_frame = false;
    }
    ;return $this;
}
$.fn.kfwspStart = function(back_firt_frame) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.stop = false;
    if (back_firt_frame) {
        $[$obj].kfwrs();
    }
    $[$obj].kfwrlf();
    return $this;
}
$.fn.kfwspfps = function(fps) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.fps = (fps) ? fps : $[$obj].settings.fps;
    $[$obj].duration_one_frame = Math.floor(1000 / $[$obj].settings.fps);
    return $this;
}
$.fn.kfwspnof = function(options) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.no_of_frames = (options.no_of_frames != undefined) ? options.no_of_frames : false;
    $[$obj].settings.list_frames = (options.list_frames != undefined) ? options.list_frames : false;
    $[$obj].kfwrs();
    $[$obj].kfwglc();
    return $this;
}
$.fn.kfwspof = function(options) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.on_frame = options;
    $[$obj].kfwofc();
    return $this;
}
$.fn.kfwsppf = function(options) {
    var $this = $(this);
    var $obj = 'kfwsp' + $this.attr('id');
    $[$obj].settings.play_frames = (options.play_frames) ? options.play_frames : false;
    $[$obj].settings.call_back_play_frame = (options.call_back_play_frame) ? options.call_back_play_frame : false;
    return $this;
}
$.fn.kfwspm = function(options) {
    var $this = $(this);
    var $obj = 'kfwspm' + $this.attr('id');
    if ($[$obj]) {
        clearTimeout($[$obj].timeout_fn);
    }
    ;$[$obj] = {};
    var defaults = {
        fps: 3,
        on_last_frame: false,
        state: 0,
        stop: false,
        back_fist_frame: false,
        matrix_frames: [],
        index_frame: 0,
        list_coordinates: [],
        on_frame: {},
        play_frames: false,
        call_back_play_frame: false,
        list_index_frames: []
    }
    $[$obj].settings = $.extend({}, defaults, options);
    $[$obj].duration_one_frame = Math.floor(1000 / $[$obj].settings.fps);
    $[$obj].width = $this.width();
    $[$obj].height = $this.height();
    ($[$obj].kfwglc = function() {
        $[$obj].settings.list_coordinates = [];
        $.map($[$obj].settings.matrix_frames, function(value, index) {
            $[$obj].settings.list_index_frames[index] = index;
            $[$obj].settings.list_coordinates[index] = [(((value[0] - 1) * $[$obj].height) > 0) ? -((value[0] - 1) * $[$obj].height) : 0, (((value[1] - 1) * $[$obj].width) > 0) ? -((value[1] - 1) * $[$obj].width) : 0];
        });
    }
    )();
    ($[$obj].kfwrs = function() {
        $[$obj].settings.index_frame = 0;
        $this.css({
            'background-position': $[$obj].settings.list_coordinates[0][1] + 'px ' + $[$obj].settings.list_coordinates[0][0] + 'px'
        });
    }
    )();
    ($[$obj].kfwofc = function() {
        $[$obj].settings.list_key_on_frame = $.map($[$obj].settings.on_frame, function(value, index) {
            return parseInt(index);
        });
    }
    )();
    ($[$obj].kfwrlf = function() {
        if ($.isNumeric($[$obj].settings.play_frames)) {
            if ($[$obj].settings.play_frames > 0) {
                $[$obj].settings.play_frames--;
            } else {
                $[$obj].settings.stop = true;
                setTimeout(function() {
                    if ($[$obj].settings.call_back_play_frame) {
                        $[$obj].settings.call_back_play_frame();
                    }
                }, $[$obj].duration_one_frame)
            }
        }
        if (!$[$obj].settings.stop) {
            if ($[$obj].settings.index_frame >= $[$obj].settings.list_coordinates.length) {
                $[$obj].settings.index_frame = 0;
                if ($[$obj].settings.on_last_frame != false) {
                    $[$obj].settings.on_last_frame();
                }
            }
            $[$obj].timeout_fn = setTimeout(function() {
                if ($[$obj].settings.list_coordinates[$[$obj].settings.index_frame]) {
                    $this.css({
                        'background-position': $[$obj].settings.list_coordinates[$[$obj].settings.index_frame][1] + 'px ' + $[$obj].settings.list_coordinates[$[$obj].settings.index_frame][0] + 'px'
                    });
                    if ($.inArray($[$obj].settings.list_index_frames[$[$obj].settings.index_frame], $[$obj].settings.list_key_on_frame) != -1) {
                        $[$obj].settings.on_frame[$[$obj].settings.list_index_frames[$[$obj].settings.index_frame]]();
                    }
                } else {
                    console.log('miss frame');
                }
                $[$obj].settings.index_frame++;
                $[$obj].kfwrlf();
            }, $[$obj].duration_one_frame);
        } else {
            clearTimeout($[$obj].timeout_fn);
        }
    }
    )();
    return $this;
}
$.fn.kfwspmStop = function(back_fist_frame) {
    var $this = $(this);
    var $obj = 'kfwspm' + $this.attr('id');
    $[$obj].settings.stop = true;
    clearTimeout($[$obj].timeout_fn);
    if (back_fist_frame) {
        $[$obj].settings.back_fist_frame = true;
        $[$obj].kfwrs();
    } else {
        $[$obj].settings.back_fist_frame = false;
    }
    ;return $this;
}
$.fn.kfwspmStart = function(back_firt_frame) {
    var $this = $(this);
    var $obj = 'kfwspm' + $this.attr('id');
    $[$obj].settings.stop = false;
    clearTimeout($[$obj].timeout_fn);
    if (back_firt_frame) {
        $[$obj].kfwrs();
    }
    $[$obj].kfwrlf();
    return $this;
}
$.fn.kfwspmfps = function(fps) {
    var $this = $(this);
    var $obj = 'kfwspm' + $this.attr('id');
    $[$obj].settings.fps = (fps) ? fps : $[$obj].settings.fps;
    $[$obj].duration_one_frame = Math.floor(1000 / $[$obj].settings.fps);
    return $this;
}
$.fn.kfwspmlfmt = function(options) {
    var $this = $(this);
    var $obj = 'kfwspm' + $this.attr('id');
    $[$obj].settings.matrix_frames = (options.matrix_frames) ? options.matrix_frames : $[$obj].settings.matrix_frames;
    $[$obj].kfwglc();
    if (options.back_fist_frame == true) {
        $[$obj].settings.index_frame = 0;
        $[$obj].kfwrs();
    }
    ;return $this;
}
$.fn.kfwspmof = function(options) {
    var $this = $(this);
    var $obj = 'kfwspm' + $this.attr('id');
    $[$obj].settings.on_frame = options;
    $[$obj].kfwofc();
    return $this;
}
$.fn.kfwspmpf = function(options) {
    var $this = $(this);
    var _last_frame = options.matrix_frames.length - 1;
    $this.kfwspmlfmt({
        matrix_frames: options.matrix_frames
    });
    var _call_back_play_frame = {};
    _call_back_play_frame[_last_frame] = (options.call_back_play_frame) ? options.call_back_play_frame : function() {}
    ;
    $this.kfwspmof(_call_back_play_frame);
    return $this;
}
//jquery.easing.1.3.js
jQuery.easing['jswing'] = jQuery.easing['swing'];
jQuery.extend(jQuery.easing, {
    def: 'easeOutQuad',
    swing: function(x, t, b, c, d) {
        return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
    },
    easeInQuad: function(x, t, b, c, d) {
        return c * (t /= d) * t + b;
    },
    easeOutQuad: function(x, t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    },
    easeInOutQuad: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1)
            return c / 2 * t * t + b;
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    },
    easeInCubic: function(x, t, b, c, d) {
        return c * (t /= d) * t * t + b;
    },
    easeOutCubic: function(x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    },
    easeInOutCubic: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1)
            return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    },
    easeInQuart: function(x, t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    },
    easeOutQuart: function(x, t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    },
    easeInOutQuart: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1)
            return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    },
    easeInQuint: function(x, t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    },
    easeOutQuint: function(x, t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    },
    easeInOutQuint: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1)
            return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    },
    easeInSine: function(x, t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    },
    easeOutSine: function(x, t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    },
    easeInOutSine: function(x, t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    },
    easeInExpo: function(x, t, b, c, d) {
        return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    },
    easeOutExpo: function(x, t, b, c, d) {
        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    },
    easeInOutExpo: function(x, t, b, c, d) {
        if (t == 0)
            return b;
        if (t == d)
            return b + c;
        if ((t /= d / 2) < 1)
            return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    },
    easeInCirc: function(x, t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    },
    easeOutCirc: function(x, t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    },
    easeInOutCirc: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1)
            return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    },
    easeInElastic: function(x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0)
            return b;
        if ((t /= d) == 1)
            return b + c;
        if (!p)
            p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else
            var s = p / (2 * Math.PI) * Math.asin(c / a);
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    },
    easeOutElastic: function(x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0)
            return b;
        if ((t /= d) == 1)
            return b + c;
        if (!p)
            p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else
            var s = p / (2 * Math.PI) * Math.asin(c / a);
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
    },
    easeInOutElastic: function(x, t, b, c, d) {
        var s = 1.70158;
        var p = 0;
        var a = c;
        if (t == 0)
            return b;
        if ((t /= d / 2) == 2)
            return b + c;
        if (!p)
            p = d * (.3 * 1.5);
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else
            var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1)
            return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    },
    easeInBack: function(x, t, b, c, d, s) {
        if (s == undefined)
            s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    },
    easeOutBack: function(x, t, b, c, d, s) {
        if (s == undefined)
            s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    },
    easeInOutBack: function(x, t, b, c, d, s) {
        if (s == undefined)
            s = 1.70158;
        if ((t /= d / 2) < 1)
            return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
    },
    easeInBounce: function(x, t, b, c, d) {
        return c - jQuery.easing.easeOutBounce(x, d - t, 0, c, d) + b;
    },
    easeOutBounce: function(x, t, b, c, d) {
        if ((t /= d) < (1 / 2.75)) {
            return c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
    },
    easeInOutBounce: function(x, t, b, c, d) {
        if (t < d / 2)
            return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * .5 + b;
        return jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * .5 + c * .5 + b;
    }
});
//jquery.path.js version 0.0.1
;(function($) {
    $.path = {};
    var V = {
        rotate: function(p, degrees) {
            var radians = degrees * Math.PI / 180
              , c = Math.cos(radians)
              , s = Math.sin(radians);
            return [c * p[0] - s * p[1], s * p[0] + c * p[1]];
        },
        scale: function(p, n) {
            return [n * p[0], n * p[1]];
        },
        add: function(a, b) {
            return [a[0] + b[0], a[1] + b[1]];
        },
        minus: function(a, b) {
            return [a[0] - b[0], a[1] - b[1]];
        }
    };
    $.path.bezier = function(params, rotate) {
        params.start = $.extend({
            angle: 0,
            length: 0.3333
        }, params.start);
        params.end = $.extend({
            angle: 0,
            length: 0.3333
        }, params.end);
        this.p1 = [params.start.x, params.start.y];
        this.p4 = [params.end.x, params.end.y];
        var v14 = V.minus(this.p4, this.p1)
          , v12 = V.scale(v14, params.start.length)
          , v41 = V.scale(v14, -1)
          , v43 = V.scale(v41, params.end.length);
        v12 = V.rotate(v12, params.start.angle);
        this.p2 = V.add(this.p1, v12);
        v43 = V.rotate(v43, params.end.angle);
        this.p3 = V.add(this.p4, v43);
        this.f1 = function(t) {
            return (t * t * t);
        }
        ;
        this.f2 = function(t) {
            return (3 * t * t * (1 - t));
        }
        ;
        this.f3 = function(t) {
            return (3 * t * (1 - t) * (1 - t));
        }
        ;
        this.f4 = function(t) {
            return ((1 - t) * (1 - t) * (1 - t));
        }
        ;
        this.css = function(p) {
            var f1 = this.f1(p)
              , f2 = this.f2(p)
              , f3 = this.f3(p)
              , f4 = this.f4(p)
              , css = {};
            if (rotate) {
                css.prevX = this.x;
                css.prevY = this.y;
            }
            css.x = this.x = (this.p1[0] * f1 + this.p2[0] * f2 + this.p3[0] * f3 + this.p4[0] * f4 + .5) | 0;
            css.y = this.y = (this.p1[1] * f1 + this.p2[1] * f2 + this.p3[1] * f3 + this.p4[1] * f4 + .5) | 0;
            css.left = css.x + "px";
            css.top = css.y + "px";
            return css;
        }
        ;
    }
    ;
    $.path.arc = function(params, rotate) {
        for (var i in params) {
            this[i] = params[i];
        }
        this.dir = this.dir || 1;
        while (this.start > this.end && this.dir > 0) {
            this.start -= 360;
        }
        while (this.start < this.end && this.dir < 0) {
            this.start += 360;
        }
        this.css = function(p) {
            var a = (this.start * (p) + this.end * (1 - (p))) * Math.PI / 180
              , css = {};
            if (rotate) {
                css.prevX = this.x;
                css.prevY = this.y;
            }
            css.x = this.x = (Math.sin(a) * this.radius + this.center[0] + .5) | 0;
            css.y = this.y = (Math.cos(a) * this.radius + this.center[1] + .5) | 0;
            css.left = css.x + "px";
            css.top = css.y + "px";
            return css;
        }
        ;
    }
    ;
    $.fx.step.path = function(fx) {
        var css = fx.end.css(1 - fx.pos);
        if (css.prevX != null) {
            $.cssHooks.transform.set(fx.elem, "rotate(" + Math.atan2(css.prevY - css.y, css.prevX - css.x) + ")");
        }
        fx.elem.style.top = css.top;
        fx.elem.style.left = css.left;
    }
    ;
}
)(jQuery);
//jQuery Cookie Plugin v1.3.1
(function(factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else {
        factory(jQuery);
    }
}(function($) {
    var pluses = /\+/g;
    function raw(s) {
        return s;
    }
    function decoded(s) {
        return decodeURIComponent(s.replace(pluses, ' '));
    }
    function converted(s) {
        if (s.indexOf('"') === 0) {
            s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
        }
        try {
            return config.json ? JSON.parse(s) : s;
        } catch (er) {}
    }
    var config = $.cookie = function(key, value, options) {
        if (value !== undefined) {
            options = $.extend({}, config.defaults, options);
            if (typeof options.expires === 'number') {
                var days = options.expires
                  , t = options.expires = new Date();
                t.setDate(t.getDate() + days);
            }
            value = config.json ? JSON.stringify(value) : String(value);
            return (document.cookie = [config.raw ? key : encodeURIComponent(key), '=', config.raw ? value : encodeURIComponent(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join(''));
        }
        var decode = config.raw ? raw : decoded;
        var cookies = document.cookie.split('; ');
        var result = key ? undefined : {};
        for (var i = 0, l = cookies.length; i < l; i++) {
            var parts = cookies[i].split('=');
            var name = decode(parts.shift());
            var cookie = decode(parts.join('='));
            if (key && key === name) {
                result = converted(cookie);
                break;
            }
            if (!key) {
                result[name] = converted(cookie);
            }
        }
        return result;
    }
    ;
    config.defaults = {};
    $.removeCookie = function(key, options) {
        if ($.cookie(key) !== undefined) {
            $.cookie(key, '', $.extend({}, options, {
                expires: -1
            }));
            return true;
        }
        return false;
    }
    ;
}));
//JQuery transit.min
(function(t, e) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], e)
    } else if (typeof exports === "object") {
        module.exports = e(require("jquery"))
    } else {
        e(t.jQuery)
    }
}
)(this, function(t) {
    t.transit = {
        version: "0.9.12",
        propertyMap: {
            marginLeft: "margin",
            marginRight: "margin",
            marginBottom: "margin",
            marginTop: "margin",
            paddingLeft: "padding",
            paddingRight: "padding",
            paddingBottom: "padding",
            paddingTop: "padding"
        },
        enabled: true,
        useTransitionEnd: false
    };
    var e = document.createElement("div");
    var n = {};
    function i(t) {
        if (t in e.style)
            return t;
        var n = ["Moz", "Webkit", "O", "ms"];
        var i = t.charAt(0).toUpperCase() + t.substr(1);
        for (var r = 0; r < n.length; ++r) {
            var s = n[r] + i;
            if (s in e.style) {
                return s
            }
        }
    }
    function r() {
        e.style[n.transform] = "";
        e.style[n.transform] = "rotateY(90deg)";
        return e.style[n.transform] !== ""
    }
    var s = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
    n.transition = i("transition");
    n.transitionDelay = i("transitionDelay");
    n.transform = i("transform");
    n.transformOrigin = i("transformOrigin");
    n.filter = i("Filter");
    n.transform3d = r();
    var a = {
        transition: "transitionend",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        WebkitTransition: "webkitTransitionEnd",
        msTransition: "MSTransitionEnd"
    };
    var o = n.transitionEnd = a[n.transition] || null;
    for (var u in n) {
        if (n.hasOwnProperty(u) && typeof t.support[u] === "undefined") {
            t.support[u] = n[u]
        }
    }
    e = null;
    t.cssEase = {
        _default: "ease",
        "in": "ease-in",
        out: "ease-out",
        "in-out": "ease-in-out",
        snap: "cubic-bezier(0,1,.5,1)",
        easeInCubic: "cubic-bezier(.550,.055,.675,.190)",
        easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
        easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
        easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
        easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
        easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
        easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
        easeOutExpo: "cubic-bezier(.19,1,.22,1)",
        easeInOutExpo: "cubic-bezier(1,0,0,1)",
        easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
        easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
        easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
        easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
        easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
        easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
        easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
        easeOutQuint: "cubic-bezier(.23,1,.32,1)",
        easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
        easeInSine: "cubic-bezier(.47,0,.745,.715)",
        easeOutSine: "cubic-bezier(.39,.575,.565,1)",
        easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
        easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
        easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
        easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
    };
    t.cssHooks["transit:transform"] = {
        get: function(e) {
            return t(e).data("transform") || new f
        },
        set: function(e, i) {
            var r = i;
            if (!(r instanceof f)) {
                r = new f(r)
            }
            if (n.transform === "WebkitTransform" && !s) {
                e.style[n.transform] = r.toString(true)
            } else {
                e.style[n.transform] = r.toString()
            }
            t(e).data("transform", r)
        }
    };
    t.cssHooks.transform = {
        set: t.cssHooks["transit:transform"].set
    };
    t.cssHooks.filter = {
        get: function(t) {
            return t.style[n.filter]
        },
        set: function(t, e) {
            t.style[n.filter] = e
        }
    };
    if (t.fn.jquery < "1.8") {
        t.cssHooks.transformOrigin = {
            get: function(t) {
                return t.style[n.transformOrigin]
            },
            set: function(t, e) {
                t.style[n.transformOrigin] = e
            }
        };
        t.cssHooks.transition = {
            get: function(t) {
                return t.style[n.transition]
            },
            set: function(t, e) {
                t.style[n.transition] = e
            }
        }
    }
    p("scale");
    p("scaleX");
    p("scaleY");
    p("translate");
    p("rotate");
    p("rotateX");
    p("rotateY");
    p("rotate3d");
    p("perspective");
    p("skewX");
    p("skewY");
    p("x", true);
    p("y", true);
    function f(t) {
        if (typeof t === "string") {
            this.parse(t)
        }
        return this
    }
    f.prototype = {
        setFromString: function(t, e) {
            var n = typeof e === "string" ? e.split(",") : e.constructor === Array ? e : [e];
            n.unshift(t);
            f.prototype.set.apply(this, n)
        },
        set: function(t) {
            var e = Array.prototype.slice.apply(arguments, [1]);
            if (this.setter[t]) {
                this.setter[t].apply(this, e)
            } else {
                this[t] = e.join(",")
            }
        },
        get: function(t) {
            if (this.getter[t]) {
                return this.getter[t].apply(this)
            } else {
                return this[t] || 0
            }
        },
        setter: {
            rotate: function(t) {
                this.rotate = b(t, "deg")
            },
            rotateX: function(t) {
                this.rotateX = b(t, "deg")
            },
            rotateY: function(t) {
                this.rotateY = b(t, "deg")
            },
            scale: function(t, e) {
                if (e === undefined) {
                    e = t
                }
                this.scale = t + "," + e
            },
            skewX: function(t) {
                this.skewX = b(t, "deg")
            },
            skewY: function(t) {
                this.skewY = b(t, "deg")
            },
            perspective: function(t) {
                this.perspective = b(t, "px")
            },
            x: function(t) {
                this.set("translate", t, null)
            },
            y: function(t) {
                this.set("translate", null, t)
            },
            translate: function(t, e) {
                if (this._translateX === undefined) {
                    this._translateX = 0
                }
                if (this._translateY === undefined) {
                    this._translateY = 0
                }
                if (t !== null && t !== undefined) {
                    this._translateX = b(t, "px")
                }
                if (e !== null && e !== undefined) {
                    this._translateY = b(e, "px")
                }
                this.translate = this._translateX + "," + this._translateY
            }
        },
        getter: {
            x: function() {
                return this._translateX || 0
            },
            y: function() {
                return this._translateY || 0
            },
            scale: function() {
                var t = (this.scale || "1,1").split(",");
                if (t[0]) {
                    t[0] = parseFloat(t[0])
                }
                if (t[1]) {
                    t[1] = parseFloat(t[1])
                }
                return t[0] === t[1] ? t[0] : t
            },
            rotate3d: function() {
                var t = (this.rotate3d || "0,0,0,0deg").split(",");
                for (var e = 0; e <= 3; ++e) {
                    if (t[e]) {
                        t[e] = parseFloat(t[e])
                    }
                }
                if (t[3]) {
                    t[3] = b(t[3], "deg")
                }
                return t
            }
        },
        parse: function(t) {
            var e = this;
            t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(t, n, i) {
                e.setFromString(n, i)
            })
        },
        toString: function(t) {
            var e = [];
            for (var i in this) {
                if (this.hasOwnProperty(i)) {
                    if (!n.transform3d && (i === "rotateX" || i === "rotateY" || i === "perspective" || i === "transformOrigin")) {
                        continue
                    }
                    if (i[0] !== "_") {
                        if (t && i === "scale") {
                            e.push(i + "3d(" + this[i] + ",1)")
                        } else if (t && i === "translate") {
                            e.push(i + "3d(" + this[i] + ",0)")
                        } else {
                            e.push(i + "(" + this[i] + ")")
                        }
                    }
                }
            }
            return e.join(" ")
        }
    };
    function c(t, e, n) {
        if (e === true) {
            t.queue(n)
        } else if (e) {
            t.queue(e, n)
        } else {
            t.each(function() {
                n.call(this)
            })
        }
    }
    function l(e) {
        var i = [];
        t.each(e, function(e) {
            e = t.camelCase(e);
            e = t.transit.propertyMap[e] || t.cssProps[e] || e;
            e = h(e);
            if (n[e])
                e = h(n[e]);
            if (t.inArray(e, i) === -1) {
                i.push(e)
            }
        });
        return i
    }
    function d(e, n, i, r) {
        var s = l(e);
        if (t.cssEase[i]) {
            i = t.cssEase[i]
        }
        var a = "" + y(n) + " " + i;
        if (parseInt(r, 10) > 0) {
            a += " " + y(r)
        }
        var o = [];
        t.each(s, function(t, e) {
            o.push(e + " " + a)
        });
        return o.join(", ")
    }
    t.fn.transition = t.fn.transit = function(e, i, r, s) {
        var a = this;
        var u = 0;
        var f = true;
        var l = t.extend(true, {}, e);
        if (typeof i === "function") {
            s = i;
            i = undefined
        }
        if (typeof i === "object") {
            r = i.easing;
            u = i.delay || 0;
            f = typeof i.queue === "undefined" ? true : i.queue;
            s = i.complete;
            i = i.duration
        }
        if (typeof r === "function") {
            s = r;
            r = undefined
        }
        if (typeof l.easing !== "undefined") {
            r = l.easing;
            delete l.easing
        }
        if (typeof l.duration !== "undefined") {
            i = l.duration;
            delete l.duration
        }
        if (typeof l.complete !== "undefined") {
            s = l.complete;
            delete l.complete
        }
        if (typeof l.queue !== "undefined") {
            f = l.queue;
            delete l.queue
        }
        if (typeof l.delay !== "undefined") {
            u = l.delay;
            delete l.delay
        }
        if (typeof i === "undefined") {
            i = t.fx.speeds._default
        }
        if (typeof r === "undefined") {
            r = t.cssEase._default
        }
        i = y(i);
        var p = d(l, i, r, u);
        var h = t.transit.enabled && n.transition;
        var b = h ? parseInt(i, 10) + parseInt(u, 10) : 0;
        if (b === 0) {
            var g = function(t) {
                a.css(l);
                if (s) {
                    s.apply(a)
                }
                if (t) {
                    t()
                }
            };
            c(a, f, g);
            return a
        }
        var m = {};
        var v = function(e) {
            var i = false;
            var r = function() {
                if (i) {
                    a.unbind(o, r)
                }
                if (b > 0) {
                    a.each(function() {
                        this.style[n.transition] = m[this] || null
                    })
                }
                if (typeof s === "function") {
                    s.apply(a)
                }
                if (typeof e === "function") {
                    e()
                }
            };
            if (b > 0 && o && t.transit.useTransitionEnd) {
                i = true;
                a.bind(o, r)
            } else {
                window.setTimeout(r, b)
            }
            a.each(function() {
                if (b > 0) {
                    this.style[n.transition] = p
                }
                t(this).css(l)
            })
        };
        var z = function(t) {
            this.offsetWidth;
            v(t)
        };
        c(a, f, z);
        return this
    }
    ;
    function p(e, i) {
        if (!i) {
            t.cssNumber[e] = true
        }
        t.transit.propertyMap[e] = n.transform;
        t.cssHooks[e] = {
            get: function(n) {
                var i = t(n).css("transit:transform");
                return i.get(e)
            },
            set: function(n, i) {
                var r = t(n).css("transit:transform");
                r.setFromString(e, i);
                t(n).css({
                    "transit:transform": r
                })
            }
        }
    }
    function h(t) {
        return t.replace(/([A-Z])/g, function(t) {
            return "-" + t.toLowerCase()
        })
    }
    function b(t, e) {
        if (typeof t === "string" && !t.match(/^[\-0-9\.]+$/)) {
            return t
        } else {
            return "" + t + e
        }
    }
    function y(e) {
        var n = e;
        if (typeof n === "string" && !n.match(/^[\-0-9\.]+/)) {
            n = t.fx.speeds[n] || t.fx.speeds._default
        }
        return b(n, "ms")
    }
    t.transit.getTransitionValue = d;
    return t
});
//jquery.mCustomScrollbar.concat.min.js
/* == jquery mousewheel plugin == Version: 3.1.12, License: MIT License (MIT) */
!function(a) {
    "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a : a(jQuery)
}(function(a) {
    function b(b) {
        var g = b || window.event
          , h = i.call(arguments, 1)
          , j = 0
          , l = 0
          , m = 0
          , n = 0
          , o = 0
          , p = 0;
        if (b = a.event.fix(g),
        b.type = "mousewheel",
        "detail"in g && (m = -1 * g.detail),
        "wheelDelta"in g && (m = g.wheelDelta),
        "wheelDeltaY"in g && (m = g.wheelDeltaY),
        "wheelDeltaX"in g && (l = -1 * g.wheelDeltaX),
        "axis"in g && g.axis === g.HORIZONTAL_AXIS && (l = -1 * m,
        m = 0),
        j = 0 === m ? l : m,
        "deltaY"in g && (m = -1 * g.deltaY,
        j = m),
        "deltaX"in g && (l = g.deltaX,
        0 === m && (j = -1 * l)),
        0 !== m || 0 !== l) {
            if (1 === g.deltaMode) {
                var q = a.data(this, "mousewheel-line-height");
                j *= q,
                m *= q,
                l *= q
            } else if (2 === g.deltaMode) {
                var r = a.data(this, "mousewheel-page-height");
                j *= r,
                m *= r,
                l *= r
            }
            if (n = Math.max(Math.abs(m), Math.abs(l)),
            (!f || f > n) && (f = n,
            d(g, n) && (f /= 40)),
            d(g, n) && (j /= 40,
            l /= 40,
            m /= 40),
            j = Math[j >= 1 ? "floor" : "ceil"](j / f),
            l = Math[l >= 1 ? "floor" : "ceil"](l / f),
            m = Math[m >= 1 ? "floor" : "ceil"](m / f),
            k.settings.normalizeOffset && this.getBoundingClientRect) {
                var s = this.getBoundingClientRect();
                o = b.clientX - s.left,
                p = b.clientY - s.top
            }
            return b.deltaX = l,
            b.deltaY = m,
            b.deltaFactor = f,
            b.offsetX = o,
            b.offsetY = p,
            b.deltaMode = 0,
            h.unshift(b, j, l, m),
            e && clearTimeout(e),
            e = setTimeout(c, 200),
            (a.event.dispatch || a.event.handle).apply(this, h)
        }
    }
    function c() {
        f = null
    }
    function d(a, b) {
        return k.settings.adjustOldDeltas && "mousewheel" === a.type && b % 120 === 0
    }
    var e, f, g = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"], h = "onwheel"in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"], i = Array.prototype.slice;
    if (a.event.fixHooks)
        for (var j = g.length; j; )
            a.event.fixHooks[g[--j]] = a.event.mouseHooks;
    var k = a.event.special.mousewheel = {
        version: "3.1.12",
        setup: function() {
            if (this.addEventListener)
                for (var c = h.length; c; )
                    this.addEventListener(h[--c], b, !1);
            else
                this.onmousewheel = b;
            a.data(this, "mousewheel-line-height", k.getLineHeight(this)),
            a.data(this, "mousewheel-page-height", k.getPageHeight(this))
        },
        teardown: function() {
            if (this.removeEventListener)
                for (var c = h.length; c; )
                    this.removeEventListener(h[--c], b, !1);
            else
                this.onmousewheel = null;
            a.removeData(this, "mousewheel-line-height"),
            a.removeData(this, "mousewheel-page-height")
        },
        getLineHeight: function(b) {
            var c = a(b)
              , d = c["offsetParent"in a.fn ? "offsetParent" : "parent"]();
            return d.length || (d = a("body")),
            parseInt(d.css("fontSize"), 10) || parseInt(c.css("fontSize"), 10) || 16
        },
        getPageHeight: function(b) {
            return a(b).height()
        },
        settings: {
            adjustOldDeltas: !0,
            normalizeOffset: !0
        }
    };
    a.fn.extend({
        mousewheel: function(a) {
            return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
        },
        unmousewheel: function(a) {
            return this.unbind("mousewheel", a)
        }
    })
});
/* == malihu jquery custom scrollbar plugin == Version: 3.0.7, License: MIT License (MIT) */
!function(e, t, a) {
    !function(t) {
        var o = "function" == typeof define && define.amd
          , n = "https:" == a.location.protocol ? "https:" : "http:"
          , i = "cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js";
        o || e.event.special.mousewheel || e("head").append(decodeURI("%3Cscript src=" + n + "//" + i + "%3E%3C/script%3E")),
        t()
    }(function() {
        var o, n = "mCustomScrollbar", i = "mCS", r = ".mCustomScrollbar", l = {
            setTop: 0,
            setLeft: 0,
            axis: "y",
            scrollbarPosition: "inside",
            scrollInertia: 950,
            autoDraggerLength: !0,
            alwaysShowScrollbar: 0,
            snapOffset: 0,
            mouseWheel: {
                enable: !0,
                scrollAmount: "auto",
                axis: "y",
                deltaFactor: "auto",
                disableOver: ["select", "option", "keygen", "datalist", "textarea"]
            },
            scrollButtons: {
                scrollType: "stepless",
                scrollAmount: "auto"
            },
            keyboard: {
                enable: !0,
                scrollType: "stepless",
                scrollAmount: "auto"
            },
            contentTouchScroll: 25,
            advanced: {
                autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
                updateOnContentResize: !0,
                updateOnImageLoad: !0
            },
            theme: "light",
            callbacks: {
                onTotalScrollOffset: 0,
                onTotalScrollBackOffset: 0,
                alwaysTriggerOffsets: !0
            }
        }, s = 0, c = {}, d = t.attachEvent && !t.addEventListener ? 1 : 0, u = !1, f = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag", "mCS_img_loaded", "mCS_disabled", "mCS_destroyed", "mCS_no_scrollbar", "mCS-autoHide", "mCS-dir-rtl", "mCS_no_scrollbar_y", "mCS_no_scrollbar_x", "mCS_y_hidden", "mCS_x_hidden", "mCSB_draggerContainer", "mCSB_buttonUp", "mCSB_buttonDown", "mCSB_buttonLeft", "mCSB_buttonRight"], h = {
            init: function(t) {
                var t = e.extend(!0, {}, l, t)
                  , a = m.call(this);
                if (t.live) {
                    var o = t.liveSelector || this.selector || r
                      , n = e(o);
                    if ("off" === t.live)
                        return void g(o);
                    c[o] = setTimeout(function() {
                        n.mCustomScrollbar(t),
                        "once" === t.live && n.length && g(o)
                    }, 500)
                } else
                    g(o);
                return t.setWidth = t.set_width ? t.set_width : t.setWidth,
                t.setHeight = t.set_height ? t.set_height : t.setHeight,
                t.axis = t.horizontalScroll ? "x" : v(t.axis),
                t.scrollInertia = t.scrollInertia > 0 && t.scrollInertia < 17 ? 17 : t.scrollInertia,
                "object" != typeof t.mouseWheel && 1 == t.mouseWheel && (t.mouseWheel = {
                    enable: !0,
                    scrollAmount: "auto",
                    axis: "y",
                    preventDefault: !1,
                    deltaFactor: "auto",
                    normalizeDelta: !1,
                    invert: !1
                }),
                t.mouseWheel.scrollAmount = t.mouseWheelPixels ? t.mouseWheelPixels : t.mouseWheel.scrollAmount,
                t.mouseWheel.normalizeDelta = t.advanced.normalizeMouseWheelDelta ? t.advanced.normalizeMouseWheelDelta : t.mouseWheel.normalizeDelta,
                t.scrollButtons.scrollType = x(t.scrollButtons.scrollType),
                p(t),
                e(a).each(function() {
                    var a = e(this);
                    if (!a.data(i)) {
                        a.data(i, {
                            idx: ++s,
                            opt: t,
                            scrollRatio: {
                                y: null,
                                x: null
                            },
                            overflowed: null,
                            contentReset: {
                                y: null,
                                x: null
                            },
                            bindEvents: !1,
                            tweenRunning: !1,
                            sequential: {},
                            langDir: a.css("direction"),
                            cbOffsets: null,
                            trigger: null
                        });
                        var o = a.data(i)
                          , n = o.opt
                          , r = a.data("mcs-axis")
                          , l = a.data("mcs-scrollbar-position")
                          , c = a.data("mcs-theme");
                        r && (n.axis = r),
                        l && (n.scrollbarPosition = l),
                        c && (n.theme = c,
                        p(n)),
                        _.call(this),
                        e("#mCSB_" + o.idx + "_container img:not(." + f[2] + ")").addClass(f[2]),
                        h.update.call(null, a)
                    }
                })
            },
            update: function(t, a) {
                var o = t || m.call(this);
                return e(o).each(function() {
                    var t = e(this);
                    if (t.data(i)) {
                        var o = t.data(i)
                          , n = o.opt
                          , r = e("#mCSB_" + o.idx + "_container")
                          , l = [e("#mCSB_" + o.idx + "_dragger_vertical"), e("#mCSB_" + o.idx + "_dragger_horizontal")];
                        if (!r.length)
                            return;
                        o.tweenRunning && Q(t),
                        t.hasClass(f[3]) && t.removeClass(f[3]),
                        t.hasClass(f[4]) && t.removeClass(f[4]),
                        C.call(this),
                        w.call(this),
                        "y" === n.axis || n.advanced.autoExpandHorizontalScroll || r.css("width", S(r.children())),
                        o.overflowed = k.call(this),
                        R.call(this),
                        n.autoDraggerLength && y.call(this),
                        B.call(this),
                        O.call(this);
                        var s = [Math.abs(r[0].offsetTop), Math.abs(r[0].offsetLeft)];
                        "x" !== n.axis && (o.overflowed[0] ? l[0].height() > l[0].parent().height() ? M.call(this) : (G(t, s[0].toString(), {
                            dir: "y",
                            dur: 0,
                            overwrite: "none"
                        }),
                        o.contentReset.y = null) : (M.call(this),
                        "y" === n.axis ? I.call(this) : "yx" === n.axis && o.overflowed[1] && G(t, s[1].toString(), {
                            dir: "x",
                            dur: 0,
                            overwrite: "none"
                        }))),
                        "y" !== n.axis && (o.overflowed[1] ? l[1].width() > l[1].parent().width() ? M.call(this) : (G(t, s[1].toString(), {
                            dir: "x",
                            dur: 0,
                            overwrite: "none"
                        }),
                        o.contentReset.x = null) : (M.call(this),
                        "x" === n.axis ? I.call(this) : "yx" === n.axis && o.overflowed[0] && G(t, s[0].toString(), {
                            dir: "y",
                            dur: 0,
                            overwrite: "none"
                        }))),
                        a && o && (2 === a && n.callbacks.onImageLoad && "function" == typeof n.callbacks.onImageLoad ? n.callbacks.onImageLoad.call(this) : 3 === a && n.callbacks.onSelectorChange && "function" == typeof n.callbacks.onSelectorChange ? n.callbacks.onSelectorChange.call(this) : n.callbacks.onUpdate && "function" == typeof n.callbacks.onUpdate && n.callbacks.onUpdate.call(this)),
                        N.call(this)
                    }
                })
            },
            scrollTo: function(t, a) {
                if ("undefined" != typeof t && null != t) {
                    var o = m.call(this);
                    return e(o).each(function() {
                        var o = e(this);
                        if (o.data(i)) {
                            var n = o.data(i)
                              , r = n.opt
                              , l = {
                                trigger: "external",
                                scrollInertia: r.scrollInertia,
                                scrollEasing: "mcsEaseInOut",
                                moveDragger: !1,
                                timeout: 60,
                                callbacks: !0,
                                onStart: !0,
                                onUpdate: !0,
                                onComplete: !0
                            }
                              , s = e.extend(!0, {}, l, a)
                              , c = Y.call(this, t)
                              , d = s.scrollInertia > 0 && s.scrollInertia < 17 ? 17 : s.scrollInertia;
                            c[0] = X.call(this, c[0], "y"),
                            c[1] = X.call(this, c[1], "x"),
                            s.moveDragger && (c[0] *= n.scrollRatio.y,
                            c[1] *= n.scrollRatio.x),
                            s.dur = d,
                            setTimeout(function() {
                                null !== c[0] && "undefined" != typeof c[0] && "x" !== r.axis && n.overflowed[0] && (s.dir = "y",
                                s.overwrite = "all",
                                G(o, c[0].toString(), s)),
                                null !== c[1] && "undefined" != typeof c[1] && "y" !== r.axis && n.overflowed[1] && (s.dir = "x",
                                s.overwrite = "none",
                                G(o, c[1].toString(), s))
                            }, s.timeout)
                        }
                    })
                }
            },
            stop: function() {
                var t = m.call(this);
                return e(t).each(function() {
                    var t = e(this);
                    t.data(i) && Q(t)
                })
            },
            disable: function(t) {
                var a = m.call(this);
                return e(a).each(function() {
                    var a = e(this);
                    if (a.data(i)) {
                        {
                            a.data(i)
                        }
                        N.call(this, "remove"),
                        I.call(this),
                        t && M.call(this),
                        R.call(this, !0),
                        a.addClass(f[3])
                    }
                })
            },
            destroy: function() {
                var t = m.call(this);
                return e(t).each(function() {
                    var a = e(this);
                    if (a.data(i)) {
                        var o = a.data(i)
                          , r = o.opt
                          , l = e("#mCSB_" + o.idx)
                          , s = e("#mCSB_" + o.idx + "_container")
                          , c = e(".mCSB_" + o.idx + "_scrollbar");
                        r.live && g(r.liveSelector || e(t).selector),
                        N.call(this, "remove"),
                        I.call(this),
                        M.call(this),
                        a.removeData(i),
                        $(this, "mcs"),
                        c.remove(),
                        s.find("img." + f[2]).removeClass(f[2]),
                        l.replaceWith(s.contents()),
                        a.removeClass(n + " _" + i + "_" + o.idx + " " + f[6] + " " + f[7] + " " + f[5] + " " + f[3]).addClass(f[4])
                    }
                })
            }
        }, m = function() {
            return "object" != typeof e(this) || e(this).length < 1 ? r : this
        }, p = function(t) {
            var a = ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"]
              , o = ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"]
              , n = ["minimal", "minimal-dark"]
              , i = ["minimal", "minimal-dark"]
              , r = ["minimal", "minimal-dark"];
            t.autoDraggerLength = e.inArray(t.theme, a) > -1 ? !1 : t.autoDraggerLength,
            t.autoExpandScrollbar = e.inArray(t.theme, o) > -1 ? !1 : t.autoExpandScrollbar,
            t.scrollButtons.enable = e.inArray(t.theme, n) > -1 ? !1 : t.scrollButtons.enable,
            t.autoHideScrollbar = e.inArray(t.theme, i) > -1 ? !0 : t.autoHideScrollbar,
            t.scrollbarPosition = e.inArray(t.theme, r) > -1 ? "outside" : t.scrollbarPosition
        }, g = function(e) {
            c[e] && (clearTimeout(c[e]),
            $(c, e))
        }, v = function(e) {
            return "yx" === e || "xy" === e || "auto" === e ? "yx" : "x" === e || "horizontal" === e ? "x" : "y"
        }, x = function(e) {
            return "stepped" === e || "pixels" === e || "step" === e || "click" === e ? "stepped" : "stepless"
        }, _ = function() {
            var t = e(this)
              , a = t.data(i)
              , o = a.opt
              , r = o.autoExpandScrollbar ? " " + f[1] + "_expand" : ""
              , l = ["<div id='mCSB_" + a.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + a.idx + "_scrollbar mCS-" + o.theme + " mCSB_scrollTools_vertical" + r + "'><div class='" + f[12] + "'><div id='mCSB_" + a.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + a.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + a.idx + "_scrollbar mCS-" + o.theme + " mCSB_scrollTools_horizontal" + r + "'><div class='" + f[12] + "'><div id='mCSB_" + a.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"]
              , s = "yx" === o.axis ? "mCSB_vertical_horizontal" : "x" === o.axis ? "mCSB_horizontal" : "mCSB_vertical"
              , c = "yx" === o.axis ? l[0] + l[1] : "x" === o.axis ? l[1] : l[0]
              , d = "yx" === o.axis ? "<div id='mCSB_" + a.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : ""
              , u = o.autoHideScrollbar ? " " + f[6] : ""
              , h = "x" !== o.axis && "rtl" === a.langDir ? " " + f[7] : "";
            o.setWidth && t.css("width", o.setWidth),
            o.setHeight && t.css("height", o.setHeight),
            o.setLeft = "y" !== o.axis && "rtl" === a.langDir ? "989999px" : o.setLeft,
            t.addClass(n + " _" + i + "_" + a.idx + u + h).wrapInner("<div id='mCSB_" + a.idx + "' class='mCustomScrollBox mCS-" + o.theme + " " + s + "'><div id='mCSB_" + a.idx + "_container' class='mCSB_container' style='position:relative; top:" + o.setTop + "; left:" + o.setLeft + ";' dir=" + a.langDir + " /></div>");
            var m = e("#mCSB_" + a.idx)
              , p = e("#mCSB_" + a.idx + "_container");
            "y" === o.axis || o.advanced.autoExpandHorizontalScroll || p.css("width", S(p.children())),
            "outside" === o.scrollbarPosition ? ("static" === t.css("position") && t.css("position", "relative"),
            t.css("overflow", "visible"),
            m.addClass("mCSB_outside").after(c)) : (m.addClass("mCSB_inside").append(c),
            p.wrap(d)),
            b.call(this);
            var g = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")];
            g[0].css("min-height", g[0].height()),
            g[1].css("min-width", g[1].width())
        }, S = function(t) {
            return Math.max.apply(Math, t.map(function() {
                return e(this).outerWidth(!0)
            }).get())
        }, w = function() {
            var t = e(this)
              , a = t.data(i)
              , o = a.opt
              , n = e("#mCSB_" + a.idx + "_container");
            o.advanced.autoExpandHorizontalScroll && "y" !== o.axis && n.css({
                position: "absolute",
                width: "auto"
            }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                width: Math.ceil(n[0].getBoundingClientRect().right + .4) - Math.floor(n[0].getBoundingClientRect().left),
                position: "relative"
            }).unwrap()
        }, b = function() {
            var t = e(this)
              , a = t.data(i)
              , o = a.opt
              , n = e(".mCSB_" + a.idx + "_scrollbar:first")
              , r = at(o.scrollButtons.tabindex) ? "tabindex='" + o.scrollButtons.tabindex + "'" : ""
              , l = ["<a href='#' class='" + f[13] + "' oncontextmenu='return false;' " + r + " />", "<a href='#' class='" + f[14] + "' oncontextmenu='return false;' " + r + " />", "<a href='#' class='" + f[15] + "' oncontextmenu='return false;' " + r + " />", "<a href='#' class='" + f[16] + "' oncontextmenu='return false;' " + r + " />"]
              , s = ["x" === o.axis ? l[2] : l[0], "x" === o.axis ? l[3] : l[1], l[2], l[3]];
            o.scrollButtons.enable && n.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])
        }, C = function() {
            var t = e(this)
              , a = t.data(i)
              , o = e("#mCSB_" + a.idx)
              , n = t.css("max-height") || "none"
              , r = -1 !== n.indexOf("%")
              , l = t.css("box-sizing");
            if ("none" !== n) {
                var s = r ? t.parent().height() * parseInt(n) / 100 : parseInt(n);
                "border-box" === l && (s -= t.innerHeight() - t.height() + (t.outerHeight() - t.innerHeight())),
                o.css("max-height", Math.round(s))
            }
        }, y = function() {
            var t = e(this)
              , a = t.data(i)
              , o = e("#mCSB_" + a.idx)
              , n = e("#mCSB_" + a.idx + "_container")
              , r = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")]
              , l = [o.height() / n.outerHeight(!1), o.width() / n.outerWidth(!1)]
              , s = [parseInt(r[0].css("min-height")), Math.round(l[0] * r[0].parent().height()), parseInt(r[1].css("min-width")), Math.round(l[1] * r[1].parent().width())]
              , c = d && s[1] < s[0] ? s[0] : s[1]
              , u = d && s[3] < s[2] ? s[2] : s[3];
            r[0].css({
                height: c,
                "max-height": r[0].parent().height() - 10
            }).find(".mCSB_dragger_bar").css({
                "line-height": s[0] + "px"
            }),
            r[1].css({
                width: u,
                "max-width": r[1].parent().width() - 10
            })
        }, B = function() {
            var t = e(this)
              , a = t.data(i)
              , o = e("#mCSB_" + a.idx)
              , n = e("#mCSB_" + a.idx + "_container")
              , r = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")]
              , l = [n.outerHeight(!1) - o.height(), n.outerWidth(!1) - o.width()]
              , s = [l[0] / (r[0].parent().height() - r[0].height()), l[1] / (r[1].parent().width() - r[1].width())];
            a.scrollRatio = {
                y: s[0],
                x: s[1]
            }
        }, T = function(e, t, a) {
            var o = a ? f[0] + "_expanded" : ""
              , n = e.closest(".mCSB_scrollTools");
            "active" === t ? (e.toggleClass(f[0] + " " + o),
            n.toggleClass(f[1]),
            e[0]._draggable = e[0]._draggable ? 0 : 1) : e[0]._draggable || ("hide" === t ? (e.removeClass(f[0]),
            n.removeClass(f[1])) : (e.addClass(f[0]),
            n.addClass(f[1])))
        }, k = function() {
            var t = e(this)
              , a = t.data(i)
              , o = e("#mCSB_" + a.idx)
              , n = e("#mCSB_" + a.idx + "_container")
              , r = null == a.overflowed ? n.height() : n.outerHeight(!1)
              , l = null == a.overflowed ? n.width() : n.outerWidth(!1);
            return [r > o.height(), l > o.width()]
        }, M = function() {
            var t = e(this)
              , a = t.data(i)
              , o = a.opt
              , n = e("#mCSB_" + a.idx)
              , r = e("#mCSB_" + a.idx + "_container")
              , l = [e("#mCSB_" + a.idx + "_dragger_vertical"), e("#mCSB_" + a.idx + "_dragger_horizontal")];
            if (Q(t),
            ("x" !== o.axis && !a.overflowed[0] || "y" === o.axis && a.overflowed[0]) && (l[0].add(r).css("top", 0),
            G(t, "_resetY")),
            "y" !== o.axis && !a.overflowed[1] || "x" === o.axis && a.overflowed[1]) {
                var s = dx = 0;
                "rtl" === a.langDir && (s = n.width() - r.outerWidth(!1),
                dx = Math.abs(s / a.scrollRatio.x)),
                r.css("left", s),
                l[1].css("left", dx),
                G(t, "_resetX")
            }
        }, O = function() {
            function t() {
                r = setTimeout(function() {
                    e.event.special.mousewheel ? (clearTimeout(r),
                    A.call(a[0])) : t()
                }, 100)
            }
            var a = e(this)
              , o = a.data(i)
              , n = o.opt;
            if (!o.bindEvents) {
                if (D.call(this),
                n.contentTouchScroll && L.call(this),
                W.call(this),
                n.mouseWheel.enable) {
                    var r;
                    t()
                }
                z.call(this),
                U.call(this),
                n.advanced.autoScrollOnFocus && H.call(this),
                n.scrollButtons.enable && F.call(this),
                n.keyboard.enable && q.call(this),
                o.bindEvents = !0
            }
        }, I = function() {
            var t = e(this)
              , o = t.data(i)
              , n = o.opt
              , r = i + "_" + o.idx
              , l = ".mCSB_" + o.idx + "_scrollbar"
              , s = e("#mCSB_" + o.idx + ",#mCSB_" + o.idx + "_container,#mCSB_" + o.idx + "_container_wrapper," + l + " ." + f[12] + ",#mCSB_" + o.idx + "_dragger_vertical,#mCSB_" + o.idx + "_dragger_horizontal," + l + ">a")
              , c = e("#mCSB_" + o.idx + "_container");
            n.advanced.releaseDraggableSelectors && s.add(e(n.advanced.releaseDraggableSelectors)),
            o.bindEvents && (e(a).unbind("." + r),
            s.each(function() {
                e(this).unbind("." + r)
            }),
            clearTimeout(t[0]._focusTimeout),
            $(t[0], "_focusTimeout"),
            clearTimeout(o.sequential.step),
            $(o.sequential, "step"),
            clearTimeout(c[0].onCompleteTimeout),
            $(c[0], "onCompleteTimeout"),
            o.bindEvents = !1)
        }, R = function(t) {
            var a = e(this)
              , o = a.data(i)
              , n = o.opt
              , r = e("#mCSB_" + o.idx + "_container_wrapper")
              , l = r.length ? r : e("#mCSB_" + o.idx + "_container")
              , s = [e("#mCSB_" + o.idx + "_scrollbar_vertical"), e("#mCSB_" + o.idx + "_scrollbar_horizontal")]
              , c = [s[0].find(".mCSB_dragger"), s[1].find(".mCSB_dragger")];
            "x" !== n.axis && (o.overflowed[0] && !t ? (s[0].add(c[0]).add(s[0].children("a")).css("display", "block"),
            l.removeClass(f[8] + " " + f[10])) : (n.alwaysShowScrollbar ? (2 !== n.alwaysShowScrollbar && c[0].css("display", "none"),
            l.removeClass(f[10])) : (s[0].css("display", "none"),
            l.addClass(f[10])),
            l.addClass(f[8]))),
            "y" !== n.axis && (o.overflowed[1] && !t ? (s[1].add(c[1]).add(s[1].children("a")).css("display", "block"),
            l.removeClass(f[9] + " " + f[11])) : (n.alwaysShowScrollbar ? (2 !== n.alwaysShowScrollbar && c[1].css("display", "none"),
            l.removeClass(f[11])) : (s[1].css("display", "none"),
            l.addClass(f[11])),
            l.addClass(f[9]))),
            o.overflowed[0] || o.overflowed[1] ? a.removeClass(f[5]) : a.addClass(f[5])
        }, E = function(e) {
            var t = e.type;
            switch (t) {
            case "pointerdown":
            case "MSPointerDown":
            case "pointermove":
            case "MSPointerMove":
            case "pointerup":
            case "MSPointerUp":
                return [e.originalEvent.pageY, e.originalEvent.pageX, !1];
            case "touchstart":
            case "touchmove":
            case "touchend":
                var a = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0]
                  , o = e.originalEvent.touches.length || e.originalEvent.changedTouches.length;
                return [a.pageY, a.pageX, o > 1];
            default:
                return [e.pageY, e.pageX, !1]
            }
        }, D = function() {
            function t(e) {
                var t = p.find("iframe");
                if (t.length) {
                    var a = e ? "auto" : "none";
                    t.css("pointer-events", a)
                }
            }
            function o(e, t, a, o) {
                if (p[0].idleTimer = f.scrollInertia < 233 ? 250 : 0,
                n.attr("id") === m[1])
                    var i = "x"
                      , r = (n[0].offsetLeft - t + o) * c.scrollRatio.x;
                else
                    var i = "y"
                      , r = (n[0].offsetTop - e + a) * c.scrollRatio.y;
                G(s, r.toString(), {
                    dir: i,
                    drag: !0
                })
            }
            var n, r, l, s = e(this), c = s.data(i), f = c.opt, h = i + "_" + c.idx, m = ["mCSB_" + c.idx + "_dragger_vertical", "mCSB_" + c.idx + "_dragger_horizontal"], p = e("#mCSB_" + c.idx + "_container"), g = e("#" + m[0] + ",#" + m[1]), v = f.advanced.releaseDraggableSelectors ? g.add(e(f.advanced.releaseDraggableSelectors)) : g;
            g.bind("mousedown." + h + " touchstart." + h + " pointerdown." + h + " MSPointerDown." + h, function(o) {
                if (o.stopImmediatePropagation(),
                o.preventDefault(),
                et(o)) {
                    u = !0,
                    d && (a.onselectstart = function() {
                        return !1
                    }
                    ),
                    t(!1),
                    Q(s),
                    n = e(this);
                    var i = n.offset()
                      , c = E(o)[0] - i.top
                      , h = E(o)[1] - i.left
                      , m = n.height() + i.top
                      , p = n.width() + i.left;
                    m > c && c > 0 && p > h && h > 0 && (r = c,
                    l = h),
                    T(n, "active", f.autoExpandScrollbar)
                }
            }).bind("touchmove." + h, function(e) {
                e.stopImmediatePropagation(),
                e.preventDefault();
                var t = n.offset()
                  , a = E(e)[0] - t.top
                  , i = E(e)[1] - t.left;
                o(r, l, a, i)
            }),
            e(a).bind("mousemove." + h + " pointermove." + h + " MSPointerMove." + h, function(e) {
                if (n) {
                    var t = n.offset()
                      , a = E(e)[0] - t.top
                      , i = E(e)[1] - t.left;
                    if (r === a)
                        return;
                    o(r, l, a, i)
                }
            }).add(v).bind("mouseup." + h + " touchend." + h + " pointerup." + h + " MSPointerUp." + h, function() {
                n && (T(n, "active", f.autoExpandScrollbar),
                n = null),
                u = !1,
                d && (a.onselectstart = null),
                t(!0)
            })
        }, L = function() {
            function t(e, t) {
                var a = [1.5 * t, 2 * t, t / 1.5, t / 2];
                return e > 90 ? t > 4 ? a[0] : a[3] : e > 60 ? t > 3 ? a[3] : a[2] : e > 30 ? t > 8 ? a[1] : t > 6 ? a[0] : t > 4 ? t : a[2] : t > 8 ? t : a[3]
            }
            function a(e, t, a, o, n, i) {
                e && G(_, e.toString(), {
                    dur: t,
                    scrollEasing: a,
                    dir: o,
                    overwrite: n,
                    drag: i
                })
            }
            var n, r, l, s, c, d, f, h, m, p, g, v, x, _ = e(this), S = _.data(i), w = S.opt, b = i + "_" + S.idx, C = e("#mCSB_" + S.idx), y = e("#mCSB_" + S.idx + "_container"), B = [e("#mCSB_" + S.idx + "_dragger_vertical"), e("#mCSB_" + S.idx + "_dragger_horizontal")], T = [], k = [], M = 0, O = "yx" === w.axis ? "none" : "all", I = [];
            y.bind("touchstart." + b + " pointerdown." + b + " MSPointerDown." + b, function(e) {
                if (!tt(e) || u || E(e)[2])
                    return void (o = 0);
                o = 1,
                v = 0,
                x = 0;
                var t = y.offset();
                n = E(e)[0] - t.top,
                r = E(e)[1] - t.left,
                I = [E(e)[0], E(e)[1]]
            }).bind("touchmove." + b + " pointermove." + b + " MSPointerMove." + b, function(e) {
                if (tt(e) && !u && !E(e)[2] && (e.stopImmediatePropagation(),
                !x || v)) {
                    d = K();
                    var t = C.offset()
                      , o = E(e)[0] - t.top
                      , i = E(e)[1] - t.left
                      , l = "mcsLinearOut";
                    if (T.push(o),
                    k.push(i),
                    I[2] = Math.abs(E(e)[0] - I[0]),
                    I[3] = Math.abs(E(e)[1] - I[1]),
                    S.overflowed[0])
                        var s = B[0].parent().height() - B[0].height()
                          , c = n - o > 0 && o - n > -(s * S.scrollRatio.y) && (2 * I[3] < I[2] || "yx" === w.axis);
                    if (S.overflowed[1])
                        var f = B[1].parent().width() - B[1].width()
                          , h = r - i > 0 && i - r > -(f * S.scrollRatio.x) && (2 * I[2] < I[3] || "yx" === w.axis);
                    c || h ? (e.preventDefault(),
                    v = 1) : x = 1,
                    p = "yx" === w.axis ? [n - o, r - i] : "x" === w.axis ? [null, r - i] : [n - o, null],
                    y[0].idleTimer = 250,
                    S.overflowed[0] && a(p[0], M, l, "y", "all", !0),
                    S.overflowed[1] && a(p[1], M, l, "x", O, !0)
                }
            }),
            C.bind("touchstart." + b + " pointerdown." + b + " MSPointerDown." + b, function(e) {
                if (!tt(e) || u || E(e)[2])
                    return void (o = 0);
                o = 1,
                e.stopImmediatePropagation(),
                Q(_),
                c = K();
                var t = C.offset();
                l = E(e)[0] - t.top,
                s = E(e)[1] - t.left,
                T = [],
                k = []
            }).bind("touchend." + b + " pointerup." + b + " MSPointerUp." + b, function(e) {
                if (tt(e) && !u && !E(e)[2]) {
                    e.stopImmediatePropagation(),
                    v = 0,
                    x = 0,
                    f = K();
                    var o = C.offset()
                      , n = E(e)[0] - o.top
                      , i = E(e)[1] - o.left;
                    if (!(f - d > 30)) {
                        m = 1e3 / (f - c);
                        var r = "mcsEaseOut"
                          , _ = 2.5 > m
                          , b = _ ? [T[T.length - 2], k[k.length - 2]] : [0, 0];
                        h = _ ? [n - b[0], i - b[1]] : [n - l, i - s];
                        var B = [Math.abs(h[0]), Math.abs(h[1])];
                        m = _ ? [Math.abs(h[0] / 4), Math.abs(h[1] / 4)] : [m, m];
                        var M = [Math.abs(y[0].offsetTop) - h[0] * t(B[0] / m[0], m[0]), Math.abs(y[0].offsetLeft) - h[1] * t(B[1] / m[1], m[1])];
                        p = "yx" === w.axis ? [M[0], M[1]] : "x" === w.axis ? [null, M[1]] : [M[0], null],
                        g = [4 * B[0] + w.scrollInertia, 4 * B[1] + w.scrollInertia];
                        var I = parseInt(w.contentTouchScroll) || 0;
                        p[0] = B[0] > I ? p[0] : 0,
                        p[1] = B[1] > I ? p[1] : 0,
                        S.overflowed[0] && a(p[0], g[0], r, "y", O, !1),
                        S.overflowed[1] && a(p[1], g[1], r, "x", O, !1)
                    }
                }
            })
        }, W = function() {
            function n() {
                return t.getSelection ? t.getSelection().toString() : a.selection && "Control" != a.selection.type ? a.selection.createRange().text : 0
            }
            function r(e, t, a) {
                f.type = a && l ? "stepped" : "stepless",
                f.scrollAmount = 10,
                j(s, e, t, "mcsLinearOut", a ? 60 : null)
            }
            var l, s = e(this), c = s.data(i), d = c.opt, f = c.sequential, h = i + "_" + c.idx, m = e("#mCSB_" + c.idx + "_container"), p = m.parent();
            m.bind("mousedown." + h, function() {
                o || l || (l = 1,
                u = !0)
            }).add(a).bind("mousemove." + h, function(e) {
                if (!o && l && n()) {
                    var t = m.offset()
                      , a = E(e)[0] - t.top + m[0].offsetTop
                      , i = E(e)[1] - t.left + m[0].offsetLeft;
                    a > 0 && a < p.height() && i > 0 && i < p.width() ? f.step && r("off", null, "stepped") : ("x" !== d.axis && c.overflowed[0] && (0 > a ? r("on", 38) : a > p.height() && r("on", 40)),
                    "y" !== d.axis && c.overflowed[1] && (0 > i ? r("on", 37) : i > p.width() && r("on", 39)))
                }
            }).bind("mouseup." + h, function() {
                o || (l && (l = 0,
                r("off", null)),
                u = !1)
            })
        }, A = function() {
            function t(e) {
                var t = null;
                try {
                    var a = e.contentDocument || e.contentWindow.document;
                    t = a.body.innerHTML
                } catch (o) {}
                return null !== t
            }
            var a = e(this)
              , o = a.data(i);
            if (o) {
                var n = o.opt
                  , r = i + "_" + o.idx
                  , l = e("#mCSB_" + o.idx)
                  , s = [e("#mCSB_" + o.idx + "_dragger_vertical"), e("#mCSB_" + o.idx + "_dragger_horizontal")]
                  , c = e("#mCSB_" + o.idx + "_container").find("iframe")
                  , u = l;
                c.length && c.each(function() {
                    var a = this;
                    t(a) && (u = u.add(e(a).contents().find("body")))
                }),
                u.bind("mousewheel." + r, function(t, i) {
                    if (Q(a),
                    !P(a, t.target)) {
                        var r = "auto" !== n.mouseWheel.deltaFactor ? parseInt(n.mouseWheel.deltaFactor) : d && t.deltaFactor < 100 ? 100 : t.deltaFactor || 100;
                        if ("x" === n.axis || "x" === n.mouseWheel.axis)
                            var c = "x"
                              , u = [Math.round(r * o.scrollRatio.x), parseInt(n.mouseWheel.scrollAmount)]
                              , f = "auto" !== n.mouseWheel.scrollAmount ? u[1] : u[0] >= l.width() ? .9 * l.width() : u[0]
                              , h = Math.abs(e("#mCSB_" + o.idx + "_container")[0].offsetLeft)
                              , m = s[1][0].offsetLeft
                              , p = s[1].parent().width() - s[1].width()
                              , g = t.deltaX || t.deltaY || i;
                        else
                            var c = "y"
                              , u = [Math.round(r * o.scrollRatio.y), parseInt(n.mouseWheel.scrollAmount)]
                              , f = "auto" !== n.mouseWheel.scrollAmount ? u[1] : u[0] >= l.height() ? .9 * l.height() : u[0]
                              , h = Math.abs(e("#mCSB_" + o.idx + "_container")[0].offsetTop)
                              , m = s[0][0].offsetTop
                              , p = s[0].parent().height() - s[0].height()
                              , g = t.deltaY || i;
                        "y" === c && !o.overflowed[0] || "x" === c && !o.overflowed[1] || (n.mouseWheel.invert && (g = -g),
                        n.mouseWheel.normalizeDelta && (g = 0 > g ? -1 : 1),
                        (g > 0 && 0 !== m || 0 > g && m !== p || n.mouseWheel.preventDefault) && (t.stopImmediatePropagation(),
                        t.preventDefault()),
                        G(a, (h - g * f).toString(), {
                            dir: c
                        }))
                    }
                })
            }
        }, P = function(t, a) {
            var o = a.nodeName.toLowerCase()
              , n = t.data(i).opt.mouseWheel.disableOver
              , r = ["select", "textarea"];
            return e.inArray(o, n) > -1 && !(e.inArray(o, r) > -1 && !e(a).is(":focus"))
        }, z = function() {
            var t = e(this)
              , a = t.data(i)
              , o = i + "_" + a.idx
              , n = e("#mCSB_" + a.idx + "_container")
              , r = n.parent()
              , l = e(".mCSB_" + a.idx + "_scrollbar ." + f[12]);
            l.bind("touchstart." + o + " pointerdown." + o + " MSPointerDown." + o, function() {
                u = !0
            }).bind("touchend." + o + " pointerup." + o + " MSPointerUp." + o, function() {
                u = !1
            }).bind("click." + o, function(o) {
                if (e(o.target).hasClass(f[12]) || e(o.target).hasClass("mCSB_draggerRail")) {
                    Q(t);
                    var i = e(this)
                      , l = i.find(".mCSB_dragger");
                    if (i.parent(".mCSB_scrollTools_horizontal").length > 0) {
                        if (!a.overflowed[1])
                            return;
                        var s = "x"
                          , c = o.pageX > l.offset().left ? -1 : 1
                          , d = Math.abs(n[0].offsetLeft) - .9 * c * r.width()
                    } else {
                        if (!a.overflowed[0])
                            return;
                        var s = "y"
                          , c = o.pageY > l.offset().top ? -1 : 1
                          , d = Math.abs(n[0].offsetTop) - .9 * c * r.height()
                    }
                    G(t, d.toString(), {
                        dir: s,
                        scrollEasing: "mcsEaseInOut"
                    })
                }
            })
        }, H = function() {
            var t = e(this)
              , o = t.data(i)
              , n = o.opt
              , r = i + "_" + o.idx
              , l = e("#mCSB_" + o.idx + "_container")
              , s = l.parent();
            l.bind("focusin." + r, function() {
                var o = e(a.activeElement)
                  , i = l.find(".mCustomScrollBox").length
                  , r = 0;
                o.is(n.advanced.autoScrollOnFocus) && (Q(t),
                clearTimeout(t[0]._focusTimeout),
                t[0]._focusTimer = i ? (r + 17) * i : 0,
                t[0]._focusTimeout = setTimeout(function() {
                    var e = [ot(o)[0], ot(o)[1]]
                      , a = [l[0].offsetTop, l[0].offsetLeft]
                      , i = [a[0] + e[0] >= 0 && a[0] + e[0] < s.height() - o.outerHeight(!1), a[1] + e[1] >= 0 && a[0] + e[1] < s.width() - o.outerWidth(!1)]
                      , c = "yx" !== n.axis || i[0] || i[1] ? "all" : "none";
                    "x" === n.axis || i[0] || G(t, e[0].toString(), {
                        dir: "y",
                        scrollEasing: "mcsEaseInOut",
                        overwrite: c,
                        dur: r
                    }),
                    "y" === n.axis || i[1] || G(t, e[1].toString(), {
                        dir: "x",
                        scrollEasing: "mcsEaseInOut",
                        overwrite: c,
                        dur: r
                    })
                }, t[0]._focusTimer))
            })
        }, U = function() {
            var t = e(this)
              , a = t.data(i)
              , o = i + "_" + a.idx
              , n = e("#mCSB_" + a.idx + "_container").parent();
            n.bind("scroll." + o, function() {
                (0 !== n.scrollTop() || 0 !== n.scrollLeft()) && e(".mCSB_" + a.idx + "_scrollbar").css("visibility", "hidden")
            })
        }, F = function() {
            var t = e(this)
              , a = t.data(i)
              , o = a.opt
              , n = a.sequential
              , r = i + "_" + a.idx
              , l = ".mCSB_" + a.idx + "_scrollbar"
              , s = e(l + ">a");
            s.bind("mousedown." + r + " touchstart." + r + " pointerdown." + r + " MSPointerDown." + r + " mouseup." + r + " touchend." + r + " pointerup." + r + " MSPointerUp." + r + " mouseout." + r + " pointerout." + r + " MSPointerOut." + r + " click." + r, function(i) {
                function r(e, a) {
                    n.scrollAmount = o.snapAmount || o.scrollButtons.scrollAmount,
                    j(t, e, a)
                }
                if (i.preventDefault(),
                et(i)) {
                    var l = e(this).attr("class");
                    switch (n.type = o.scrollButtons.scrollType,
                    i.type) {
                    case "mousedown":
                    case "touchstart":
                    case "pointerdown":
                    case "MSPointerDown":
                        if ("stepped" === n.type)
                            return;
                        u = !0,
                        a.tweenRunning = !1,
                        r("on", l);
                        break;
                    case "mouseup":
                    case "touchend":
                    case "pointerup":
                    case "MSPointerUp":
                    case "mouseout":
                    case "pointerout":
                    case "MSPointerOut":
                        if ("stepped" === n.type)
                            return;
                        u = !1,
                        n.dir && r("off", l);
                        break;
                    case "click":
                        if ("stepped" !== n.type || a.tweenRunning)
                            return;
                        r("on", l)
                    }
                }
            })
        }, q = function() {
            var t = e(this)
              , o = t.data(i)
              , n = o.opt
              , r = o.sequential
              , l = i + "_" + o.idx
              , s = e("#mCSB_" + o.idx)
              , c = e("#mCSB_" + o.idx + "_container")
              , d = c.parent()
              , u = "input,textarea,select,datalist,keygen,[contenteditable='true']";
            s.attr("tabindex", "0").bind("blur." + l + " keydown." + l + " keyup." + l, function(i) {
                function l(e, a) {
                    r.type = n.keyboard.scrollType,
                    r.scrollAmount = n.snapAmount || n.keyboard.scrollAmount,
                    "stepped" === r.type && o.tweenRunning || j(t, e, a)
                }
                switch (i.type) {
                case "blur":
                    o.tweenRunning && r.dir && l("off", null);
                    break;
                case "keydown":
                case "keyup":
                    var s = i.keyCode ? i.keyCode : i.which
                      , f = "on";
                    if ("x" !== n.axis && (38 === s || 40 === s) || "y" !== n.axis && (37 === s || 39 === s)) {
                        if ((38 === s || 40 === s) && !o.overflowed[0] || (37 === s || 39 === s) && !o.overflowed[1])
                            return;
                        "keyup" === i.type && (f = "off"),
                        e(a.activeElement).is(u) || (i.preventDefault(),
                        i.stopImmediatePropagation(),
                        l(f, s))
                    } else if (33 === s || 34 === s) {
                        if ((o.overflowed[0] || o.overflowed[1]) && (i.preventDefault(),
                        i.stopImmediatePropagation()),
                        "keyup" === i.type) {
                            Q(t);
                            var h = 34 === s ? -1 : 1;
                            if ("x" === n.axis || "yx" === n.axis && o.overflowed[1] && !o.overflowed[0])
                                var m = "x"
                                  , p = Math.abs(c[0].offsetLeft) - .9 * h * d.width();
                            else
                                var m = "y"
                                  , p = Math.abs(c[0].offsetTop) - .9 * h * d.height();
                            G(t, p.toString(), {
                                dir: m,
                                scrollEasing: "mcsEaseInOut"
                            })
                        }
                    } else if ((35 === s || 36 === s) && !e(a.activeElement).is(u) && ((o.overflowed[0] || o.overflowed[1]) && (i.preventDefault(),
                    i.stopImmediatePropagation()),
                    "keyup" === i.type)) {
                        if ("x" === n.axis || "yx" === n.axis && o.overflowed[1] && !o.overflowed[0])
                            var m = "x"
                              , p = 35 === s ? Math.abs(d.width() - c.outerWidth(!1)) : 0;
                        else
                            var m = "y"
                              , p = 35 === s ? Math.abs(d.height() - c.outerHeight(!1)) : 0;
                        G(t, p.toString(), {
                            dir: m,
                            scrollEasing: "mcsEaseInOut"
                        })
                    }
                }
            })
        }, j = function(t, a, o, n, r) {
            function l(e) {
                var a = "stepped" !== u.type
                  , o = r ? r : e ? a ? p / 1.5 : g : 1e3 / 60
                  , i = e ? a ? 7.5 : 40 : 2.5
                  , s = [Math.abs(h[0].offsetTop), Math.abs(h[0].offsetLeft)]
                  , d = [c.scrollRatio.y > 10 ? 10 : c.scrollRatio.y, c.scrollRatio.x > 10 ? 10 : c.scrollRatio.x]
                  , f = "x" === u.dir[0] ? s[1] + u.dir[1] * d[1] * i : s[0] + u.dir[1] * d[0] * i
                  , m = "x" === u.dir[0] ? s[1] + u.dir[1] * parseInt(u.scrollAmount) : s[0] + u.dir[1] * parseInt(u.scrollAmount)
                  , v = "auto" !== u.scrollAmount ? m : f
                  , x = n ? n : e ? a ? "mcsLinearOut" : "mcsEaseInOut" : "mcsLinear"
                  , _ = e ? !0 : !1;
                return e && 17 > o && (v = "x" === u.dir[0] ? s[1] : s[0]),
                G(t, v.toString(), {
                    dir: u.dir[0],
                    scrollEasing: x,
                    dur: o,
                    onComplete: _
                }),
                e ? void (u.dir = !1) : (clearTimeout(u.step),
                void (u.step = setTimeout(function() {
                    l()
                }, o)))
            }
            function s() {
                clearTimeout(u.step),
                $(u, "step"),
                Q(t)
            }
            var c = t.data(i)
              , d = c.opt
              , u = c.sequential
              , h = e("#mCSB_" + c.idx + "_container")
              , m = "stepped" === u.type ? !0 : !1
              , p = d.scrollInertia < 26 ? 26 : d.scrollInertia
              , g = d.scrollInertia < 1 ? 17 : d.scrollInertia;
            switch (a) {
            case "on":
                if (u.dir = [o === f[16] || o === f[15] || 39 === o || 37 === o ? "x" : "y", o === f[13] || o === f[15] || 38 === o || 37 === o ? -1 : 1],
                Q(t),
                at(o) && "stepped" === u.type)
                    return;
                l(m);
                break;
            case "off":
                s(),
                (m || c.tweenRunning && u.dir) && l(!0)
            }
        }, Y = function(t) {
            var a = e(this).data(i).opt
              , o = [];
            return "function" == typeof t && (t = t()),
            t instanceof Array ? o = t.length > 1 ? [t[0], t[1]] : "x" === a.axis ? [null, t[0]] : [t[0], null] : (o[0] = t.y ? t.y : t.x || "x" === a.axis ? null : t,
            o[1] = t.x ? t.x : t.y || "y" === a.axis ? null : t),
            "function" == typeof o[0] && (o[0] = o[0]()),
            "function" == typeof o[1] && (o[1] = o[1]()),
            o
        }, X = function(t, a) {
            if (null != t && "undefined" != typeof t) {
                var o = e(this)
                  , n = o.data(i)
                  , r = n.opt
                  , l = e("#mCSB_" + n.idx + "_container")
                  , s = l.parent()
                  , c = typeof t;
                a || (a = "x" === r.axis ? "x" : "y");
                var d = "x" === a ? l.outerWidth(!1) : l.outerHeight(!1)
                  , u = "x" === a ? l[0].offsetLeft : l[0].offsetTop
                  , f = "x" === a ? "left" : "top";
                switch (c) {
                case "function":
                    return t();
                case "object":
                    var m = t.jquery ? t : e(t);
                    if (!m.length)
                        return;
                    return "x" === a ? ot(m)[1] : ot(m)[0];
                case "string":
                case "number":
                    if (at(t))
                        return Math.abs(t);
                    if (-1 !== t.indexOf("%"))
                        return Math.abs(d * parseInt(t) / 100);
                    if (-1 !== t.indexOf("-="))
                        return Math.abs(u - parseInt(t.split("-=")[1]));
                    if (-1 !== t.indexOf("+=")) {
                        var p = u + parseInt(t.split("+=")[1]);
                        return p >= 0 ? 0 : Math.abs(p)
                    }
                    if (-1 !== t.indexOf("px") && at(t.split("px")[0]))
                        return Math.abs(t.split("px")[0]);
                    if ("top" === t || "left" === t)
                        return 0;
                    if ("bottom" === t)
                        return Math.abs(s.height() - l.outerHeight(!1));
                    if ("right" === t)
                        return Math.abs(s.width() - l.outerWidth(!1));
                    if ("first" === t || "last" === t) {
                        var m = l.find(":" + t);
                        return "x" === a ? ot(m)[1] : ot(m)[0]
                    }
                    return e(t).length ? "x" === a ? ot(e(t))[1] : ot(e(t))[0] : (l.css(f, t),
                    void h.update.call(null, o[0]))
                }
            }
        }, N = function(t) {
            function a() {
                clearTimeout(u[0].autoUpdate),
                u[0].autoUpdate = setTimeout(function() {
                    return d.advanced.updateOnSelectorChange && (m = r(),
                    m !== S) ? (l(3),
                    void (S = m)) : (d.advanced.updateOnContentResize && (p = [u.outerHeight(!1), u.outerWidth(!1), v.height(), v.width(), _()[0], _()[1]],
                    (p[0] !== w[0] || p[1] !== w[1] || p[2] !== w[2] || p[3] !== w[3] || p[4] !== w[4] || p[5] !== w[5]) && (l(p[0] !== w[0] || p[1] !== w[1]),
                    w = p)),
                    d.advanced.updateOnImageLoad && (g = o(),
                    g !== b && (u.find("img").each(function() {
                        n(this)
                    }),
                    b = g)),
                    void ((d.advanced.updateOnSelectorChange || d.advanced.updateOnContentResize || d.advanced.updateOnImageLoad) && a()))
                }, 60)
            }
            function o() {
                var e = 0;
                return d.advanced.updateOnImageLoad && (e = u.find("img").length),
                e
            }
            function n(t) {
                function a(e, t) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                }
                function o() {
                    this.onload = null,
                    e(t).addClass(f[2]),
                    l(2)
                }
                if (e(t).hasClass(f[2]))
                    return void l();
                var n = new Image;
                n.onload = a(n, o),
                n.src = t.src
            }
            function r() {
                d.advanced.updateOnSelectorChange === !0 && (d.advanced.updateOnSelectorChange = "*");
                var t = 0
                  , a = u.find(d.advanced.updateOnSelectorChange);
                return d.advanced.updateOnSelectorChange && a.length > 0 && a.each(function() {
                    t += e(this).height() + e(this).width()
                }),
                t
            }
            function l(e) {
                clearTimeout(u[0].autoUpdate),
                h.update.call(null, s[0], e)
            }
            var s = e(this)
              , c = s.data(i)
              , d = c.opt
              , u = e("#mCSB_" + c.idx + "_container");
            if (t)
                return clearTimeout(u[0].autoUpdate),
                void $(u[0], "autoUpdate");
            var m, p, g, v = u.parent(), x = [e("#mCSB_" + c.idx + "_scrollbar_vertical"), e("#mCSB_" + c.idx + "_scrollbar_horizontal")], _ = function() {
                return [x[0].is(":visible") ? x[0].outerHeight(!0) : 0, x[1].is(":visible") ? x[1].outerWidth(!0) : 0]
            }, S = r(), w = [u.outerHeight(!1), u.outerWidth(!1), v.height(), v.width(), _()[0], _()[1]], b = o();
            a()
        }, V = function(e, t, a) {
            return Math.round(e / t) * t - a
        }, Q = function(t) {
            var a = t.data(i)
              , o = e("#mCSB_" + a.idx + "_container,#mCSB_" + a.idx + "_container_wrapper,#mCSB_" + a.idx + "_dragger_vertical,#mCSB_" + a.idx + "_dragger_horizontal");
            o.each(function() {
                Z.call(this)
            })
        }, G = function(t, a, o) {
            function n(e) {
                return s && c.callbacks[e] && "function" == typeof c.callbacks[e]
            }
            function r() {
                return [c.callbacks.alwaysTriggerOffsets || _ >= S[0] + b, c.callbacks.alwaysTriggerOffsets || -C >= _]
            }
            function l() {
                var e = [h[0].offsetTop, h[0].offsetLeft]
                  , a = [v[0].offsetTop, v[0].offsetLeft]
                  , n = [h.outerHeight(!1), h.outerWidth(!1)]
                  , i = [f.height(), f.width()];
                t[0].mcs = {
                    content: h,
                    top: e[0],
                    left: e[1],
                    draggerTop: a[0],
                    draggerLeft: a[1],
                    topPct: Math.round(100 * Math.abs(e[0]) / (Math.abs(n[0]) - i[0])),
                    leftPct: Math.round(100 * Math.abs(e[1]) / (Math.abs(n[1]) - i[1])),
                    direction: o.dir
                }
            }
            var s = t.data(i)
              , c = s.opt
              , d = {
                trigger: "internal",
                dir: "y",
                scrollEasing: "mcsEaseOut",
                drag: !1,
                dur: c.scrollInertia,
                overwrite: "all",
                callbacks: !0,
                onStart: !0,
                onUpdate: !0,
                onComplete: !0
            }
              , o = e.extend(d, o)
              , u = [o.dur, o.drag ? 0 : o.dur]
              , f = e("#mCSB_" + s.idx)
              , h = e("#mCSB_" + s.idx + "_container")
              , m = h.parent()
              , p = c.callbacks.onTotalScrollOffset ? Y.call(t, c.callbacks.onTotalScrollOffset) : [0, 0]
              , g = c.callbacks.onTotalScrollBackOffset ? Y.call(t, c.callbacks.onTotalScrollBackOffset) : [0, 0];
            if (s.trigger = o.trigger,
            (0 !== m.scrollTop() || 0 !== m.scrollLeft()) && (e(".mCSB_" + s.idx + "_scrollbar").css("visibility", "visible"),
            m.scrollTop(0).scrollLeft(0)),
            "_resetY" !== a || s.contentReset.y || (n("onOverflowYNone") && c.callbacks.onOverflowYNone.call(t[0]),
            s.contentReset.y = 1),
            "_resetX" !== a || s.contentReset.x || (n("onOverflowXNone") && c.callbacks.onOverflowXNone.call(t[0]),
            s.contentReset.x = 1),
            "_resetY" !== a && "_resetX" !== a) {
                switch (!s.contentReset.y && t[0].mcs || !s.overflowed[0] || (n("onOverflowY") && c.callbacks.onOverflowY.call(t[0]),
                s.contentReset.x = null),
                !s.contentReset.x && t[0].mcs || !s.overflowed[1] || (n("onOverflowX") && c.callbacks.onOverflowX.call(t[0]),
                s.contentReset.x = null),
                c.snapAmount && (a = V(a, c.snapAmount, c.snapOffset)),
                o.dir) {
                case "x":
                    var v = e("#mCSB_" + s.idx + "_dragger_horizontal")
                      , x = "left"
                      , _ = h[0].offsetLeft
                      , S = [f.width() - h.outerWidth(!1), v.parent().width() - v.width()]
                      , w = [a, 0 === a ? 0 : a / s.scrollRatio.x]
                      , b = p[1]
                      , C = g[1]
                      , y = b > 0 ? b / s.scrollRatio.x : 0
                      , B = C > 0 ? C / s.scrollRatio.x : 0;
                    break;
                case "y":
                    var v = e("#mCSB_" + s.idx + "_dragger_vertical")
                      , x = "top"
                      , _ = h[0].offsetTop
                      , S = [f.height() - h.outerHeight(!1), v.parent().height() - v.height()]
                      , w = [a, 0 === a ? 0 : a / s.scrollRatio.y]
                      , b = p[0]
                      , C = g[0]
                      , y = b > 0 ? b / s.scrollRatio.y : 0
                      , B = C > 0 ? C / s.scrollRatio.y : 0
                }
                w[1] < 0 || 0 === w[0] && 0 === w[1] ? w = [0, 0] : w[1] >= S[1] ? w = [S[0], S[1]] : w[0] = -w[0],
                t[0].mcs || (l(),
                n("onInit") && c.callbacks.onInit.call(t[0])),
                clearTimeout(h[0].onCompleteTimeout),
                (s.tweenRunning || !(0 === _ && w[0] >= 0 || _ === S[0] && w[0] <= S[0])) && (J(v[0], x, Math.round(w[1]), u[1], o.scrollEasing),
                J(h[0], x, Math.round(w[0]), u[0], o.scrollEasing, o.overwrite, {
                    onStart: function() {
                        o.callbacks && o.onStart && !s.tweenRunning && (n("onScrollStart") && (l(),
                        c.callbacks.onScrollStart.call(t[0])),
                        s.tweenRunning = !0,
                        T(v),
                        s.cbOffsets = r())
                    },
                    onUpdate: function() {
                        o.callbacks && o.onUpdate && n("whileScrolling") && (l(),
                        c.callbacks.whileScrolling.call(t[0]))
                    },
                    onComplete: function() {
                        if (o.callbacks && o.onComplete) {
                            "yx" === c.axis && clearTimeout(h[0].onCompleteTimeout);
                            var e = h[0].idleTimer || 0;
                            h[0].onCompleteTimeout = setTimeout(function() {
                                n("onScroll") && (l(),
                                c.callbacks.onScroll.call(t[0])),
                                n("onTotalScroll") && w[1] >= S[1] - y && s.cbOffsets[0] && (l(),
                                c.callbacks.onTotalScroll.call(t[0])),
                                n("onTotalScrollBack") && w[1] <= B && s.cbOffsets[1] && (l(),
                                c.callbacks.onTotalScrollBack.call(t[0])),
                                s.tweenRunning = !1,
                                h[0].idleTimer = 0,
                                T(v, "hide")
                            }, e)
                        }
                    }
                }))
            }
        }, J = function(e, a, o, n, i, r, l) {
            function s() {
                b.stop || (_ || p.call(),
                _ = K() - x,
                c(),
                _ >= b.time && (b.time = _ > b.time ? _ + h - (_ - b.time) : _ + h - 1,
                b.time < _ + 1 && (b.time = _ + 1)),
                b.time < n ? b.id = m(s) : v.call())
            }
            function c() {
                n > 0 ? (b.currVal = f(b.time, S, C, n, i),
                w[a] = Math.round(b.currVal) + "px") : w[a] = o + "px",
                g.call()
            }
            function d() {
                h = 1e3 / 60,
                b.time = _ + h,
                m = t.requestAnimationFrame ? t.requestAnimationFrame : function(e) {
                    return c(),
                    setTimeout(e, .01)
                }
                ,
                b.id = m(s)
            }
            function u() {
                null != b.id && (t.requestAnimationFrame ? t.cancelAnimationFrame(b.id) : clearTimeout(b.id),
                b.id = null)
            }
            function f(e, t, a, o, n) {
                switch (n) {
                case "linear":
                case "mcsLinear":
                    return a * e / o + t;
                case "mcsLinearOut":
                    return e /= o,
                    e--,
                    a * Math.sqrt(1 - e * e) + t;
                case "easeInOutSmooth":
                    return e /= o / 2,
                    1 > e ? a / 2 * e * e + t : (e--,
                    -a / 2 * (e * (e - 2) - 1) + t);
                case "easeInOutStrong":
                    return e /= o / 2,
                    1 > e ? a / 2 * Math.pow(2, 10 * (e - 1)) + t : (e--,
                    a / 2 * (-Math.pow(2, -10 * e) + 2) + t);
                case "easeInOut":
                case "mcsEaseInOut":
                    return e /= o / 2,
                    1 > e ? a / 2 * e * e * e + t : (e -= 2,
                    a / 2 * (e * e * e + 2) + t);
                case "easeOutSmooth":
                    return e /= o,
                    e--,
                    -a * (e * e * e * e - 1) + t;
                case "easeOutStrong":
                    return a * (-Math.pow(2, -10 * e / o) + 1) + t;
                case "easeOut":
                case "mcsEaseOut":
                default:
                    var i = (e /= o) * e
                      , r = i * e;
                    return t + a * (.499999999999997 * r * i + -2.5 * i * i + 5.5 * r + -6.5 * i + 4 * e)
                }
            }
            e._mTween || (e._mTween = {
                top: {},
                left: {}
            });
            var h, m, l = l || {}, p = l.onStart || function() {}
            , g = l.onUpdate || function() {}
            , v = l.onComplete || function() {}
            , x = K(), _ = 0, S = e.offsetTop, w = e.style, b = e._mTween[a];
            "left" === a && (S = e.offsetLeft);
            var C = o - S;
            b.stop = 0,
            "none" !== r && u(),
            d()
        }, K = function() {
            return t.performance && t.performance.now ? t.performance.now() : t.performance && t.performance.webkitNow ? t.performance.webkitNow() : Date.now ? Date.now() : (new Date).getTime()
        }, Z = function() {
            var e = this;
            e._mTween || (e._mTween = {
                top: {},
                left: {}
            });
            for (var a = ["top", "left"], o = 0; o < a.length; o++) {
                var n = a[o];
                e._mTween[n].id && (t.requestAnimationFrame ? t.cancelAnimationFrame(e._mTween[n].id) : clearTimeout(e._mTween[n].id),
                e._mTween[n].id = null,
                e._mTween[n].stop = 1)
            }
        }, $ = function(e, t) {
            try {
                delete e[t]
            } catch (a) {
                e[t] = null
            }
        }, et = function(e) {
            return !(e.which && 1 !== e.which)
        }, tt = function(e) {
            var t = e.originalEvent.pointerType;
            return !(t && "touch" !== t && 2 !== t)
        }, at = function(e) {
            return !isNaN(parseFloat(e)) && isFinite(e)
        }, ot = function(e) {
            var t = e.parents(".mCSB_container");
            return [e.offset().top - t.offset().top, e.offset().left - t.offset().left]
        };
        e.fn[n] = function(t) {
            return h[t] ? h[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("Method " + t + " does not exist") : h.init.apply(this, arguments)
        }
        ,
        e[n] = function(t) {
            return h[t] ? h[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("Method " + t + " does not exist") : h.init.apply(this, arguments)
        }
        ,
        e[n].defaults = l,
        t[n] = !0,
        e(t).load(function() {
            e(r)[n](),
            e.extend(e.expr[":"], {
                mcsInView: e.expr[":"].mcsInView || function(t) {
                    var a, o, n = e(t), i = n.parents(".mCSB_container");
                    if (i.length)
                        return a = i.parent(),
                        o = [i[0].offsetTop, i[0].offsetLeft],
                        o[0] + ot(n)[0] >= 0 && o[0] + ot(n)[0] < a.height() - n.outerHeight(!1) && o[1] + ot(n)[1] >= 0 && o[1] + ot(n)[1] < a.width() - n.outerWidth(!1)
                }
                ,
                mcsOverflow: e.expr[":"].mcsOverflow || function(t) {
                    var a = e(t).data(i);
                    if (a)
                        return a.overflowed[0] || a.overflowed[1]
                }
            })
        })
    })
}(jQuery, window, document);
// EZPZ Tooltip v1.0; Copyright (c) 2009 Mike Enriquez, http://theezpzway.com; Released under the MIT License
(function($) {
    $.fn.ezpz_tooltip = function(options) {
        var settings = $.extend({}, $.fn.ezpz_tooltip.defaults, options);
        return this.each(function() {
            var content = $("#" + getContentId(this.id));
            var targetMousedOver = $(this).mouseover(function() {
                settings.beforeShow(content, $(this));
            }).mousemove(function(e) {
                var contentInfo = getElementDimensionsAndPosition(content);
                var targetInfo = getElementDimensionsAndPosition($(this));
                var contentInfo = $.fn.ezpz_tooltip.positions[settings.contentPosition](contentInfo, e.pageX, e.pageY, settings.offset, targetInfo);
                var contentInfo = keepInWindow(contentInfo);
                content.css('top', contentInfo['top']);
                content.css('left', contentInfo['left']);
                settings.showContent(content);
            });
            if (settings.stayOnContent && this.id != "") {
                $("#" + this.id + ", #" + getContentId(this.id)).mouseover(function() {
                    content.css('display', 'block');
                }).mouseout(function() {
                    content.css('display', 'none');
                    settings.afterHide();
                });
            } else {
                targetMousedOver.mouseout(function() {
                    settings.hideContent(content);
                    settings.afterHide();
                })
            }
        });
        function getContentId(targetId) {
            if (settings.contentId == "") {
                var name = targetId.split('-')[0];
                var id = targetId.split('-')[2];
                return name + '-content-' + id;
            } else {
                return settings.contentId;
            }
        }
        ;function getElementDimensionsAndPosition(element) {
            var height = element.outerHeight(true);
            var width = element.outerWidth(true);
            var top = $(element).offset().top;
            var left = $(element).offset().left;
            var info = new Array();
            info['height'] = height;
            info['width'] = width;
            info['top'] = top;
            info['left'] = left;
            return info;
        }
        ;function keepInWindow(contentInfo) {
            var windowWidth = $(window).width();
            var windowTop = $(window).scrollTop();
            var output = new Array();
            output = contentInfo;
            if (contentInfo['top'] < windowTop) {
                output['top'] = windowTop;
            }
            if ((contentInfo['left'] + contentInfo['width']) > windowWidth) {
                output['left'] = windowWidth - contentInfo['width'];
            }
            if (contentInfo['left'] < 0) {
                output['left'] = 0;
            }
            return output;
        }
        ;
    }
    ;
    $.fn.ezpz_tooltip.positionContent = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = mouseY - offset - contentInfo['height'];
        contentInfo['left'] = mouseX + offset;
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions = {
        aboveRightFollow: function(contentInfo, mouseX, mouseY, offset, targetInfo) {
            contentInfo['top'] = mouseY - offset - contentInfo['height'];
            contentInfo['left'] = mouseX + offset;
            return contentInfo;
        }
    };
    $.fn.ezpz_tooltip.defaults = {
        contentPosition: 'aboveRightFollow',
        stayOnContent: false,
        offset: 10,
        contentId: "",
        beforeShow: function(content) {},
        showContent: function(content) {
            content.show();
        },
        hideContent: function(content) {
            content.hide();
        },
        afterHide: function() {}
    };
}
)(jQuery);
(function($) {
    $.fn.ezpz_tooltip.positions.aboveFollow = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = mouseY - offset - contentInfo['height'];
        contentInfo['left'] = mouseX - (contentInfo['width'] / 2);
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions.rightFollow = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = mouseY - (contentInfo['height'] / 2);
        contentInfo['left'] = mouseX + offset;
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions.belowRightFollow = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = mouseY + offset;
        contentInfo['left'] = mouseX + offset;
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions.belowFollow = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = mouseY + offset;
        contentInfo['left'] = mouseX - (contentInfo['width'] / 2);
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions.aboveStatic = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = targetInfo['top'] - offset - contentInfo['height'];
        contentInfo['left'] = (targetInfo['left'] + (targetInfo['width'] / 2)) - (contentInfo['width'] / 2);
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions.rightStatic = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = (targetInfo['top'] + (targetInfo['height'] / 2)) - (contentInfo['height'] / 2);
        contentInfo['left'] = targetInfo['left'] + targetInfo['width'] + offset;
        return contentInfo;
    }
    ;
    $.fn.ezpz_tooltip.positions.belowStatic = function(contentInfo, mouseX, mouseY, offset, targetInfo) {
        contentInfo['top'] = targetInfo['top'] + targetInfo['height'] + offset;
        contentInfo['left'] = (targetInfo['left'] + (targetInfo['width'] / 2)) - (contentInfo['width'] / 2);
        return contentInfo;
    }
    ;
}
)(jQuery);
//XXX: CSS Plugin - pseudo-classes - selectivizr v1.0.3b - selectivizr.com
(function(e) {
    function M(e) {
        return e.replace(m, O).replace(g, function(e, t, n) {
            var r = n.split(",");
            for (var i = 0, s = r.length; i < s; i++) {
                var o = q(r[i]) + A
                  , u = [];
                r[i] = o.replace(y, function(e, t, n, r, i) {
                    if (t) {
                        if (u.length > 0) {
                            a.push({
                                selector: o.substring(0, i),
                                patches: u
                            });
                            u = []
                        }
                        return t
                    }
                    var s = n ? D(n) : _(r);
                    if (s) {
                        u.push(s);
                        return "." + s.className
                    }
                    return e
                })
            }
            return t + r.join(",")
        })
    }
    function _(e) {
        return !x || x.test(e) ? {
            className: B(e),
            applyClass: !0
        } : null
    }
    function D(t) {
        var r = !0, s = B(t.slice(1)), o = t.substring(0, 5) == ":not(", a, f;
        o && (t = t.slice(5, -1));
        var l = t.indexOf("(");
        l > -1 && (t = t.substring(0, l));
        if (t.charAt(0) == ":")
            switch (t.slice(1)) {
            case "root":
                r = function(e) {
                    return o ? e != n : e == n
                }
                ;
                break;
            case "target":
                if (i == 8) {
                    r = function(t) {
                        var n = function() {
                            var e = location.hash
                              , n = e.slice(1);
                            return o ? e == L || t.id != n : e != L && t.id == n
                        };
                        z(e, "hashchange", function() {
                            R(t, s, n())
                        });
                        return n()
                    }
                    ;
                    break
                }
                return !1;
            case "checked":
                r = function(e) {
                    S.test(e.type) && z(e, "propertychange", function() {
                        event.propertyName == "checked" && R(e, s, e.checked !== o)
                    });
                    return e.checked !== o
                }
                ;
                break;
            case "disabled":
                o = !o;
            case "enabled":
                r = function(e) {
                    if (E.test(e.tagName)) {
                        z(e, "propertychange", function() {
                            event.propertyName == "$disabled" && R(e, s, e.$disabled === o)
                        });
                        u.push(e);
                        e.$disabled = e.disabled;
                        return e.disabled === o
                    }
                    return t == ":enabled" ? o : !o
                }
                ;
                break;
            case "focus":
                a = "focus";
                f = "blur";
            case "hover":
                if (!a) {
                    a = "mouseenter";
                    f = "mouseleave"
                }
                r = function(e) {
                    z(e, o ? f : a, function() {
                        R(e, s, !0)
                    });
                    z(e, o ? a : f, function() {
                        R(e, s, !1)
                    });
                    return o
                }
                ;
                break;
            default:
                if (!v.test(t))
                    return !1
            }
        return {
            className: s,
            applyClass: r
        }
    }
    function P() {
        var e, t, n, r;
        for (var i = 0; i < a.length; i++) {
            t = a[i].selector;
            n = a[i].patches;
            r = t.replace(b, L);
            if (r == L || r.charAt(r.length - 1) == A)
                r += "*";
            try {
                e = o(r)
            } catch (s) {
                j("Selector '" + t + "' threw exception '" + s + "'")
            }
            if (e)
                for (var u = 0, f = e.length; u < f; u++) {
                    var l = e[u]
                      , c = l.className;
                    for (var h = 0, p = n.length; h < p; h++) {
                        var d = n[h];
                        H(l, d) || d.applyClass && (d.applyClass === !0 || d.applyClass(l) === !0) && (c = U(c, d.className, !0))
                    }
                    l.className = c
                }
        }
    }
    function H(e, t) {
        return (new RegExp("(^|\\s)" + t.className + "(\\s|$)")).test(e.className)
    }
    function B(e) {
        return c + "-" + (i == 6 && l ? f++ : e.replace(w, function(e) {
            return e.charCodeAt(0)
        }))
    }
    function j(t) {
        e.console && e.console.log(t)
    }
    function F(e) {
        return e.replace(k, O)
    }
    function I(e) {
        return F(e).replace(C, A)
    }
    function q(e) {
        return I(e.replace(T, O).replace(N, O))
    }
    function R(e, t, n) {
        var r = e.className
          , i = U(r, t, n);
        if (i != r) {
            e.className = i;
            e.parentNode.className += L
        }
    }
    function U(e, t, n) {
        var r = RegExp("(^|\\s)" + t + "(\\s|$)")
          , i = r.test(e);
        return n ? i ? e : e + A + t : i ? F(e.replace(r, O)) : e
    }
    function z(e, t, n) {
        e.attachEvent("on" + t, n)
    }
    function W() {
        if (e.XMLHttpRequest)
            return new XMLHttpRequest;
        try {
            return new ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {
            return null
        }
    }
    function X(e) {
        r.open("GET", e, !1);
        r.send();
        return r.status == 200 ? r.responseText : L
    }
    function V(e, t, n) {
        function r(e) {
            return e.substring(0, e.indexOf("//"))
        }
        function i(e) {
            return e.substring(0, e.indexOf("/", 8))
        }
        t || (t = G);
        e.substring(0, 2) == "//" && (e = r(t) + e);
        if (/^https?:\/\//i.test(e))
            return !n && i(t) != i(e) ? null : e;
        if (e.charAt(0) == "/")
            return i(t) + e;
        var s = t.split(/[?#]/)[0];
        e.charAt(0) != "?" && s.charAt(s.length - 1) != "/" && (s = s.substring(0, s.lastIndexOf("/") + 1));
        return s + e
    }
    function $(e) {
        return e ? X(e).replace(h, L).replace(p, function(t, n, r, i, s, o) {
            var u = $(V(r || s, e));
            return o ? "@media " + o + " {" + u + "}" : u
        }).replace(d, function(t, n, r, i) {
            r = r || L;
            return n ? t : " url(" + r + V(i, e, !0) + r + ") "
        }) : L
    }
    function J() {
        var e, n;
        for (var r = 0; r < t.styleSheets.length; r++) {
            n = t.styleSheets[r];
            if (n.href != L) {
                e = V(n.href);
                e && (n.cssText = n.rawCssText = M($(e)))
            }
        }
    }
    function K() {
        P();
        u.length > 0 && setInterval(function() {
            for (var e = 0, t = u.length; e < t; e++) {
                var n = u[e];
                if (n.disabled !== n.$disabled)
                    if (n.disabled) {
                        n.disabled = !1;
                        n.$disabled = !0;
                        n.disabled = !0
                    } else
                        n.$disabled = n.disabled
            }
        }, 250)
    }
    function Y(e, r) {
        var i = !1
          , s = !0
          , o = function(n) {
            if (n.type == "readystatechange" && t.readyState != "complete")
                return;
            (n.type == "load" ? e : t).detachEvent("on" + n.type, o, !1);
            !i && (i = !0) && r.call(e, n.type || n)
        }
          , u = function() {
            try {
                n.doScroll("left")
            } catch (e) {
                setTimeout(u, 50);
                return
            }
            o("poll")
        };
        if (t.readyState == "complete")
            r.call(e, L);
        else {
            if (t.createEventObject && n.doScroll) {
                try {
                    s = !e.frameElement
                } catch (a) {}
                s && u()
            }
            z(t, "readystatechange", o);
            z(e, "load", o)
        }
    }
    return
}
)(this);
//XXX: CSS Plugin - media reponsive - response.js 0.9.1+201410311050 - https://github.com/ryanve/response.js
!function(a, b, c) {
    var d = a.jQuery || a.Zepto || a.ender || a.elo;
    "undefined" != typeof module && module.exports ? module.exports = c(d) : a[b] = c(d)
}(this, "Response", function(a) {
    function b(a) {
        return a === +a
    }
    function c(a, b) {
        return function() {
            return a.apply(b, arguments)
        }
    }
    function d(a, b) {
        var c = this.call();
        return c >= (a || 0) && (!b || b >= c)
    }
    function e(a, b, c) {
        for (var d = [], e = a.length, f = 0; e > f; )
            d[f] = b.call(c, a[f], f++, a);
        return d
    }
    function f(a) {
        return a ? i("string" == typeof a ? a.split(" ") : a) : []
    }
    function g(a, b, c) {
        if (null == a)
            return a;
        for (var d = a.length, e = 0; d > e; )
            b.call(c || a[e], a[e], e++, a);
        return a
    }
    function h(a, b, c) {
        null == b && (b = ""),
        null == c && (c = "");
        for (var d = [], e = a.length, f = 0; e > f; f++)
            null == a[f] || d.push(b + a[f] + c);
        return d
    }
    function i(a, b, c) {
        var d, e, f, g = [], h = 0, i = 0, j = "function" == typeof b, k = !0 === c;
        for (e = a && a.length,
        c = k ? null : c; e > i; i++)
            f = a[i],
            d = j ? !b.call(c, f, i, a) : b ? typeof f !== b : !f,
            d === k && (g[h++] = f);
        return g
    }
    function j(a, c) {
        if (null == a || null == c)
            return a;
        if ("object" == typeof c && b(c.length))
            _.apply(a, i(c, "undefined", !0));
        else
            for (var d in c)
                cb.call(c, d) && void 0 !== c[d] && (a[d] = c[d]);
        return a
    }
    function k(a, c, d) {
        return null == a ? a : ("object" == typeof a && !a.nodeType && b(a.length) ? g(a, c, d) : c.call(d || a, a),
        a)
    }
    function l(a) {
        var b = T.devicePixelRatio;
        return null == a ? b || (l(2) ? 2 : l(1.5) ? 1.5 : l(1) ? 1 : 0) : isFinite(a) ? b && b > 0 ? b >= a : (a = "only all and (min--moz-device-pixel-ratio:" + a + ")",
        zb(a) ? !0 : zb(a.replace("-moz-", ""))) : !1
    }
    function m(a) {
        return a.replace(tb, "$1").replace(sb, function(a, b) {
            return b.toUpperCase()
        })
    }
    function n(a) {
        return "data-" + (a ? a.replace(tb, "$1").replace(rb, "$1-$2").toLowerCase() : a)
    }
    function o(a) {
        var b;
        return "string" == typeof a && a ? "false" === a ? !1 : "true" === a ? !0 : "null" === a ? null : "undefined" === a || (b = +a) || 0 === b || "NaN" === a ? b : a : a
    }
    function p(a) {
        return !a || a.nodeType ? a : a[0]
    }
    function q(a, b, c) {
        var d, e, f, g, h;
        if (a.attributes)
            for (d = "boolean" == typeof c ? /^data-/ : d,
            g = 0,
            h = a.attributes.length; h > g; )
                (f = a.attributes[g++]) && (e = "" + f.name,
                d && d.test(e) !== c || null == f.value || b.call(a, f.value, e, f))
    }
    function r(a) {
        var b;
        if (a && 1 === a.nodeType)
            return (b = Y && a.dataset) ? b : (b = {},
            q(a, function(a, c) {
                b[m(c)] = "" + a
            }, !0),
            b)
    }
    function s(a, b, c) {
        for (var d in b)
            cb.call(b, d) && c(a, d, b[d])
    }
    function t(a, b, c) {
        if (a = p(a),
        a && a.setAttribute) {
            if (void 0 === b && c === b)
                return r(a);
            var d = db(b) && n(b[0]);
            if ("object" != typeof b || d) {
                if (b = d || n(b),
                !b)
                    return;
                return void 0 === c ? (b = a.getAttribute(b),
                null == b ? c : d ? o(b) : "" + b) : (a.setAttribute(b, c = "" + c),
                c)
            }
            b && s(a, b, t)
        }
    }
    function u(a, b) {
        b = f(b),
        k(a, function(a) {
            g(b, function(b) {
                a.removeAttribute(n(b))
            })
        })
    }
    function v(a) {
        for (var b, c = [], d = 0, e = a.length; e > d; )
            (b = a[d++]) && c.push("[" + n(b.replace(qb, "").replace(".", "\\.")) + "]");
        return c.join()
    }
    function w(b) {
        return a(v(f(b)))
    }
    function x() {
        return window.pageXOffset || V.scrollLeft
    }
    function y() {
        return window.pageYOffset || V.scrollTop
    }
    function z(a, b) {
        var c = a.getBoundingClientRect ? a.getBoundingClientRect() : {};
        return b = "number" == typeof b ? b || 0 : 0,
        {
            top: (c.top || 0) - b,
            left: (c.left || 0) - b,
            bottom: (c.bottom || 0) + b,
            right: (c.right || 0) + b
        }
    }
    function A(a, b) {
        var c = z(p(a), b);
        return !!c && c.right >= 0 && c.left <= Ab()
    }
    function B(a, b) {
        var c = z(p(a), b);
        return !!c && c.bottom >= 0 && c.top <= Bb()
    }
    function C(a, b) {
        var c = z(p(a), b);
        return !!c && c.bottom >= 0 && c.top <= Bb() && c.right >= 0 && c.left <= Ab()
    }
    function D(a) {
        var b = {
            img: 1,
            input: 1,
            source: 3,
            embed: 3,
            track: 3,
            iframe: 5,
            audio: 5,
            video: 5,
            script: 5
        }
          , c = b[a.nodeName.toLowerCase()] || -1;
        return 4 > c ? c : null != a.getAttribute("src") ? 5 : -5
    }
    function E(a, b, c) {
        var d;
        if (!a || null == b)
            throw new TypeError("@store");
        return c = "string" == typeof c && c,
        k(a, function(a) {
            d = c ? a.getAttribute(c) : 0 < D(a) ? a.getAttribute("src") : a.innerHTML,
            null == d ? u(a, b) : t(a, b, d)
        }),
        N
    }
    function F(a, b) {
        var c = [];
        return a && b && g(f(b), function(b) {
            c.push(t(a, b))
        }, a),
        c
    }
    function G(a, b) {
        return "string" == typeof a && "function" == typeof b && (fb[a] = b,
        gb[a] = 1),
        N
    }
    function H(a) {
        return X.on("resize", a),
        N
    }
    function I(a, b) {
        var c, d, e = wb.crossover;
        return "function" == typeof a && (c = b,
        b = a,
        a = c),
        d = a ? "" + a + e : e,
        X.on(d, b),
        N
    }
    function J(a) {
        return k(a, function(a) {
            W(a),
            H(a)
        }),
        N
    }
    function K(a) {
        return k(a, function(a) {
            if ("object" != typeof a)
                throw new TypeError("@create");
            var b, c = ub(O).configure(a), d = c.verge, e = c.breakpoints, f = vb("scroll"), h = vb("resize");
            e.length && (b = e[0] || e[1] || !1,
            W(function() {
                function a() {
                    c.reset(),
                    g(c.$e, function(a, b) {
                        c[b].decideValue().updateDOM()
                    }).trigger(i)
                }
                function e() {
                    g(c.$e, function(a, b) {
                        C(c[b].$e, d) && c[b].updateDOM()
                    })
                }
                var i = wb.allLoaded
                  , j = !!c.lazy;
                g(c.target().$e, function(a, b) {
                    c[b] = ub(c).prepareData(a),
                    (!j || C(c[b].$e, d)) && c[b].updateDOM()
                }),
                c.dynamic && (c.custom || lb > b) && H(a, h),
                j && (X.on(f, e),
                c.$e.one(i, function() {
                    X.off(f, e)
                }))
            }))
        }),
        N
    }
    function L(a) {
        return P[Q] === N && (P[Q] = R),
        "function" == typeof a && a.call(P, N),
        N
    }
    if ("function" != typeof a)
        try {
            return void console.warn("response.js aborted due to missing dependency")
        } catch (M) {}
    var N, O, P = this, Q = "Response", R = P[Q], S = "init" + Q, T = window, U = document, V = U.documentElement, W = a.domReady || a, X = a(T), Y = "undefined" != typeof DOMStringMap, Z = Array.prototype, $ = Object.prototype, _ = Z.push, ab = Z.concat, bb = $.toString, cb = $.hasOwnProperty, db = Array.isArray || function(a) {
        return "[object Array]" === bb.call(a)
    }
    , eb = {
        width: [0, 320, 481, 641, 961, 1025, 1281],
        height: [0, 481],
        ratio: [1, 1.5, 2]
    }, fb = {}, gb = {}, hb = {
        all: []
    }, ib = 1, jb = screen.width, kb = screen.height, lb = jb > kb ? jb : kb, mb = jb + kb - lb, nb = function() {
        return jb
    }, ob = function() {
        return kb
    }, pb = /[^a-z0-9_\-\.]/gi, qb = /^[\W\s]+|[\W\s]+$|/g, rb = /([a-z])([A-Z])/g, sb = /-(.)/g, tb = /^data-(.+)$/, ub = Object.create || function(a) {
        function b() {}
        return b.prototype = a,
        new b
    }
    , vb = function(a, b) {
        return b = b || Q,
        a.replace(qb, "") + "." + b.replace(qb, "")
    }, wb = {
        allLoaded: vb("allLoaded"),
        crossover: vb("crossover")
    }, xb = T.matchMedia || T.msMatchMedia, yb = xb ? c(xb, T) : function() {
        return {}
    }
    , zb = xb ? function(a) {
        return !!xb.call(T, a).matches
    }
    : function() {
        return !1
    }
    , Ab = function() {
        var a = V.clientWidth
          , b = T.innerWidth;
        return b > a ? b : a
    }, Bb = function() {
        var a = V.clientHeight
          , b = T.innerHeight;
        return b > a ? b : a
    }, Cb = c(d, Ab), Db = c(d, Bb), Eb = {
        band: c(d, nb),
        wave: c(d, ob)
    };
    return O = function() {
        function b(a) {
            return "string" == typeof a ? a.toLowerCase().replace(pb, "") : ""
        }
        function c(a, b) {
            return a - b
        }
        var d = wb.crossover
          , k = Math.min;
        return {
            $e: 0,
            mode: 0,
            breakpoints: null,
            prefix: null,
            prop: "width",
            keys: [],
            dynamic: null,
            custom: 0,
            values: [],
            fn: 0,
            verge: null,
            newValue: 0,
            currValue: 1,
            aka: null,
            lazy: null,
            i: 0,
            uid: null,
            reset: function() {
                for (var a = this.breakpoints, b = a.length, c = 0; !c && b--; )
                    this.fn(a[b]) && (c = b);
                return c !== this.i && (X.trigger(d).trigger(this.prop + d),
                this.i = c || 0),
                this
            },
            configure: function(a) {
                j(this, a);
                var d, l, m, n, o, p = !0, q = this.prop;
                if (this.uid = ib++,
                null == this.verge && (this.verge = k(lb, 500)),
                !(this.fn = fb[q]))
                    throw new TypeError("@create");
                if (null == this.dynamic && (this.dynamic = "device" !== q.slice(0, 6)),
                this.custom = gb[q],
                m = this.prefix ? i(e(f(this.prefix), b)) : ["min-" + q + "-"],
                n = 1 < m.length ? m.slice(1) : 0,
                this.prefix = m[0],
                l = this.breakpoints,
                db(l)) {
                    if (g(l, function(a) {
                        if (!a && 0 !== a)
                            throw "invalid breakpoint";
                        p = p && isFinite(a)
                    }),
                    p && l.sort(c),
                    !l.length)
                        throw new TypeError(".breakpoints")
                } else if (l = eb[q] || eb[q.split("-").pop()],
                !l)
                    throw new TypeError(".prop");
                if (this.breakpoints = l,
                this.keys = h(this.breakpoints, this.prefix),
                this.aka = null,
                n) {
                    for (o = [],
                    d = n.length; d--; )
                        o.push(h(this.breakpoints, n[d]));
                    this.aka = o,
                    this.keys = ab.apply(this.keys, o)
                }
                return hb.all = hb.all.concat(hb[this.uid] = this.keys),
                this
            },
            target: function() {
                return this.$e = a(v(hb[this.uid])),
                E(this.$e, S),
                this.keys.push(S),
                this
            },
            decideValue: function() {
                for (var a = null, b = this.breakpoints, c = b.length, d = c; null == a && d--; )
                    this.fn(b[d]) && (a = this.values[d]);
                return this.newValue = "string" == typeof a ? a : this.values[c],
                this
            },
            prepareData: function(b) {
                if (this.$e = a(b),
                this.mode = D(b),
                this.values = F(this.$e, this.keys),
                this.aka)
                    for (var c = this.aka.length; c--; )
                        this.values = j(this.values, F(this.$e, this.aka[c]));
                return this.decideValue()
            },
            updateDOM: function() {
                return this.currValue === this.newValue ? this : (this.currValue = this.newValue,
                0 < this.mode ? this.$e[0].setAttribute("src", this.newValue) : null == this.newValue ? this.$e.empty && this.$e.empty() : this.$e.html ? this.$e.html(this.newValue) : (this.$e.empty && this.$e.empty(),
                this.$e[0].innerHTML = this.newValue),
                this)
            }
        }
    }(),
    fb.width = Cb,
    fb.height = Db,
    fb["device-width"] = Eb.band,
    fb["device-height"] = Eb.wave,
    fb["device-pixel-ratio"] = l,
    N = {
        deviceMin: function() {
            return mb
        },
        deviceMax: function() {
            return lb
        },
        noConflict: L,
        create: K,
        addTest: G,
        datatize: n,
        camelize: m,
        render: o,
        store: E,
        access: F,
        target: w,
        object: ub,
        crossover: I,
        action: J,
        resize: H,
        ready: W,
        affix: h,
        sift: i,
        dpr: l,
        deletes: u,
        scrollX: x,
        scrollY: y,
        deviceW: nb,
        deviceH: ob,
        device: Eb,
        inX: A,
        inY: B,
        route: k,
        merge: j,
        media: yb,
        mq: zb,
        wave: Db,
        band: Cb,
        map: e,
        each: g,
        inViewport: C,
        dataset: t,
        viewportH: Bb,
        viewportW: Ab
    },
    W(function() {
        var b = t(U.body, "responsejs")
          , c = T.JSON && JSON.parse || a.parseJSON;
        b = b && c ? c(b) : b,
        b && b.create && K(b.create),
        V.className = V.className.replace(/(^|\s)(no-)?responsejs(\s|$)/, "$1$3") + " responsejs "
    }),
    N
});
//XXX: Background position animation for jQuery v1.1.0.
(function($) {
    var BG_POS = 'bgPos';
    var usesTween = !!$.Tween;
    if (usesTween) {
        $.Tween.propHooks['backgroundPosition'] = {
            get: function(tween) {
                return parseBackgroundPosition($(tween.elem).css(tween.prop));
            },
            set: function(tween) {
                setBackgroundPosition(tween);
            }
        };
    } else {
        $.fx.step['backgroundPosition'] = setBackgroundPosition;
    }
    ;function parseBackgroundPosition(value) {
        var bgPos = (value || '').split(/ /);
        var presets = {
            center: '50%',
            left: '0%',
            right: '100%',
            top: '0%',
            bottom: '100%'
        };
        var decodePos = function(index) {
            var pos = (presets[bgPos[index]] || bgPos[index] || '50%').match(/^([+-]=)?([+-]?\d+(\.\d*)?)(.*)$/);
            bgPos[index] = [pos[1], parseFloat(pos[2]), pos[4] || 'px'];
        };
        if (bgPos.length == 1 && $.inArray(bgPos[0], ['top', 'bottom']) > -1) {
            bgPos[1] = bgPos[0];
            bgPos[0] = '50%';
        }
        decodePos(0);
        decodePos(1);
        return bgPos;
    }
    function setBackgroundPosition(fx) {
        if (!fx.set) {
            initBackgroundPosition(fx);
        }
        $(fx.elem).css('background-position', ((fx.pos * (fx.end[0][1] - fx.start[0][1]) + fx.start[0][1]) + fx.end[0][2]) + ' ' + ((fx.pos * (fx.end[1][1] - fx.start[1][1]) + fx.start[1][1]) + fx.end[1][2]));
    }
    function initBackgroundPosition(fx) {
        var elem = $(fx.elem);
        var bgPos = elem.data(BG_POS);
        elem.css('backgroundPosition', bgPos);
        fx.start = parseBackgroundPosition(bgPos);
        fx.end = parseBackgroundPosition($.fn.jquery >= '1.6' ? fx.end : fx.options.curAnim['backgroundPosition'] || fx.options.curAnim['background-position']);
        for (var i = 0; i < fx.end.length; i++) {
            if (fx.end[i][0]) {
                fx.end[i][1] = fx.start[i][1] + (fx.end[i][0] == '-=' ? -1 : +1) * fx.end[i][1];
            }
        }
        fx.set = true;
    }
    $.fn.animate = function(origAnimate) {
        return function(prop, speed, easing, callback) {
            if (prop['backgroundPosition'] || prop['background-position']) {
                this.data(BG_POS, this.css('backgroundPosition') || 'left top');
            }
            return origAnimate.apply(this, [prop, speed, easing, callback]);
        }
        ;
    }($.fn.animate);
}
)(jQuery);
//XXX: oopsjs
if (!Function.prototype.toSource) {
    Function.prototype.toSource = function() {
        return "(" + this.toString() + ")"
    }
}
Function.prototype.impls = function(c) {
    var f = new this();
    for (var d = 0, b = arguments.length; d < b; d++) {
        var e = arguments[d];
        for (var a in e) {
            if (a && !e[a]._isEmpty()) {
                throw ("Interface method " + a + " should not have body.")
            }
            if (a && a != "_super" && a != "impls" && a != "inherits" && typeof (e[a]) != typeof (f[a])) {
                throw (this.toSource() + " does not implement '" + a + "'")
            }
            if (typeof (e[a]) === "function" && e[a].arity !== f[a].arity) {
                throw (this.toSource() + " does not implement proper '" + a + "'. Should have '" + e[a].arity + "' argument(s) but found '" + f[a].arity + "'")
            }
        }
    }
    delete f;
    return this
}
;
Function.prototype._isEmpty = function() {
    var a = this.toSource().replace(/[ \t\n]+/, " ");
    if (a) {
        a = a.replace(/\s*\(function\s*(\w+)?\s*\([ \t\w]*\)[ \t]*\{[ \t\r\n]*\}\s*\)/img, "");
        if (a.length > 0) {
            return false
        }
    }
    return true
}
;
Function.prototype.isAbstract = function() {
    if (!this._isEmpty()) {
        throw ("Abstract method should not have body.")
    }
    this._abstract = true;
    return this
}
;
Function.prototype.isFinal = function() {
    this._final = true;
    return this
}
;
Function.prototype.inherits = function(parentClass) {
    if (parentClass._final) {
        throw ("Final class can't be inherited.")
    }
    var removeAbstractMethod = function(m, op, parentProps) {
        var rgxp = new RegExp("this." + m + " = .*isAbstract().*(this.w+s*=)?","igm");
        parentProps = parentProps.replace(rgxp, "$1");
        return parentProps
    };
    var op = new parentClass();
    var oo = new this();
    var parentProps = parentClass.toString().replace(/\\s+|}$/ig, " ");
    if (parentProps.indexOf("[native code]") > 0) {
        return this.inheritsNative(parentClass)
    }
    var childProps = this.toString().replace(/function\s*(\w+)?\(\)\s*{|\\s+/, " ");
    var _s = "_s$s_";
    var d = Function.depth === undefined ? (Function.depth = 0) : (Function.depth = Function.depth + 1);
    _s += d;
    if (this._inherited) {
        throw ("Multiple inheritance not allowed.")
    }
    for (m in op) {
        if (oo[m] === undefined) {
            if (op[m]._abstract) {
                throw ("Method '" + m + "' is abstract in parent class. Child class MUST override it.")
            }
            var rgx = new RegExp("_super\\.(" + m + ")s*(())","ig");
            childProps = childProps.replace(rgx, "((typeof(this.$1) !== 'undefined') ? this.$1$2 : $1$2)");
            continue
        }
        if (op[m]._abstract) {
            parentProps = removeAbstractMethod(m, op, parentProps)
        }
        if (op[m]._final) {
            throw ("Method '" + m + "' is final in parent class. Child class CAN'T override it.")
        }
        parentProps = parentProps.replace("this." + m, "this." + _s + m).replace(/[ \r\n\t]+$/igm, "");
        childProps = childProps.replace("this._super", "_super").replace("_super." + m, "this." + _s + m)
    }
    var rgx = /_super.(\w+)/ig;
    childProps = childProps.replace(rgx, "$1");
    newObjectProps = "(" + parentProps + childProps + ".add$Proto())";
    return eval(newObjectProps)
}
;
Function.prototype.inheritsNative = function(nativeClass) {
    var s = nativeClass.toString().replace(/[\n\t ]/igm, " ").replace(/.*function\s*(\w+).*/igm, "$1");
    var source = this.toString().replace(/\\s+/ig, " ").replace(/function\s*(\w+)?\(\)\s*{/igm, "");
    source = "(function(){var _super = this._super = new " + s + "();" + source + ".add$Proto())";
    source = source.replace(/_super\.(\w+)\s*\(/igm, "_super.$1.call(this,");
    return eval(source)
}
;
Function.prototype.inheritsProto = function(b) {
    var a = this;
    this.prototype = new b();
    this.prototype.constructor = a;
    this.prototype._super = new b();
    return this
}
;
Function.prototype.add$Proto = function() {
    var a = new this();
    if (a._super) {
        this.prototype = a._super
    }
    this._inherited = true;
    return this
}
;
//XXX: Animate Cuver
function CurveAnimator(from, to, c1, c2, fn_callback) {
    this.fn_callback = fn_callback;
    this.path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    if (!c1)
        c1 = from;
    if (!c2)
        c2 = to;
    this.path.setAttribute('d', 'M' + from.join(',') + 'C' + c1.join(',') + ' ' + c2.join(',') + ' ' + to.join(','));
    this.updatePath();
    CurveAnimator.lastCreated = this;
}
;CurveAnimator.prototype.animate = function(duration, callback, delay) {
    var curveAnim = this;
    if (!delay)
        delay = 1 / 40;
    clearInterval(curveAnim.animTimer);
    var startTime = new Date;
    curveAnim.animTimer = setInterval(function() {
        var now = new Date;
        var elapsed = (now - startTime) / 1000;
        var percent = elapsed / duration;
        if (percent >= 1) {
            percent = 1;
            if (curveAnim.fn_callback) {
                curveAnim.fn_callback();
            }
            ;clearInterval(curveAnim.animTimer);
        }
        ;var p1 = curveAnim.pointAt(percent - 0.01)
          , p2 = curveAnim.pointAt(percent + 0.01);
        callback(curveAnim.pointAt(percent), Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI);
    }, delay * 1000);
}
;
CurveAnimator.prototype.stop = function() {
    clearInterval(this.animTimer);
}
;
CurveAnimator.prototype.pointAt = function(percent) {
    return this.path.getPointAtLength(this.len * percent);
}
;
CurveAnimator.prototype.updatePath = function() {
    this.len = this.path.getTotalLength();
}
;
CurveAnimator.prototype.setStart = function(x, y) {
    var M = this.path.pathSegList.getItem(0);
    M.x = x;
    M.y = y;
    this.updatePath();
    return this;
}
;
CurveAnimator.prototype.setEnd = function(x, y) {
    var C = this.path.pathSegList.getItem(1);
    C.x = x;
    C.y = y;
    this.updatePath();
    return this;
}
;
CurveAnimator.prototype.setStartDirection = function(x, y) {
    var C = this.path.pathSegList.getItem(1);
    C.x1 = x;
    C.y1 = y;
    this.updatePath();
    return this;
}
;
CurveAnimator.prototype.setEndDirection = function(x, y) {
    var C = this.path.pathSegList.getItem(1);
    C.x2 = x;
    C.y2 = y;
    this.updatePath();
    return this;
}
;
function customizeForDevice() {
    var ua = navigator.userAgent;
    var checker = {
        iphone: ua.match(/(iPhone|iPod|iPad)/),
        blackberry: ua.match(/BlackBerry/),
        android: ua.match(/Android/)
    };
    return checker;
}
;$.fn.moveCurve = function(curve, time, _plusAngle) {
    var _self = this;
    $(_self).css("position", "absolute");
    curve.animate(time, function(point, angle) {
        if (_plusAngle) {
            angle += _plusAngle;
        }
        $(_self).children('div').css({
            "transform": "rotate(" + angle + "deg)",
            "-webkit-transform": "rotate(" + angle + "deg)",
            "-moz-transform": "rotate(" + angle + "deg)",
            "-ms-transform": "rotate(" + angle + "deg)",
            "-o-transform": "rotate(" + angle + "deg)"
        });
        $(_self).css({
            left: point.x + "px",
            top: point.y + "px"
        });
    });
}
;
//XXX: htmlparser.js
(function() {
    var startTag = /^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/
      , endTag = /^<\/([-A-Za-z0-9_]+)[^>]*>/
      , attr = /([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;
    var empty = makeMap("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr");
    var block = makeMap("address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video");
    var inline = makeMap("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var");
    var closeSelf = makeMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
    var fillAttrs = makeMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected");
    var special = makeMap("script,style");
    var HTMLParser = this.HTMLParser = function(html, handler) {
        var index, chars, match, stack = [], last = html;
        stack.last = function() {
            return this[this.length - 1];
        }
        ;
        while (html) {
            chars = true;
            if (!stack.last() || !special[stack.last()]) {
                if (html.indexOf("<!--") == 0) {
                    index = html.indexOf("-->");
                    if (index >= 0) {
                        if (handler.comment)
                            handler.comment(html.substring(4, index));
                        html = html.substring(index + 3);
                        chars = false;
                    }
                } else if (html.indexOf("</") == 0) {
                    match = html.match(endTag);
                    if (match) {
                        html = html.substring(match[0].length);
                        match[0].replace(endTag, parseEndTag);
                        chars = false;
                    }
                } else if (html.indexOf("<") == 0) {
                    match = html.match(startTag);
                    if (match) {
                        html = html.substring(match[0].length);
                        match[0].replace(startTag, parseStartTag);
                        chars = false;
                    }
                }
                if (chars) {
                    index = html.indexOf("<");
                    var text = index < 0 ? html : html.substring(0, index);
                    html = index < 0 ? "" : html.substring(index);
                    if (handler.chars)
                        handler.chars(text);
                }
            } else {
                html = html.replace(new RegExp("([\\s\\S]*?)<\/" + stack.last() + "[^>]*>"), function(all, text) {
                    text = text.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g, "$1$2");
                    if (handler.chars)
                        handler.chars(text);
                    return "";
                });
                parseEndTag("", stack.last());
            }
            if (html == last)
                throw "Parse Error: " + html;
            last = html;
        }
        parseEndTag();
        function parseStartTag(tag, tagName, rest, unary) {
            tagName = tagName.toLowerCase();
            if (block[tagName]) {
                while (stack.last() && inline[stack.last()]) {
                    parseEndTag("", stack.last());
                }
            }
            if (closeSelf[tagName] && stack.last() == tagName) {
                parseEndTag("", tagName);
            }
            unary = empty[tagName] || !!unary;
            if (!unary)
                stack.push(tagName);
            if (handler.start) {
                var attrs = [];
                rest.replace(attr, function(match, name) {
                    var value = arguments[2] ? arguments[2] : arguments[3] ? arguments[3] : arguments[4] ? arguments[4] : fillAttrs[name] ? name : "";
                    attrs.push({
                        name: name,
                        value: value,
                        escaped: value.replace(/(^|[^\\])"/g, '$1\\\"')
                    });
                });
                if (handler.start)
                    handler.start(tagName, attrs, unary);
            }
        }
        function parseEndTag(tag, tagName) {
            if (!tagName)
                var pos = 0;
            else
                for (var pos = stack.length - 1; pos >= 0; pos--)
                    if (stack[pos] == tagName)
                        break;
            if (pos >= 0) {
                for (var i = stack.length - 1; i >= pos; i--)
                    if (handler.end)
                        handler.end(stack[i]);
                stack.length = pos;
            }
        }
    }
    ;
    this.HTMLtoXML = function(html) {
        var results = "";
        HTMLParser(html, {
            start: function(tag, attrs, unary) {
                results += "<" + tag;
                for (var i = 0; i < attrs.length; i++)
                    results += " " + attrs[i].name + '="' + attrs[i].escaped + '"';
                results += ">";
            },
            end: function(tag) {
                results += "</" + tag + ">";
            },
            chars: function(text) {
                results += text;
            },
            comment: function(text) {
                results += "<!--" + text + "-->";
            }
        });
        return results;
    }
    ;
    this.HTMLtoDOM = function(html, doc) {
        var one = makeMap("html,head,body,title");
        var structure = {
            link: "head",
            base: "head"
        };
        if (!doc) {
            if (typeof DOMDocument != "undefined")
                doc = new DOMDocument();
            else if (typeof document != "undefined" && document.implementation && document.implementation.createDocument)
                doc = document.implementation.createDocument("", "", null);
            else if (typeof ActiveX != "undefined")
                doc = new ActiveXObject("Msxml.DOMDocument");
        } else
            doc = doc.ownerDocument || doc.getOwnerDocument && doc.getOwnerDocument() || doc;
        var elems = []
          , documentElement = doc.documentElement || doc.getDocumentElement && doc.getDocumentElement();
        if (!documentElement && doc.createElement)
            (function() {
                var html = doc.createElement("html");
                var head = doc.createElement("head");
                head.appendChild(doc.createElement("title"));
                html.appendChild(head);
                html.appendChild(doc.createElement("body"));
                doc.appendChild(html);
            }
            )();
        if (doc.getElementsByTagName)
            for (var i in one)
                one[i] = doc.getElementsByTagName(i)[0];
        var curParentNode = one.body;
        HTMLParser(html, {
            start: function(tagName, attrs, unary) {
                if (one[tagName]) {
                    curParentNode = one[tagName];
                    if (!unary) {
                        elems.push(curParentNode);
                    }
                    return;
                }
                var elem = doc.createElement(tagName);
                for (var attr in attrs)
                    elem.setAttribute(attrs[attr].name, attrs[attr].value);
                if (structure[tagName] && typeof one[structure[tagName]] != "boolean")
                    one[structure[tagName]].appendChild(elem);
                else if (curParentNode && curParentNode.appendChild)
                    curParentNode.appendChild(elem);
                if (!unary) {
                    elems.push(elem);
                    curParentNode = elem;
                }
            },
            end: function(tag) {
                elems.length -= 1;
                curParentNode = elems[elems.length - 1];
            },
            chars: function(text) {
                curParentNode.appendChild(doc.createTextNode(text));
            },
            comment: function(text) {}
        });
        return doc;
    }
    ;
    function makeMap(str) {
        var obj = {}
          , items = str.split(",");
        for (var i = 0; i < items.length; i++)
            obj[items[i]] = true;
        return obj;
    }
}
)();
//XXX: html2json.js
function parseHtml(html) {
    var results = '';
    HTMLParser(html, {
        start: function(tag, attrs, unary) {
            results += '<' + tag;
            for (var i = 0; i < attrs.length; i++) {
                results += ' ' + attrs[i].name + '="' + attrs[i].escaped + '"';
            }
            results += (unary ? '/' : '') + '>';
        },
        end: function(tag) {
            results += '</' + tag + '>';
        },
        chars: function(text) {
            results += text;
        },
        comment: function(text) {
            results += '<!--' + text + '-->';
        }
    });
    return results;
}
function makeMap(str) {
    var obj = {}
      , items = str.split(',');
    for (var i = 0; i < items.length; i++) {
        obj[items[i]] = true;
    }
    return obj;
}
function html2json(html) {
    var inline = makeMap('a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var');
    inline.textarea = false;
    inline.input = false;
    inline.img = false;
    html = html.replace(/<!DOCTYPE[\s\S]+?>/, '');
    var bufArray = [];
    var results = {};
    var inlineBuf = [];
    bufArray.last = function() {
        return this[this.length - 1];
    }
    ;
    HTMLParser(html, {
        start: function(tag, attrs, unary) {
            if (inline[tag]) {
                var attributes = '';
                for (var i = 0; i < attrs.length; i++) {
                    attributes += ' ' + attrs[i].name + '="' + attrs[i].value + '"';
                }
                inlineBuf.push('<' + tag + attributes + '>');
            } else {
                var buf = {};
                buf.tag = tag;
                if (attrs.length !== 0) {
                    var attr = {};
                    for (var i = 0; i < attrs.length; i++) {
                        var attr_name = attrs[i].name;
                        var attr_value = attrs[i].value;
                        if (attr_name === 'class') {
                            attr_value = attr_value.split(' ');
                        }
                        attr[attr_name] = attr_value;
                    }
                    buf['attr'] = attr;
                }
                if (unary) {
                    var last = bufArray.last();
                    if (!(last.child instanceof Array)) {
                        last.child = [];
                    }
                    last.child.push(buf);
                } else {
                    bufArray.push(buf);
                }
            }
        },
        end: function(tag) {
            if (inline[tag]) {
                var last = bufArray.last();
                inlineBuf.push('</' + tag + '>');
                if (!last.text)
                    last.text = '';
                last.text += inlineBuf.join('');
                inlineBuf = [];
            } else {
                var buf = bufArray.pop();
                if (bufArray.length === 0) {
                    return results = buf;
                }
                var last = bufArray.last();
                if (!(last.child instanceof Array)) {
                    last.child = [];
                }
                last.child.push(buf);
            }
        },
        chars: function(text) {
            if (inlineBuf.length !== 0) {
                inlineBuf.push(text);
            } else {
                var last = bufArray.last();
                if (last) {
                    if (!last.text) {
                        last.text = '';
                    }
                    last.text += text;
                }
            }
        },
        comment: function(text) {}
    });
    return results;
}
function json2html(json) {
    var html = '';
    var tag = json.tag;
    var text = json.text;
    var children = json.child;
    var buf = [];
    var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed');
    var buildAttr = function(attr) {
        for (var k in attr) {
            buf.push(' ' + k + '="');
            if (attr[k]instanceof Array) {
                buf.push(attr[k].join(' '));
            } else {
                buf.push(attr[k]);
            }
            buf.push('"');
        }
    }
    buf.push('<');
    buf.push(tag);
    json.attr ? buf.push(buildAttr(json.attr)) : null;
    if (empty[tag])
        buf.push('/');
    buf.push('>');
    text ? buf.push(text) : null;
    if (children) {
        for (var j = 0; j < children.length; j++) {
            buf.push(json2html(children[j]));
        }
    }
    if (!empty[tag])
        buf.push('</' + tag + '>');
    return buf.join('');
}
//XXX: turn.js 4.1.0 | Copyright (c) 2012 Emmanuel Garcia | turnjs.com | turnjs.com/license.txt */
(function(f) {
    function I(a, b, c) {
        if (!c[0] || "object" == typeof c[0])
            return b.init.apply(a, c);
        if (b[c[0]])
            return b[c[0]].apply(a, Array.prototype.slice.call(c, 1));
        throw p(c[0] + " is not a method or property");
    }
    function l(a, b, c, d) {
        return {
            css: {
                position: "absolute",
                top: a,
                left: b,
                overflow: d || "hidden",
                zIndex: c || "auto"
            }
        }
    }
    function R(a, b, c, d, e) {
        var h = 1 - e
          , f = h * h * h
          , g = e * e * e;
        return j(Math.round(f * a.x + 3 * e * h * h * b.x + 3 * e * e * h * c.x + g * d.x), Math.round(f * a.y + 3 * e * h * h * b.y + 3 * e * e * h * c.y + g * d.y))
    }
    function j(a, b) {
        return {
            x: a,
            y: b
        }
    }
    function E(a, b, c) {
        return y && c ? " translate3d(" + a + "px," + b + "px, 0px) " : " translate(" + a + "px, " + b + "px) "
    }
    function F(a) {
        return " rotate(" + a + "deg) "
    }
    function n(a, b) {
        return Object.prototype.hasOwnProperty.call(b, a)
    }
    function S() {
        for (var a = ["Moz", "Webkit", "Khtml", "O", "ms"], b = a.length, c = ""; b--; )
            a[b] + "Transform"in document.body.style && (c = "-" + a[b].toLowerCase() + "-");
        return c
    }
    function O(a, b, c, d, e) {
        var h, f = [];
        if ("-webkit-" == v) {
            for (h = 0; h < e; h++)
                f.push("color-stop(" + d[h][0] + ", " + d[h][1] + ")");
            a.css({
                "background-image": "-webkit-gradient(linear, " + b.x + "% " + b.y + "%," + c.x + "% " + c.y + "%, " + f.join(",") + " )"
            })
        } else {
            var b = {
                x: b.x / 100 * a.width(),
                y: b.y / 100 * a.height()
            }
              , c = {
                x: c.x / 100 * a.width(),
                y: c.y / 100 * a.height()
            }
              , g = c.x - b.x;
            h = c.y - b.y;
            var i = Math.atan2(h, g)
              , w = i - Math.PI / 2
              , w = Math.abs(a.width() * Math.sin(w)) + Math.abs(a.height() * Math.cos(w))
              , g = Math.sqrt(h * h + g * g)
              , c = j(c.x < b.x ? a.width() : 0, c.y < b.y ? a.height() : 0)
              , k = Math.tan(i);
            h = -1 / k;
            k = (h * c.x - c.y - k * b.x + b.y) / (h - k);
            c = h * k - h * c.x + c.y;
            b = Math.sqrt(Math.pow(k - b.x, 2) + Math.pow(c - b.y, 2));
            for (h = 0; h < e; h++)
                f.push(" " + d[h][1] + " " + 100 * (b + g * d[h][0]) / w + "%");
            a.css({
                "background-image": v + "linear-gradient(" + -i + "rad," + f.join(",") + ")"
            })
        }
    }
    function s(a, b, c) {
        a = f.Event(a);
        b.trigger(a, c);
        return a.isDefaultPrevented() ? "prevented" : a.isPropagationStopped() ? "stopped" : ""
    }
    function p(a) {
        function b(a) {
            this.name = "TurnJsError";
            this.message = a
        }
        b.prototype = Error();
        b.prototype.constructor = b;
        return new b(a)
    }
    function C(a) {
        var b = {
            top: 0,
            left: 0
        };
        do
            b.left += a.offsetLeft,
            b.top += a.offsetTop;
        while (a = a.offsetParent);
        return b
    }
    var y, T, v = "", J = Math.PI, K = J / 2, t = "ontouchstart"in window, q = t ? {
        down: "touchstart",
        move: "touchmove",
        up: "touchend",
        over: "touchstart",
        out: "touchend"
    } : {
        down: "mousedown",
        move: "mousemove",
        up: "mouseup",
        over: "mouseover",
        out: "mouseout"
    }, o = {
        backward: ["bl", "tl"],
        forward: ["br", "tr"],
        all: "tl bl tr br l r".split(" ")
    }, U = ["single", "double"], V = ["ltr", "rtl"], W = {
        acceleration: !0,
        display: "double",
        duration: 600,
        page: 1,
        gradients: !0,
        turnCorners: "bl,br",
        when: null
    }, X = {
        cornerSize: 100
    }, g = {
        init: function(a) {
            y = "WebKitCSSMatrix"in window || "MozPerspective"in document.body.style;
            var b;
            T = (b = /AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent)) ? 534.3 < parseFloat(b[1]) : !0;
            v = S();
            var c;
            b = 0;
            var d = this.data()
              , e = this.children()
              , a = f.extend({
                width: this.width(),
                height: this.height(),
                direction: this.attr("dir") || this.css("direction") || "ltr"
            }, W, a);
            d.opts = a;
            d.pageObjs = {};
            d.pages = {};
            d.pageWrap = {};
            d.pageZoom = {};
            d.pagePlace = {};
            d.pageMv = [];
            d.zoom = 1;
            d.totalPages = a.pages || 0;
            d.eventHandlers = {
                touchStart: f.proxy(g._touchStart, this),
                touchMove: f.proxy(g._touchMove, this),
                touchEnd: f.proxy(g._touchEnd, this),
                start: f.proxy(g._eventStart, this)
            };
            if (a.when)
                for (c in a.when)
                    n(c, a.when) && this.bind(c, a.when[c]);
            this.css({
                position: "relative",
                width: a.width,
                height: a.height
            });
            this.turn("display", a.display);
            "" !== a.direction && this.turn("direction", a.direction);
            y && (!t && a.acceleration) && this.transform(E(0, 0, !0));
            for (c = 0; c < e.length; c++)
                "1" != f(e[c]).attr("ignore") && this.turn("addPage", e[c], ++b);
            f(this).bind(q.down, d.eventHandlers.touchStart).bind("end", g._eventEnd).bind("pressed", g._eventPressed).bind("released", g._eventReleased).bind("flip", g._flip);
            f(this).parent().bind("start", d.eventHandlers.start);
            f(document).bind(q.move, d.eventHandlers.touchMove).bind(q.up, d.eventHandlers.touchEnd);
            this.turn("page", a.page);
            d.done = !0;
            return this
        },
        addPage: function(a, b) {
            var c, d = !1, e = this.data(), h = e.totalPages + 1;
            if (e.destroying)
                return !1;
            if (c = /\bp([0-9]+)\b/.exec(f(a).attr("class")))
                b = parseInt(c[1], 10);
            if (b)
                if (b == h)
                    d = !0;
                else {
                    if (b > h)
                        throw p('Page "' + b + '" cannot be inserted');
                }
            else
                b = h,
                d = !0;
            1 <= b && b <= h && (c = "double" == e.display ? b % 2 ? " odd" : " even" : "",
            e.done && this.turn("stop"),
            b in e.pageObjs && g._movePages.call(this, b, 1),
            d && (e.totalPages = h),
            e.pageObjs[b] = f(a).css({
                "float": "left"
            }).addClass("page p" + b + c),
            -1 != navigator.userAgent.indexOf("MSIE 9.0") && e.pageObjs[b].hasClass("hard") && e.pageObjs[b].removeClass("hard"),
            g._addPage.call(this, b),
            g._removeFromDOM.call(this));
            return this
        },
        _addPage: function(a) {
            var b = this.data()
              , c = b.pageObjs[a];
            if (c)
                if (g._necessPage.call(this, a)) {
                    if (!b.pageWrap[a]) {
                        b.pageWrap[a] = f("<div/>", {
                            "class": "page-wrapper",
                            page: a,
                            css: {
                                position: "absolute",
                                overflow: "hidden"
                            }
                        });
                        this.append(b.pageWrap[a]);
                        b.pagePlace[a] || (b.pagePlace[a] = a,
                        b.pageObjs[a].appendTo(b.pageWrap[a]));
                        var d = g._pageSize.call(this, a, !0);
                        c.css({
                            width: d.width,
                            height: d.height
                        });
                        b.pageWrap[a].css(d)
                    }
                    b.pagePlace[a] == a && g._makeFlip.call(this, a)
                } else
                    b.pagePlace[a] = 0,
                    b.pageObjs[a] && b.pageObjs[a].remove()
        },
        hasPage: function(a) {
            return n(a, this.data().pageObjs)
        },
        center: function(a) {
            var b = this.data()
              , c = f(this).turn("size")
              , d = 0;
            b.noCenter || ("double" == b.display && (a = this.turn("view", a || b.tpage || b.page),
            "ltr" == b.direction ? a[0] ? a[1] || (d += c.width / 4) : d -= c.width / 4 : a[0] ? a[1] || (d -= c.width / 4) : d += c.width / 4),
            f(this).css({
                marginLeft: d
            }));
            return this
        },
        destroy: function() {
            var a = this
              , b = this.data()
              , c = "end first flip last pressed released start turning turned zooming missing".split(" ");
            if ("prevented" != s("destroying", this)) {
                b.destroying = !0;
                f.each(c, function(b, c) {
                    a.unbind(c)
                });
                this.parent().unbind("start", b.eventHandlers.start);
                for (f(document).unbind(q.move, b.eventHandlers.touchMove).unbind(q.up, b.eventHandlers.touchEnd); 0 !== b.totalPages; )
                    this.turn("removePage", b.totalPages);
                b.fparent && b.fparent.remove();
                b.shadow && b.shadow.remove();
                this.removeData();
                b = null;
                return this
            }
        },
        is: function() {
            return "object" == typeof this.data().pages
        },
        zoom: function(a) {
            var b = this.data();
            if ("number" == typeof a) {
                if (0.0010 > a || 100 < a)
                    throw p(a + " is not a value for zoom");
                if ("prevented" == s("zooming", this, [a, b.zoom]))
                    return this;
                var c = this.turn("size")
                  , d = this.turn("view")
                  , e = 1 / b.zoom
                  , h = Math.round(c.width * e * a)
                  , c = Math.round(c.height * e * a);
                b.zoom = a;
                f(this).turn("stop").turn("size", h, c);
                b.opts.autoCenter && this.turn("center");
                g._updateShadow.call(this);
                for (a = 0; a < d.length; a++)
                    d[a] && b.pageZoom[d[a]] != b.zoom && (this.trigger("zoomed", [d[a], d, b.pageZoom[d[a]], b.zoom]),
                    b.pageZoom[d[a]] = b.zoom);
                return this
            }
            return b.zoom
        },
        _pageSize: function(a, b) {
            var c = this.data()
              , d = {};
            if ("single" == c.display)
                d.width = this.width(),
                d.height = this.height(),
                b && (d.top = 0,
                d.left = 0,
                d.right = "auto");
            else {
                var e = this.width() / 2
                  , h = this.height();
                c.pageObjs[a].hasClass("own-size") ? (d.width = c.pageObjs[a].width(),
                d.height = c.pageObjs[a].height()) : (d.width = e,
                d.height = h);
                if (b) {
                    var f = a % 2;
                    d.top = (h - d.height) / 2;
                    "ltr" == c.direction ? (d[f ? "right" : "left"] = e - d.width,
                    d[f ? "left" : "right"] = "auto") : (d[f ? "left" : "right"] = e - d.width,
                    d[f ? "right" : "left"] = "auto")
                }
            }
            return d
        },
        _makeFlip: function(a) {
            var b = this.data();
            if (!b.pages[a] && b.pagePlace[a] == a) {
                var c = "single" == b.display
                  , d = a % 2;
                b.pages[a] = b.pageObjs[a].css(g._pageSize.call(this, a)).flip({
                    page: a,
                    next: d || c ? a + 1 : a - 1,
                    turn: this
                }).flip("disable", b.disabled);
                g._setPageLoc.call(this, a);
                b.pageZoom[a] = b.zoom
            }
            return b.pages[a]
        },
        _makeRange: function() {
            var a, b;
            if (!(1 > this.data().totalPages)) {
                b = this.turn("range");
                for (a = b[0]; a <= b[1]; a++)
                    g._addPage.call(this, a)
            }
        },
        range: function(a) {
            var b, c, d, e = this.data(), a = a || e.tpage || e.page || 1;
            d = g._view.call(this, a);
            if (1 > a || a > e.totalPages)
                throw p('"' + a + '" is not a valid page');
            d[1] = d[1] || d[0];
            1 <= d[0] && d[1] <= e.totalPages ? (a = Math.floor(2),
            e.totalPages - d[1] > d[0] ? (b = Math.min(d[0] - 1, a),
            c = 2 * a - b) : (c = Math.min(e.totalPages - d[1], a),
            b = 2 * a - c)) : c = b = 5;
            return [Math.max(1, d[0] - b), Math.min(e.totalPages, d[1] + c)]
        },
        _necessPage: function(a) {
            if (0 === a)
                return !0;
            var b = this.turn("range");
            return this.data().pageObjs[a].hasClass("fixed") || a >= b[0] && a <= b[1]
        },
        _removeFromDOM: function() {
            var a, b = this.data();
            for (a in b.pageWrap)
                n(a, b.pageWrap) && !g._necessPage.call(this, a) && g._removePageFromDOM.call(this, a)
        },
        _removePageFromDOM: function(a) {
            var b = this.data();
            if (b.pages[a]) {
                var c = b.pages[a].data();
                i._moveFoldingPage.call(b.pages[a], !1);
                c.f && c.f.fwrapper && c.f.fwrapper.remove();
                b.pages[a].removeData();
                b.pages[a].remove();
                delete b.pages[a]
            }
            b.pageObjs[a] && b.pageObjs[a].remove();
            b.pageWrap[a] && (b.pageWrap[a].remove(),
            delete b.pageWrap[a]);
            g._removeMv.call(this, a);
            delete b.pagePlace[a];
            delete b.pageZoom[a]
        },
        removePage: function(a) {
            var b = this.data();
            if ("*" == a)
                for (; 0 !== b.totalPages; )
                    this.turn("removePage", b.totalPages);
            else {
                if (1 > a || a > b.totalPages)
                    throw p("The page " + a + " doesn't exist");
                b.pageObjs[a] && (this.turn("stop"),
                g._removePageFromDOM.call(this, a),
                delete b.pageObjs[a]);
                g._movePages.call(this, a, -1);
                b.totalPages -= 1;
                b.page > b.totalPages ? (b.page = null,
                g._fitPage.call(this, b.totalPages)) : (g._makeRange.call(this),
                this.turn("update"))
            }
            return this
        },
        _movePages: function(a, b) {
            var c, d = this, e = this.data(), h = "single" == e.display, f = function(a) {
                var c = a + b
                  , f = c % 2
                  , i = f ? " odd " : " even ";
                e.pageObjs[a] && (e.pageObjs[c] = e.pageObjs[a].removeClass("p" + a + " odd even").addClass("p" + c + i));
                e.pagePlace[a] && e.pageWrap[a] && (e.pagePlace[c] = c,
                e.pageWrap[c] = e.pageObjs[c].hasClass("fixed") ? e.pageWrap[a].attr("page", c) : e.pageWrap[a].css(g._pageSize.call(d, c, !0)).attr("page", c),
                e.pages[a] && (e.pages[c] = e.pages[a].flip("options", {
                    page: c,
                    next: h || f ? c + 1 : c - 1
                })),
                b && (delete e.pages[a],
                delete e.pagePlace[a],
                delete e.pageZoom[a],
                delete e.pageObjs[a],
                delete e.pageWrap[a]))
            };
            if (0 < b)
                for (c = e.totalPages; c >= a; c--)
                    f(c);
            else
                for (c = a; c <= e.totalPages; c++)
                    f(c)
        },
        display: function(a) {
            var b = this.data()
              , c = b.display;
            if (void 0 === a)
                return c;
            if (-1 == f.inArray(a, U))
                throw p('"' + a + '" is not a value for display');
            switch (a) {
            case "single":
                b.pageObjs[0] || (this.turn("stop").css({
                    overflow: "hidden"
                }),
                b.pageObjs[0] = f("<div />", {
                    "class": "page p-temporal"
                }).css({
                    width: this.width(),
                    height: this.height()
                }).appendTo(this));
                this.addClass("shadow");
                break;
            case "double":
                b.pageObjs[0] && (this.turn("stop").css({
                    overflow: ""
                }),
                b.pageObjs[0].remove(),
                delete b.pageObjs[0]),
                this.removeClass("shadow")
            }
            b.display = a;
            c && (a = this.turn("size"),
            g._movePages.call(this, 1, 0),
            this.turn("size", a.width, a.height).turn("update"));
            return this
        },
        direction: function(a) {
            var b = this.data();
            if (void 0 === a)
                return b.direction;
            a = a.toLowerCase();
            if (-1 == f.inArray(a, V))
                throw p('"' + a + '" is not a value for direction');
            "rtl" == a && f(this).attr("dir", "ltr").css({
                direction: "ltr"
            });
            b.direction = a;
            b.done && this.turn("size", f(this).width(), f(this).height());
            return this
        },
        animating: function() {
            return 0 < this.data().pageMv.length
        },
        corner: function() {
            var a, b, c = this.data();
            for (b in c.pages)
                if (n(b, c.pages) && (a = c.pages[b].flip("corner")))
                    return a;
            return !1
        },
        data: function() {
            return this.data()
        },
        disable: function(a) {
            var b, c = this.data(), d = this.turn("view");
            c.disabled = void 0 === a || !0 === a;
            for (b in c.pages)
                n(b, c.pages) && c.pages[b].flip("disable", c.disabled ? !0 : -1 == f.inArray(parseInt(b, 10), d));
            return this
        },
        disabled: function(a) {
            return void 0 === a ? !0 === this.data().disabled : this.turn("disable", a)
        },
        size: function(a, b) {
            if (void 0 === a || void 0 === b)
                return {
                    width: this.width(),
                    height: this.height()
                };
            this.turn("stop");
            var c, d, e = this.data();
            d = "double" == e.display ? a / 2 : a;
            this.css({
                width: a,
                height: b
            });
            e.pageObjs[0] && e.pageObjs[0].css({
                width: d,
                height: b
            });
            for (c in e.pageWrap)
                n(c, e.pageWrap) && (d = g._pageSize.call(this, c, !0),
                e.pageObjs[c].css({
                    width: d.width,
                    height: d.height
                }),
                e.pageWrap[c].css(d),
                e.pages[c] && e.pages[c].css({
                    width: d.width,
                    height: d.height
                }));
            this.turn("resize");
            return this
        },
        resize: function() {
            var a, b = this.data();
            b.pages[0] && (b.pageWrap[0].css({
                left: -this.width()
            }),
            b.pages[0].flip("resize", !0));
            for (a = 1; a <= b.totalPages; a++)
                b.pages[a] && b.pages[a].flip("resize", !0);
            g._updateShadow.call(this);
            b.opts.autoCenter && this.turn("center")
        },
        _removeMv: function(a) {
            var b, c = this.data();
            for (b = 0; b < c.pageMv.length; b++)
                if (c.pageMv[b] == a)
                    return c.pageMv.splice(b, 1),
                    !0;
            return !1
        },
        _addMv: function(a) {
            var b = this.data();
            g._removeMv.call(this, a);
            b.pageMv.push(a)
        },
        _view: function(a) {
            var b = this.data()
              , a = a || b.page;
            return "double" == b.display ? a % 2 ? [a - 1, a] : [a, a + 1] : [a]
        },
        view: function(a) {
            var b = this.data()
              , a = g._view.call(this, a);
            return "double" == b.display ? [0 < a[0] ? a[0] : 0, a[1] <= b.totalPages ? a[1] : 0] : [0 < a[0] && a[0] <= b.totalPages ? a[0] : 0]
        },
        stop: function(a, b) {
            if (this.turn("animating")) {
                var c, d, e, h = this.data();
                h.tpage && (h.page = h.tpage,
                delete h.tpage);
                for (c = 0; c < h.pageMv.length; c++)
                    h.pageMv[c] && h.pageMv[c] !== a && (e = h.pages[h.pageMv[c]],
                    d = e.data().f.opts,
                    e.flip("hideFoldedPage", b),
                    b || i._moveFoldingPage.call(e, !1),
                    d.force && (d.next = 0 === d.page % 2 ? d.page - 1 : d.page + 1,
                    delete d.force))
            }
            this.turn("update");
            return this
        },
        pages: function(a) {
            var b = this.data();
            if (a) {
                if (a < b.totalPages)
                    for (var c = b.totalPages; c > a; c--)
                        this.turn("removePage", c);
                b.totalPages = a;
                g._fitPage.call(this, b.page);
                return this
            }
            return b.totalPages
        },
        _missing: function(a) {
            var b = this.data();
            if (!(1 > b.totalPages)) {
                for (var c = this.turn("range", a), d = [], a = c[0]; a <= c[1]; a++)
                    b.pageObjs[a] || d.push(a);
                0 < d.length && this.trigger("missing", [d])
            }
        },
        _fitPage: function(a) {
            var b = this.data()
              , c = this.turn("view", a);
            g._missing.call(this, a);
            if (b.pageObjs[a]) {
                b.page = a;
                this.turn("stop");
                for (var d = 0; d < c.length; d++)
                    c[d] && b.pageZoom[c[d]] != b.zoom && (this.trigger("zoomed", [c[d], c, b.pageZoom[c[d]], b.zoom]),
                    b.pageZoom[c[d]] = b.zoom);
                g._removeFromDOM.call(this);
                g._makeRange.call(this);
                g._updateShadow.call(this);
                this.trigger("turned", [a, c]);
                this.turn("update");
                b.opts.autoCenter && this.turn("center")
            }
        },
        _turnPage: function(a) {
            var b, c, d = this.data(), e = d.pagePlace[a], h = this.turn("view"), i = this.turn("view", a);
            if (d.page != a) {
                var j = d.page;
                if ("prevented" == s("turning", this, [a, i])) {
                    j == d.page && -1 != f.inArray(e, d.pageMv) && d.pages[e].flip("hideFoldedPage", !0);
                    return
                }
                -1 != f.inArray(1, i) && this.trigger("first");
                -1 != f.inArray(d.totalPages, i) && this.trigger("last")
            }
            "single" == d.display ? (b = h[0],
            c = i[0]) : h[1] && a > h[1] ? (b = h[1],
            c = i[0]) : h[0] && a < h[0] && (b = h[0],
            c = i[1]);
            e = d.opts.turnCorners.split(",");
            h = d.pages[b].data().f;
            i = h.opts;
            j = h.point;
            g._missing.call(this, a);
            d.pageObjs[a] && (this.turn("stop"),
            d.page = a,
            g._makeRange.call(this),
            d.tpage = c,
            i.next != c && (i.next = c,
            i.force = !0),
            this.turn("update"),
            h.point = j,
            "hard" == h.effect ? "ltr" == d.direction ? d.pages[b].flip("turnPage", a > b ? "r" : "l") : d.pages[b].flip("turnPage", a > b ? "l" : "r") : "ltr" == d.direction ? d.pages[b].flip("turnPage", e[a > b ? 1 : 0]) : d.pages[b].flip("turnPage", e[a > b ? 0 : 1]))
        },
        page: function(a) {
            var b = this.data();
            if (void 0 === a)
                return b.page;
            if (!b.disabled && !b.destroying) {
                a = parseInt(a, 10);
                if (0 < a && a <= b.totalPages)
                    return a != b.page && (!b.done || -1 != f.inArray(a, this.turn("view")) ? g._fitPage.call(this, a) : g._turnPage.call(this, a)),
                    this;
                throw p("The page " + a + " does not exist");
            }
        },
        next: function() {
            return this.turn("page", Math.min(this.data().totalPages, g._view.call(this, this.data().page).pop() + 1))
        },
        previous: function() {
            return this.turn("page", Math.max(1, g._view.call(this, this.data().page).shift() - 1))
        },
        peel: function(a, b) {
            var c = this.data()
              , d = this.turn("view")
              , b = void 0 === b ? !0 : !0 === b;
            !1 === a ? this.turn("stop", null, b) : "single" == c.display ? c.pages[c.page].flip("peel", a, b) : (d = "ltr" == c.direction ? -1 != a.indexOf("l") ? d[0] : d[1] : -1 != a.indexOf("l") ? d[1] : d[0],
            c.pages[d] && c.pages[d].flip("peel", a, b));
            return this
        },
        _addMotionPage: function() {
            var a = f(this).data().f.opts
              , b = a.turn;
            b.data();
            g._addMv.call(b, a.page)
        },
        _eventStart: function(a, b, c) {
            var d = b.turn.data()
              , e = d.pageZoom[b.page];
            a.isDefaultPrevented() || (e && e != d.zoom && (b.turn.trigger("zoomed", [b.page, b.turn.turn("view", b.page), e, d.zoom]),
            d.pageZoom[b.page] = d.zoom),
            "single" == d.display && c && ("l" == c.charAt(1) && "ltr" == d.direction || "r" == c.charAt(1) && "rtl" == d.direction ? (b.next = b.next < b.page ? b.next : b.page - 1,
            b.force = !0) : b.next = b.next > b.page ? b.next : b.page + 1),
            g._addMotionPage.call(a.target));
            g._updateShadow.call(b.turn)
        },
        _eventEnd: function(a, b, c) {
            f(a.target).data();
            var a = b.turn
              , d = a.data();
            if (c) {
                if (c = d.tpage || d.page,
                c == b.next || c == b.page)
                    delete d.tpage,
                    g._fitPage.call(a, c || b.next, !0)
            } else
                g._removeMv.call(a, b.page),
                g._updateShadow.call(a),
                a.turn("update")
        },
        _eventPressed: function(a) {
            var a = f(a.target).data().f
              , b = a.opts.turn;
            b.data().mouseAction = !0;
            b.turn("update");
            return a.time = (new Date).getTime()
        },
        _eventReleased: function(a, b) {
            var c;
            c = f(a.target);
            var d = c.data().f
              , e = d.opts.turn
              , h = e.data();
            c = "single" == h.display ? "br" == b.corner || "tr" == b.corner ? b.x < c.width() / 2 : b.x > c.width() / 2 : 0 > b.x || b.x > c.width();
            if (200 > (new Date).getTime() - d.time || c)
                a.preventDefault(),
                g._turnPage.call(e, d.opts.next);
            h.mouseAction = !1
        },
        _flip: function(a) {
            a.stopPropagation();
            a = f(a.target).data().f.opts;
            a.turn.trigger("turn", [a.next]);
            a.turn.data().opts.autoCenter && a.turn.turn("center", a.next)
        },
        _touchStart: function() {
            var a = this.data(), b;
            for (b in a.pages)
                if (n(b, a.pages) && !1 === i._eventStart.apply(a.pages[b], arguments))
                    return !1
        },
        _touchMove: function() {
            var a = this.data(), b;
            for (b in a.pages)
                n(b, a.pages) && i._eventMove.apply(a.pages[b], arguments)
        },
        _touchEnd: function() {
            var a = this.data(), b;
            for (b in a.pages)
                n(b, a.pages) && i._eventEnd.apply(a.pages[b], arguments)
        },
        calculateZ: function(a) {
            var b, c, d, e, h = this, f = this.data();
            b = this.turn("view");
            var i = b[0] || b[1]
              , g = a.length - 1
              , j = {
                pageZ: {},
                partZ: {},
                pageV: {}
            }
              , k = function(a) {
                a = h.turn("view", a);
                a[0] && (j.pageV[a[0]] = !0);
                a[1] && (j.pageV[a[1]] = !0)
            };
            for (b = 0; b <= g; b++)
                c = a[b],
                d = f.pages[c].data().f.opts.next,
                e = f.pagePlace[c],
                k(c),
                k(d),
                c = f.pagePlace[d] == d ? d : c,
                j.pageZ[c] = f.totalPages - Math.abs(i - c),
                j.partZ[e] = 2 * f.totalPages - g + b;
            return j
        },
        update: function() {
            var a, b = this.data();
            if (this.turn("animating") && 0 !== b.pageMv[0]) {
                var c, d = this.turn("calculateZ", b.pageMv), e = this.turn("corner"), h = this.turn("view"), i = this.turn("view", b.tpage);
                for (a in b.pageWrap)
                    if (n(a, b.pageWrap) && (c = b.pageObjs[a].hasClass("fixed"),
                    b.pageWrap[a].css({
                        display: d.pageV[a] || c ? "" : "none",
                        zIndex: (b.pageObjs[a].hasClass("hard") ? d.partZ[a] : d.pageZ[a]) || (c ? -1 : 0)
                    }),
                    c = b.pages[a]))
                        c.flip("z", d.partZ[a] || null),
                        d.pageV[a] && c.flip("resize"),
                        b.tpage ? c.flip("hover", !1).flip("disable", -1 == f.inArray(parseInt(a, 10), b.pageMv) && a != i[0] && a != i[1]) : c.flip("hover", !1 === e).flip("disable", a != h[0] && a != h[1])
            } else
                for (a in b.pageWrap)
                    n(a, b.pageWrap) && (d = g._setPageLoc.call(this, a),
                    b.pages[a] && b.pages[a].flip("disable", b.disabled || 1 != d).flip("hover", !0).flip("z", null));
            return this
        },
        _updateShadow: function() {
            var a, b, c = this.data(), d = this.width(), e = this.height(), h = "single" == c.display ? d : d / 2;
            a = this.turn("view");
            c.shadow || (c.shadow = f("<div />", {
                "class": "shadow",
                css: l(0, 0, 0).css
            }).appendTo(this));
            for (var i = 0; i < c.pageMv.length && a[0] && a[1]; i++)
                a = this.turn("view", c.pages[c.pageMv[i]].data().f.opts.next),
                b = this.turn("view", c.pageMv[i]),
                a[0] = a[0] && b[0],
                a[1] = a[1] && b[1];
            switch (a[0] ? a[1] ? 3 : "ltr" == c.direction ? 2 : 1 : "ltr" == c.direction ? 1 : 2) {
            case 1:
                c.shadow.css({
                    width: h,
                    height: e,
                    top: 0,
                    left: h
                });
                break;
            case 2:
                c.shadow.css({
                    width: h,
                    height: e,
                    top: 0,
                    left: 0
                });
                break;
            case 3:
                c.shadow.css({
                    width: d,
                    height: e,
                    top: 0,
                    left: 0
                })
            }
        },
        _setPageLoc: function(a) {
            var b = this.data()
              , c = this.turn("view")
              , d = 0;
            if (a == c[0] || a == c[1])
                d = 1;
            else if ("single" == b.display && a == c[0] + 1 || "double" == b.display && a == c[0] - 2 || a == c[1] + 2)
                d = 2;
            if (!this.turn("animating"))
                switch (d) {
                case 1:
                    b.pageWrap[a].css({
                        zIndex: b.totalPages,
                        display: ""
                    });
                    break;
                case 2:
                    b.pageWrap[a].css({
                        zIndex: b.totalPages - 1,
                        display: ""
                    });
                    break;
                case 0:
                    b.pageWrap[a].css({
                        zIndex: 0,
                        display: b.pageObjs[a].hasClass("fixed") ? "" : "none"
                    })
                }
            return d
        },
        options: function(a) {
            if (void 0 === a)
                return this.data().opts;
            var b = this.data();
            f.extend(b.opts, a);
            a.pages && this.turn("pages", a.pages);
            a.page && this.turn("page", a.page);
            a.display && this.turn("display", a.display);
            a.direction && this.turn("direction", a.direction);
            a.width && a.height && this.turn("size", a.width, a.height);
            if (a.when)
                for (var c in a.when)
                    n(c, a.when) && this.unbind(c).bind(c, a.when[c]);
            return this
        },
        version: function() {
            return "4.1.0"
        }
    }, i = {
        init: function(a) {
            this.data({
                f: {
                    disabled: !1,
                    hover: !1,
                    effect: this.hasClass("hard") ? "hard" : "sheet"
                }
            });
            this.flip("options", a);
            i._addPageWrapper.call(this);
            return this
        },
        setData: function(a) {
            var b = this.data();
            b.f = f.extend(b.f, a);
            return this
        },
        options: function(a) {
            var b = this.data().f;
            return a ? (i.setData.call(this, {
                opts: f.extend({}, b.opts || X, a)
            }),
            this) : b.opts
        },
        z: function(a) {
            var b = this.data().f;
            b.opts["z-index"] = a;
            b.fwrapper && b.fwrapper.css({
                zIndex: a || parseInt(b.parent.css("z-index"), 10) || 0
            });
            return this
        },
        _cAllowed: function() {
            var a = this.data().f
              , b = a.opts.page
              , c = a.opts.turn.data()
              , d = b % 2;
            return "hard" == a.effect ? "ltr" == c.direction ? [d ? "r" : "l"] : [d ? "l" : "r"] : "single" == c.display ? 1 == b ? "ltr" == c.direction ? o.forward : o.backward : b == c.totalPages ? "ltr" == c.direction ? o.backward : o.forward : o.all : "ltr" == c.direction ? o[d ? "forward" : "backward"] : o[d ? "backward" : "forward"]
        },
        _cornerActivated: function(a) {
            var b = this.data().f
              , c = this.width()
              , d = this.height()
              , a = {
                x: a.x,
                y: a.y,
                corner: ""
            }
              , e = b.opts.cornerSize;
            if (0 >= a.x || 0 >= a.y || a.x >= c || a.y >= d)
                return !1;
            var h = i._cAllowed.call(this);
            switch (b.effect) {
            case "hard":
                if (a.x > c - e)
                    a.corner = "r";
                else if (a.x < e)
                    a.corner = "l";
                else
                    return !1;
                break;
            case "sheet":
                if (a.y < e)
                    a.corner += "t";
                else if (a.y >= d - e)
                    a.corner += "b";
                else
                    return !1;
                if (a.x <= e)
                    a.corner += "l";
                else if (a.x >= c - e)
                    a.corner += "r";
                else
                    return !1
            }
            return !a.corner || -1 == f.inArray(a.corner, h) ? !1 : a
        },
        _isIArea: function(a) {
            var b = this.data().f.parent.offset()
              , a = t && a.originalEvent ? a.originalEvent.touches[0] : a;
            return i._cornerActivated.call(this, {
                x: a.pageX - b.left,
                y: a.pageY - b.top
            })
        },
        _c: function(a, b) {
            b = b || 0;
            switch (a) {
            case "tl":
                return j(b, b);
            case "tr":
                return j(this.width() - b, b);
            case "bl":
                return j(b, this.height() - b);
            case "br":
                return j(this.width() - b, this.height() - b);
            case "l":
                return j(b, 0);
            case "r":
                return j(this.width() - b, 0)
            }
        },
        _c2: function(a) {
            switch (a) {
            case "tl":
                return j(2 * this.width(), 0);
            case "tr":
                return j(-this.width(), 0);
            case "bl":
                return j(2 * this.width(), this.height());
            case "br":
                return j(-this.width(), this.height());
            case "l":
                return j(2 * this.width(), 0);
            case "r":
                return j(-this.width(), 0)
            }
        },
        _foldingPage: function() {
            var a = this.data().f;
            if (a) {
                var b = a.opts;
                if (b.turn)
                    return a = b.turn.data(),
                    "single" == a.display ? 1 < b.next || 1 < b.page ? a.pageObjs[0] : null : a.pageObjs[b.next]
            }
        },
        _backGradient: function() {
            var a = this.data().f
              , b = a.opts.turn.data();
            if ((b = b.opts.gradients && ("single" == b.display || 2 != a.opts.page && a.opts.page != b.totalPages - 1)) && !a.bshadow)
                a.bshadow = f("<div/>", l(0, 0, 1)).css({
                    position: "",
                    width: this.width(),
                    height: this.height()
                }).appendTo(a.parent);
            return b
        },
        type: function() {
            return this.data().f.effect
        },
        resize: function(a) {
            var b = this.data().f
              , c = b.opts.turn.data()
              , d = this.width()
              , e = this.height();
            switch (b.effect) {
            case "hard":
                a && (b.wrapper.css({
                    width: d,
                    height: e
                }),
                b.fpage.css({
                    width: d,
                    height: e
                }),
                c.opts.gradients && (b.ashadow.css({
                    width: d,
                    height: e
                }),
                b.bshadow.css({
                    width: d,
                    height: e
                })));
                break;
            case "sheet":
                a && (a = Math.round(Math.sqrt(Math.pow(d, 2) + Math.pow(e, 2))),
                b.wrapper.css({
                    width: a,
                    height: a
                }),
                b.fwrapper.css({
                    width: a,
                    height: a
                }).children(":first-child").css({
                    width: d,
                    height: e
                }),
                b.fpage.css({
                    width: d,
                    height: e
                }),
                c.opts.gradients && b.ashadow.css({
                    width: d,
                    height: e
                }),
                i._backGradient.call(this) && b.bshadow.css({
                    width: d,
                    height: e
                })),
                b.parent.is(":visible") && (c = C(b.parent[0]),
                b.fwrapper.css({
                    top: c.top,
                    left: c.left
                }),
                c = C(b.opts.turn[0]),
                b.fparent.css({
                    top: -c.top,
                    left: -c.left
                })),
                this.flip("z", b.opts["z-index"])
            }
        },
        _addPageWrapper: function() {
            var a = this.data().f
              , b = a.opts.turn.data()
              , c = this.parent();
            a.parent = c;
            if (!a.wrapper)
                switch (a.effect) {
                case "hard":
                    var d = {};
                    d[v + "transform-style"] = "preserve-3d";
                    d[v + "backface-visibility"] = "hidden";
                    a.wrapper = f("<div/>", l(0, 0, 2)).css(d).appendTo(c).prepend(this);
                    a.fpage = f("<div/>", l(0, 0, 1)).css(d).appendTo(c);
                    b.opts.gradients && (a.ashadow = f("<div/>", l(0, 0, 0)).hide().appendTo(c),
                    a.bshadow = f("<div/>", l(0, 0, 0)));
                    break;
                case "sheet":
                    var d = this.width()
                      , e = this.height();
                    Math.round(Math.sqrt(Math.pow(d, 2) + Math.pow(e, 2)));
                    a.fparent = a.opts.turn.data().fparent;
                    a.fparent || (d = f("<div/>", {
                        css: {
                            "pointer-events": "none"
                        }
                    }).hide(),
                    d.data().flips = 0,
                    d.css(l(0, 0, "auto", "visible").css).appendTo(a.opts.turn),
                    a.opts.turn.data().fparent = d,
                    a.fparent = d);
                    this.css({
                        position: "absolute",
                        top: 0,
                        left: 0,
                        bottom: "auto",
                        right: "auto"
                    });
                    a.wrapper = f("<div/>", l(0, 0, this.css("z-index"))).appendTo(c).prepend(this);
                    a.fwrapper = f("<div/>", l(c.offset().top, c.offset().left)).hide().appendTo(a.fparent);
                    a.fpage = f("<div/>", l(0, 0, 0, "visible")).css({
                        cursor: "default"
                    }).appendTo(a.fwrapper);
                    b.opts.gradients && (a.ashadow = f("<div/>", l(0, 0, 1)).appendTo(a.fpage));
                    i.setData.call(this, a)
                }
            i.resize.call(this, !0)
        },
        _fold: function(a) {
            var b = this.data().f
              , c = b.opts.turn.data()
              , d = i._c.call(this, a.corner)
              , e = this.width()
              , h = this.height();
            switch (b.effect) {
            case "hard":
                a.x = "l" == a.corner ? Math.min(Math.max(a.x, 0), 2 * e) : Math.max(Math.min(a.x, e), -e);
                var f, g, r, w, k, n = c.totalPages, l = b.opts["z-index"] || n, p = {
                    overflow: "visible"
                }, o = d.x ? (d.x - a.x) / e : a.x / e, q = 90 * o, s = 90 > q;
                switch (a.corner) {
                case "l":
                    w = "0% 50%";
                    k = "100% 50%";
                    s ? (f = 0,
                    g = 0 < b.opts.next - 1,
                    r = 1) : (f = "100%",
                    g = b.opts.page + 1 < n,
                    r = 0);
                    break;
                case "r":
                    w = "100% 50%",
                    k = "0% 50%",
                    q = -q,
                    e = -e,
                    s ? (f = 0,
                    g = b.opts.next + 1 < n,
                    r = 0) : (f = "-100%",
                    g = 1 != b.opts.page,
                    r = 1)
                }
                p[v + "perspective-origin"] = k;
                b.wrapper.transform("rotateY(" + q + "deg)translate3d(0px, 0px, " + (this.attr("depth") || 0) + "px)", k);
                b.fpage.transform("translateX(" + e + "px) rotateY(" + (180 + q) + "deg)", w);
                b.parent.css(p);
                s ? (o = -o + 1,
                b.wrapper.css({
                    zIndex: l + 1
                }),
                b.fpage.css({
                    zIndex: l
                })) : (o -= 1,
                b.wrapper.css({
                    zIndex: l
                }),
                b.fpage.css({
                    zIndex: l + 1
                }));
                c.opts.gradients && (g ? b.ashadow.css({
                    display: "",
                    left: f,
                    backgroundColor: "rgba(0,0,0," + 0.5 * o + ")"
                }).transform("rotateY(0deg)") : b.ashadow.hide(),
                b.bshadow.css({
                    opacity: -o + 1
                }),
                s ? b.bshadow.parent()[0] != b.wrapper[0] && b.bshadow.appendTo(b.wrapper) : b.bshadow.parent()[0] != b.fpage[0] && b.bshadow.appendTo(b.fpage),
                O(b.bshadow, j(100 * r, 0), j(100 * (-r + 1), 0), [[0, "rgba(0,0,0,0.3)"], [1, "rgba(0,0,0,0)"]], 2));
                break;
            case "sheet":
                var t = this, G = 0, y, z, A, L, x, M, C, u = j(0, 0), P = j(0, 0), m = j(0, 0), I = i._foldingPage.call(this);
                Math.tan(0);
                var N = c.opts.acceleration
                  , Q = b.wrapper.height()
                  , D = "t" == a.corner.substr(0, 1)
                  , B = "l" == a.corner.substr(1, 1)
                  , H = function() {
                    var b = j(0, 0)
                      , f = j(0, 0);
                    b.x = d.x ? d.x - a.x : a.x;
                    b.y = T ? d.y ? d.y - a.y : a.y : 0;
                    f.x = B ? e - b.x / 2 : a.x + b.x / 2;
                    f.y = b.y / 2;
                    var g = K - Math.atan2(b.y, b.x)
                      , k = g - Math.atan2(f.y, f.x)
                      , k = Math.max(0, Math.sin(k) * Math.sqrt(Math.pow(f.x, 2) + Math.pow(f.y, 2)));
                    G = 180 * (g / J);
                    m = j(k * Math.sin(g), k * Math.cos(g));
                    if (g > K && (m.x += Math.abs(m.y * b.y / b.x),
                    m.y = 0,
                    Math.round(m.x * Math.tan(J - g)) < h))
                        return a.y = Math.sqrt(Math.pow(h, 2) + 2 * f.x * b.x),
                        D && (a.y = h - a.y),
                        H();
                    if (g > K && (b = J - g,
                    f = Q - h / Math.sin(b),
                    u = j(Math.round(f * Math.cos(b)), Math.round(f * Math.sin(b))),
                    B && (u.x = -u.x),
                    D))
                        u.y = -u.y;
                    y = Math.round(m.y / Math.tan(g) + m.x);
                    b = e - y;
                    f = b * Math.cos(2 * g);
                    k = b * Math.sin(2 * g);
                    P = j(Math.round(B ? b - f : y + f), Math.round(D ? k : h - k));
                    if (c.opts.gradients && (x = b * Math.sin(g),
                    b = i._c2.call(t, a.corner),
                    b = Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2)) / e,
                    C = Math.sin(K * (1 < b ? 2 - b : b)),
                    M = Math.min(b, 1),
                    L = 100 < x ? (x - 100) / x : 0,
                    z = j(100 * (x * Math.sin(g) / e), 100 * (x * Math.cos(g) / h)),
                    i._backGradient.call(t) && (A = j(100 * (1.2 * x * Math.sin(g) / e), 100 * (1.2 * x * Math.cos(g) / h)),
                    B || (A.x = 100 - A.x),
                    !D)))
                        A.y = 100 - A.y;
                    m.x = Math.round(m.x);
                    m.y = Math.round(m.y);
                    return !0
                };
                f = function(a, d, f, g) {
                    var k = ["0", "auto"]
                      , m = (e - Q) * f[0] / 100
                      , l = (h - Q) * f[1] / 100
                      , d = {
                        left: k[d[0]],
                        top: k[d[1]],
                        right: k[d[2]],
                        bottom: k[d[3]]
                    }
                      , k = {}
                      , n = 90 != g && -90 != g ? B ? -1 : 1 : 0
                      , r = f[0] + "% " + f[1] + "%";
                    t.css(d).transform(F(g) + E(a.x + n, a.y, N), r);
                    b.fpage.css(d).transform(F(g) + E(a.x + P.x - u.x - e * f[0] / 100, a.y + P.y - u.y - h * f[1] / 100, N) + F((180 / g - 2) * g), r);
                    b.wrapper.transform(E(-a.x + m - n, -a.y + l, N) + F(-g), r);
                    b.fwrapper.transform(E(-a.x + u.x + m, -a.y + u.y + l, N) + F(-g), r);
                    c.opts.gradients && (f[0] && (z.x = 100 - z.x),
                    f[1] && (z.y = 100 - z.y),
                    k["box-shadow"] = "0 0 20px rgba(0,0,0," + 0.5 * C + ")",
                    I.css(k),
                    O(b.ashadow, j(B ? 100 : 0, D ? 0 : 100), j(z.x, z.y), [[L, "rgba(0,0,0,0)"], [0.8 * (1 - L) + L, "rgba(0,0,0," + 0.2 * M + ")"], [1, "rgba(255,255,255," + 0.2 * M + ")"]], 3, 0),
                    i._backGradient.call(t) && O(b.bshadow, j(B ? 0 : 100, D ? 0 : 100), j(A.x, A.y), [[0.6, "rgba(0,0,0,0)"], [0.8, "rgba(0,0,0," + 0.3 * M + ")"], [1, "rgba(0,0,0,0)"]], 3))
                }
                ;
                switch (a.corner) {
                case "tl":
                    a.x = Math.max(a.x, 1);
                    H();
                    f(m, [1, 0, 0, 1], [100, 0], G);
                    break;
                case "tr":
                    a.x = Math.min(a.x, e - 1);
                    H();
                    f(j(-m.x, m.y), [0, 0, 0, 1], [0, 0], -G);
                    break;
                case "bl":
                    a.x = Math.max(a.x, 1);
                    H();
                    f(j(m.x, -m.y), [1, 1, 0, 0], [100, 100], -G);
                    break;
                case "br":
                    a.x = Math.min(a.x, e - 1),
                    H(),
                    f(j(-m.x, -m.y), [0, 1, 1, 0], [0, 100], G)
                }
            }
            b.point = a
        },
        _moveFoldingPage: function(a) {
            var b = this.data().f;
            if (b) {
                var c = b.opts.turn
                  , d = c.data()
                  , e = d.pagePlace;
                a ? (d = b.opts.next,
                e[d] != b.opts.page && (b.folding && i._moveFoldingPage.call(this, !1),
                i._foldingPage.call(this).appendTo(b.fpage),
                e[d] = b.opts.page,
                b.folding = d),
                c.turn("update")) : b.folding && (d.pages[b.folding] ? (c = d.pages[b.folding].data().f,
                d.pageObjs[b.folding].appendTo(c.wrapper)) : d.pageWrap[b.folding] && d.pageObjs[b.folding].appendTo(d.pageWrap[b.folding]),
                b.folding in e && (e[b.folding] = b.folding),
                delete b.folding)
            }
        },
        _showFoldedPage: function(a, b) {
            var c = i._foldingPage.call(this)
              , d = this.data()
              , e = d.f
              , f = e.visible;
            if (c) {
                if (!f || !e.point || e.point.corner != a.corner)
                    if (c = "hover" == e.status || "peel" == e.status || e.opts.turn.data().mouseAction ? a.corner : null,
                    f = !1,
                    "prevented" == s("start", this, [e.opts, c]))
                        return !1;
                if (b) {
                    var g = this
                      , d = e.point && e.point.corner == a.corner ? e.point : i._c.call(this, a.corner, 1);
                    this.animatef({
                        from: [d.x, d.y],
                        to: [a.x, a.y],
                        duration: 500,
                        frame: function(b) {
                            a.x = Math.round(b[0]);
                            a.y = Math.round(b[1]);
                            i._fold.call(g, a)
                        }
                    })
                } else
                    i._fold.call(this, a),
                    d.effect && !d.effect.turning && this.animatef(!1);
                if (!f)
                    switch (e.effect) {
                    case "hard":
                        e.visible = !0;
                        i._moveFoldingPage.call(this, !0);
                        e.fpage.show();
                        e.opts.shadows && e.bshadow.show();
                        break;
                    case "sheet":
                        e.visible = !0,
                        e.fparent.show().data().flips++,
                        i._moveFoldingPage.call(this, !0),
                        e.fwrapper.show(),
                        e.bshadow && e.bshadow.show()
                    }
                return !0
            }
            return !1
        },
        hide: function() {
            var a = this.data().f
              , b = a.opts.turn.data()
              , c = i._foldingPage.call(this);
            switch (a.effect) {
            case "hard":
                b.opts.gradients && (a.bshadowLoc = 0,
                a.bshadow.remove(),
                a.ashadow.hide());
                a.wrapper.transform("");
                a.fpage.hide();
                break;
            case "sheet":
                0 === --a.fparent.data().flips && a.fparent.hide(),
                this.css({
                    left: 0,
                    top: 0,
                    right: "auto",
                    bottom: "auto"
                }).transform(""),
                a.wrapper.transform(""),
                a.fwrapper.hide(),
                a.bshadow && a.bshadow.hide(),
                c.transform("")
            }
            a.visible = !1;
            return this
        },
        hideFoldedPage: function(a) {
            var b = this.data().f;
            if (b.point) {
                var c = this
                  , d = b.point
                  , e = function() {
                    b.point = null;
                    b.status = "";
                    c.flip("hide");
                    c.trigger("end", [b.opts, !1])
                };
                if (a) {
                    var f = i._c.call(this, d.corner)
                      , a = "t" == d.corner.substr(0, 1) ? Math.min(0, d.y - f.y) / 2 : Math.max(0, d.y - f.y) / 2
                      , g = j(d.x, d.y + a)
                      , l = j(f.x, f.y - a);
                    this.animatef({
                        from: 0,
                        to: 1,
                        frame: function(a) {
                            a = R(d, g, l, f, a);
                            d.x = a.x;
                            d.y = a.y;
                            i._fold.call(c, d)
                        },
                        complete: e,
                        duration: 800,
                        hiding: !0
                    })
                } else
                    this.animatef(!1),
                    e()
            }
        },
        turnPage: function(a) {
            var b = this
              , c = this.data().f
              , d = c.opts.turn.data()
              , a = {
                corner: c.corner ? c.corner.corner : a || i._cAllowed.call(this)[0]
            }
              , e = c.point || i._c.call(this, a.corner, c.opts.turn ? d.opts.elevation : 0)
              , f = i._c2.call(this, a.corner);
            this.trigger("flip").animatef({
                from: 0,
                to: 1,
                frame: function(c) {
                    c = R(e, e, f, f, c);
                    a.x = c.x;
                    a.y = c.y;
                    i._showFoldedPage.call(b, a)
                },
                complete: function() {
                    b.trigger("end", [c.opts, !0])
                },
                duration: d.opts.duration,
                turning: !0
            });
            c.corner = null
        },
        moving: function() {
            return "effect"in this.data()
        },
        isTurning: function() {
            return this.flip("moving") && this.data().effect.turning
        },
        corner: function() {
            return this.data().f.corner
        },
        _eventStart: function(a) {
            var b = this.data().f
              , c = b.opts.turn;
            if (!b.corner && !b.disabled && !this.flip("isTurning") && b.opts.page == c.data().pagePlace[b.opts.page]) {
                b.corner = i._isIArea.call(this, a);
                if (b.corner && i._foldingPage.call(this))
                    return this.trigger("pressed", [b.point]),
                    i._showFoldedPage.call(this, b.corner),
                    !1;
                b.corner = null
            }
        },
        _eventMove: function(a) {
            var b = this.data().f;
            if (!b.disabled)
                if (a = t ? a.originalEvent.touches : [a],
                b.corner) {
                    var c = b.parent.offset();
                    b.corner.x = a[0].pageX - c.left;
                    b.corner.y = a[0].pageY - c.top;
                    i._showFoldedPage.call(this, b.corner)
                } else if (b.hover && !this.data().effect && this.is(":visible"))
                    if (a = i._isIArea.call(this, a[0])) {
                        if ("sheet" == b.effect && 2 == a.corner.length || "hard" == b.effect)
                            b.status = "hover",
                            b = i._c.call(this, a.corner, b.opts.cornerSize / 2),
                            a.x = b.x,
                            a.y = b.y,
                            i._showFoldedPage.call(this, a, !0)
                    } else
                        "hover" == b.status && (b.status = "",
                        i.hideFoldedPage.call(this, !0))
        },
        _eventEnd: function() {
            var a = this.data().f
              , b = a.corner;
            !a.disabled && b && "prevented" != s("released", this, [a.point || b]) && i.hideFoldedPage.call(this, !0);
            a.corner = null
        },
        disable: function(a) {
            i.setData.call(this, {
                disabled: a
            });
            return this
        },
        hover: function(a) {
            i.setData.call(this, {
                hover: a
            });
            return this
        },
        peel: function(a, b) {
            var c = this.data().f;
            if (a) {
                if (-1 == f.inArray(a, o.all))
                    throw p("Corner " + a + " is not permitted");
                if (-1 != f.inArray(a, i._cAllowed.call(this))) {
                    var d = i._c.call(this, a, c.opts.cornerSize / 2);
                    c.status = "peel";
                    i._showFoldedPage.call(this, {
                        corner: a,
                        x: d.x,
                        y: d.y
                    }, b)
                }
            } else
                c.status = "",
                i.hideFoldedPage.call(this, b);
            return this
        }
    };
    window.requestAnim = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
        window.setTimeout(a, 1E3 / 60)
    }
    ;
    f.extend(f.fn, {
        flip: function() {
            return I(f(this[0]), i, arguments)
        },
        turn: function() {
            return I(f(this[0]), g, arguments)
        },
        transform: function(a, b) {
            var c = {};
            b && (c[v + "transform-origin"] = b);
            c[v + "transform"] = a;
            return this.css(c)
        },
        animatef: function(a) {
            var b = this.data();
            b.effect && b.effect.stop();
            if (a) {
                a.to.length || (a.to = [a.to]);
                a.from.length || (a.from = [a.from]);
                for (var c = [], d = a.to.length, e = !0, g = this, i = (new Date).getTime(), j = function() {
                    if (b.effect && e) {
                        for (var f = [], k = Math.min(a.duration, (new Date).getTime() - i), l = 0; l < d; l++)
                            f.push(b.effect.easing(1, k, a.from[l], c[l], a.duration));
                        a.frame(d == 1 ? f[0] : f);
                        if (k == a.duration) {
                            delete b.effect;
                            g.data(b);
                            a.complete && a.complete()
                        } else
                            window.requestAnim(j)
                    }
                }, l = 0; l < d; l++)
                    c.push(a.to[l] - a.from[l]);
                b.effect = f.extend({
                    stop: function() {
                        e = false
                    },
                    easing: function(a, b, c, d, e) {
                        return d * Math.sqrt(1 - (b = b / e - 1) * b) + c
                    }
                }, a);
                this.data(b);
                j()
            } else
                delete b.effect
        }
    });
    f.isTouch = t;
    f.mouseEvents = q;
    f.cssPrefix = S;
    f.cssTransitionEnd = function() {
        var a, b = document.createElement("fakeelement"), c = {
            transition: "transitionend",
            OTransition: "oTransitionEnd",
            MSTransition: "transitionend",
            MozTransition: "transitionend",
            WebkitTransition: "webkitTransitionEnd"
        };
        for (a in c)
            if (void 0 !== b.style[a])
                return c[a]
    }
    ;
    f.findPos = C
}
)(jQuery);
//XXX: PIXI 3.0.7
!function(t) {
    if ("object" == typeof exports && "undefined" != typeof module)
        module.exports = t();
    else if ("function" == typeof define && define.amd)
        define([], t);
    else {
        var e;
        e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this,
        e.PIXI = t()
    }
}(function() {
    var t;
    return function e(t, r, i) {
        function n(s, a) {
            if (!r[s]) {
                if (!t[s]) {
                    var h = "function" == typeof require && require;
                    if (!a && h)
                        return h(s, !0);
                    if (o)
                        return o(s, !0);
                    var l = new Error("Cannot find module '" + s + "'");
                    throw l.code = "MODULE_NOT_FOUND",
                    l
                }
                var u = r[s] = {
                    exports: {}
                };
                t[s][0].call(u.exports, function(e) {
                    var r = t[s][1][e];
                    return n(r ? r : e)
                }, u, u.exports, e, t, r, i)
            }
            return r[s].exports
        }
        for (var o = "function" == typeof require && require, s = 0; s < i.length; s++)
            n(i[s]);
        return n
    }({
        1: [function(t, e, r) {
            (function(r) {
                t("./polyfill");
                var i = e.exports = t("./core");
                i.extras = t("./extras"),
                i.filters = t("./filters"),
                i.interaction = t("./interaction"),
                i.loaders = t("./loaders"),
                i.mesh = t("./mesh"),
                i.loader = new i.loaders.Loader,
                Object.assign(i, t("./deprecation")),
                r.PIXI = i
            }
            ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }
        , {
            "./core": 29,
            "./deprecation": 78,
            "./extras": 85,
            "./filters": 102,
            "./interaction": 117,
            "./loaders": 120,
            "./mesh": 126,
            "./polyfill": 130
        }],
        2: [function(e, r, i) {
            (function(e) {
                !function() {
                    function i(t) {
                        var e = !1;
                        return function() {
                            if (e)
                                throw new Error("Callback was already called.");
                            e = !0,
                            t.apply(n, arguments)
                        }
                    }
                    var n, o, s = {};
                    n = this,
                    null != n && (o = n.async),
                    s.noConflict = function() {
                        return n.async = o,
                        s
                    }
                    ;
                    var a = Object.prototype.toString
                      , h = Array.isArray || function(t) {
                        return "[object Array]" === a.call(t)
                    }
                      , l = function(t, e) {
                        if (t.forEach)
                            return t.forEach(e);
                        for (var r = 0; r < t.length; r += 1)
                            e(t[r], r, t)
                    }
                      , u = function(t, e) {
                        if (t.map)
                            return t.map(e);
                        var r = [];
                        return l(t, function(t, i, n) {
                            r.push(e(t, i, n))
                        }),
                        r
                    }
                      , c = function(t, e, r) {
                        return t.reduce ? t.reduce(e, r) : (l(t, function(t, i, n) {
                            r = e(r, t, i, n)
                        }),
                        r)
                    }
                      , p = function(t) {
                        if (Object.keys)
                            return Object.keys(t);
                        var e = [];
                        for (var r in t)
                            t.hasOwnProperty(r) && e.push(r);
                        return e
                    };
                    "undefined" != typeof e && e.nextTick ? (s.nextTick = e.nextTick,
                    s.setImmediate = "undefined" != typeof setImmediate ? function(t) {
                        setImmediate(t)
                    }
                    : s.nextTick) : "function" == typeof setImmediate ? (s.nextTick = function(t) {
                        setImmediate(t)
                    }
                    ,
                    s.setImmediate = s.nextTick) : (s.nextTick = function(t) {
                        setTimeout(t, 0)
                    }
                    ,
                    s.setImmediate = s.nextTick),
                    s.each = function(t, e, r) {
                        function n(e) {
                            e ? (r(e),
                            r = function() {}
                            ) : (o += 1,
                            o >= t.length && r())
                        }
                        if (r = r || function() {}
                        ,
                        !t.length)
                            return r();
                        var o = 0;
                        l(t, function(t) {
                            e(t, i(n))
                        })
                    }
                    ,
                    s.forEach = s.each,
                    s.eachSeries = function(t, e, r) {
                        if (r = r || function() {}
                        ,
                        !t.length)
                            return r();
                        var i = 0
                          , n = function() {
                            e(t[i], function(e) {
                                e ? (r(e),
                                r = function() {}
                                ) : (i += 1,
                                i >= t.length ? r() : n())
                            })
                        };
                        n()
                    }
                    ,
                    s.forEachSeries = s.eachSeries,
                    s.eachLimit = function(t, e, r, i) {
                        var n = d(e);
                        n.apply(null, [t, r, i])
                    }
                    ,
                    s.forEachLimit = s.eachLimit;
                    var d = function(t) {
                        return function(e, r, i) {
                            if (i = i || function() {}
                            ,
                            !e.length || 0 >= t)
                                return i();
                            var n = 0
                              , o = 0
                              , s = 0;
                            !function a() {
                                if (n >= e.length)
                                    return i();
                                for (; t > s && o < e.length; )
                                    o += 1,
                                    s += 1,
                                    r(e[o - 1], function(t) {
                                        t ? (i(t),
                                        i = function() {}
                                        ) : (n += 1,
                                        s -= 1,
                                        n >= e.length ? i() : a())
                                    })
                            }()
                        }
                    }
                      , f = function(t) {
                        return function() {
                            var e = Array.prototype.slice.call(arguments);
                            return t.apply(null, [s.each].concat(e))
                        }
                    }
                      , v = function(t, e) {
                        return function() {
                            var r = Array.prototype.slice.call(arguments);
                            return e.apply(null, [d(t)].concat(r))
                        }
                    }
                      , g = function(t) {
                        return function() {
                            var e = Array.prototype.slice.call(arguments);
                            return t.apply(null, [s.eachSeries].concat(e))
                        }
                    }
                      , m = function(t, e, r, i) {
                        if (e = u(e, function(t, e) {
                            return {
                                index: e,
                                value: t
                            }
                        }),
                        i) {
                            var n = [];
                            t(e, function(t, e) {
                                r(t.value, function(r, i) {
                                    n[t.index] = i,
                                    e(r)
                                })
                            }, function(t) {
                                i(t, n)
                            })
                        } else
                            t(e, function(t, e) {
                                r(t.value, function(t) {
                                    e(t)
                                })
                            })
                    };
                    s.map = f(m),
                    s.mapSeries = g(m),
                    s.mapLimit = function(t, e, r, i) {
                        return y(e)(t, r, i)
                    }
                    ;
                    var y = function(t) {
                        return v(t, m)
                    };
                    s.reduce = function(t, e, r, i) {
                        s.eachSeries(t, function(t, i) {
                            r(e, t, function(t, r) {
                                e = r,
                                i(t)
                            })
                        }, function(t) {
                            i(t, e)
                        })
                    }
                    ,
                    s.inject = s.reduce,
                    s.foldl = s.reduce,
                    s.reduceRight = function(t, e, r, i) {
                        var n = u(t, function(t) {
                            return t
                        }).reverse();
                        s.reduce(n, e, r, i)
                    }
                    ,
                    s.foldr = s.reduceRight;
                    var x = function(t, e, r, i) {
                        var n = [];
                        e = u(e, function(t, e) {
                            return {
                                index: e,
                                value: t
                            }
                        }),
                        t(e, function(t, e) {
                            r(t.value, function(r) {
                                r && n.push(t),
                                e()
                            })
                        }, function(t) {
                            i(u(n.sort(function(t, e) {
                                return t.index - e.index
                            }), function(t) {
                                return t.value
                            }))
                        })
                    };
                    s.filter = f(x),
                    s.filterSeries = g(x),
                    s.select = s.filter,
                    s.selectSeries = s.filterSeries;
                    var b = function(t, e, r, i) {
                        var n = [];
                        e = u(e, function(t, e) {
                            return {
                                index: e,
                                value: t
                            }
                        }),
                        t(e, function(t, e) {
                            r(t.value, function(r) {
                                r || n.push(t),
                                e()
                            })
                        }, function(t) {
                            i(u(n.sort(function(t, e) {
                                return t.index - e.index
                            }), function(t) {
                                return t.value
                            }))
                        })
                    };
                    s.reject = f(b),
                    s.rejectSeries = g(b);
                    var _ = function(t, e, r, i) {
                        t(e, function(t, e) {
                            r(t, function(r) {
                                r ? (i(t),
                                i = function() {}
                                ) : e()
                            })
                        }, function(t) {
                            i()
                        })
                    };
                    s.detect = f(_),
                    s.detectSeries = g(_),
                    s.some = function(t, e, r) {
                        s.each(t, function(t, i) {
                            e(t, function(t) {
                                t && (r(!0),
                                r = function() {}
                                ),
                                i()
                            })
                        }, function(t) {
                            r(!1)
                        })
                    }
                    ,
                    s.any = s.some,
                    s.every = function(t, e, r) {
                        s.each(t, function(t, i) {
                            e(t, function(t) {
                                t || (r(!1),
                                r = function() {}
                                ),
                                i()
                            })
                        }, function(t) {
                            r(!0)
                        })
                    }
                    ,
                    s.all = s.every,
                    s.sortBy = function(t, e, r) {
                        s.map(t, function(t, r) {
                            e(t, function(e, i) {
                                e ? r(e) : r(null, {
                                    value: t,
                                    criteria: i
                                })
                            })
                        }, function(t, e) {
                            if (t)
                                return r(t);
                            var i = function(t, e) {
                                var r = t.criteria
                                  , i = e.criteria;
                                return i > r ? -1 : r > i ? 1 : 0
                            };
                            r(null, u(e.sort(i), function(t) {
                                return t.value
                            }))
                        })
                    }
                    ,
                    s.auto = function(t, e) {
                        e = e || function() {}
                        ;
                        var r = p(t)
                          , i = r.length;
                        if (!i)
                            return e();
                        var n = {}
                          , o = []
                          , a = function(t) {
                            o.unshift(t)
                        }
                          , u = function(t) {
                            for (var e = 0; e < o.length; e += 1)
                                if (o[e] === t)
                                    return void o.splice(e, 1)
                        }
                          , d = function() {
                            i--,
                            l(o.slice(0), function(t) {
                                t()
                            })
                        };
                        a(function() {
                            if (!i) {
                                var t = e;
                                e = function() {}
                                ,
                                t(null, n)
                            }
                        }),
                        l(r, function(r) {
                            var i = h(t[r]) ? t[r] : [t[r]]
                              , o = function(t) {
                                var i = Array.prototype.slice.call(arguments, 1);
                                if (i.length <= 1 && (i = i[0]),
                                t) {
                                    var o = {};
                                    l(p(n), function(t) {
                                        o[t] = n[t]
                                    }),
                                    o[r] = i,
                                    e(t, o),
                                    e = function() {}
                                } else
                                    n[r] = i,
                                    s.setImmediate(d)
                            }
                              , f = i.slice(0, Math.abs(i.length - 1)) || []
                              , v = function() {
                                return c(f, function(t, e) {
                                    return t && n.hasOwnProperty(e)
                                }, !0) && !n.hasOwnProperty(r)
                            };
                            if (v())
                                i[i.length - 1](o, n);
                            else {
                                var g = function() {
                                    v() && (u(g),
                                    i[i.length - 1](o, n))
                                };
                                a(g)
                            }
                        })
                    }
                    ,
                    s.retry = function(t, e, r) {
                        var i = 5
                          , n = [];
                        "function" == typeof t && (r = e,
                        e = t,
                        t = i),
                        t = parseInt(t, 10) || i;
                        var o = function(i, o) {
                            for (var a = function(t, e) {
                                return function(r) {
                                    t(function(t, i) {
                                        r(!t || e, {
                                            err: t,
                                            result: i
                                        })
                                    }, o)
                                }
                            }; t; )
                                n.push(a(e, !(t -= 1)));
                            s.series(n, function(t, e) {
                                e = e[e.length - 1],
                                (i || r)(e.err, e.result)
                            })
                        };
                        return r ? o() : o
                    }
                    ,
                    s.waterfall = function(t, e) {
                        if (e = e || function() {}
                        ,
                        !h(t)) {
                            var r = new Error("First argument to waterfall must be an array of functions");
                            return e(r)
                        }
                        if (!t.length)
                            return e();
                        var i = function(t) {
                            return function(r) {
                                if (r)
                                    e.apply(null, arguments),
                                    e = function() {}
                                    ;
                                else {
                                    var n = Array.prototype.slice.call(arguments, 1)
                                      , o = t.next();
                                    n.push(o ? i(o) : e),
                                    s.setImmediate(function() {
                                        t.apply(null, n)
                                    })
                                }
                            }
                        };
                        i(s.iterator(t))()
                    }
                    ;
                    var T = function(t, e, r) {
                        if (r = r || function() {}
                        ,
                        h(e))
                            t.map(e, function(t, e) {
                                t && t(function(t) {
                                    var r = Array.prototype.slice.call(arguments, 1);
                                    r.length <= 1 && (r = r[0]),
                                    e.call(null, t, r)
                                })
                            }, r);
                        else {
                            var i = {};
                            t.each(p(e), function(t, r) {
                                e[t](function(e) {
                                    var n = Array.prototype.slice.call(arguments, 1);
                                    n.length <= 1 && (n = n[0]),
                                    i[t] = n,
                                    r(e)
                                })
                            }, function(t) {
                                r(t, i)
                            })
                        }
                    };
                    s.parallel = function(t, e) {
                        T({
                            map: s.map,
                            each: s.each
                        }, t, e)
                    }
                    ,
                    s.parallelLimit = function(t, e, r) {
                        T({
                            map: y(e),
                            each: d(e)
                        }, t, r)
                    }
                    ,
                    s.series = function(t, e) {
                        if (e = e || function() {}
                        ,
                        h(t))
                            s.mapSeries(t, function(t, e) {
                                t && t(function(t) {
                                    var r = Array.prototype.slice.call(arguments, 1);
                                    r.length <= 1 && (r = r[0]),
                                    e.call(null, t, r)
                                })
                            }, e);
                        else {
                            var r = {};
                            s.eachSeries(p(t), function(e, i) {
                                t[e](function(t) {
                                    var n = Array.prototype.slice.call(arguments, 1);
                                    n.length <= 1 && (n = n[0]),
                                    r[e] = n,
                                    i(t)
                                })
                            }, function(t) {
                                e(t, r)
                            })
                        }
                    }
                    ,
                    s.iterator = function(t) {
                        var e = function(r) {
                            var i = function() {
                                return t.length && t[r].apply(null, arguments),
                                i.next()
                            };
                            return i.next = function() {
                                return r < t.length - 1 ? e(r + 1) : null
                            }
                            ,
                            i
                        };
                        return e(0)
                    }
                    ,
                    s.apply = function(t) {
                        var e = Array.prototype.slice.call(arguments, 1);
                        return function() {
                            return t.apply(null, e.concat(Array.prototype.slice.call(arguments)))
                        }
                    }
                    ;
                    var E = function(t, e, r, i) {
                        var n = [];
                        t(e, function(t, e) {
                            r(t, function(t, r) {
                                n = n.concat(r || []),
                                e(t)
                            })
                        }, function(t) {
                            i(t, n)
                        })
                    };
                    s.concat = f(E),
                    s.concatSeries = g(E),
                    s.whilst = function(t, e, r) {
                        t() ? e(function(i) {
                            return i ? r(i) : void s.whilst(t, e, r)
                        }) : r()
                    }
                    ,
                    s.doWhilst = function(t, e, r) {
                        t(function(i) {
                            if (i)
                                return r(i);
                            var n = Array.prototype.slice.call(arguments, 1);
                            e.apply(null, n) ? s.doWhilst(t, e, r) : r()
                        })
                    }
                    ,
                    s.until = function(t, e, r) {
                        t() ? r() : e(function(i) {
                            return i ? r(i) : void s.until(t, e, r)
                        })
                    }
                    ,
                    s.doUntil = function(t, e, r) {
                        t(function(i) {
                            if (i)
                                return r(i);
                            var n = Array.prototype.slice.call(arguments, 1);
                            e.apply(null, n) ? r() : s.doUntil(t, e, r)
                        })
                    }
                    ,
                    s.queue = function(t, e) {
                        function r(t, e, r, i) {
                            return t.started || (t.started = !0),
                            h(e) || (e = [e]),
                            0 == e.length ? s.setImmediate(function() {
                                t.drain && t.drain()
                            }) : void l(e, function(e) {
                                var n = {
                                    data: e,
                                    callback: "function" == typeof i ? i : null
                                };
                                r ? t.tasks.unshift(n) : t.tasks.push(n),
                                t.saturated && t.tasks.length === t.concurrency && t.saturated(),
                                s.setImmediate(t.process)
                            })
                        }
                        void 0 === e && (e = 1);
                        var n = 0
                          , o = {
                            tasks: [],
                            concurrency: e,
                            saturated: null,
                            empty: null,
                            drain: null,
                            started: !1,
                            paused: !1,
                            push: function(t, e) {
                                r(o, t, !1, e)
                            },
                            kill: function() {
                                o.drain = null,
                                o.tasks = []
                            },
                            unshift: function(t, e) {
                                r(o, t, !0, e)
                            },
                            process: function() {
                                if (!o.paused && n < o.concurrency && o.tasks.length) {
                                    var e = o.tasks.shift();
                                    o.empty && 0 === o.tasks.length && o.empty(),
                                    n += 1;
                                    var r = function() {
                                        n -= 1,
                                        e.callback && e.callback.apply(e, arguments),
                                        o.drain && o.tasks.length + n === 0 && o.drain(),
                                        o.process()
                                    }
                                      , s = i(r);
                                    t(e.data, s)
                                }
                            },
                            length: function() {
                                return o.tasks.length
                            },
                            running: function() {
                                return n
                            },
                            idle: function() {
                                return o.tasks.length + n === 0
                            },
                            pause: function() {
                                o.paused !== !0 && (o.paused = !0,
                                o.process())
                            },
                            resume: function() {
                                o.paused !== !1 && (o.paused = !1,
                                o.process())
                            }
                        };
                        return o
                    }
                    ,
                    s.priorityQueue = function(t, e) {
                        function r(t, e) {
                            return t.priority - e.priority
                        }
                        function i(t, e, r) {
                            for (var i = -1, n = t.length - 1; n > i; ) {
                                var o = i + (n - i + 1 >>> 1);
                                r(e, t[o]) >= 0 ? i = o : n = o - 1
                            }
                            return i
                        }
                        function n(t, e, n, o) {
                            return t.started || (t.started = !0),
                            h(e) || (e = [e]),
                            0 == e.length ? s.setImmediate(function() {
                                t.drain && t.drain()
                            }) : void l(e, function(e) {
                                var a = {
                                    data: e,
                                    priority: n,
                                    callback: "function" == typeof o ? o : null
                                };
                                t.tasks.splice(i(t.tasks, a, r) + 1, 0, a),
                                t.saturated && t.tasks.length === t.concurrency && t.saturated(),
                                s.setImmediate(t.process)
                            })
                        }
                        var o = s.queue(t, e);
                        return o.push = function(t, e, r) {
                            n(o, t, e, r)
                        }
                        ,
                        delete o.unshift,
                        o
                    }
                    ,
                    s.cargo = function(t, e) {
                        var r = !1
                          , i = []
                          , n = {
                            tasks: i,
                            payload: e,
                            saturated: null,
                            empty: null,
                            drain: null,
                            drained: !0,
                            push: function(t, r) {
                                h(t) || (t = [t]),
                                l(t, function(t) {
                                    i.push({
                                        data: t,
                                        callback: "function" == typeof r ? r : null
                                    }),
                                    n.drained = !1,
                                    n.saturated && i.length === e && n.saturated()
                                }),
                                s.setImmediate(n.process)
                            },
                            process: function o() {
                                if (!r) {
                                    if (0 === i.length)
                                        return n.drain && !n.drained && n.drain(),
                                        void (n.drained = !0);
                                    var s = "number" == typeof e ? i.splice(0, e) : i.splice(0, i.length)
                                      , a = u(s, function(t) {
                                        return t.data
                                    });
                                    n.empty && n.empty(),
                                    r = !0,
                                    t(a, function() {
                                        r = !1;
                                        var t = arguments;
                                        l(s, function(e) {
                                            e.callback && e.callback.apply(null, t)
                                        }),
                                        o()
                                    })
                                }
                            },
                            length: function() {
                                return i.length
                            },
                            running: function() {
                                return r
                            }
                        };
                        return n
                    }
                    ;
                    var S = function(t) {
                        return function(e) {
                            var r = Array.prototype.slice.call(arguments, 1);
                            e.apply(null, r.concat([function(e) {
                                var r = Array.prototype.slice.call(arguments, 1);
                                "undefined" != typeof console && (e ? console.error && console.error(e) : console[t] && l(r, function(e) {
                                    console[t](e)
                                }))
                            }
                            ]))
                        }
                    };
                    s.log = S("log"),
                    s.dir = S("dir"),
                    s.memoize = function(t, e) {
                        var r = {}
                          , i = {};
                        e = e || function(t) {
                            return t
                        }
                        ;
                        var n = function() {
                            var n = Array.prototype.slice.call(arguments)
                              , o = n.pop()
                              , a = e.apply(null, n);
                            a in r ? s.nextTick(function() {
                                o.apply(null, r[a])
                            }) : a in i ? i[a].push(o) : (i[a] = [o],
                            t.apply(null, n.concat([function() {
                                r[a] = arguments;
                                var t = i[a];
                                delete i[a];
                                for (var e = 0, n = t.length; n > e; e++)
                                    t[e].apply(null, arguments)
                            }
                            ])))
                        };
                        return n.memo = r,
                        n.unmemoized = t,
                        n
                    }
                    ,
                    s.unmemoize = function(t) {
                        return function() {
                            return (t.unmemoized || t).apply(null, arguments)
                        }
                    }
                    ,
                    s.times = function(t, e, r) {
                        for (var i = [], n = 0; t > n; n++)
                            i.push(n);
                        return s.map(i, e, r)
                    }
                    ,
                    s.timesSeries = function(t, e, r) {
                        for (var i = [], n = 0; t > n; n++)
                            i.push(n);
                        return s.mapSeries(i, e, r)
                    }
                    ,
                    s.seq = function() {
                        var t = arguments;
                        return function() {
                            var e = this
                              , r = Array.prototype.slice.call(arguments)
                              , i = r.pop();
                            s.reduce(t, r, function(t, r, i) {
                                r.apply(e, t.concat([function() {
                                    var t = arguments[0]
                                      , e = Array.prototype.slice.call(arguments, 1);
                                    i(t, e)
                                }
                                ]))
                            }, function(t, r) {
                                i.apply(e, [t].concat(r))
                            })
                        }
                    }
                    ,
                    s.compose = function() {
                        return s.seq.apply(null, Array.prototype.reverse.call(arguments))
                    }
                    ;
                    var A = function(t, e) {
                        var r = function() {
                            var r = this
                              , i = Array.prototype.slice.call(arguments)
                              , n = i.pop();
                            return t(e, function(t, e) {
                                t.apply(r, i.concat([e]))
                            }, n)
                        };
                        if (arguments.length > 2) {
                            var i = Array.prototype.slice.call(arguments, 2);
                            return r.apply(this, i)
                        }
                        return r
                    };
                    s.applyEach = f(A),
                    s.applyEachSeries = g(A),
                    s.forever = function(t, e) {
                        function r(i) {
                            if (i) {
                                if (e)
                                    return e(i);
                                throw i
                            }
                            t(r)
                        }
                        r()
                    }
                    ,
                    "undefined" != typeof r && r.exports ? r.exports = s : "undefined" != typeof t && t.amd ? t([], function() {
                        return s
                    }) : n.async = s
                }()
            }
            ).call(this, e("_process"))
        }
        , {
            _process: 4
        }],
        3: [function(t, e, r) {
            (function(t) {
                function e(t, e) {
                    for (var r = 0, i = t.length - 1; i >= 0; i--) {
                        var n = t[i];
                        "." === n ? t.splice(i, 1) : ".." === n ? (t.splice(i, 1),
                        r++) : r && (t.splice(i, 1),
                        r--)
                    }
                    if (e)
                        for (; r--; r)
                            t.unshift("..");
                    return t
                }
                function i(t, e) {
                    if (t.filter)
                        return t.filter(e);
                    for (var r = [], i = 0; i < t.length; i++)
                        e(t[i], i, t) && r.push(t[i]);
                    return r
                }
                var n = /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/
                  , o = function(t) {
                    return n.exec(t).slice(1)
                };
                r.resolve = function() {
                    for (var r = "", n = !1, o = arguments.length - 1; o >= -1 && !n; o--) {
                        var s = o >= 0 ? arguments[o] : t.cwd();
                        if ("string" != typeof s)
                            throw new TypeError("Arguments to path.resolve must be strings");
                        s && (r = s + "/" + r,
                        n = "/" === s.charAt(0))
                    }
                    return r = e(i(r.split("/"), function(t) {
                        return !!t
                    }), !n).join("/"),
                    (n ? "/" : "") + r || "."
                }
                ,
                r.normalize = function(t) {
                    var n = r.isAbsolute(t)
                      , o = "/" === s(t, -1);
                    return t = e(i(t.split("/"), function(t) {
                        return !!t
                    }), !n).join("/"),
                    t || n || (t = "."),
                    t && o && (t += "/"),
                    (n ? "/" : "") + t
                }
                ,
                r.isAbsolute = function(t) {
                    return "/" === t.charAt(0)
                }
                ,
                r.join = function() {
                    var t = Array.prototype.slice.call(arguments, 0);
                    return r.normalize(i(t, function(t, e) {
                        if ("string" != typeof t)
                            throw new TypeError("Arguments to path.join must be strings");
                        return t
                    }).join("/"))
                }
                ,
                r.relative = function(t, e) {
                    function i(t) {
                        for (var e = 0; e < t.length && "" === t[e]; e++)
                            ;
                        for (var r = t.length - 1; r >= 0 && "" === t[r]; r--)
                            ;
                        return e > r ? [] : t.slice(e, r - e + 1)
                    }
                    t = r.resolve(t).substr(1),
                    e = r.resolve(e).substr(1);
                    for (var n = i(t.split("/")), o = i(e.split("/")), s = Math.min(n.length, o.length), a = s, h = 0; s > h; h++)
                        if (n[h] !== o[h]) {
                            a = h;
                            break
                        }
                    for (var l = [], h = a; h < n.length; h++)
                        l.push("..");
                    return l = l.concat(o.slice(a)),
                    l.join("/")
                }
                ,
                r.sep = "/",
                r.delimiter = ":",
                r.dirname = function(t) {
                    var e = o(t)
                      , r = e[0]
                      , i = e[1];
                    return r || i ? (i && (i = i.substr(0, i.length - 1)),
                    r + i) : "."
                }
                ,
                r.basename = function(t, e) {
                    var r = o(t)[2];
                    return e && r.substr(-1 * e.length) === e && (r = r.substr(0, r.length - e.length)),
                    r
                }
                ,
                r.extname = function(t) {
                    return o(t)[3]
                }
                ;
                var s = "b" === "ab".substr(-1) ? function(t, e, r) {
                    return t.substr(e, r)
                }
                : function(t, e, r) {
                    return 0 > e && (e = t.length + e),
                    t.substr(e, r)
                }
            }
            ).call(this, t("_process"))
        }
        , {
            _process: 4
        }],
        4: [function(t, e, r) {
            function i() {
                if (!a) {
                    a = !0;
                    for (var t, e = s.length; e; ) {
                        t = s,
                        s = [];
                        for (var r = -1; ++r < e; )
                            t[r]();
                        e = s.length
                    }
                    a = !1
                }
            }
            function n() {}
            var o = e.exports = {}
              , s = []
              , a = !1;
            o.nextTick = function(t) {
                s.push(t),
                a || setTimeout(i, 0)
            }
            ,
            o.title = "browser",
            o.browser = !0,
            o.env = {},
            o.argv = [],
            o.version = "",
            o.versions = {},
            o.on = n,
            o.addListener = n,
            o.once = n,
            o.off = n,
            o.removeListener = n,
            o.removeAllListeners = n,
            o.emit = n,
            o.binding = function(t) {
                throw new Error("process.binding is not supported")
            }
            ,
            o.cwd = function() {
                return "/"
            }
            ,
            o.chdir = function(t) {
                throw new Error("process.chdir is not supported")
            }
            ,
            o.umask = function() {
                return 0
            }
        }
        , {}],
        5: [function(e, r, i) {
            (function(e) {
                !function(n) {
                    function o(t) {
                        throw RangeError(B[t])
                    }
                    function s(t, e) {
                        for (var r = t.length; r--; )
                            t[r] = e(t[r]);
                        return t
                    }
                    function a(t, e) {
                        return s(t.split(O), e).join(".")
                    }
                    function h(t) {
                        for (var e, r, i = [], n = 0, o = t.length; o > n; )
                            e = t.charCodeAt(n++),
                            e >= 55296 && 56319 >= e && o > n ? (r = t.charCodeAt(n++),
                            56320 == (64512 & r) ? i.push(((1023 & e) << 10) + (1023 & r) + 65536) : (i.push(e),
                            n--)) : i.push(e);
                        return i
                    }
                    function l(t) {
                        return s(t, function(t) {
                            var e = "";
                            return t > 65535 && (t -= 65536,
                            e += N(t >>> 10 & 1023 | 55296),
                            t = 56320 | 1023 & t),
                            e += N(t)
                        }).join("")
                    }
                    function u(t) {
                        return 10 > t - 48 ? t - 22 : 26 > t - 65 ? t - 65 : 26 > t - 97 ? t - 97 : E
                    }
                    function c(t, e) {
                        return t + 22 + 75 * (26 > t) - ((0 != e) << 5)
                    }
                    function p(t, e, r) {
                        var i = 0;
                        for (t = r ? I(t / C) : t >> 1,
                        t += I(t / e); t > L * A >> 1; i += E)
                            t = I(t / L);
                        return I(i + (L + 1) * t / (t + w))
                    }
                    function d(t) {
                        var e, r, i, n, s, a, h, c, d, f, v = [], g = t.length, m = 0, y = R, x = M;
                        for (r = t.lastIndexOf(D),
                        0 > r && (r = 0),
                        i = 0; r > i; ++i)
                            t.charCodeAt(i) >= 128 && o("not-basic"),
                            v.push(t.charCodeAt(i));
                        for (n = r > 0 ? r + 1 : 0; g > n; ) {
                            for (s = m,
                            a = 1,
                            h = E; n >= g && o("invalid-input"),
                            c = u(t.charCodeAt(n++)),
                            (c >= E || c > I((T - m) / a)) && o("overflow"),
                            m += c * a,
                            d = x >= h ? S : h >= x + A ? A : h - x,
                            !(d > c); h += E)
                                f = E - d,
                                a > I(T / f) && o("overflow"),
                                a *= f;
                            e = v.length + 1,
                            x = p(m - s, e, 0 == s),
                            I(m / e) > T - y && o("overflow"),
                            y += I(m / e),
                            m %= e,
                            v.splice(m++, 0, y)
                        }
                        return l(v)
                    }
                    function f(t) {
                        var e, r, i, n, s, a, l, u, d, f, v, g, m, y, x, b = [];
                        for (t = h(t),
                        g = t.length,
                        e = R,
                        r = 0,
                        s = M,
                        a = 0; g > a; ++a)
                            v = t[a],
                            128 > v && b.push(N(v));
                        for (i = n = b.length,
                        n && b.push(D); g > i; ) {
                            for (l = T,
                            a = 0; g > a; ++a)
                                v = t[a],
                                v >= e && l > v && (l = v);
                            for (m = i + 1,
                            l - e > I((T - r) / m) && o("overflow"),
                            r += (l - e) * m,
                            e = l,
                            a = 0; g > a; ++a)
                                if (v = t[a],
                                e > v && ++r > T && o("overflow"),
                                v == e) {
                                    for (u = r,
                                    d = E; f = s >= d ? S : d >= s + A ? A : d - s,
                                    !(f > u); d += E)
                                        x = u - f,
                                        y = E - f,
                                        b.push(N(c(f + x % y, 0))),
                                        u = I(x / y);
                                    b.push(N(c(u, 0))),
                                    s = p(r, m, i == n),
                                    r = 0,
                                    ++i
                                }
                            ++r,
                            ++e
                        }
                        return b.join("")
                    }
                    function v(t) {
                        return a(t, function(t) {
                            return F.test(t) ? d(t.slice(4).toLowerCase()) : t
                        })
                    }
                    function g(t) {
                        return a(t, function(t) {
                            return P.test(t) ? "xn--" + f(t) : t
                        })
                    }
                    var m = "object" == typeof i && i
                      , y = "object" == typeof r && r && r.exports == m && r
                      , x = "object" == typeof e && e;
                    (x.global === x || x.window === x) && (n = x);
                    var b, _, T = 2147483647, E = 36, S = 1, A = 26, w = 38, C = 700, M = 72, R = 128, D = "-", F = /^xn--/, P = /[^ -~]/, O = /\x2E|\u3002|\uFF0E|\uFF61/g, B = {
                        overflow: "Overflow: input needs wider integers to process",
                        "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                        "invalid-input": "Invalid input"
                    }, L = E - S, I = Math.floor, N = String.fromCharCode;
                    if (b = {
                        version: "1.2.4",
                        ucs2: {
                            decode: h,
                            encode: l
                        },
                        decode: d,
                        encode: f,
                        toASCII: g,
                        toUnicode: v
                    },
                    "function" == typeof t && "object" == typeof t.amd && t.amd)
                        t("punycode", function() {
                            return b
                        });
                    else if (m && !m.nodeType)
                        if (y)
                            y.exports = b;
                        else
                            for (_ in b)
                                b.hasOwnProperty(_) && (m[_] = b[_]);
                    else
                        n.punycode = b
                }(this)
            }
            ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }
        , {}],
        6: [function(t, e, r) {
            "use strict";
            function i(t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }
            e.exports = function(t, e, r, o) {
                e = e || "&",
                r = r || "=";
                var s = {};
                if ("string" != typeof t || 0 === t.length)
                    return s;
                var a = /\+/g;
                t = t.split(e);
                var h = 1e3;
                o && "number" == typeof o.maxKeys && (h = o.maxKeys);
                var l = t.length;
                h > 0 && l > h && (l = h);
                for (var u = 0; l > u; ++u) {
                    var c, p, d, f, v = t[u].replace(a, "%20"), g = v.indexOf(r);
                    g >= 0 ? (c = v.substr(0, g),
                    p = v.substr(g + 1)) : (c = v,
                    p = ""),
                    d = decodeURIComponent(c),
                    f = decodeURIComponent(p),
                    i(s, d) ? n(s[d]) ? s[d].push(f) : s[d] = [s[d], f] : s[d] = f
                }
                return s
            }
            ;
            var n = Array.isArray || function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            }
        }
        , {}],
        7: [function(t, e, r) {
            "use strict";
            function i(t, e) {
                if (t.map)
                    return t.map(e);
                for (var r = [], i = 0; i < t.length; i++)
                    r.push(e(t[i], i));
                return r
            }
            var n = function(t) {
                switch (typeof t) {
                case "string":
                    return t;
                case "boolean":
                    return t ? "true" : "false";
                case "number":
                    return isFinite(t) ? t : "";
                default:
                    return ""
                }
            };
            e.exports = function(t, e, r, a) {
                return e = e || "&",
                r = r || "=",
                null === t && (t = void 0),
                "object" == typeof t ? i(s(t), function(s) {
                    var a = encodeURIComponent(n(s)) + r;
                    return o(t[s]) ? i(t[s], function(t) {
                        return a + encodeURIComponent(n(t))
                    }).join(e) : a + encodeURIComponent(n(t[s]))
                }).join(e) : a ? encodeURIComponent(n(a)) + r + encodeURIComponent(n(t)) : ""
            }
            ;
            var o = Array.isArray || function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            }
              , s = Object.keys || function(t) {
                var e = [];
                for (var r in t)
                    Object.prototype.hasOwnProperty.call(t, r) && e.push(r);
                return e
            }
        }
        , {}],
        8: [function(t, e, r) {
            "use strict";
            r.decode = r.parse = t("./decode"),
            r.encode = r.stringify = t("./encode")
        }
        , {
            "./decode": 6,
            "./encode": 7
        }],
        9: [function(t, e, r) {
            function i() {
                this.protocol = null,
                this.slashes = null,
                this.auth = null,
                this.host = null,
                this.port = null,
                this.hostname = null,
                this.hash = null,
                this.search = null,
                this.query = null,
                this.pathname = null,
                this.path = null,
                this.href = null
            }
            function n(t, e, r) {
                if (t && l(t) && t instanceof i)
                    return t;
                var n = new i;
                return n.parse(t, e, r),
                n
            }
            function o(t) {
                return h(t) && (t = n(t)),
                t instanceof i ? t.format() : i.prototype.format.call(t)
            }
            function s(t, e) {
                return n(t, !1, !0).resolve(e)
            }
            function a(t, e) {
                return t ? n(t, !1, !0).resolveObject(e) : e
            }
            function h(t) {
                return "string" == typeof t
            }
            function l(t) {
                return "object" == typeof t && null !== t
            }
            function u(t) {
                return null === t
            }
            function c(t) {
                return null == t
            }
            var p = t("punycode");
            r.parse = n,
            r.resolve = s,
            r.resolveObject = a,
            r.format = o,
            r.Url = i;
            var d = /^([a-z0-9.+-]+:)/i
              , f = /:[0-9]*$/
              , v = ["<", ">", '"', "`", " ", "\r", "\n", "	"]
              , g = ["{", "}", "|", "\\", "^", "`"].concat(v)
              , m = ["'"].concat(g)
              , y = ["%", "/", "?", ";", "#"].concat(m)
              , x = ["/", "?", "#"]
              , b = 255
              , _ = /^[a-z0-9A-Z_-]{0,63}$/
              , T = /^([a-z0-9A-Z_-]{0,63})(.*)$/
              , E = {
                javascript: !0,
                "javascript:": !0
            }
              , S = {
                javascript: !0,
                "javascript:": !0
            }
              , A = {
                http: !0,
                https: !0,
                ftp: !0,
                gopher: !0,
                file: !0,
                "http:": !0,
                "https:": !0,
                "ftp:": !0,
                "gopher:": !0,
                "file:": !0
            }
              , w = t("querystring");
            i.prototype.parse = function(t, e, r) {
                if (!h(t))
                    throw new TypeError("Parameter 'url' must be a string, not " + typeof t);
                var i = t;
                i = i.trim();
                var n = d.exec(i);
                if (n) {
                    n = n[0];
                    var o = n.toLowerCase();
                    this.protocol = o,
                    i = i.substr(n.length)
                }
                if (r || n || i.match(/^\/\/[^@\/]+@[^@\/]+/)) {
                    var s = "//" === i.substr(0, 2);
                    !s || n && S[n] || (i = i.substr(2),
                    this.slashes = !0)
                }
                if (!S[n] && (s || n && !A[n])) {
                    for (var a = -1, l = 0; l < x.length; l++) {
                        var u = i.indexOf(x[l]);
                        -1 !== u && (-1 === a || a > u) && (a = u)
                    }
                    var c, f;
                    f = -1 === a ? i.lastIndexOf("@") : i.lastIndexOf("@", a),
                    -1 !== f && (c = i.slice(0, f),
                    i = i.slice(f + 1),
                    this.auth = decodeURIComponent(c)),
                    a = -1;
                    for (var l = 0; l < y.length; l++) {
                        var u = i.indexOf(y[l]);
                        -1 !== u && (-1 === a || a > u) && (a = u)
                    }
                    -1 === a && (a = i.length),
                    this.host = i.slice(0, a),
                    i = i.slice(a),
                    this.parseHost(),
                    this.hostname = this.hostname || "";
                    var v = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
                    if (!v)
                        for (var g = this.hostname.split(/\./), l = 0, C = g.length; C > l; l++) {
                            var M = g[l];
                            if (M && !M.match(_)) {
                                for (var R = "", D = 0, F = M.length; F > D; D++)
                                    R += M.charCodeAt(D) > 127 ? "x" : M[D];
                                if (!R.match(_)) {
                                    var P = g.slice(0, l)
                                      , O = g.slice(l + 1)
                                      , B = M.match(T);
                                    B && (P.push(B[1]),
                                    O.unshift(B[2])),
                                    O.length && (i = "/" + O.join(".") + i),
                                    this.hostname = P.join(".");
                                    break
                                }
                            }
                        }
                    if (this.hostname = this.hostname.length > b ? "" : this.hostname.toLowerCase(),
                    !v) {
                        for (var L = this.hostname.split("."), I = [], l = 0; l < L.length; ++l) {
                            var N = L[l];
                            I.push(N.match(/[^A-Za-z0-9_-]/) ? "xn--" + p.encode(N) : N)
                        }
                        this.hostname = I.join(".")
                    }
                    var U = this.port ? ":" + this.port : ""
                      , k = this.hostname || "";
                    this.host = k + U,
                    this.href += this.host,
                    v && (this.hostname = this.hostname.substr(1, this.hostname.length - 2),
                    "/" !== i[0] && (i = "/" + i))
                }
                if (!E[o])
                    for (var l = 0, C = m.length; C > l; l++) {
                        var j = m[l]
                          , X = encodeURIComponent(j);
                        X === j && (X = escape(j)),
                        i = i.split(j).join(X)
                    }
                var G = i.indexOf("#");
                -1 !== G && (this.hash = i.substr(G),
                i = i.slice(0, G));
                var Y = i.indexOf("?");
                if (-1 !== Y ? (this.search = i.substr(Y),
                this.query = i.substr(Y + 1),
                e && (this.query = w.parse(this.query)),
                i = i.slice(0, Y)) : e && (this.search = "",
                this.query = {}),
                i && (this.pathname = i),
                A[o] && this.hostname && !this.pathname && (this.pathname = "/"),
                this.pathname || this.search) {
                    var U = this.pathname || ""
                      , N = this.search || "";
                    this.path = U + N
                }
                return this.href = this.format(),
                this
            }
            ,
            i.prototype.format = function() {
                var t = this.auth || "";
                t && (t = encodeURIComponent(t),
                t = t.replace(/%3A/i, ":"),
                t += "@");
                var e = this.protocol || ""
                  , r = this.pathname || ""
                  , i = this.hash || ""
                  , n = !1
                  , o = "";
                this.host ? n = t + this.host : this.hostname && (n = t + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"),
                this.port && (n += ":" + this.port)),
                this.query && l(this.query) && Object.keys(this.query).length && (o = w.stringify(this.query));
                var s = this.search || o && "?" + o || "";
                return e && ":" !== e.substr(-1) && (e += ":"),
                this.slashes || (!e || A[e]) && n !== !1 ? (n = "//" + (n || ""),
                r && "/" !== r.charAt(0) && (r = "/" + r)) : n || (n = ""),
                i && "#" !== i.charAt(0) && (i = "#" + i),
                s && "?" !== s.charAt(0) && (s = "?" + s),
                r = r.replace(/[?#]/g, function(t) {
                    return encodeURIComponent(t)
                }),
                s = s.replace("#", "%23"),
                e + n + r + s + i
            }
            ,
            i.prototype.resolve = function(t) {
                return this.resolveObject(n(t, !1, !0)).format()
            }
            ,
            i.prototype.resolveObject = function(t) {
                if (h(t)) {
                    var e = new i;
                    e.parse(t, !1, !0),
                    t = e
                }
                var r = new i;
                if (Object.keys(this).forEach(function(t) {
                    r[t] = this[t]
                }, this),
                r.hash = t.hash,
                "" === t.href)
                    return r.href = r.format(),
                    r;
                if (t.slashes && !t.protocol)
                    return Object.keys(t).forEach(function(e) {
                        "protocol" !== e && (r[e] = t[e])
                    }),
                    A[r.protocol] && r.hostname && !r.pathname && (r.path = r.pathname = "/"),
                    r.href = r.format(),
                    r;
                if (t.protocol && t.protocol !== r.protocol) {
                    if (!A[t.protocol])
                        return Object.keys(t).forEach(function(e) {
                            r[e] = t[e]
                        }),
                        r.href = r.format(),
                        r;
                    if (r.protocol = t.protocol,
                    t.host || S[t.protocol])
                        r.pathname = t.pathname;
                    else {
                        for (var n = (t.pathname || "").split("/"); n.length && !(t.host = n.shift()); )
                            ;
                        t.host || (t.host = ""),
                        t.hostname || (t.hostname = ""),
                        "" !== n[0] && n.unshift(""),
                        n.length < 2 && n.unshift(""),
                        r.pathname = n.join("/")
                    }
                    if (r.search = t.search,
                    r.query = t.query,
                    r.host = t.host || "",
                    r.auth = t.auth,
                    r.hostname = t.hostname || t.host,
                    r.port = t.port,
                    r.pathname || r.search) {
                        var o = r.pathname || ""
                          , s = r.search || "";
                        r.path = o + s
                    }
                    return r.slashes = r.slashes || t.slashes,
                    r.href = r.format(),
                    r
                }
                var a = r.pathname && "/" === r.pathname.charAt(0)
                  , l = t.host || t.pathname && "/" === t.pathname.charAt(0)
                  , p = l || a || r.host && t.pathname
                  , d = p
                  , f = r.pathname && r.pathname.split("/") || []
                  , n = t.pathname && t.pathname.split("/") || []
                  , v = r.protocol && !A[r.protocol];
                if (v && (r.hostname = "",
                r.port = null,
                r.host && ("" === f[0] ? f[0] = r.host : f.unshift(r.host)),
                r.host = "",
                t.protocol && (t.hostname = null,
                t.port = null,
                t.host && ("" === n[0] ? n[0] = t.host : n.unshift(t.host)),
                t.host = null),
                p = p && ("" === n[0] || "" === f[0])),
                l)
                    r.host = t.host || "" === t.host ? t.host : r.host,
                    r.hostname = t.hostname || "" === t.hostname ? t.hostname : r.hostname,
                    r.search = t.search,
                    r.query = t.query,
                    f = n;
                else if (n.length)
                    f || (f = []),
                    f.pop(),
                    f = f.concat(n),
                    r.search = t.search,
                    r.query = t.query;
                else if (!c(t.search)) {
                    if (v) {
                        r.hostname = r.host = f.shift();
                        var g = r.host && r.host.indexOf("@") > 0 ? r.host.split("@") : !1;
                        g && (r.auth = g.shift(),
                        r.host = r.hostname = g.shift())
                    }
                    return r.search = t.search,
                    r.query = t.query,
                    u(r.pathname) && u(r.search) || (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")),
                    r.href = r.format(),
                    r
                }
                if (!f.length)
                    return r.pathname = null,
                    r.path = r.search ? "/" + r.search : null,
                    r.href = r.format(),
                    r;
                for (var m = f.slice(-1)[0], y = (r.host || t.host) && ("." === m || ".." === m) || "" === m, x = 0, b = f.length; b >= 0; b--)
                    m = f[b],
                    "." == m ? f.splice(b, 1) : ".." === m ? (f.splice(b, 1),
                    x++) : x && (f.splice(b, 1),
                    x--);
                if (!p && !d)
                    for (; x--; x)
                        f.unshift("..");
                !p || "" === f[0] || f[0] && "/" === f[0].charAt(0) || f.unshift(""),
                y && "/" !== f.join("/").substr(-1) && f.push("");
                var _ = "" === f[0] || f[0] && "/" === f[0].charAt(0);
                if (v) {
                    r.hostname = r.host = _ ? "" : f.length ? f.shift() : "";
                    var g = r.host && r.host.indexOf("@") > 0 ? r.host.split("@") : !1;
                    g && (r.auth = g.shift(),
                    r.host = r.hostname = g.shift())
                }
                return p = p || r.host && f.length,
                p && !_ && f.unshift(""),
                f.length ? r.pathname = f.join("/") : (r.pathname = null,
                r.path = null),
                u(r.pathname) && u(r.search) || (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")),
                r.auth = t.auth || r.auth,
                r.slashes = r.slashes || t.slashes,
                r.href = r.format(),
                r
            }
            ,
            i.prototype.parseHost = function() {
                var t = this.host
                  , e = f.exec(t);
                e && (e = e[0],
                ":" !== e && (this.port = e.substr(1)),
                t = t.substr(0, t.length - e.length)),
                t && (this.hostname = t)
            }
        }
        , {
            punycode: 5,
            querystring: 8
        }],
        10: [function(t, e, r) {
            "use strict";
            function i(t, e, r) {
                r = r || 2;
                var i = e && e.length
                  , a = i ? e[0] * r : t.length
                  , h = o(t, n(t, 0, a, r, !0))
                  , l = [];
                if (!h)
                    return l;
                var c, p, d, f, v, g, m;
                if (i && (h = u(t, e, h, r)),
                t.length > 80 * r) {
                    c = d = t[0],
                    p = f = t[1];
                    for (var y = r; a > y; y += r)
                        v = t[y],
                        g = t[y + 1],
                        c > v && (c = v),
                        p > g && (p = g),
                        v > d && (d = v),
                        g > f && (f = g);
                    m = Math.max(d - c, f - p)
                }
                return s(t, h, l, r, c, p, m),
                l
            }
            function n(t, e, r, i, n) {
                var o, s, a, h = 0;
                for (o = e,
                s = r - i; r > o; o += i)
                    h += (t[s] - t[o]) * (t[o + 1] + t[s + 1]),
                    s = o;
                if (n === h > 0)
                    for (o = e; r > o; o += i)
                        a = A(o, a);
                else
                    for (o = r - i; o >= e; o -= i)
                        a = A(o, a);
                return a
            }
            function o(t, e, r) {
                r || (r = e);
                var i, n = e;
                do
                    if (i = !1,
                    x(t, n.i, n.next.i) || 0 === y(t, n.prev.i, n.i, n.next.i)) {
                        if (n.prev.next = n.next,
                        n.next.prev = n.prev,
                        n.prevZ && (n.prevZ.nextZ = n.nextZ),
                        n.nextZ && (n.nextZ.prevZ = n.prevZ),
                        n = r = n.prev,
                        n === n.next)
                            return null;
                        i = !0
                    } else
                        n = n.next;
                while (i || n !== r);
                return r
            }
            function s(t, e, r, i, n, u, c, p) {
                if (e) {
                    p || void 0 === n || d(t, e, n, u, c);
                    for (var f, v, g = e; e.prev !== e.next; )
                        if (f = e.prev,
                        v = e.next,
                        a(t, e, n, u, c))
                            r.push(f.i / i),
                            r.push(e.i / i),
                            r.push(v.i / i),
                            v.prev = f,
                            f.next = v,
                            e.prevZ && (e.prevZ.nextZ = e.nextZ),
                            e.nextZ && (e.nextZ.prevZ = e.prevZ),
                            e = v.next,
                            g = v.next;
                        else if (e = v,
                        e === g) {
                            p ? 1 === p ? (e = h(t, e, r, i),
                            s(t, e, r, i, n, u, c, 2)) : 2 === p && l(t, e, r, i, n, u, c) : s(t, o(t, e), r, i, n, u, c, 1);
                            break
                        }
                }
            }
            function a(t, e, r, i, n) {
                var o = e.prev.i
                  , s = e.i
                  , a = e.next.i
                  , h = t[o]
                  , l = t[o + 1]
                  , u = t[s]
                  , c = t[s + 1]
                  , p = t[a]
                  , d = t[a + 1]
                  , f = h * c - l * u
                  , g = h * d - l * p
                  , m = p * c - d * u
                  , y = f - g - m;
                if (0 >= y)
                    return !1;
                var x, b, _, T, E, S, A, w = d - l, C = h - p, M = l - c, R = u - h;
                if (void 0 !== r) {
                    var D = u > h ? p > h ? h : p : p > u ? u : p
                      , F = c > l ? d > l ? l : d : d > c ? c : d
                      , P = h > u ? h > p ? h : p : u > p ? u : p
                      , O = l > c ? l > d ? l : d : c > d ? c : d
                      , B = v(D, F, r, i, n)
                      , L = v(P, O, r, i, n);
                    for (A = e.nextZ; A && A.z <= L; )
                        if (x = A.i,
                        A = A.nextZ,
                        x !== o && x !== a && (b = t[x],
                        _ = t[x + 1],
                        T = w * b + C * _ - g,
                        T >= 0 && (E = M * b + R * _ + f,
                        E >= 0 && (S = y - T - E,
                        S >= 0 && (T && E || T && S || E && S)))))
                            return !1;
                    for (A = e.prevZ; A && A.z >= B; )
                        if (x = A.i,
                        A = A.prevZ,
                        x !== o && x !== a && (b = t[x],
                        _ = t[x + 1],
                        T = w * b + C * _ - g,
                        T >= 0 && (E = M * b + R * _ + f,
                        E >= 0 && (S = y - T - E,
                        S >= 0 && (T && E || T && S || E && S)))))
                            return !1
                } else
                    for (A = e.next.next; A !== e.prev; )
                        if (x = A.i,
                        A = A.next,
                        b = t[x],
                        _ = t[x + 1],
                        T = w * b + C * _ - g,
                        T >= 0 && (E = M * b + R * _ + f,
                        E >= 0 && (S = y - T - E,
                        S >= 0 && (T && E || T && S || E && S))))
                            return !1;
                return !0
            }
            function h(t, e, r, i) {
                var n = e;
                do {
                    var o = n.prev
                      , s = n.next.next;
                    if (o.i !== s.i && b(t, o.i, n.i, n.next.i, s.i) && T(t, o, s) && T(t, s, o)) {
                        r.push(o.i / i),
                        r.push(n.i / i),
                        r.push(s.i / i),
                        o.next = s,
                        s.prev = o;
                        var a = n.prevZ
                          , h = n.nextZ && n.nextZ.nextZ;
                        a && (a.nextZ = h),
                        h && (h.prevZ = a),
                        n = e = s
                    }
                    n = n.next
                } while (n !== e);
                return n
            }
            function l(t, e, r, i, n, a, h) {
                var l = e;
                do {
                    for (var u = l.next.next; u !== l.prev; ) {
                        if (l.i !== u.i && m(t, l, u)) {
                            var c = S(l, u);
                            return l = o(t, l, l.next),
                            c = o(t, c, c.next),
                            s(t, l, r, i, n, a, h),
                            void s(t, c, r, i, n, a, h)
                        }
                        u = u.next
                    }
                    l = l.next
                } while (l !== e)
            }
            function u(t, e, r, i) {
                var s, a, h, l, u, p = [];
                for (s = 0,
                a = e.length; a > s; s++)
                    h = e[s] * i,
                    l = a - 1 > s ? e[s + 1] * i : t.length,
                    u = o(t, n(t, h, l, i, !1)),
                    u && p.push(g(t, u));
                for (p.sort(function(e, r) {
                    return t[e.i] - t[r.i]
                }),
                s = 0; s < p.length; s++)
                    c(t, p[s], r),
                    r = o(t, r, r.next);
                return r
            }
            function c(t, e, r) {
                if (r = p(t, e, r)) {
                    var i = S(r, e);
                    o(t, i, i.next)
                }
            }
            function p(t, e, r) {
                var i, n, o, s = r, a = e.i, h = t[a], l = t[a + 1], u = -(1 / 0);
                do {
                    if (n = s.i,
                    o = s.next.i,
                    l <= t[n + 1] && l >= t[o + 1]) {
                        var c = t[n] + (l - t[n + 1]) * (t[o] - t[n]) / (t[o + 1] - t[n + 1]);
                        h >= c && c > u && (u = c,
                        i = t[n] < t[o] ? s : s.next)
                    }
                    s = s.next
                } while (s !== r);
                if (!i)
                    return null;
                var p, d, f, v, g, m, y = t[i.i], x = t[i.i + 1], b = h * x - l * y, _ = h * l - l * u, E = l - l, S = h - u, A = l - x, w = y - h, C = b - _ - (u * x - l * y), M = 0 >= C ? -1 : 1, R = i, D = 1 / 0;
                for (s = i.next; s !== R; )
                    p = t[s.i],
                    d = t[s.i + 1],
                    f = h - p,
                    f >= 0 && p >= y && (v = (E * p + S * d - _) * M,
                    v >= 0 && (g = (A * p + w * d + b) * M,
                    g >= 0 && C * M - v - g >= 0 && (m = Math.abs(l - d) / f,
                    D > m && T(t, s, e) && (i = s,
                    D = m)))),
                    s = s.next;
                return i
            }
            function d(t, e, r, i, n) {
                var o = e;
                do
                    null === o.z && (o.z = v(t[o.i], t[o.i + 1], r, i, n)),
                    o.prevZ = o.prev,
                    o.nextZ = o.next,
                    o = o.next;
                while (o !== e);
                o.prevZ.nextZ = null,
                o.prevZ = null,
                f(o)
            }
            function f(t) {
                var e, r, i, n, o, s, a, h, l = 1;
                do {
                    for (r = t,
                    t = null,
                    o = null,
                    s = 0; r; ) {
                        for (s++,
                        i = r,
                        a = 0,
                        e = 0; l > e && (a++,
                        i = i.nextZ,
                        i); e++)
                            ;
                        for (h = l; a > 0 || h > 0 && i; )
                            0 === a ? (n = i,
                            i = i.nextZ,
                            h--) : 0 !== h && i ? r.z <= i.z ? (n = r,
                            r = r.nextZ,
                            a--) : (n = i,
                            i = i.nextZ,
                            h--) : (n = r,
                            r = r.nextZ,
                            a--),
                            o ? o.nextZ = n : t = n,
                            n.prevZ = o,
                            o = n;
                        r = i
                    }
                    o.nextZ = null,
                    l *= 2
                } while (s > 1);
                return t
            }
            function v(t, e, r, i, n) {
                return t = 1e3 * (t - r) / n,
                t = 16711935 & (t | t << 8),
                t = 252645135 & (t | t << 4),
                t = 858993459 & (t | t << 2),
                t = 1431655765 & (t | t << 1),
                e = 1e3 * (e - i) / n,
                e = 16711935 & (e | e << 8),
                e = 252645135 & (e | e << 4),
                e = 858993459 & (e | e << 2),
                e = 1431655765 & (e | e << 1),
                t | e << 1
            }
            function g(t, e) {
                var r = e
                  , i = e;
                do
                    t[r.i] < t[i.i] && (i = r),
                    r = r.next;
                while (r !== e);
                return i
            }
            function m(t, e, r) {
                return !_(t, e, e.i, r.i) && T(t, e, r) && T(t, r, e) && E(t, e, e.i, r.i)
            }
            function y(t, e, r, i) {
                var n = (t[r + 1] - t[e + 1]) * (t[i] - t[r]) - (t[r] - t[e]) * (t[i + 1] - t[r + 1]);
                return n > 0 ? 1 : 0 > n ? -1 : 0
            }
            function x(t, e, r) {
                return t[e] === t[r] && t[e + 1] === t[r + 1]
            }
            function b(t, e, r, i, n) {
                return y(t, e, r, i) !== y(t, e, r, n) && y(t, i, n, e) !== y(t, i, n, r)
            }
            function _(t, e, r, i) {
                var n = e;
                do {
                    var o = n.i
                      , s = n.next.i;
                    if (o !== r && s !== r && o !== i && s !== i && b(t, o, s, r, i))
                        return !0;
                    n = n.next
                } while (n !== e);
                return !1
            }
            function T(t, e, r) {
                return -1 === y(t, e.prev.i, e.i, e.next.i) ? -1 !== y(t, e.i, r.i, e.next.i) && -1 !== y(t, e.i, e.prev.i, r.i) : -1 === y(t, e.i, r.i, e.prev.i) || -1 === y(t, e.i, e.next.i, r.i)
            }
            function E(t, e, r, i) {
                var n = e
                  , o = !1
                  , s = (t[r] + t[i]) / 2
                  , a = (t[r + 1] + t[i + 1]) / 2;
                do {
                    var h = n.i
                      , l = n.next.i;
                    t[h + 1] > a != t[l + 1] > a && s < (t[l] - t[h]) * (a - t[h + 1]) / (t[l + 1] - t[h + 1]) + t[h] && (o = !o),
                    n = n.next
                } while (n !== e);
                return o
            }
            function S(t, e) {
                var r = new w(t.i)
                  , i = new w(e.i)
                  , n = t.next
                  , o = e.prev;
                return t.next = e,
                e.prev = t,
                r.next = n,
                n.prev = r,
                i.next = r,
                r.prev = i,
                o.next = i,
                i.prev = o,
                i
            }
            function A(t, e) {
                var r = new w(t);
                return e ? (r.next = e.next,
                r.prev = e,
                e.next.prev = r,
                e.next = r) : (r.prev = r,
                r.next = r),
                r
            }
            function w(t) {
                this.i = t,
                this.prev = null,
                this.next = null,
                this.z = null,
                this.prevZ = null,
                this.nextZ = null
            }
            e.exports = i
        }
        , {}],
        11: [function(t, e, r) {
            "use strict";
            function i(t, e, r) {
                this.fn = t,
                this.context = e,
                this.once = r || !1
            }
            function n() {}
            var o = "function" != typeof Object.create ? "~" : !1;
            n.prototype._events = void 0,
            n.prototype.listeners = function(t, e) {
                var r = o ? o + t : t
                  , i = this._events && this._events[r];
                if (e)
                    return !!i;
                if (!i)
                    return [];
                if (this._events[r].fn)
                    return [this._events[r].fn];
                for (var n = 0, s = this._events[r].length, a = new Array(s); s > n; n++)
                    a[n] = this._events[r][n].fn;
                return a
            }
            ,
            n.prototype.emit = function(t, e, r, i, n, s) {
                var a = o ? o + t : t;
                if (!this._events || !this._events[a])
                    return !1;
                var h, l, u = this._events[a], c = arguments.length;
                if ("function" == typeof u.fn) {
                    switch (u.once && this.removeListener(t, u.fn, void 0, !0),
                    c) {
                    case 1:
                        return u.fn.call(u.context),
                        !0;
                    case 2:
                        return u.fn.call(u.context, e),
                        !0;
                    case 3:
                        return u.fn.call(u.context, e, r),
                        !0;
                    case 4:
                        return u.fn.call(u.context, e, r, i),
                        !0;
                    case 5:
                        return u.fn.call(u.context, e, r, i, n),
                        !0;
                    case 6:
                        return u.fn.call(u.context, e, r, i, n, s),
                        !0
                    }
                    for (l = 1,
                    h = new Array(c - 1); c > l; l++)
                        h[l - 1] = arguments[l];
                    u.fn.apply(u.context, h)
                } else {
                    var p, d = u.length;
                    for (l = 0; d > l; l++)
                        switch (u[l].once && this.removeListener(t, u[l].fn, void 0, !0),
                        c) {
                        case 1:
                            u[l].fn.call(u[l].context);
                            break;
                        case 2:
                            u[l].fn.call(u[l].context, e);
                            break;
                        case 3:
                            u[l].fn.call(u[l].context, e, r);
                            break;
                        default:
                            if (!h)
                                for (p = 1,
                                h = new Array(c - 1); c > p; p++)
                                    h[p - 1] = arguments[p];
                            u[l].fn.apply(u[l].context, h)
                        }
                }
                return !0
            }
            ,
            n.prototype.on = function(t, e, r) {
                var n = new i(e,r || this)
                  , s = o ? o + t : t;
                return this._events || (this._events = o ? {} : Object.create(null)),
                this._events[s] ? this._events[s].fn ? this._events[s] = [this._events[s], n] : this._events[s].push(n) : this._events[s] = n,
                this
            }
            ,
            n.prototype.once = function(t, e, r) {
                var n = new i(e,r || this,!0)
                  , s = o ? o + t : t;
                return this._events || (this._events = o ? {} : Object.create(null)),
                this._events[s] ? this._events[s].fn ? this._events[s] = [this._events[s], n] : this._events[s].push(n) : this._events[s] = n,
                this
            }
            ,
            n.prototype.removeListener = function(t, e, r, i) {
                var n = o ? o + t : t;
                if (!this._events || !this._events[n])
                    return this;
                var s = this._events[n]
                  , a = [];
                if (e)
                    if (s.fn)
                        (s.fn !== e || i && !s.once || r && s.context !== r) && a.push(s);
                    else
                        for (var h = 0, l = s.length; l > h; h++)
                            (s[h].fn !== e || i && !s[h].once || r && s[h].context !== r) && a.push(s[h]);
                return a.length ? this._events[n] = 1 === a.length ? a[0] : a : delete this._events[n],
                this
            }
            ,
            n.prototype.removeAllListeners = function(t) {
                return this._events ? (t ? delete this._events[o ? o + t : t] : this._events = o ? {} : Object.create(null),
                this) : this
            }
            ,
            n.prototype.off = n.prototype.removeListener,
            n.prototype.addListener = n.prototype.on,
            n.prototype.setMaxListeners = function() {
                return this
            }
            ,
            n.prefixed = o,
            e.exports = n
        }
        , {}],
        12: [function(t, e, r) {
            "use strict";
            function i(t) {
                if (null == t)
                    throw new TypeError("Object.assign cannot be called with null or undefined");
                return Object(t)
            }
            e.exports = Object.assign || function(t, e) {
                for (var r, n, o = i(t), s = 1; s < arguments.length; s++) {
                    r = arguments[s],
                    n = Object.keys(Object(r));
                    for (var a = 0; a < n.length; a++)
                        o[n[a]] = r[n[a]]
                }
                return o
            }
        }
        , {}],
        13: [function(e, r, i) {
            (function(e) {
                !function() {
                    function i(t) {
                        var e = !1;
                        return function() {
                            if (e)
                                throw new Error("Callback was already called.");
                            e = !0,
                            t.apply(n, arguments)
                        }
                    }
                    var n, o, s = {};
                    n = this,
                    null != n && (o = n.async),
                    s.noConflict = function() {
                        return n.async = o,
                        s
                    }
                    ;
                    var a = Object.prototype.toString
                      , h = Array.isArray || function(t) {
                        return "[object Array]" === a.call(t)
                    }
                      , l = function(t, e) {
                        if (t.forEach)
                            return t.forEach(e);
                        for (var r = 0; r < t.length; r += 1)
                            e(t[r], r, t)
                    }
                      , u = function(t, e) {
                        if (t.map)
                            return t.map(e);
                        var r = [];
                        return l(t, function(t, i, n) {
                            r.push(e(t, i, n))
                        }),
                        r
                    }
                      , c = function(t, e, r) {
                        return t.reduce ? t.reduce(e, r) : (l(t, function(t, i, n) {
                            r = e(r, t, i, n)
                        }),
                        r)
                    }
                      , p = function(t) {
                        if (Object.keys)
                            return Object.keys(t);
                        var e = [];
                        for (var r in t)
                            t.hasOwnProperty(r) && e.push(r);
                        return e
                    };
                    "undefined" != typeof e && e.nextTick ? (s.nextTick = e.nextTick,
                    s.setImmediate = "undefined" != typeof setImmediate ? function(t) {
                        setImmediate(t)
                    }
                    : s.nextTick) : "function" == typeof setImmediate ? (s.nextTick = function(t) {
                        setImmediate(t)
                    }
                    ,
                    s.setImmediate = s.nextTick) : (s.nextTick = function(t) {
                        setTimeout(t, 0)
                    }
                    ,
                    s.setImmediate = s.nextTick),
                    s.each = function(t, e, r) {
                        function n(e) {
                            e ? (r(e),
                            r = function() {}
                            ) : (o += 1,
                            o >= t.length && r())
                        }
                        if (r = r || function() {}
                        ,
                        !t.length)
                            return r();
                        var o = 0;
                        l(t, function(t) {
                            e(t, i(n))
                        })
                    }
                    ,
                    s.forEach = s.each,
                    s.eachSeries = function(t, e, r) {
                        if (r = r || function() {}
                        ,
                        !t.length)
                            return r();
                        var i = 0
                          , n = function() {
                            e(t[i], function(e) {
                                e ? (r(e),
                                r = function() {}
                                ) : (i += 1,
                                i >= t.length ? r() : n())
                            })
                        };
                        n()
                    }
                    ,
                    s.forEachSeries = s.eachSeries,
                    s.eachLimit = function(t, e, r, i) {
                        var n = d(e);
                        n.apply(null, [t, r, i])
                    }
                    ,
                    s.forEachLimit = s.eachLimit;
                    var d = function(t) {
                        return function(e, r, i) {
                            if (i = i || function() {}
                            ,
                            !e.length || 0 >= t)
                                return i();
                            var n = 0
                              , o = 0
                              , s = 0;
                            !function a() {
                                if (n >= e.length)
                                    return i();
                                for (; t > s && o < e.length; )
                                    o += 1,
                                    s += 1,
                                    r(e[o - 1], function(t) {
                                        t ? (i(t),
                                        i = function() {}
                                        ) : (n += 1,
                                        s -= 1,
                                        n >= e.length ? i() : a())
                                    })
                            }()
                        }
                    }
                      , f = function(t) {
                        return function() {
                            var e = Array.prototype.slice.call(arguments);
                            return t.apply(null, [s.each].concat(e))
                        }
                    }
                      , v = function(t, e) {
                        return function() {
                            var r = Array.prototype.slice.call(arguments);
                            return e.apply(null, [d(t)].concat(r))
                        }
                    }
                      , g = function(t) {
                        return function() {
                            var e = Array.prototype.slice.call(arguments);
                            return t.apply(null, [s.eachSeries].concat(e))
                        }
                    }
                      , m = function(t, e, r, i) {
                        if (e = u(e, function(t, e) {
                            return {
                                index: e,
                                value: t
                            }
                        }),
                        i) {
                            var n = [];
                            t(e, function(t, e) {
                                r(t.value, function(r, i) {
                                    n[t.index] = i,
                                    e(r)
                                })
                            }, function(t) {
                                i(t, n)
                            })
                        } else
                            t(e, function(t, e) {
                                r(t.value, function(t) {
                                    e(t)
                                })
                            })
                    };
                    s.map = f(m),
                    s.mapSeries = g(m),
                    s.mapLimit = function(t, e, r, i) {
                        return y(e)(t, r, i)
                    }
                    ;
                    var y = function(t) {
                        return v(t, m)
                    };
                    s.reduce = function(t, e, r, i) {
                        s.eachSeries(t, function(t, i) {
                            r(e, t, function(t, r) {
                                e = r,
                                i(t)
                            })
                        }, function(t) {
                            i(t, e)
                        })
                    }
                    ,
                    s.inject = s.reduce,
                    s.foldl = s.reduce,
                    s.reduceRight = function(t, e, r, i) {
                        var n = u(t, function(t) {
                            return t
                        }).reverse();
                        s.reduce(n, e, r, i)
                    }
                    ,
                    s.foldr = s.reduceRight;
                    var x = function(t, e, r, i) {
                        var n = [];
                        e = u(e, function(t, e) {
                            return {
                                index: e,
                                value: t
                            }
                        }),
                        t(e, function(t, e) {
                            r(t.value, function(r) {
                                r && n.push(t),
                                e()
                            })
                        }, function(t) {
                            i(u(n.sort(function(t, e) {
                                return t.index - e.index
                            }), function(t) {
                                return t.value
                            }))
                        })
                    };
                    s.filter = f(x),
                    s.filterSeries = g(x),
                    s.select = s.filter,
                    s.selectSeries = s.filterSeries;
                    var b = function(t, e, r, i) {
                        var n = [];
                        e = u(e, function(t, e) {
                            return {
                                index: e,
                                value: t
                            }
                        }),
                        t(e, function(t, e) {
                            r(t.value, function(r) {
                                r || n.push(t),
                                e()
                            })
                        }, function(t) {
                            i(u(n.sort(function(t, e) {
                                return t.index - e.index
                            }), function(t) {
                                return t.value
                            }))
                        })
                    };
                    s.reject = f(b),
                    s.rejectSeries = g(b);
                    var _ = function(t, e, r, i) {
                        t(e, function(t, e) {
                            r(t, function(r) {
                                r ? (i(t),
                                i = function() {}
                                ) : e()
                            })
                        }, function(t) {
                            i()
                        })
                    };
                    s.detect = f(_),
                    s.detectSeries = g(_),
                    s.some = function(t, e, r) {
                        s.each(t, function(t, i) {
                            e(t, function(t) {
                                t && (r(!0),
                                r = function() {}
                                ),
                                i()
                            })
                        }, function(t) {
                            r(!1)
                        })
                    }
                    ,
                    s.any = s.some,
                    s.every = function(t, e, r) {
                        s.each(t, function(t, i) {
                            e(t, function(t) {
                                t || (r(!1),
                                r = function() {}
                                ),
                                i()
                            })
                        }, function(t) {
                            r(!0)
                        })
                    }
                    ,
                    s.all = s.every,
                    s.sortBy = function(t, e, r) {
                        s.map(t, function(t, r) {
                            e(t, function(e, i) {
                                e ? r(e) : r(null, {
                                    value: t,
                                    criteria: i
                                })
                            })
                        }, function(t, e) {
                            if (t)
                                return r(t);
                            var i = function(t, e) {
                                var r = t.criteria
                                  , i = e.criteria;
                                return i > r ? -1 : r > i ? 1 : 0
                            };
                            r(null, u(e.sort(i), function(t) {
                                return t.value
                            }))
                        })
                    }
                    ,
                    s.auto = function(t, e) {
                        e = e || function() {}
                        ;
                        var r = p(t)
                          , i = r.length;
                        if (!i)
                            return e();
                        var n = {}
                          , o = []
                          , a = function(t) {
                            o.unshift(t)
                        }
                          , u = function(t) {
                            for (var e = 0; e < o.length; e += 1)
                                if (o[e] === t)
                                    return void o.splice(e, 1)
                        }
                          , d = function() {
                            i--,
                            l(o.slice(0), function(t) {
                                t()
                            })
                        };
                        a(function() {
                            if (!i) {
                                var t = e;
                                e = function() {}
                                ,
                                t(null, n)
                            }
                        }),
                        l(r, function(r) {
                            var i = h(t[r]) ? t[r] : [t[r]]
                              , o = function(t) {
                                var i = Array.prototype.slice.call(arguments, 1);
                                if (i.length <= 1 && (i = i[0]),
                                t) {
                                    var o = {};
                                    l(p(n), function(t) {
                                        o[t] = n[t]
                                    }),
                                    o[r] = i,
                                    e(t, o),
                                    e = function() {}
                                } else
                                    n[r] = i,
                                    s.setImmediate(d)
                            }
                              , f = i.slice(0, Math.abs(i.length - 1)) || []
                              , v = function() {
                                return c(f, function(t, e) {
                                    return t && n.hasOwnProperty(e)
                                }, !0) && !n.hasOwnProperty(r)
                            };
                            if (v())
                                i[i.length - 1](o, n);
                            else {
                                var g = function() {
                                    v() && (u(g),
                                    i[i.length - 1](o, n))
                                };
                                a(g)
                            }
                        })
                    }
                    ,
                    s.retry = function(t, e, r) {
                        var i = 5
                          , n = [];
                        "function" == typeof t && (r = e,
                        e = t,
                        t = i),
                        t = parseInt(t, 10) || i;
                        var o = function(i, o) {
                            for (var a = function(t, e) {
                                return function(r) {
                                    t(function(t, i) {
                                        r(!t || e, {
                                            err: t,
                                            result: i
                                        })
                                    }, o)
                                }
                            }; t; )
                                n.push(a(e, !(t -= 1)));
                            s.series(n, function(t, e) {
                                e = e[e.length - 1],
                                (i || r)(e.err, e.result)
                            })
                        };
                        return r ? o() : o
                    }
                    ,
                    s.waterfall = function(t, e) {
                        if (e = e || function() {}
                        ,
                        !h(t)) {
                            var r = new Error("First argument to waterfall must be an array of functions");
                            return e(r)
                        }
                        if (!t.length)
                            return e();
                        var i = function(t) {
                            return function(r) {
                                if (r)
                                    e.apply(null, arguments),
                                    e = function() {}
                                    ;
                                else {
                                    var n = Array.prototype.slice.call(arguments, 1)
                                      , o = t.next();
                                    n.push(o ? i(o) : e),
                                    s.setImmediate(function() {
                                        t.apply(null, n)
                                    })
                                }
                            }
                        };
                        i(s.iterator(t))()
                    }
                    ;
                    var T = function(t, e, r) {
                        if (r = r || function() {}
                        ,
                        h(e))
                            t.map(e, function(t, e) {
                                t && t(function(t) {
                                    var r = Array.prototype.slice.call(arguments, 1);
                                    r.length <= 1 && (r = r[0]),
                                    e.call(null, t, r)
                                })
                            }, r);
                        else {
                            var i = {};
                            t.each(p(e), function(t, r) {
                                e[t](function(e) {
                                    var n = Array.prototype.slice.call(arguments, 1);
                                    n.length <= 1 && (n = n[0]),
                                    i[t] = n,
                                    r(e)
                                })
                            }, function(t) {
                                r(t, i)
                            })
                        }
                    };
                    s.parallel = function(t, e) {
                        T({
                            map: s.map,
                            each: s.each
                        }, t, e)
                    }
                    ,
                    s.parallelLimit = function(t, e, r) {
                        T({
                            map: y(e),
                            each: d(e)
                        }, t, r)
                    }
                    ,
                    s.series = function(t, e) {
                        if (e = e || function() {}
                        ,
                        h(t))
                            s.mapSeries(t, function(t, e) {
                                t && t(function(t) {
                                    var r = Array.prototype.slice.call(arguments, 1);
                                    r.length <= 1 && (r = r[0]),
                                    e.call(null, t, r)
                                })
                            }, e);
                        else {
                            var r = {};
                            s.eachSeries(p(t), function(e, i) {
                                t[e](function(t) {
                                    var n = Array.prototype.slice.call(arguments, 1);
                                    n.length <= 1 && (n = n[0]),
                                    r[e] = n,
                                    i(t)
                                })
                            }, function(t) {
                                e(t, r)
                            })
                        }
                    }
                    ,
                    s.iterator = function(t) {
                        var e = function(r) {
                            var i = function() {
                                return t.length && t[r].apply(null, arguments),
                                i.next()
                            };
                            return i.next = function() {
                                return r < t.length - 1 ? e(r + 1) : null
                            }
                            ,
                            i
                        };
                        return e(0)
                    }
                    ,
                    s.apply = function(t) {
                        var e = Array.prototype.slice.call(arguments, 1);
                        return function() {
                            return t.apply(null, e.concat(Array.prototype.slice.call(arguments)))
                        }
                    }
                    ;
                    var E = function(t, e, r, i) {
                        var n = [];
                        t(e, function(t, e) {
                            r(t, function(t, r) {
                                n = n.concat(r || []),
                                e(t)
                            })
                        }, function(t) {
                            i(t, n)
                        })
                    };
                    s.concat = f(E),
                    s.concatSeries = g(E),
                    s.whilst = function(t, e, r) {
                        t() ? e(function(i) {
                            return i ? r(i) : void s.whilst(t, e, r)
                        }) : r()
                    }
                    ,
                    s.doWhilst = function(t, e, r) {
                        t(function(i) {
                            if (i)
                                return r(i);
                            var n = Array.prototype.slice.call(arguments, 1);
                            e.apply(null, n) ? s.doWhilst(t, e, r) : r()
                        })
                    }
                    ,
                    s.until = function(t, e, r) {
                        t() ? r() : e(function(i) {
                            return i ? r(i) : void s.until(t, e, r)
                        })
                    }
                    ,
                    s.doUntil = function(t, e, r) {
                        t(function(i) {
                            if (i)
                                return r(i);
                            var n = Array.prototype.slice.call(arguments, 1);
                            e.apply(null, n) ? r() : s.doUntil(t, e, r)
                        })
                    }
                    ,
                    s.queue = function(t, e) {
                        function r(t, e, r, i) {
                            return t.started || (t.started = !0),
                            h(e) || (e = [e]),
                            0 == e.length ? s.setImmediate(function() {
                                t.drain && t.drain()
                            }) : void l(e, function(e) {
                                var n = {
                                    data: e,
                                    callback: "function" == typeof i ? i : null
                                };
                                r ? t.tasks.unshift(n) : t.tasks.push(n),
                                t.saturated && t.tasks.length === t.concurrency && t.saturated(),
                                s.setImmediate(t.process)
                            })
                        }
                        void 0 === e && (e = 1);
                        var n = 0
                          , o = {
                            tasks: [],
                            concurrency: e,
                            saturated: null,
                            empty: null,
                            drain: null,
                            started: !1,
                            paused: !1,
                            push: function(t, e) {
                                r(o, t, !1, e)
                            },
                            kill: function() {
                                o.drain = null,
                                o.tasks = []
                            },
                            unshift: function(t, e) {
                                r(o, t, !0, e)
                            },
                            process: function() {
                                if (!o.paused && n < o.concurrency && o.tasks.length) {
                                    var e = o.tasks.shift();
                                    o.empty && 0 === o.tasks.length && o.empty(),
                                    n += 1;
                                    var r = function() {
                                        n -= 1,
                                        e.callback && e.callback.apply(e, arguments),
                                        o.drain && o.tasks.length + n === 0 && o.drain(),
                                        o.process()
                                    }
                                      , s = i(r);
                                    t(e.data, s)
                                }
                            },
                            length: function() {
                                return o.tasks.length
                            },
                            running: function() {
                                return n
                            },
                            idle: function() {
                                return o.tasks.length + n === 0
                            },
                            pause: function() {
                                o.paused !== !0 && (o.paused = !0,
                                o.process())
                            },
                            resume: function() {
                                o.paused !== !1 && (o.paused = !1,
                                o.process())
                            }
                        };
                        return o
                    }
                    ,
                    s.priorityQueue = function(t, e) {
                        function r(t, e) {
                            return t.priority - e.priority
                        }
                        function i(t, e, r) {
                            for (var i = -1, n = t.length - 1; n > i; ) {
                                var o = i + (n - i + 1 >>> 1);
                                r(e, t[o]) >= 0 ? i = o : n = o - 1
                            }
                            return i
                        }
                        function n(t, e, n, o) {
                            return t.started || (t.started = !0),
                            h(e) || (e = [e]),
                            0 == e.length ? s.setImmediate(function() {
                                t.drain && t.drain()
                            }) : void l(e, function(e) {
                                var a = {
                                    data: e,
                                    priority: n,
                                    callback: "function" == typeof o ? o : null
                                };
                                t.tasks.splice(i(t.tasks, a, r) + 1, 0, a),
                                t.saturated && t.tasks.length === t.concurrency && t.saturated(),
                                s.setImmediate(t.process)
                            })
                        }
                        var o = s.queue(t, e);
                        return o.push = function(t, e, r) {
                            n(o, t, e, r)
                        }
                        ,
                        delete o.unshift,
                        o
                    }
                    ,
                    s.cargo = function(t, e) {
                        var r = !1
                          , i = []
                          , n = {
                            tasks: i,
                            payload: e,
                            saturated: null,
                            empty: null,
                            drain: null,
                            drained: !0,
                            push: function(t, r) {
                                h(t) || (t = [t]),
                                l(t, function(t) {
                                    i.push({
                                        data: t,
                                        callback: "function" == typeof r ? r : null
                                    }),
                                    n.drained = !1,
                                    n.saturated && i.length === e && n.saturated()
                                }),
                                s.setImmediate(n.process)
                            },
                            process: function o() {
                                if (!r) {
                                    if (0 === i.length)
                                        return n.drain && !n.drained && n.drain(),
                                        void (n.drained = !0);
                                    var s = "number" == typeof e ? i.splice(0, e) : i.splice(0, i.length)
                                      , a = u(s, function(t) {
                                        return t.data
                                    });
                                    n.empty && n.empty(),
                                    r = !0,
                                    t(a, function() {
                                        r = !1;
                                        var t = arguments;
                                        l(s, function(e) {
                                            e.callback && e.callback.apply(null, t)
                                        }),
                                        o()
                                    })
                                }
                            },
                            length: function() {
                                return i.length
                            },
                            running: function() {
                                return r
                            }
                        };
                        return n
                    }
                    ;
                    var S = function(t) {
                        return function(e) {
                            var r = Array.prototype.slice.call(arguments, 1);
                            e.apply(null, r.concat([function(e) {
                                var r = Array.prototype.slice.call(arguments, 1);
                                "undefined" != typeof console && (e ? console.error && console.error(e) : console[t] && l(r, function(e) {
                                    console[t](e)
                                }))
                            }
                            ]))
                        }
                    };
                    s.log = S("log"),
                    s.dir = S("dir"),
                    s.memoize = function(t, e) {
                        var r = {}
                          , i = {};
                        e = e || function(t) {
                            return t
                        }
                        ;
                        var n = function() {
                            var n = Array.prototype.slice.call(arguments)
                              , o = n.pop()
                              , a = e.apply(null, n);
                            a in r ? s.nextTick(function() {
                                o.apply(null, r[a])
                            }) : a in i ? i[a].push(o) : (i[a] = [o],
                            t.apply(null, n.concat([function() {
                                r[a] = arguments;
                                var t = i[a];
                                delete i[a];
                                for (var e = 0, n = t.length; n > e; e++)
                                    t[e].apply(null, arguments)
                            }
                            ])))
                        };
                        return n.memo = r,
                        n.unmemoized = t,
                        n
                    }
                    ,
                    s.unmemoize = function(t) {
                        return function() {
                            return (t.unmemoized || t).apply(null, arguments)
                        }
                    }
                    ,
                    s.times = function(t, e, r) {
                        for (var i = [], n = 0; t > n; n++)
                            i.push(n);
                        return s.map(i, e, r)
                    }
                    ,
                    s.timesSeries = function(t, e, r) {
                        for (var i = [], n = 0; t > n; n++)
                            i.push(n);
                        return s.mapSeries(i, e, r)
                    }
                    ,
                    s.seq = function() {
                        var t = arguments;
                        return function() {
                            var e = this
                              , r = Array.prototype.slice.call(arguments)
                              , i = r.pop();
                            s.reduce(t, r, function(t, r, i) {
                                r.apply(e, t.concat([function() {
                                    var t = arguments[0]
                                      , e = Array.prototype.slice.call(arguments, 1);
                                    i(t, e)
                                }
                                ]))
                            }, function(t, r) {
                                i.apply(e, [t].concat(r))
                            })
                        }
                    }
                    ,
                    s.compose = function() {
                        return s.seq.apply(null, Array.prototype.reverse.call(arguments))
                    }
                    ;
                    var A = function(t, e) {
                        var r = function() {
                            var r = this
                              , i = Array.prototype.slice.call(arguments)
                              , n = i.pop();
                            return t(e, function(t, e) {
                                t.apply(r, i.concat([e]))
                            }, n)
                        };
                        if (arguments.length > 2) {
                            var i = Array.prototype.slice.call(arguments, 2);
                            return r.apply(this, i)
                        }
                        return r
                    };
                    s.applyEach = f(A),
                    s.applyEachSeries = g(A),
                    s.forever = function(t, e) {
                        function r(i) {
                            if (i) {
                                if (e)
                                    return e(i);
                                throw i
                            }
                            t(r)
                        }
                        r()
                    }
                    ,
                    "undefined" != typeof r && r.exports ? r.exports = s : "undefined" != typeof t && t.amd ? t([], function() {
                        return s
                    }) : n.async = s
                }()
            }
            ).call(this, e("_process"))
        }
        , {
            _process: 4
        }],
        14: [function(t, e, r) {
            arguments[4][11][0].apply(r, arguments)
        }
        , {
            dup: 11
        }],
        15: [function(t, e, r) {
            function i(t, e) {
                a.call(this),
                e = e || 10,
                this.baseUrl = t || "",
                this.progress = 0,
                this.loading = !1,
                this._progressChunk = 0,
                this._beforeMiddleware = [],
                this._afterMiddleware = [],
                this._boundLoadResource = this._loadResource.bind(this),
                this._boundOnLoad = this._onLoad.bind(this),
                this._buffer = [],
                this._numToLoad = 0,
                this._queue = n.queue(this._boundLoadResource, e),
                this.resources = {}
            }
            var n = t("async")
              , o = t("url")
              , s = t("./Resource")
              , a = t("eventemitter3");
            i.prototype = Object.create(a.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.add = i.prototype.enqueue = function(t, e, r, i) {
                if (Array.isArray(t)) {
                    for (var n = 0; n < t.length; ++n)
                        this.add(t[n]);
                    return this
                }
                if ("object" == typeof t && (i = e || t.callback || t.onComplete,
                r = t,
                e = t.url,
                t = t.name || t.key || t.url),
                "string" != typeof e && (i = r,
                r = e,
                e = t),
                "string" != typeof e)
                    throw new Error("No url passed to add resource to loader.");
                if ("function" == typeof r && (i = r,
                r = null),
                this.resources[t])
                    throw new Error('Resource with name "' + t + '" already exists.');
                return e = this._handleBaseUrl(e),
                this.resources[t] = new s(t,e,r),
                "function" == typeof i && this.resources[t].once("afterMiddleware", i),
                this._numToLoad++,
                this._queue.started ? (this._queue.push(this.resources[t]),
                this._progressChunk = (100 - this.progress) / (this._queue.length() + this._queue.running())) : (this._buffer.push(this.resources[t]),
                this._progressChunk = 100 / this._buffer.length),
                this
            }
            ,
            i.prototype._handleBaseUrl = function(t) {
                var e = o.parse(t);
                return e.protocol || 0 === e.pathname.indexOf("//") ? t : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && t.lastIndexOf("/") !== t.length - 1 ? this.baseUrl + "/" + t : this.baseUrl + t
            }
            ,
            i.prototype.before = i.prototype.pre = function(t) {
                return this._beforeMiddleware.push(t),
                this
            }
            ,
            i.prototype.after = i.prototype.use = function(t) {
                return this._afterMiddleware.push(t),
                this
            }
            ,
            i.prototype.reset = function() {
                this.progress = 0,
                this.loading = !1,
                this._progressChunk = 0,
                this._buffer.length = 0,
                this._numToLoad = 0,
                this._queue.kill(),
                this._queue.started = !1,
                this.resources = {}
            }
            ,
            i.prototype.load = function(t) {
                if ("function" == typeof t && this.once("complete", t),
                this._queue.started)
                    return this;
                this.emit("start", this);
                for (var e = 0; e < this._buffer.length; ++e)
                    this._queue.push(this._buffer[e]);
                return this._buffer.length = 0,
                this
            }
            ,
            i.prototype._loadResource = function(t, e) {
                var r = this;
                t._dequeue = e,
                this._runMiddleware(t, this._beforeMiddleware, function() {
                    t.load(r._boundOnLoad)
                })
            }
            ,
            i.prototype._onComplete = function() {
                this.emit("complete", this, this.resources)
            }
            ,
            i.prototype._onLoad = function(t) {
                this.progress += this._progressChunk,
                this.emit("progress", this, t),
                t.error ? this.emit("error", t.error, this, t) : this.emit("load", this, t),
                this._runMiddleware(t, this._afterMiddleware, function() {
                    t.emit("afterMiddleware", t),
                    this._numToLoad--,
                    0 === this._numToLoad && this._onComplete()
                }),
                t._dequeue()
            }
            ,
            i.prototype._runMiddleware = function(t, e, r) {
                var i = this;
                n.eachSeries(e, function(e, r) {
                    e.call(i, t, r)
                }, r.bind(this, t))
            }
            ,
            i.LOAD_TYPE = s.LOAD_TYPE,
            i.XHR_READY_STATE = s.XHR_READY_STATE,
            i.XHR_RESPONSE_TYPE = s.XHR_RESPONSE_TYPE
        }
        , {
            "./Resource": 16,
            async: 13,
            eventemitter3: 14,
            url: 9
        }],
        16: [function(t, e, r) {
            function i(t, e, r) {
                if (s.call(this),
                r = r || {},
                "string" != typeof t || "string" != typeof e)
                    throw new Error("Both name and url are required for constructing a resource.");
                this.name = t,
                this.url = e,
                this.isDataUrl = 0 === this.url.indexOf("data:"),
                this.data = null,
                this.crossOrigin = r.crossOrigin === !0 ? "anonymous" : null,
                this.loadType = r.loadType || this._determineLoadType(),
                this.xhrType = r.xhrType,
                this.error = null,
                this.xhr = null,
                this.isJson = !1,
                this.isXml = !1,
                this.isImage = !1,
                this.isAudio = !1,
                this.isVideo = !1,
                this._dequeue = null,
                this._boundComplete = this.complete.bind(this),
                this._boundOnError = this._onError.bind(this),
                this._boundOnProgress = this._onProgress.bind(this),
                this._boundXhrOnError = this._xhrOnError.bind(this),
                this._boundXhrOnAbort = this._xhrOnAbort.bind(this),
                this._boundXhrOnLoad = this._xhrOnLoad.bind(this),
                this._boundXdrOnTimeout = this._xdrOnTimeout.bind(this)
            }
            function n(t) {
                return t.toString().replace("object ", "")
            }
            function o(t, e, r) {
                e && 0 === e.indexOf(".") && (e = e.substring(1)),
                e && (t[e] = r)
            }
            var s = t("eventemitter3")
              , a = t("url")
              , h = !(!window.XDomainRequest || "withCredentials"in new XMLHttpRequest)
              , l = null;
            i.prototype = Object.create(s.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.complete = function() {
                this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError),
                this.data.removeEventListener("load", this._boundComplete),
                this.data.removeEventListener("progress", this._boundOnProgress),
                this.data.removeEventListener("canplaythrough", this._boundComplete)),
                this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError),
                this.xhr.removeEventListener("abort", this._boundXhrOnAbort),
                this.xhr.removeEventListener("progress", this._boundOnProgress),
                this.xhr.removeEventListener("load", this._boundXhrOnLoad)) : (this.xhr.onerror = null,
                this.xhr.ontimeout = null,
                this.xhr.onprogress = null,
                this.xhr.onload = null)),
                this.emit("complete", this)
            }
            ,
            i.prototype.load = function(t) {
                switch (this.emit("start", this),
                t && this.once("complete", t),
                "string" != typeof this.crossOrigin && (this.crossOrigin = this._determineCrossOrigin(this.url)),
                this.loadType) {
                case i.LOAD_TYPE.IMAGE:
                    this._loadImage();
                    break;
                case i.LOAD_TYPE.AUDIO:
                    this._loadElement("audio");
                    break;
                case i.LOAD_TYPE.VIDEO:
                    this._loadElement("video");
                    break;
                case i.LOAD_TYPE.XHR:
                default:
                    h && this.crossOrigin ? this._loadXdr() : this._loadXhr()
                }
            }
            ,
            i.prototype._loadImage = function() {
                this.data = new Image,
                this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
                this.data.src = this.url,
                this.isImage = !0,
                this.data.addEventListener("error", this._boundOnError, !1),
                this.data.addEventListener("load", this._boundComplete, !1),
                this.data.addEventListener("progress", this._boundOnProgress, !1)
            }
            ,
            i.prototype._loadElement = function(t) {
                if (this.data = document.createElement(t),
                Array.isArray(this.url))
                    for (var e = 0; e < this.url.length; ++e)
                        this.data.appendChild(this._createSource(t, this.url[e]));
                else
                    this.data.appendChild(this._createSource(t, this.url));
                this["is" + t[0].toUpperCase() + t.substring(1)] = !0,
                this.data.addEventListener("error", this._boundOnError, !1),
                this.data.addEventListener("load", this._boundComplete, !1),
                this.data.addEventListener("progress", this._boundOnProgress, !1),
                this.data.addEventListener("canplaythrough", this._boundComplete, !1),
                this.data.load()
            }
            ,
            i.prototype._loadXhr = function() {
                "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
                var t = this.xhr = new XMLHttpRequest;
                t.open("GET", this.url, !0),
                t.responseType = this.xhrType === i.XHR_RESPONSE_TYPE.JSON || this.xhrType === i.XHR_RESPONSE_TYPE.DOCUMENT ? i.XHR_RESPONSE_TYPE.TEXT : this.xhrType,
                t.addEventListener("error", this._boundXhrOnError, !1),
                t.addEventListener("abort", this._boundXhrOnAbort, !1),
                t.addEventListener("progress", this._boundOnProgress, !1),
                t.addEventListener("load", this._boundXhrOnLoad, !1),
                t.send()
            }
            ,
            i.prototype._loadXdr = function() {
                "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
                var t = this.xhr = new XDomainRequest;
                t.timeout = 5e3,
                t.onerror = this._boundXhrOnError,
                t.ontimeout = this._boundXdrOnTimeout,
                t.onprogress = this._boundOnProgress,
                t.onload = this._boundXhrOnLoad,
                t.open("GET", this.url, !0),
                setTimeout(function() {
                    t.send()
                }, 0)
            }
            ,
            i.prototype._createSource = function(t, e, r) {
                r || (r = t + "/" + e.substr(e.lastIndexOf(".") + 1));
                var i = document.createElement("source");
                return i.src = e,
                i.type = r,
                i
            }
            ,
            i.prototype._onError = function(t) {
                this.error = new Error("Failed to load element using " + t.target.nodeName),
                this.complete()
            }
            ,
            i.prototype._onProgress = function(t) {
                t && t.lengthComputable && this.emit("progress", this, t.loaded / t.total)
            }
            ,
            i.prototype._xhrOnError = function() {
                this.error = new Error(n(this.xhr) + " Request failed. Status: " + this.xhr.status + ', text: "' + this.xhr.statusText + '"'),
                this.complete()
            }
            ,
            i.prototype._xhrOnAbort = function() {
                this.error = new Error(n(this.xhr) + " Request was aborted by the user."),
                this.complete()
            }
            ,
            i.prototype._xdrOnTimeout = function() {
                this.error = new Error(n(this.xhr) + " Request timed out."),
                this.complete()
            }
            ,
            i.prototype._xhrOnLoad = function() {
                var t = this.xhr
                  , e = void 0 !== t.status ? t.status : 200;
                if (200 === e || 204 === e || 0 === e && t.responseText.length > 0)
                    if (this.xhrType === i.XHR_RESPONSE_TYPE.TEXT)
                        this.data = t.responseText;
                    else if (this.xhrType === i.XHR_RESPONSE_TYPE.JSON)
                        try {
                            this.data = JSON.parse(t.responseText),
                            this.isJson = !0
                        } catch (r) {
                            this.error = new Error("Error trying to parse loaded json:",r)
                        }
                    else if (this.xhrType === i.XHR_RESPONSE_TYPE.DOCUMENT)
                        try {
                            if (window.DOMParser) {
                                var n = new DOMParser;
                                this.data = n.parseFromString(t.responseText, "text/xml")
                            } else {
                                var o = document.createElement("div");
                                o.innerHTML = t.responseText,
                                this.data = o
                            }
                            this.isXml = !0
                        } catch (r) {
                            this.error = new Error("Error trying to parse loaded xml:",r)
                        }
                    else
                        this.data = t.response || t.responseText;
                else
                    this.error = new Error("[" + t.status + "]" + t.statusText + ":" + t.responseURL);
                this.complete()
            }
            ,
            i.prototype._determineCrossOrigin = function(t, e) {
                if (0 === t.indexOf("data:"))
                    return "";
                e = e || window.location,
                l || (l = document.createElement("a")),
                l.href = t,
                t = a.parse(l.href);
                var r = !t.port && "" === e.port || t.port === e.port;
                return t.hostname === e.hostname && r && t.protocol === e.protocol ? "" : "anonymous"
            }
            ,
            i.prototype._determineXhrType = function() {
                return i._xhrTypeMap[this._getExtension()] || i.XHR_RESPONSE_TYPE.TEXT
            }
            ,
            i.prototype._determineLoadType = function() {
                return i._loadTypeMap[this._getExtension()] || i.LOAD_TYPE.XHR
            }
            ,
            i.prototype._getExtension = function() {
                var t, e = this.url;
                if (this.isDataUrl) {
                    var r = e.indexOf("/");
                    t = e.substring(r + 1, e.indexOf(";", r))
                } else {
                    var i = e.indexOf("?");
                    -1 !== i && (e = e.substring(0, i)),
                    t = e.substring(e.lastIndexOf(".") + 1)
                }
                return t
            }
            ,
            i.prototype._getMimeFromXhrType = function(t) {
                switch (t) {
                case i.XHR_RESPONSE_TYPE.BUFFER:
                    return "application/octet-binary";
                case i.XHR_RESPONSE_TYPE.BLOB:
                    return "application/blob";
                case i.XHR_RESPONSE_TYPE.DOCUMENT:
                    return "application/xml";
                case i.XHR_RESPONSE_TYPE.JSON:
                    return "application/json";
                case i.XHR_RESPONSE_TYPE.DEFAULT:
                case i.XHR_RESPONSE_TYPE.TEXT:
                default:
                    return "text/plain"
                }
            }
            ,
            i.LOAD_TYPE = {
                XHR: 1,
                IMAGE: 2,
                AUDIO: 3,
                VIDEO: 4
            },
            i.XHR_READY_STATE = {
                UNSENT: 0,
                OPENED: 1,
                HEADERS_RECEIVED: 2,
                LOADING: 3,
                DONE: 4
            },
            i.XHR_RESPONSE_TYPE = {
                DEFAULT: "text",
                BUFFER: "arraybuffer",
                BLOB: "blob",
                DOCUMENT: "document",
                JSON: "json",
                TEXT: "text"
            },
            i._loadTypeMap = {
                gif: i.LOAD_TYPE.IMAGE,
                png: i.LOAD_TYPE.IMAGE,
                bmp: i.LOAD_TYPE.IMAGE,
                jpg: i.LOAD_TYPE.IMAGE,
                jpeg: i.LOAD_TYPE.IMAGE,
                tif: i.LOAD_TYPE.IMAGE,
                tiff: i.LOAD_TYPE.IMAGE,
                webp: i.LOAD_TYPE.IMAGE,
                tga: i.LOAD_TYPE.IMAGE
            },
            i._xhrTypeMap = {
                xhtml: i.XHR_RESPONSE_TYPE.DOCUMENT,
                html: i.XHR_RESPONSE_TYPE.DOCUMENT,
                htm: i.XHR_RESPONSE_TYPE.DOCUMENT,
                xml: i.XHR_RESPONSE_TYPE.DOCUMENT,
                tmx: i.XHR_RESPONSE_TYPE.DOCUMENT,
                tsx: i.XHR_RESPONSE_TYPE.DOCUMENT,
                svg: i.XHR_RESPONSE_TYPE.DOCUMENT,
                gif: i.XHR_RESPONSE_TYPE.BLOB,
                png: i.XHR_RESPONSE_TYPE.BLOB,
                bmp: i.XHR_RESPONSE_TYPE.BLOB,
                jpg: i.XHR_RESPONSE_TYPE.BLOB,
                jpeg: i.XHR_RESPONSE_TYPE.BLOB,
                tif: i.XHR_RESPONSE_TYPE.BLOB,
                tiff: i.XHR_RESPONSE_TYPE.BLOB,
                webp: i.XHR_RESPONSE_TYPE.BLOB,
                tga: i.XHR_RESPONSE_TYPE.BLOB,
                json: i.XHR_RESPONSE_TYPE.JSON,
                text: i.XHR_RESPONSE_TYPE.TEXT,
                txt: i.XHR_RESPONSE_TYPE.TEXT
            },
            i.setExtensionLoadType = function(t, e) {
                o(i._loadTypeMap, t, e)
            }
            ,
            i.setExtensionXhrType = function(t, e) {
                o(i._xhrTypeMap, t, e)
            }
        }
        , {
            eventemitter3: 14,
            url: 9
        }],
        17: [function(t, e, r) {
            e.exports = {
                _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                encodeBinary: function(t) {
                    for (var e, r = "", i = new Array(4), n = 0, o = 0, s = 0; n < t.length; ) {
                        for (e = new Array(3),
                        o = 0; o < e.length; o++)
                            e[o] = n < t.length ? 255 & t.charCodeAt(n++) : 0;
                        switch (i[0] = e[0] >> 2,
                        i[1] = (3 & e[0]) << 4 | e[1] >> 4,
                        i[2] = (15 & e[1]) << 2 | e[2] >> 6,
                        i[3] = 63 & e[2],
                        s = n - (t.length - 1)) {
                        case 2:
                            i[3] = 64,
                            i[2] = 64;
                            break;
                        case 1:
                            i[3] = 64
                        }
                        for (o = 0; o < i.length; o++)
                            r += this._keyStr.charAt(i[o])
                    }
                    return r
                }
            }
        }
        , {}],
        18: [function(t, e, r) {
            e.exports = t("./Loader"),
            e.exports.Resource = t("./Resource"),
            e.exports.middleware = {
                caching: {
                    memory: t("./middlewares/caching/memory")
                },
                parsing: {
                    blob: t("./middlewares/parsing/blob")
                }
            }
        }
        , {
            "./Loader": 15,
            "./Resource": 16,
            "./middlewares/caching/memory": 19,
            "./middlewares/parsing/blob": 20
        }],
        19: [function(t, e, r) {
            var i = {};
            e.exports = function() {
                return function(t, e) {
                    i[t.url] ? (t.data = i[t.url],
                    t.complete()) : (t.once("complete", function() {
                        i[this.url] = this.data
                    }),
                    e())
                }
            }
        }
        , {}],
        20: [function(t, e, r) {
            var i = t("../../Resource")
              , n = t("../../b64");
            window.URL = window.URL || window.webkitURL,
            e.exports = function() {
                return function(t, e) {
                    if (!t.data)
                        return e();
                    if (t.xhr && t.xhrType === i.XHR_RESPONSE_TYPE.BLOB)
                        if (window.Blob && "string" != typeof t.data) {
                            if (0 === t.data.type.indexOf("image")) {
                                var r = URL.createObjectURL(t.data);
                                t.blob = t.data,
                                t.data = new Image,
                                t.data.src = r,
                                t.isImage = !0,
                                t.data.onload = function() {
                                    URL.revokeObjectURL(r),
                                    t.data.onload = null,
                                    e()
                                }
                            }
                        } else {
                            var o = t.xhr.getResponseHeader("content-type");
                            o && 0 === o.indexOf("image") && (t.data = new Image,
                            t.data.src = "data:" + o + ";base64," + n.encodeBinary(t.xhr.responseText),
                            t.isImage = !0,
                            t.data.onload = function() {
                                t.data.onload = null,
                                e()
                            }
                            )
                        }
                    else
                        e()
                }
            }
        }
        , {
            "../../Resource": 16,
            "../../b64": 17
        }],
        21: [function(t, e, r) {
            e.exports = {
                name: "pixi.js",
                version: "3.0.7",
                description: "Pixi.js is a fast lightweight 2D library that works across all devices.",
                author: "Mat Groves",
                contributors: ["Chad Engler <chad@pantherdev.com>", "Richard Davey <rdavey@gmail.com>"],
                main: "./src/index.js",
                homepage: "http://goodboydigital.com/",
                bugs: "https://github.com/GoodBoyDigital/pixi.js/issues",
                license: "MIT",
                repository: {
                    type: "git",
                    url: "https://github.com/GoodBoyDigital/pixi.js.git"
                },
                scripts: {
                    start: "gulp && gulp watch",
                    test: "gulp && testem ci",
                    build: "gulp",
                    docs: "jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"
                },
                files: ["bin/", "src/"],
                dependencies: {
                    async: "^0.9.0",
                    brfs: "^1.4.0",
                    earcut: "^2.0.1",
                    eventemitter3: "^1.1.0",
                    "object-assign": "^2.0.0",
                    "resource-loader": "^1.6.1"
                },
                devDependencies: {
                    browserify: "^10.2.3",
                    chai: "^3.0.0",
                    del: "^1.2.0",
                    gulp: "^3.9.0",
                    "gulp-cached": "^1.1.0",
                    "gulp-concat": "^2.5.2",
                    "gulp-debug": "^2.0.1",
                    "gulp-jshint": "^1.11.0",
                    "gulp-mirror": "^0.4.0",
                    "gulp-plumber": "^1.0.1",
                    "gulp-rename": "^1.2.2",
                    "gulp-sourcemaps": "^1.5.2",
                    "gulp-uglify": "^1.2.0",
                    "gulp-util": "^3.0.5",
                    "jaguarjs-jsdoc": "git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",
                    jsdoc: "^3.3.0",
                    "jshint-summary": "^0.4.0",
                    minimist: "^1.1.1",
                    mocha: "^2.2.5",
                    "require-dir": "^0.3.0",
                    "run-sequence": "^1.1.0",
                    testem: "^0.8.3",
                    "vinyl-buffer": "^1.0.0",
                    "vinyl-source-stream": "^1.1.0",
                    watchify: "^3.2.1"
                },
                browserify: {
                    transform: ["brfs"]
                }
            }
        }
        , {}],
        22: [function(t, e, r) {
            var i = {
                VERSION: t("../../package.json").version,
                PI_2: 2 * Math.PI,
                RAD_TO_DEG: 180 / Math.PI,
                DEG_TO_RAD: Math.PI / 180,
                TARGET_FPMS: .06,
                RENDERER_TYPE: {
                    UNKNOWN: 0,
                    WEBGL: 1,
                    CANVAS: 2
                },
                BLEND_MODES: {
                    NORMAL: 0,
                    ADD: 1,
                    MULTIPLY: 2,
                    SCREEN: 3,
                    OVERLAY: 4,
                    DARKEN: 5,
                    LIGHTEN: 6,
                    COLOR_DODGE: 7,
                    COLOR_BURN: 8,
                    HARD_LIGHT: 9,
                    SOFT_LIGHT: 10,
                    DIFFERENCE: 11,
                    EXCLUSION: 12,
                    HUE: 13,
                    SATURATION: 14,
                    COLOR: 15,
                    LUMINOSITY: 16
                },
                DRAW_MODES: {
                    POINTS: 0,
                    LINES: 1,
                    LINE_LOOP: 2,
                    LINE_STRIP: 3,
                    TRIANGLES: 4,
                    TRIANGLE_STRIP: 5,
                    TRIANGLE_FAN: 6
                },
                SCALE_MODES: {
                    DEFAULT: 0,
                    LINEAR: 0,
                    NEAREST: 1
                },
                RETINA_PREFIX: /@(.+)x/,
                RESOLUTION: 1,
                FILTER_RESOLUTION: 1,
                DEFAULT_RENDER_OPTIONS: {
                    view: null,
                    resolution: 1,
                    antialias: !1,
                    forceFXAA: !1,
                    autoResize: !1,
                    transparent: !1,
                    backgroundColor: 0,
                    clearBeforeRender: !0,
                    preserveDrawingBuffer: !1
                },
                SHAPES: {
                    POLY: 0,
                    RECT: 1,
                    CIRC: 2,
                    ELIP: 3,
                    RREC: 4
                },
                SPRITE_BATCH_SIZE: 2e3
            };
            e.exports = i
        }
        , {
            "../../package.json": 21
        }],
        23: [function(t, e, r) {
            function i() {
                o.call(this),
                this.children = []
            }
            var n = t("../math")
              , o = t("./DisplayObject")
              , s = t("../textures/RenderTexture")
              , a = new n.Matrix;
            i.prototype = Object.create(o.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                width: {
                    get: function() {
                        return this.scale.x * this.getLocalBounds().width
                    },
                    set: function(t) {
                        var e = this.getLocalBounds().width;
                        this.scale.x = 0 !== e ? t / e : 1,
                        this._width = t
                    }
                },
                height: {
                    get: function() {
                        return this.scale.y * this.getLocalBounds().height
                    },
                    set: function(t) {
                        var e = this.getLocalBounds().height;
                        this.scale.y = 0 !== e ? t / e : 1,
                        this._height = t
                    }
                }
            }),
            i.prototype.addChild = function(t) {
                return this.addChildAt(t, this.children.length)
            }
            ,
            i.prototype.addChildAt = function(t, e) {
                if (t === this)
                    return t;
                if (e >= 0 && e <= this.children.length)
                    return t.parent && t.parent.removeChild(t),
                    t.parent = this,
                    this.children.splice(e, 0, t),
                    t.emit("added", this),
                    t;
                throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length)
            }
            ,
            i.prototype.swapChildren = function(t, e) {
                if (t !== e) {
                    var r = this.getChildIndex(t)
                      , i = this.getChildIndex(e);
                    if (0 > r || 0 > i)
                        throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");
                    this.children[r] = e,
                    this.children[i] = t
                }
            }
            ,
            i.prototype.getChildIndex = function(t) {
                var e = this.children.indexOf(t);
                if (-1 === e)
                    throw new Error("The supplied DisplayObject must be a child of the caller");
                return e
            }
            ,
            i.prototype.setChildIndex = function(t, e) {
                if (0 > e || e >= this.children.length)
                    throw new Error("The supplied index is out of bounds");
                var r = this.getChildIndex(t);
                this.children.splice(r, 1),
                this.children.splice(e, 0, t)
            }
            ,
            i.prototype.getChildAt = function(t) {
                if (0 > t || t >= this.children.length)
                    throw new Error("getChildAt: Supplied index " + t + " does not exist in the child list, or the supplied DisplayObject is not a child of the caller");
                return this.children[t]
            }
            ,
            i.prototype.removeChild = function(t) {
                var e = this.children.indexOf(t);
                if (-1 !== e)
                    return this.removeChildAt(e)
            }
            ,
            i.prototype.removeChildAt = function(t) {
                var e = this.getChildAt(t);
                return e.parent = null,
                this.children.splice(t, 1),
                e.emit("removed", this),
                e
            }
            ,
            i.prototype.removeChildren = function(t, e) {
                var r = t || 0
                  , i = "number" == typeof e ? e : this.children.length
                  , n = i - r;
                if (n > 0 && i >= n) {
                    for (var o = this.children.splice(r, n), s = 0; s < o.length; ++s)
                        o[s].parent = null;
                    return o
                }
                if (0 === n && 0 === this.children.length)
                    return [];
                throw new RangeError("removeChildren: numeric values are outside the acceptable range.")
            }
            ,
            i.prototype.generateTexture = function(t, e, r) {
                var i = this.getLocalBounds()
                  , n = new s(t,0 | i.width,0 | i.height,r,e);
                return a.tx = -i.x,
                a.ty = -i.y,
                n.render(this, a),
                n
            }
            ,
            i.prototype.updateTransform = function() {
                if (this.visible) {
                    this.displayObjectUpdateTransform();
                    for (var t = 0, e = this.children.length; e > t; ++t)
                        this.children[t].updateTransform()
                }
            }
            ,
            i.prototype.containerUpdateTransform = i.prototype.updateTransform,
            i.prototype.getBounds = function() {
                if (!this._currentBounds) {
                    if (0 === this.children.length)
                        return n.Rectangle.EMPTY;
                    for (var t, e, r, i = 1 / 0, o = 1 / 0, s = -(1 / 0), a = -(1 / 0), h = !1, l = 0, u = this.children.length; u > l; ++l) {
                        var c = this.children[l];
                        c.visible && (h = !0,
                        t = this.children[l].getBounds(),
                        i = i < t.x ? i : t.x,
                        o = o < t.y ? o : t.y,
                        e = t.width + t.x,
                        r = t.height + t.y,
                        s = s > e ? s : e,
                        a = a > r ? a : r)
                    }
                    if (!h)
                        return n.Rectangle.EMPTY;
                    var p = this._bounds;
                    p.x = i,
                    p.y = o,
                    p.width = s - i,
                    p.height = a - o,
                    this._currentBounds = p
                }
                return this._currentBounds
            }
            ,
            i.prototype.containerGetBounds = i.prototype.getBounds,
            i.prototype.getLocalBounds = function() {
                var t = this.worldTransform;
                this.worldTransform = n.Matrix.IDENTITY;
                for (var e = 0, r = this.children.length; r > e; ++e)
                    this.children[e].updateTransform();
                return this.worldTransform = t,
                this._currentBounds = null,
                this.getBounds(n.Matrix.IDENTITY)
            }
            ,
            i.prototype.renderWebGL = function(t) {
                if (this.visible && !(this.worldAlpha <= 0) && this.renderable) {
                    var e, r;
                    if (this._mask || this._filters) {
                        for (t.currentRenderer.flush(),
                        this._filters && t.filterManager.pushFilter(this, this._filters),
                        this._mask && t.maskManager.pushMask(this, this._mask),
                        t.currentRenderer.start(),
                        this._renderWebGL(t),
                        e = 0,
                        r = this.children.length; r > e; e++)
                            this.children[e].renderWebGL(t);
                        t.currentRenderer.flush(),
                        this._mask && t.maskManager.popMask(this, this._mask),
                        this._filters && t.filterManager.popFilter(),
                        t.currentRenderer.start()
                    } else
                        for (this._renderWebGL(t),
                        e = 0,
                        r = this.children.length; r > e; ++e)
                            this.children[e].renderWebGL(t)
                }
            }
            ,
            i.prototype._renderWebGL = function(t) {}
            ,
            i.prototype._renderCanvas = function(t) {}
            ,
            i.prototype.renderCanvas = function(t) {
                if (this.visible && !(this.alpha <= 0) && this.renderable) {
                    this._mask && t.maskManager.pushMask(this._mask, t),
                    this._renderCanvas(t);
                    for (var e = 0, r = this.children.length; r > e; ++e)
                        this.children[e].renderCanvas(t);
                    this._mask && t.maskManager.popMask(t)
                }
            }
            ,
            i.prototype.destroy = function(t) {
                if (o.prototype.destroy.call(this),
                t)
                    for (var e = 0, r = this.children.length; r > e; ++e)
                        this.children[e].destroy(t);
                this.removeChildren(),
                this.children = null
            }
        }
        , {
            "../math": 32,
            "../textures/RenderTexture": 70,
            "./DisplayObject": 24
        }],
        24: [function(t, e, r) {
            function i() {
                s.call(this),
                this.position = new n.Point,
                this.scale = new n.Point(1,1),
                this.pivot = new n.Point(0,0),
                this.rotation = 0,
                this.alpha = 1,
                this.visible = !0,
                this.renderable = !0,
                this.parent = null,
                this.worldAlpha = 1,
                this.worldTransform = new n.Matrix,
                this.filterArea = null,
                this._sr = 0,
                this._cr = 1,
                this._bounds = new n.Rectangle(0,0,1,1),
                this._currentBounds = null,
                this._mask = null,
                this._cacheAsBitmap = !1,
                this._cachedObject = null
            }
            var n = t("../math")
              , o = t("../textures/RenderTexture")
              , s = t("eventemitter3")
              , a = t("../const")
              , h = new n.Matrix;
            i.prototype = Object.create(s.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                x: {
                    get: function() {
                        return this.position.x
                    },
                    set: function(t) {
                        this.position.x = t
                    }
                },
                y: {
                    get: function() {
                        return this.position.y
                    },
                    set: function(t) {
                        this.position.y = t
                    }
                },
                worldVisible: {
                    get: function() {
                        var t = this;
                        do {
                            if (!t.visible)
                                return !1;
                            t = t.parent
                        } while (t);
                        return !0
                    }
                },
                mask: {
                    get: function() {
                        return this._mask
                    },
                    set: function(t) {
                        this._mask && (this._mask.renderable = !0),
                        this._mask = t,
                        this._mask && (this._mask.renderable = !1)
                    }
                },
                filters: {
                    get: function() {
                        return this._filters && this._filters.slice()
                    },
                    set: function(t) {
                        this._filters = t && t.slice()
                    }
                }
            }),
            i.prototype.updateTransform = function() {
                var t, e, r, i, n, o, s = this.parent.worldTransform, h = this.worldTransform;
                this.rotation % a.PI_2 ? (this.rotation !== this.rotationCache && (this.rotationCache = this.rotation,
                this._sr = Math.sin(this.rotation),
                this._cr = Math.cos(this.rotation)),
                t = this._cr * this.scale.x,
                e = this._sr * this.scale.x,
                r = -this._sr * this.scale.y,
                i = this._cr * this.scale.y,
                n = this.position.x,
                o = this.position.y,
                (this.pivot.x || this.pivot.y) && (n -= this.pivot.x * t + this.pivot.y * r,
                o -= this.pivot.x * e + this.pivot.y * i),
                h.a = t * s.a + e * s.c,
                h.b = t * s.b + e * s.d,
                h.c = r * s.a + i * s.c,
                h.d = r * s.b + i * s.d,
                h.tx = n * s.a + o * s.c + s.tx,
                h.ty = n * s.b + o * s.d + s.ty) : (t = this.scale.x,
                i = this.scale.y,
                n = this.position.x - this.pivot.x * t,
                o = this.position.y - this.pivot.y * i,
                h.a = t * s.a,
                h.b = t * s.b,
                h.c = i * s.c,
                h.d = i * s.d,
                h.tx = n * s.a + o * s.c + s.tx,
                h.ty = n * s.b + o * s.d + s.ty),
                this.worldAlpha = this.alpha * this.parent.worldAlpha,
                this._currentBounds = null
            }
            ,
            i.prototype.displayObjectUpdateTransform = i.prototype.updateTransform,
            i.prototype.getBounds = function(t) {
                return n.Rectangle.EMPTY
            }
            ,
            i.prototype.getLocalBounds = function() {
                return this.getBounds(n.Matrix.IDENTITY)
            }
            ,
            i.prototype.toGlobal = function(t) {
                return this.displayObjectUpdateTransform(),
                this.worldTransform.apply(t)
            }
            ,
            i.prototype.toLocal = function(t, e) {
                return e && (t = e.toGlobal(t)),
                this.displayObjectUpdateTransform(),
                this.worldTransform.applyInverse(t)
            }
            ,
            i.prototype.renderWebGL = function(t) {}
            ,
            i.prototype.renderCanvas = function(t) {}
            ,
            i.prototype.generateTexture = function(t, e, r) {
                var i = this.getLocalBounds()
                  , n = new o(t,0 | i.width,0 | i.height,e,r);
                return h.tx = -i.x,
                h.ty = -i.y,
                n.render(this, h),
                n
            }
            ,
            i.prototype.destroy = function() {
                this.position = null,
                this.scale = null,
                this.pivot = null,
                this.parent = null,
                this._bounds = null,
                this._currentBounds = null,
                this._mask = null,
                this.worldTransform = null,
                this.filterArea = null
            }
        }
        , {
            "../const": 22,
            "../math": 32,
            "../textures/RenderTexture": 70,
            eventemitter3: 11
        }],
        25: [function(t, e, r) {
            function i() {
                n.call(this),
                this.fillAlpha = 1,
                this.lineWidth = 0,
                this.lineColor = 0,
                this.graphicsData = [],
                this.tint = 16777215,
                this._prevTint = 16777215,
                this.blendMode = u.BLEND_MODES.NORMAL,
                this.currentPath = null,
                this._webGL = {},
                this.isMask = !1,
                this.boundsPadding = 0,
                this._localBounds = new l.Rectangle(0,0,1,1),
                this.dirty = !0,
                this.glDirty = !1,
                this.boundsDirty = !0,
                this.cachedSpriteDirty = !1
            }
            var n = t("../display/Container")
              , o = t("../textures/Texture")
              , s = t("../renderers/canvas/utils/CanvasBuffer")
              , a = t("../renderers/canvas/utils/CanvasGraphics")
              , h = t("./GraphicsData")
              , l = t("../math")
              , u = t("../const")
              , c = new l.Point;
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {}),
            i.prototype.clone = function() {
                var t = new i;
                t.renderable = this.renderable,
                t.fillAlpha = this.fillAlpha,
                t.lineWidth = this.lineWidth,
                t.lineColor = this.lineColor,
                t.tint = this.tint,
                t.blendMode = this.blendMode,
                t.isMask = this.isMask,
                t.boundsPadding = this.boundsPadding,
                t.dirty = this.dirty,
                t.glDirty = this.glDirty,
                t.cachedSpriteDirty = this.cachedSpriteDirty;
                for (var e = 0; e < this.graphicsData.length; ++e)
                    t.graphicsData.push(this.graphicsData[e].clone());
                return t.currentPath = t.graphicsData[t.graphicsData.length - 1],
                t.updateLocalBounds(),
                t
            }
            ,
            i.prototype.lineStyle = function(t, e, r) {
                return this.lineWidth = t || 0,
                this.lineColor = e || 0,
                this.lineAlpha = void 0 === r ? 1 : r,
                this.currentPath && (this.currentPath.shape.points.length ? this.drawShape(new l.Polygon(this.currentPath.shape.points.slice(-2))) : (this.currentPath.lineWidth = this.lineWidth,
                this.currentPath.lineColor = this.lineColor,
                this.currentPath.lineAlpha = this.lineAlpha)),
                this
            }
            ,
            i.prototype.moveTo = function(t, e) {
                return this.drawShape(new l.Polygon([t, e])),
                this
            }
            ,
            i.prototype.lineTo = function(t, e) {
                return this.currentPath.shape.points.push(t, e),
                this.dirty = !0,
                this
            }
            ,
            i.prototype.quadraticCurveTo = function(t, e, r, i) {
                this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
                var n, o, s = 20, a = this.currentPath.shape.points;
                0 === a.length && this.moveTo(0, 0);
                for (var h = a[a.length - 2], l = a[a.length - 1], u = 0, c = 1; s >= c; ++c)
                    u = c / s,
                    n = h + (t - h) * u,
                    o = l + (e - l) * u,
                    a.push(n + (t + (r - t) * u - n) * u, o + (e + (i - e) * u - o) * u);
                return this.dirty = this.boundsDirty = !0,
                this
            }
            ,
            i.prototype.bezierCurveTo = function(t, e, r, i, n, o) {
                this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
                for (var s, a, h, l, u, c = 20, p = this.currentPath.shape.points, d = p[p.length - 2], f = p[p.length - 1], v = 0, g = 1; c >= g; ++g)
                    v = g / c,
                    s = 1 - v,
                    a = s * s,
                    h = a * s,
                    l = v * v,
                    u = l * v,
                    p.push(h * d + 3 * a * v * t + 3 * s * l * r + u * n, h * f + 3 * a * v * e + 3 * s * l * i + u * o);
                return this.dirty = this.boundsDirty = !0,
                this
            }
            ,
            i.prototype.arcTo = function(t, e, r, i, n) {
                this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(t, e) : this.moveTo(t, e);
                var o = this.currentPath.shape.points
                  , s = o[o.length - 2]
                  , a = o[o.length - 1]
                  , h = a - e
                  , l = s - t
                  , u = i - e
                  , c = r - t
                  , p = Math.abs(h * c - l * u);
                if (1e-8 > p || 0 === n)
                    (o[o.length - 2] !== t || o[o.length - 1] !== e) && o.push(t, e);
                else {
                    var d = h * h + l * l
                      , f = u * u + c * c
                      , v = h * u + l * c
                      , g = n * Math.sqrt(d) / p
                      , m = n * Math.sqrt(f) / p
                      , y = g * v / d
                      , x = m * v / f
                      , b = g * c + m * l
                      , _ = g * u + m * h
                      , T = l * (m + y)
                      , E = h * (m + y)
                      , S = c * (g + x)
                      , A = u * (g + x)
                      , w = Math.atan2(E - _, T - b)
                      , C = Math.atan2(A - _, S - b);
                    this.arc(b + t, _ + e, n, w, C, l * u > c * h)
                }
                return this.dirty = this.boundsDirty = !0,
                this
            }
            ,
            i.prototype.arc = function(t, e, r, i, n, o) {
                if (o = o || !1,
                i === n)
                    return this;
                !o && i >= n ? n += 2 * Math.PI : o && n >= i && (i += 2 * Math.PI);
                var s = o ? -1 * (i - n) : n - i
                  , a = 40 * Math.ceil(Math.abs(s) / (2 * Math.PI));
                if (0 === s)
                    return this;
                var h = t + Math.cos(i) * r
                  , l = e + Math.sin(i) * r;
                this.currentPath ? o && this.filling ? this.currentPath.shape.points.push(t, e) : this.currentPath.shape.points.push(h, l) : o && this.filling ? this.moveTo(t, e) : this.moveTo(h, l);
                for (var u = this.currentPath.shape.points, c = s / (2 * a), p = 2 * c, d = Math.cos(c), f = Math.sin(c), v = a - 1, g = v % 1 / v, m = 0; v >= m; m++) {
                    var y = m + g * m
                      , x = c + i + p * y
                      , b = Math.cos(x)
                      , _ = -Math.sin(x);
                    u.push((d * b + f * _) * r + t, (d * -_ + f * b) * r + e)
                }
                return this.dirty = this.boundsDirty = !0,
                this
            }
            ,
            i.prototype.beginFill = function(t, e) {
                return this.filling = !0,
                this.fillColor = t || 0,
                this.fillAlpha = void 0 === e ? 1 : e,
                this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling,
                this.currentPath.fillColor = this.fillColor,
                this.currentPath.fillAlpha = this.fillAlpha),
                this
            }
            ,
            i.prototype.endFill = function() {
                return this.filling = !1,
                this.fillColor = null,
                this.fillAlpha = 1,
                this
            }
            ,
            i.prototype.drawRect = function(t, e, r, i) {
                return this.drawShape(new l.Rectangle(t,e,r,i)),
                this
            }
            ,
            i.prototype.drawRoundedRect = function(t, e, r, i, n) {
                return this.drawShape(new l.RoundedRectangle(t,e,r,i,n)),
                this
            }
            ,
            i.prototype.drawCircle = function(t, e, r) {
                return this.drawShape(new l.Circle(t,e,r)),
                this
            }
            ,
            i.prototype.drawEllipse = function(t, e, r, i) {
                return this.drawShape(new l.Ellipse(t,e,r,i)),
                this
            }
            ,
            i.prototype.drawPolygon = function(t) {
                var e = t;
                if (!Array.isArray(e)) {
                    e = new Array(arguments.length);
                    for (var r = 0; r < e.length; ++r)
                        e[r] = arguments[r]
                }
                return this.drawShape(new l.Polygon(e)),
                this
            }
            ,
            i.prototype.clear = function() {
                return this.lineWidth = 0,
                this.filling = !1,
                this.dirty = !0,
                this.clearDirty = !0,
                this.graphicsData = [],
                this
            }
            ,
            i.prototype.generateTexture = function(t, e, r) {
                e = e || 1;
                var i = this.getLocalBounds()
                  , n = new s(i.width * e,i.height * e)
                  , h = o.fromCanvas(n.canvas, r);
                return h.baseTexture.resolution = e,
                n.context.scale(e, e),
                n.context.translate(-i.x, -i.y),
                a.renderGraphics(this, n.context),
                h
            }
            ,
            i.prototype._renderWebGL = function(t) {
                this.glDirty && (this.dirty = !0,
                this.glDirty = !1),
                t.setObjectRenderer(t.plugins.graphics),
                t.plugins.graphics.render(this)
            }
            ,
            i.prototype._renderCanvas = function(t) {
                if (this.isMask !== !0) {
                    this._prevTint !== this.tint && (this.dirty = !0,
                    this._prevTint = this.tint);
                    var e = t.context
                      , r = this.worldTransform;
                    this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode,
                    e.globalCompositeOperation = t.blendModes[t.currentBlendMode]);
                    var i = t.resolution;
                    e.setTransform(r.a * i, r.b * i, r.c * i, r.d * i, r.tx * i, r.ty * i),
                    a.renderGraphics(this, e)
                }
            }
            ,
            i.prototype.getBounds = function(t) {
                if (!this._currentBounds) {
                    if (!this.renderable)
                        return l.Rectangle.EMPTY;
                    this.boundsDirty && (this.updateLocalBounds(),
                    this.glDirty = !0,
                    this.cachedSpriteDirty = !0,
                    this.boundsDirty = !1);
                    var e = this._localBounds
                      , r = e.x
                      , i = e.width + e.x
                      , n = e.y
                      , o = e.height + e.y
                      , s = t || this.worldTransform
                      , a = s.a
                      , h = s.b
                      , u = s.c
                      , c = s.d
                      , p = s.tx
                      , d = s.ty
                      , f = a * i + u * o + p
                      , v = c * o + h * i + d
                      , g = a * r + u * o + p
                      , m = c * o + h * r + d
                      , y = a * r + u * n + p
                      , x = c * n + h * r + d
                      , b = a * i + u * n + p
                      , _ = c * n + h * i + d
                      , T = f
                      , E = v
                      , S = f
                      , A = v;
                    S = S > g ? g : S,
                    S = S > y ? y : S,
                    S = S > b ? b : S,
                    A = A > m ? m : A,
                    A = A > x ? x : A,
                    A = A > _ ? _ : A,
                    T = g > T ? g : T,
                    T = y > T ? y : T,
                    T = b > T ? b : T,
                    E = m > E ? m : E,
                    E = x > E ? x : E,
                    E = _ > E ? _ : E,
                    this._bounds.x = S,
                    this._bounds.width = T - S,
                    this._bounds.y = A,
                    this._bounds.height = E - A,
                    this._currentBounds = this._bounds
                }
                return this._currentBounds
            }
            ,
            i.prototype.containsPoint = function(t) {
                this.worldTransform.applyInverse(t, c);
                for (var e = this.graphicsData, r = 0; r < e.length; r++) {
                    var i = e[r];
                    if (i.fill && i.shape && i.shape.contains(c.x, c.y))
                        return !0
                }
                return !1
            }
            ,
            i.prototype.updateLocalBounds = function() {
                var t = 1 / 0
                  , e = -(1 / 0)
                  , r = 1 / 0
                  , i = -(1 / 0);
                if (this.graphicsData.length)
                    for (var n, o, s, a, h, l, c = 0; c < this.graphicsData.length; c++) {
                        var p = this.graphicsData[c]
                          , d = p.type
                          , f = p.lineWidth;
                        if (n = p.shape,
                        d === u.SHAPES.RECT || d === u.SHAPES.RREC)
                            s = n.x - f / 2,
                            a = n.y - f / 2,
                            h = n.width + f,
                            l = n.height + f,
                            t = t > s ? s : t,
                            e = s + h > e ? s + h : e,
                            r = r > a ? a : r,
                            i = a + l > i ? a + l : i;
                        else if (d === u.SHAPES.CIRC)
                            s = n.x,
                            a = n.y,
                            h = n.radius + f / 2,
                            l = n.radius + f / 2,
                            t = t > s - h ? s - h : t,
                            e = s + h > e ? s + h : e,
                            r = r > a - l ? a - l : r,
                            i = a + l > i ? a + l : i;
                        else if (d === u.SHAPES.ELIP)
                            s = n.x,
                            a = n.y,
                            h = n.width + f / 2,
                            l = n.height + f / 2,
                            t = t > s - h ? s - h : t,
                            e = s + h > e ? s + h : e,
                            r = r > a - l ? a - l : r,
                            i = a + l > i ? a + l : i;
                        else {
                            o = n.points;
                            for (var v = 0; v < o.length; v += 2)
                                s = o[v],
                                a = o[v + 1],
                                t = t > s - f ? s - f : t,
                                e = s + f > e ? s + f : e,
                                r = r > a - f ? a - f : r,
                                i = a + f > i ? a + f : i
                        }
                    }
                else
                    t = 0,
                    e = 0,
                    r = 0,
                    i = 0;
                var g = this.boundsPadding;
                this._localBounds.x = t - g,
                this._localBounds.width = e - t + 2 * g,
                this._localBounds.y = r - g,
                this._localBounds.height = i - r + 2 * g
            }
            ,
            i.prototype.drawShape = function(t) {
                this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(),
                this.currentPath = null;
                var e = new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);
                return this.graphicsData.push(e),
                e.type === u.SHAPES.POLY && (e.shape.closed = e.shape.closed || this.filling,
                this.currentPath = e),
                this.dirty = this.boundsDirty = !0,
                e
            }
            ,
            i.prototype.destroy = function() {
                n.prototype.destroy.apply(this, arguments);
                for (var t = 0; t < this.graphicsData.length; ++t)
                    this.graphicsData[t].destroy();
                for (var e in this._webgl)
                    for (var r = 0; r < this._webgl[e].data.length; ++r)
                        this._webgl[e].data[r].destroy();
                this.graphicsData = null,
                this.currentPath = null,
                this._webgl = null,
                this._localBounds = null
            }
        }
        , {
            "../const": 22,
            "../display/Container": 23,
            "../math": 32,
            "../renderers/canvas/utils/CanvasBuffer": 44,
            "../renderers/canvas/utils/CanvasGraphics": 45,
            "../textures/Texture": 71,
            "./GraphicsData": 26
        }],
        26: [function(t, e, r) {
            function i(t, e, r, i, n, o, s) {
                this.lineWidth = t,
                this.lineColor = e,
                this.lineAlpha = r,
                this._lineTint = e,
                this.fillColor = i,
                this.fillAlpha = n,
                this._fillTint = i,
                this.fill = o,
                this.shape = s,
                this.type = s.type
            }
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.clone = function() {
                return new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)
            }
            ,
            i.prototype.destroy = function() {
                this.shape = null
            }
        }
        , {}],
        27: [function(t, e, r) {
            function i(t) {
                a.call(this, t),
                this.graphicsDataPool = [],
                this.primitiveShader = null,
                this.complexPrimitiveShader = null,
                this.maximumSimplePolySize = 200
            }
            var n = t("../../utils")
              , o = t("../../math")
              , s = t("../../const")
              , a = t("../../renderers/webgl/utils/ObjectRenderer")
              , h = t("../../renderers/webgl/WebGLRenderer")
              , l = t("./WebGLGraphicsData")
              , u = t("earcut");
            i.prototype = Object.create(a.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            h.registerPlugin("graphics", i),
            i.prototype.onContextChange = function() {}
            ,
            i.prototype.destroy = function() {
                a.prototype.destroy.call(this);
                for (var t = 0; t < this.graphicsDataPool.length; ++t)
                    this.graphicsDataPool[t].destroy();
                this.graphicsDataPool = null
            }
            ,
            i.prototype.render = function(t) {
                var e, r = this.renderer, i = r.gl, o = r.shaderManager.plugins.primitiveShader;
                t.dirty && this.updateGraphics(t, i);
                var s = t._webGL[i.id];
                r.blendModeManager.setBlendMode(t.blendMode);
                for (var a = 0; a < s.data.length; a++)
                    1 === s.data[a].mode ? (e = s.data[a],
                    r.stencilManager.pushStencil(t, e, r),
                    i.uniform1f(r.shaderManager.complexPrimitiveShader.uniforms.alpha._location, t.worldAlpha * e.alpha),
                    i.drawElements(i.TRIANGLE_FAN, 4, i.UNSIGNED_SHORT, 2 * (e.indices.length - 4)),
                    r.stencilManager.popStencil(t, e, r)) : (e = s.data[a],
                    o = r.shaderManager.primitiveShader,
                    r.shaderManager.setShader(o),
                    i.uniformMatrix3fv(o.uniforms.translationMatrix._location, !1, t.worldTransform.toArray(!0)),
                    i.uniformMatrix3fv(o.uniforms.projectionMatrix._location, !1, r.currentRenderTarget.projectionMatrix.toArray(!0)),
                    i.uniform3fv(o.uniforms.tint._location, n.hex2rgb(t.tint)),
                    i.uniform1f(o.uniforms.alpha._location, t.worldAlpha),
                    i.bindBuffer(i.ARRAY_BUFFER, e.buffer),
                    i.vertexAttribPointer(o.attributes.aVertexPosition, 2, i.FLOAT, !1, 24, 0),
                    i.vertexAttribPointer(o.attributes.aColor, 4, i.FLOAT, !1, 24, 8),
                    i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, e.indexBuffer),
                    i.drawElements(i.TRIANGLE_STRIP, e.indices.length, i.UNSIGNED_SHORT, 0))
            }
            ,
            i.prototype.updateGraphics = function(t) {
                var e = this.renderer.gl
                  , r = t._webGL[e.id];
                r || (r = t._webGL[e.id] = {
                    lastIndex: 0,
                    data: [],
                    gl: e
                }),
                t.dirty = !1;
                var i;
                if (t.clearDirty) {
                    for (t.clearDirty = !1,
                    i = 0; i < r.data.length; i++) {
                        var n = r.data[i];
                        n.reset(),
                        this.graphicsDataPool.push(n)
                    }
                    r.data = [],
                    r.lastIndex = 0
                }
                var o;
                for (i = r.lastIndex; i < t.graphicsData.length; i++) {
                    var a = t.graphicsData[i];
                    if (a.type === s.SHAPES.POLY) {
                        if (a.points = a.shape.points.slice(),
                        a.shape.closed && (a.points[0] !== a.points[a.points.length - 2] || a.points[1] !== a.points[a.points.length - 1]) && a.points.push(a.points[0], a.points[1]),
                        a.fill && a.points.length >= 6)
                            if (a.points.length < 2 * this.maximumSimplePolySize) {
                                o = this.switchMode(r, 0);
                                var h = this.buildPoly(a, o);
                                h || (o = this.switchMode(r, 1),
                                this.buildComplexPoly(a, o))
                            } else
                                o = this.switchMode(r, 1),
                                this.buildComplexPoly(a, o);
                        a.lineWidth > 0 && (o = this.switchMode(r, 0),
                        this.buildLine(a, o))
                    } else
                        o = this.switchMode(r, 0),
                        a.type === s.SHAPES.RECT ? this.buildRectangle(a, o) : a.type === s.SHAPES.CIRC || a.type === s.SHAPES.ELIP ? this.buildCircle(a, o) : a.type === s.SHAPES.RREC && this.buildRoundedRectangle(a, o);
                    r.lastIndex++
                }
                for (i = 0; i < r.data.length; i++)
                    o = r.data[i],
                    o.dirty && o.upload()
            }
            ,
            i.prototype.switchMode = function(t, e) {
                var r;
                return t.data.length ? (r = t.data[t.data.length - 1],
                (r.points.length > 32e4 || r.mode !== e || 1 === e) && (r = this.graphicsDataPool.pop() || new l(t.gl),
                r.mode = e,
                t.data.push(r))) : (r = this.graphicsDataPool.pop() || new l(t.gl),
                r.mode = e,
                t.data.push(r)),
                r.dirty = !0,
                r
            }
            ,
            i.prototype.buildRectangle = function(t, e) {
                var r = t.shape
                  , i = r.x
                  , o = r.y
                  , s = r.width
                  , a = r.height;
                if (t.fill) {
                    var h = n.hex2rgb(t.fillColor)
                      , l = t.fillAlpha
                      , u = h[0] * l
                      , c = h[1] * l
                      , p = h[2] * l
                      , d = e.points
                      , f = e.indices
                      , v = d.length / 6;
                    d.push(i, o),
                    d.push(u, c, p, l),
                    d.push(i + s, o),
                    d.push(u, c, p, l),
                    d.push(i, o + a),
                    d.push(u, c, p, l),
                    d.push(i + s, o + a),
                    d.push(u, c, p, l),
                    f.push(v, v, v + 1, v + 2, v + 3, v + 3)
                }
                if (t.lineWidth) {
                    var g = t.points;
                    t.points = [i, o, i + s, o, i + s, o + a, i, o + a, i, o],
                    this.buildLine(t, e),
                    t.points = g
                }
            }
            ,
            i.prototype.buildRoundedRectangle = function(t, e) {
                var r = t.shape
                  , i = r.x
                  , o = r.y
                  , s = r.width
                  , a = r.height
                  , h = r.radius
                  , l = [];
                if (l.push(i, o + h),
                this.quadraticBezierCurve(i, o + a - h, i, o + a, i + h, o + a, l),
                this.quadraticBezierCurve(i + s - h, o + a, i + s, o + a, i + s, o + a - h, l),
                this.quadraticBezierCurve(i + s, o + h, i + s, o, i + s - h, o, l),
                this.quadraticBezierCurve(i + h, o, i, o, i, o + h + 1e-10, l),
                t.fill) {
                    var c = n.hex2rgb(t.fillColor)
                      , p = t.fillAlpha
                      , d = c[0] * p
                      , f = c[1] * p
                      , v = c[2] * p
                      , g = e.points
                      , m = e.indices
                      , y = g.length / 6
                      , x = u(l, null, 2)
                      , b = 0;
                    for (b = 0; b < x.length; b += 3)
                        m.push(x[b] + y),
                        m.push(x[b] + y),
                        m.push(x[b + 1] + y),
                        m.push(x[b + 2] + y),
                        m.push(x[b + 2] + y);
                    for (b = 0; b < l.length; b++)
                        g.push(l[b], l[++b], d, f, v, p)
                }
                if (t.lineWidth) {
                    var _ = t.points;
                    t.points = l,
                    this.buildLine(t, e),
                    t.points = _
                }
            }
            ,
            i.prototype.quadraticBezierCurve = function(t, e, r, i, n, o, s) {
                function a(t, e, r) {
                    var i = e - t;
                    return t + i * r
                }
                for (var h, l, u, c, p, d, f = 20, v = s || [], g = 0, m = 0; f >= m; m++)
                    g = m / f,
                    h = a(t, r, g),
                    l = a(e, i, g),
                    u = a(r, n, g),
                    c = a(i, o, g),
                    p = a(h, u, g),
                    d = a(l, c, g),
                    v.push(p, d);
                return v
            }
            ,
            i.prototype.buildCircle = function(t, e) {
                var r, i, o = t.shape, a = o.x, h = o.y;
                t.type === s.SHAPES.CIRC ? (r = o.radius,
                i = o.radius) : (r = o.width,
                i = o.height);
                var l = 40
                  , u = 2 * Math.PI / l
                  , c = 0;
                if (t.fill) {
                    var p = n.hex2rgb(t.fillColor)
                      , d = t.fillAlpha
                      , f = p[0] * d
                      , v = p[1] * d
                      , g = p[2] * d
                      , m = e.points
                      , y = e.indices
                      , x = m.length / 6;
                    for (y.push(x),
                    c = 0; l + 1 > c; c++)
                        m.push(a, h, f, v, g, d),
                        m.push(a + Math.sin(u * c) * r, h + Math.cos(u * c) * i, f, v, g, d),
                        y.push(x++, x++);
                    y.push(x - 1)
                }
                if (t.lineWidth) {
                    var b = t.points;
                    for (t.points = [],
                    c = 0; l + 1 > c; c++)
                        t.points.push(a + Math.sin(u * c) * r, h + Math.cos(u * c) * i);
                    this.buildLine(t, e),
                    t.points = b
                }
            }
            ,
            i.prototype.buildLine = function(t, e) {
                var r = 0
                  , i = t.points;
                if (0 !== i.length) {
                    if (t.lineWidth % 2)
                        for (r = 0; r < i.length; r++)
                            i[r] += .5;
                    var s = new o.Point(i[0],i[1])
                      , a = new o.Point(i[i.length - 2],i[i.length - 1]);
                    if (s.x === a.x && s.y === a.y) {
                        i = i.slice(),
                        i.pop(),
                        i.pop(),
                        a = new o.Point(i[i.length - 2],i[i.length - 1]);
                        var h = a.x + .5 * (s.x - a.x)
                          , l = a.y + .5 * (s.y - a.y);
                        i.unshift(h, l),
                        i.push(h, l)
                    }
                    var u, c, p, d, f, v, g, m, y, x, b, _, T, E, S, A, w, C, M, R, D, F, P, O = e.points, B = e.indices, L = i.length / 2, I = i.length, N = O.length / 6, U = t.lineWidth / 2, k = n.hex2rgb(t.lineColor), j = t.lineAlpha, X = k[0] * j, G = k[1] * j, Y = k[2] * j;
                    for (p = i[0],
                    d = i[1],
                    f = i[2],
                    v = i[3],
                    y = -(d - v),
                    x = p - f,
                    P = Math.sqrt(y * y + x * x),
                    y /= P,
                    x /= P,
                    y *= U,
                    x *= U,
                    O.push(p - y, d - x, X, G, Y, j),
                    O.push(p + y, d + x, X, G, Y, j),
                    r = 1; L - 1 > r; r++)
                        p = i[2 * (r - 1)],
                        d = i[2 * (r - 1) + 1],
                        f = i[2 * r],
                        v = i[2 * r + 1],
                        g = i[2 * (r + 1)],
                        m = i[2 * (r + 1) + 1],
                        y = -(d - v),
                        x = p - f,
                        P = Math.sqrt(y * y + x * x),
                        y /= P,
                        x /= P,
                        y *= U,
                        x *= U,
                        b = -(v - m),
                        _ = f - g,
                        P = Math.sqrt(b * b + _ * _),
                        b /= P,
                        _ /= P,
                        b *= U,
                        _ *= U,
                        S = -x + d - (-x + v),
                        A = -y + f - (-y + p),
                        w = (-y + p) * (-x + v) - (-y + f) * (-x + d),
                        C = -_ + m - (-_ + v),
                        M = -b + f - (-b + g),
                        R = (-b + g) * (-_ + v) - (-b + f) * (-_ + m),
                        D = S * M - C * A,
                        Math.abs(D) < .1 ? (D += 10.1,
                        O.push(f - y, v - x, X, G, Y, j),
                        O.push(f + y, v + x, X, G, Y, j)) : (u = (A * R - M * w) / D,
                        c = (C * w - S * R) / D,
                        F = (u - f) * (u - f) + (c - v) + (c - v),
                        F > 19600 ? (T = y - b,
                        E = x - _,
                        P = Math.sqrt(T * T + E * E),
                        T /= P,
                        E /= P,
                        T *= U,
                        E *= U,
                        O.push(f - T, v - E),
                        O.push(X, G, Y, j),
                        O.push(f + T, v + E),
                        O.push(X, G, Y, j),
                        O.push(f - T, v - E),
                        O.push(X, G, Y, j),
                        I++) : (O.push(u, c),
                        O.push(X, G, Y, j),
                        O.push(f - (u - f), v - (c - v)),
                        O.push(X, G, Y, j)));
                    for (p = i[2 * (L - 2)],
                    d = i[2 * (L - 2) + 1],
                    f = i[2 * (L - 1)],
                    v = i[2 * (L - 1) + 1],
                    y = -(d - v),
                    x = p - f,
                    P = Math.sqrt(y * y + x * x),
                    y /= P,
                    x /= P,
                    y *= U,
                    x *= U,
                    O.push(f - y, v - x),
                    O.push(X, G, Y, j),
                    O.push(f + y, v + x),
                    O.push(X, G, Y, j),
                    B.push(N),
                    r = 0; I > r; r++)
                        B.push(N++);
                    B.push(N - 1)
                }
            }
            ,
            i.prototype.buildComplexPoly = function(t, e) {
                var r = t.points.slice();
                if (!(r.length < 6)) {
                    var i = e.indices;
                    e.points = r,
                    e.alpha = t.fillAlpha,
                    e.color = n.hex2rgb(t.fillColor);
                    for (var o, s, a = 1 / 0, h = -(1 / 0), l = 1 / 0, u = -(1 / 0), c = 0; c < r.length; c += 2)
                        o = r[c],
                        s = r[c + 1],
                        a = a > o ? o : a,
                        h = o > h ? o : h,
                        l = l > s ? s : l,
                        u = s > u ? s : u;
                    r.push(a, l, h, l, h, u, a, u);
                    var p = r.length / 2;
                    for (c = 0; p > c; c++)
                        i.push(c)
                }
            }
            ,
            i.prototype.buildPoly = function(t, e) {
                var r = t.points;
                if (!(r.length < 6)) {
                    var i = e.points
                      , o = e.indices
                      , s = r.length / 2
                      , a = n.hex2rgb(t.fillColor)
                      , h = t.fillAlpha
                      , l = a[0] * h
                      , c = a[1] * h
                      , p = a[2] * h
                      , d = u(r, null, 2);
                    if (!d)
                        return !1;
                    var f = i.length / 6
                      , v = 0;
                    for (v = 0; v < d.length; v += 3)
                        o.push(d[v] + f),
                        o.push(d[v] + f),
                        o.push(d[v + 1] + f),
                        o.push(d[v + 2] + f),
                        o.push(d[v + 2] + f);
                    for (v = 0; s > v; v++)
                        i.push(r[2 * v], r[2 * v + 1], l, c, p, h);
                    return !0
                }
            }
        }
        , {
            "../../const": 22,
            "../../math": 32,
            "../../renderers/webgl/WebGLRenderer": 48,
            "../../renderers/webgl/utils/ObjectRenderer": 62,
            "../../utils": 76,
            "./WebGLGraphicsData": 28,
            earcut: 10
        }],
        28: [function(t, e, r) {
            function i(t) {
                this.gl = t,
                this.color = [0, 0, 0],
                this.points = [],
                this.indices = [],
                this.buffer = t.createBuffer(),
                this.indexBuffer = t.createBuffer(),
                this.mode = 1,
                this.alpha = 1,
                this.dirty = !0,
                this.glPoints = null,
                this.glIndices = null
            }
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.reset = function() {
                this.points.length = 0,
                this.indices.length = 0
            }
            ,
            i.prototype.upload = function() {
                var t = this.gl;
                this.glPoints = new Float32Array(this.points),
                t.bindBuffer(t.ARRAY_BUFFER, this.buffer),
                t.bufferData(t.ARRAY_BUFFER, this.glPoints, t.STATIC_DRAW),
                this.glIndices = new Uint16Array(this.indices),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.glIndices, t.STATIC_DRAW),
                this.dirty = !1
            }
            ,
            i.prototype.destroy = function() {
                this.color = null,
                this.points = null,
                this.indices = null,
                this.gl.deleteBuffer(this.buffer),
                this.gl.deleteBuffer(this.indexBuffer),
                this.gl = null,
                this.buffer = null,
                this.indexBuffer = null,
                this.glPoints = null,
                this.glIndices = null
            }
        }
        , {}],
        29: [function(t, e, r) {
            var i = e.exports = Object.assign(t("./const"), t("./math"), {
                utils: t("./utils"),
                ticker: t("./ticker"),
                DisplayObject: t("./display/DisplayObject"),
                Container: t("./display/Container"),
                Sprite: t("./sprites/Sprite"),
                ParticleContainer: t("./particles/ParticleContainer"),
                SpriteRenderer: t("./sprites/webgl/SpriteRenderer"),
                ParticleRenderer: t("./particles/webgl/ParticleRenderer"),
                Text: t("./text/Text"),
                Graphics: t("./graphics/Graphics"),
                GraphicsData: t("./graphics/GraphicsData"),
                GraphicsRenderer: t("./graphics/webgl/GraphicsRenderer"),
                Texture: t("./textures/Texture"),
                BaseTexture: t("./textures/BaseTexture"),
                RenderTexture: t("./textures/RenderTexture"),
                VideoBaseTexture: t("./textures/VideoBaseTexture"),
                TextureUvs: t("./textures/TextureUvs"),
                CanvasRenderer: t("./renderers/canvas/CanvasRenderer"),
                CanvasGraphics: t("./renderers/canvas/utils/CanvasGraphics"),
                CanvasBuffer: t("./renderers/canvas/utils/CanvasBuffer"),
                WebGLRenderer: t("./renderers/webgl/WebGLRenderer"),
                ShaderManager: t("./renderers/webgl/managers/ShaderManager"),
                Shader: t("./renderers/webgl/shaders/Shader"),
                ObjectRenderer: t("./renderers/webgl/utils/ObjectRenderer"),
                RenderTarget: t("./renderers/webgl/utils/RenderTarget"),
                AbstractFilter: t("./renderers/webgl/filters/AbstractFilter"),
                FXAAFilter: t("./renderers/webgl/filters/FXAAFilter"),
                SpriteMaskFilter: t("./renderers/webgl/filters/SpriteMaskFilter"),
                autoDetectRenderer: function(t, e, r, n) {
                    return t = t || 800,
                    e = e || 600,
                    !n && i.utils.isWebGLSupported() ? new i.WebGLRenderer(t,e,r) : new i.CanvasRenderer(t,e,r)
                }
            })
        }
        , {
            "./const": 22,
            "./display/Container": 23,
            "./display/DisplayObject": 24,
            "./graphics/Graphics": 25,
            "./graphics/GraphicsData": 26,
            "./graphics/webgl/GraphicsRenderer": 27,
            "./math": 32,
            "./particles/ParticleContainer": 38,
            "./particles/webgl/ParticleRenderer": 40,
            "./renderers/canvas/CanvasRenderer": 43,
            "./renderers/canvas/utils/CanvasBuffer": 44,
            "./renderers/canvas/utils/CanvasGraphics": 45,
            "./renderers/webgl/WebGLRenderer": 48,
            "./renderers/webgl/filters/AbstractFilter": 49,
            "./renderers/webgl/filters/FXAAFilter": 50,
            "./renderers/webgl/filters/SpriteMaskFilter": 51,
            "./renderers/webgl/managers/ShaderManager": 55,
            "./renderers/webgl/shaders/Shader": 60,
            "./renderers/webgl/utils/ObjectRenderer": 62,
            "./renderers/webgl/utils/RenderTarget": 64,
            "./sprites/Sprite": 66,
            "./sprites/webgl/SpriteRenderer": 67,
            "./text/Text": 68,
            "./textures/BaseTexture": 69,
            "./textures/RenderTexture": 70,
            "./textures/Texture": 71,
            "./textures/TextureUvs": 72,
            "./textures/VideoBaseTexture": 73,
            "./ticker": 75,
            "./utils": 76
        }],
        30: [function(t, e, r) {
            function i() {
                this.a = 1,
                this.b = 0,
                this.c = 0,
                this.d = 1,
                this.tx = 0,
                this.ty = 0
            }
            var n = t("./Point");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.fromArray = function(t) {
                this.a = t[0],
                this.b = t[1],
                this.c = t[3],
                this.d = t[4],
                this.tx = t[2],
                this.ty = t[5]
            }
            ,
            i.prototype.toArray = function(t, e) {
                this.array || (this.array = new Float32Array(9));
                var r = e || this.array;
                return t ? (r[0] = this.a,
                r[1] = this.b,
                r[2] = 0,
                r[3] = this.c,
                r[4] = this.d,
                r[5] = 0,
                r[6] = this.tx,
                r[7] = this.ty,
                r[8] = 1) : (r[0] = this.a,
                r[1] = this.c,
                r[2] = this.tx,
                r[3] = this.b,
                r[4] = this.d,
                r[5] = this.ty,
                r[6] = 0,
                r[7] = 0,
                r[8] = 1),
                r
            }
            ,
            i.prototype.apply = function(t, e) {
                e = e || new n;
                var r = t.x
                  , i = t.y;
                return e.x = this.a * r + this.c * i + this.tx,
                e.y = this.b * r + this.d * i + this.ty,
                e
            }
            ,
            i.prototype.applyInverse = function(t, e) {
                e = e || new n;
                var r = 1 / (this.a * this.d + this.c * -this.b)
                  , i = t.x
                  , o = t.y;
                return e.x = this.d * r * i + -this.c * r * o + (this.ty * this.c - this.tx * this.d) * r,
                e.y = this.a * r * o + -this.b * r * i + (-this.ty * this.a + this.tx * this.b) * r,
                e
            }
            ,
            i.prototype.translate = function(t, e) {
                return this.tx += t,
                this.ty += e,
                this
            }
            ,
            i.prototype.scale = function(t, e) {
                return this.a *= t,
                this.d *= e,
                this.c *= t,
                this.b *= e,
                this.tx *= t,
                this.ty *= e,
                this
            }
            ,
            i.prototype.rotate = function(t) {
                var e = Math.cos(t)
                  , r = Math.sin(t)
                  , i = this.a
                  , n = this.c
                  , o = this.tx;
                return this.a = i * e - this.b * r,
                this.b = i * r + this.b * e,
                this.c = n * e - this.d * r,
                this.d = n * r + this.d * e,
                this.tx = o * e - this.ty * r,
                this.ty = o * r + this.ty * e,
                this
            }
            ,
            i.prototype.append = function(t) {
                var e = this.a
                  , r = this.b
                  , i = this.c
                  , n = this.d;
                return this.a = t.a * e + t.b * i,
                this.b = t.a * r + t.b * n,
                this.c = t.c * e + t.d * i,
                this.d = t.c * r + t.d * n,
                this.tx = t.tx * e + t.ty * i + this.tx,
                this.ty = t.tx * r + t.ty * n + this.ty,
                this
            }
            ,
            i.prototype.prepend = function(t) {
                var e = this.tx;
                if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) {
                    var r = this.a
                      , i = this.c;
                    this.a = r * t.a + this.b * t.c,
                    this.b = r * t.b + this.b * t.d,
                    this.c = i * t.a + this.d * t.c,
                    this.d = i * t.b + this.d * t.d
                }
                return this.tx = e * t.a + this.ty * t.c + t.tx,
                this.ty = e * t.b + this.ty * t.d + t.ty,
                this
            }
            ,
            i.prototype.invert = function() {
                var t = this.a
                  , e = this.b
                  , r = this.c
                  , i = this.d
                  , n = this.tx
                  , o = t * i - e * r;
                return this.a = i / o,
                this.b = -e / o,
                this.c = -r / o,
                this.d = t / o,
                this.tx = (r * this.ty - i * n) / o,
                this.ty = -(t * this.ty - e * n) / o,
                this
            }
            ,
            i.prototype.identity = function() {
                return this.a = 1,
                this.b = 0,
                this.c = 0,
                this.d = 1,
                this.tx = 0,
                this.ty = 0,
                this
            }
            ,
            i.prototype.clone = function() {
                var t = new i;
                return t.a = this.a,
                t.b = this.b,
                t.c = this.c,
                t.d = this.d,
                t.tx = this.tx,
                t.ty = this.ty,
                t
            }
            ,
            i.prototype.copy = function(t) {
                return t.a = this.a,
                t.b = this.b,
                t.c = this.c,
                t.d = this.d,
                t.tx = this.tx,
                t.ty = this.ty,
                t
            }
            ,
            i.IDENTITY = new i,
            i.TEMP_MATRIX = new i
        }
        , {
            "./Point": 31
        }],
        31: [function(t, e, r) {
            function i(t, e) {
                this.x = t || 0,
                this.y = e || 0
            }
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.clone = function() {
                return new i(this.x,this.y)
            }
            ,
            i.prototype.copy = function(t) {
                this.set(t.x, t.y)
            }
            ,
            i.prototype.equals = function(t) {
                return t.x === this.x && t.y === this.y
            }
            ,
            i.prototype.set = function(t, e) {
                this.x = t || 0,
                this.y = e || (0 !== e ? this.x : 0)
            }
        }
        , {}],
        32: [function(t, e, r) {
            e.exports = {
                Point: t("./Point"),
                Matrix: t("./Matrix"),
                Circle: t("./shapes/Circle"),
                Ellipse: t("./shapes/Ellipse"),
                Polygon: t("./shapes/Polygon"),
                Rectangle: t("./shapes/Rectangle"),
                RoundedRectangle: t("./shapes/RoundedRectangle")
            }
        }
        , {
            "./Matrix": 30,
            "./Point": 31,
            "./shapes/Circle": 33,
            "./shapes/Ellipse": 34,
            "./shapes/Polygon": 35,
            "./shapes/Rectangle": 36,
            "./shapes/RoundedRectangle": 37
        }],
        33: [function(t, e, r) {
            function i(t, e, r) {
                this.x = t || 0,
                this.y = e || 0,
                this.radius = r || 0,
                this.type = o.SHAPES.CIRC
            }
            var n = t("./Rectangle")
              , o = t("../../const");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.clone = function() {
                return new i(this.x,this.y,this.radius)
            }
            ,
            i.prototype.contains = function(t, e) {
                if (this.radius <= 0)
                    return !1;
                var r = this.x - t
                  , i = this.y - e
                  , n = this.radius * this.radius;
                return r *= r,
                i *= i,
                n >= r + i
            }
            ,
            i.prototype.getBounds = function() {
                return new n(this.x - this.radius,this.y - this.radius,2 * this.radius,2 * this.radius)
            }
        }
        , {
            "../../const": 22,
            "./Rectangle": 36
        }],
        34: [function(t, e, r) {
            function i(t, e, r, i) {
                this.x = t || 0,
                this.y = e || 0,
                this.width = r || 0,
                this.height = i || 0,
                this.type = o.SHAPES.ELIP
            }
            var n = t("./Rectangle")
              , o = t("../../const");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.clone = function() {
                return new i(this.x,this.y,this.width,this.height)
            }
            ,
            i.prototype.contains = function(t, e) {
                if (this.width <= 0 || this.height <= 0)
                    return !1;
                var r = (t - this.x) / this.width
                  , i = (e - this.y) / this.height;
                return r *= r,
                i *= i,
                1 >= r + i
            }
            ,
            i.prototype.getBounds = function() {
                return new n(this.x - this.width,this.y - this.height,this.width,this.height)
            }
        }
        , {
            "../../const": 22,
            "./Rectangle": 36
        }],
        35: [function(t, e, r) {
            function i(t) {
                var e = t;
                if (!Array.isArray(e)) {
                    e = new Array(arguments.length);
                    for (var r = 0; r < e.length; ++r)
                        e[r] = arguments[r]
                }
                if (e[0]instanceof n) {
                    for (var i = [], s = 0, a = e.length; a > s; s++)
                        i.push(e[s].x, e[s].y);
                    e = i
                }
                this.closed = !0,
                this.points = e,
                this.type = o.SHAPES.POLY
            }
            var n = t("../Point")
              , o = t("../../const");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.clone = function() {
                return new i(this.points.slice())
            }
            ,
            i.prototype.contains = function(t, e) {
                for (var r = !1, i = this.points.length / 2, n = 0, o = i - 1; i > n; o = n++) {
                    var s = this.points[2 * n]
                      , a = this.points[2 * n + 1]
                      , h = this.points[2 * o]
                      , l = this.points[2 * o + 1]
                      , u = a > e != l > e && (h - s) * (e - a) / (l - a) + s > t;
                    u && (r = !r)
                }
                return r
            }
        }
        , {
            "../../const": 22,
            "../Point": 31
        }],
        36: [function(t, e, r) {
            function i(t, e, r, i) {
                this.x = t || 0,
                this.y = e || 0,
                this.width = r || 0,
                this.height = i || 0,
                this.type = n.SHAPES.RECT
            }
            var n = t("../../const");
            i.prototype.constructor = i,
            e.exports = i,
            i.EMPTY = new i(0,0,0,0),
            i.prototype.clone = function() {
                return new i(this.x,this.y,this.width,this.height)
            }
            ,
            i.prototype.contains = function(t, e) {
                return this.width <= 0 || this.height <= 0 ? !1 : t >= this.x && t < this.x + this.width && e >= this.y && e < this.y + this.height ? !0 : !1
            }
        }
        , {
            "../../const": 22
        }],
        37: [function(t, e, r) {
            function i(t, e, r, i, o) {
                this.x = t || 0,
                this.y = e || 0,
                this.width = r || 0,
                this.height = i || 0,
                this.radius = o || 20,
                this.type = n.SHAPES.RREC
            }
            var n = t("../../const");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.clone = function() {
                return new i(this.x,this.y,this.width,this.height,this.radius)
            }
            ,
            i.prototype.contains = function(t, e) {
                return this.width <= 0 || this.height <= 0 ? !1 : t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height ? !0 : !1
            }
        }
        , {
            "../../const": 22
        }],
        38: [function(t, e, r) {
            function i(t, e) {
                n.call(this),
                this._properties = [!1, !0, !1, !1, !1],
                this._size = t || 15e3,
                this._buffers = null,
                this._updateStatic = !1,
                this.interactiveChildren = !1,
                this.blendMode = o.BLEND_MODES.NORMAL,
                this.roundPixels = !0,
                this.setProperties(e)
            }
            var n = t("../display/Container")
              , o = t("../const");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.setProperties = function(t) {
                t && (this._properties[0] = "scale"in t ? !!t.scale : this._properties[0],
                this._properties[1] = "position"in t ? !!t.position : this._properties[1],
                this._properties[2] = "rotation"in t ? !!t.rotation : this._properties[2],
                this._properties[3] = "uvs"in t ? !!t.uvs : this._properties[3],
                this._properties[4] = "alpha"in t ? !!t.alpha : this._properties[4])
            }
            ,
            i.prototype.updateTransform = function() {
                this.displayObjectUpdateTransform()
            }
            ,
            i.prototype.renderWebGL = function(t) {
                this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable && (t.setObjectRenderer(t.plugins.particle),
                t.plugins.particle.render(this))
            }
            ,
            i.prototype.addChildAt = function(t, e) {
                if (t === this)
                    return t;
                if (e >= 0 && e <= this.children.length)
                    return t.parent && t.parent.removeChild(t),
                    t.parent = this,
                    this.children.splice(e, 0, t),
                    this._updateStatic = !0,
                    t;
                throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length)
            }
            ,
            i.prototype.removeChildAt = function(t) {
                var e = this.getChildAt(t);
                return e.parent = null,
                this.children.splice(t, 1),
                this._updateStatic = !0,
                e
            }
            ,
            i.prototype.renderCanvas = function(t) {
                if (this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable) {
                    var e = t.context
                      , r = this.worldTransform
                      , i = !0
                      , n = 0
                      , o = 0
                      , s = 0
                      , a = 0;
                    e.globalAlpha = this.worldAlpha,
                    this.displayObjectUpdateTransform();
                    for (var h = 0; h < this.children.length; ++h) {
                        var l = this.children[h];
                        if (l.visible) {
                            var u = l.texture.frame;
                            if (e.globalAlpha = this.worldAlpha * l.alpha,
                            l.rotation % (2 * Math.PI) === 0)
                                i && (e.setTransform(r.a, r.b, r.c, r.d, r.tx, r.ty),
                                i = !1),
                                n = l.anchor.x * -u.width * l.scale.x + l.position.x + .5,
                                o = l.anchor.y * -u.height * l.scale.y + l.position.y + .5,
                                s = u.width * l.scale.x,
                                a = u.height * l.scale.y;
                            else {
                                i || (i = !0),
                                l.displayObjectUpdateTransform();
                                var c = l.worldTransform;
                                t.roundPixels ? e.setTransform(c.a, c.b, c.c, c.d, 0 | c.tx, 0 | c.ty) : e.setTransform(c.a, c.b, c.c, c.d, c.tx, c.ty),
                                n = l.anchor.x * -u.width + .5,
                                o = l.anchor.y * -u.height + .5,
                                s = u.width,
                                a = u.height
                            }
                            e.drawImage(l.texture.baseTexture.source, u.x, u.y, u.width, u.height, n, o, s, a)
                        }
                    }
                }
            }
            ,
            i.prototype.destroy = function() {
                if (n.prototype.destroy.apply(this, arguments),
                this._buffers)
                    for (var t = 0; t < this._buffers.length; ++t)
                        this._buffers[t].destroy();
                this._properties = null,
                this._buffers = null
            }
        }
        , {
            "../const": 22,
            "../display/Container": 23
        }],
        39: [function(t, e, r) {
            function i(t, e, r) {
                this.gl = t,
                this.vertSize = 2,
                this.vertByteSize = 4 * this.vertSize,
                this.size = r,
                this.dynamicProperties = [],
                this.staticProperties = [];
                for (var i = 0; i < e.length; i++) {
                    var n = e[i];
                    n.dynamic ? this.dynamicProperties.push(n) : this.staticProperties.push(n)
                }
                this.staticStride = 0,
                this.staticBuffer = null,
                this.staticData = null,
                this.dynamicStride = 0,
                this.dynamicBuffer = null,
                this.dynamicData = null,
                this.initBuffers()
            }
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.initBuffers = function() {
                var t, e, r = this.gl, i = 0;
                for (this.dynamicStride = 0,
                t = 0; t < this.dynamicProperties.length; t++)
                    e = this.dynamicProperties[t],
                    e.offset = i,
                    i += e.size,
                    this.dynamicStride += e.size;
                this.dynamicData = new Float32Array(this.size * this.dynamicStride * 4),
                this.dynamicBuffer = r.createBuffer(),
                r.bindBuffer(r.ARRAY_BUFFER, this.dynamicBuffer),
                r.bufferData(r.ARRAY_BUFFER, this.dynamicData, r.DYNAMIC_DRAW);
                var n = 0;
                for (this.staticStride = 0,
                t = 0; t < this.staticProperties.length; t++)
                    e = this.staticProperties[t],
                    e.offset = n,
                    n += e.size,
                    this.staticStride += e.size;
                this.staticData = new Float32Array(this.size * this.staticStride * 4),
                this.staticBuffer = r.createBuffer(),
                r.bindBuffer(r.ARRAY_BUFFER, this.staticBuffer),
                r.bufferData(r.ARRAY_BUFFER, this.staticData, r.DYNAMIC_DRAW)
            }
            ,
            i.prototype.uploadDynamic = function(t, e, r) {
                for (var i = this.gl, n = 0; n < this.dynamicProperties.length; n++) {
                    var o = this.dynamicProperties[n];
                    o.uploadFunction(t, e, r, this.dynamicData, this.dynamicStride, o.offset)
                }
                i.bindBuffer(i.ARRAY_BUFFER, this.dynamicBuffer),
                i.bufferSubData(i.ARRAY_BUFFER, 0, this.dynamicData)
            }
            ,
            i.prototype.uploadStatic = function(t, e, r) {
                for (var i = this.gl, n = 0; n < this.staticProperties.length; n++) {
                    var o = this.staticProperties[n];
                    o.uploadFunction(t, e, r, this.staticData, this.staticStride, o.offset)
                }
                i.bindBuffer(i.ARRAY_BUFFER, this.staticBuffer),
                i.bufferSubData(i.ARRAY_BUFFER, 0, this.staticData)
            }
            ,
            i.prototype.bind = function() {
                var t, e, r = this.gl;
                for (r.bindBuffer(r.ARRAY_BUFFER, this.dynamicBuffer),
                t = 0; t < this.dynamicProperties.length; t++)
                    e = this.dynamicProperties[t],
                    r.vertexAttribPointer(e.attribute, e.size, r.FLOAT, !1, 4 * this.dynamicStride, 4 * e.offset);
                for (r.bindBuffer(r.ARRAY_BUFFER, this.staticBuffer),
                t = 0; t < this.staticProperties.length; t++)
                    e = this.staticProperties[t],
                    r.vertexAttribPointer(e.attribute, e.size, r.FLOAT, !1, 4 * this.staticStride, 4 * e.offset)
            }
            ,
            i.prototype.destroy = function() {
                this.dynamicProperties = null,
                this.dynamicData = null,
                this.gl.deleteBuffer(this.dynamicBuffer),
                this.staticProperties = null,
                this.staticData = null,
                this.gl.deleteBuffer(this.staticBuffer)
            }
        }
        , {}],
        40: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.size = 15e3;
                var e = 6 * this.size;
                this.indices = new Uint16Array(e);
                for (var r = 0, i = 0; e > r; r += 6,
                i += 4)
                    this.indices[r + 0] = i + 0,
                    this.indices[r + 1] = i + 1,
                    this.indices[r + 2] = i + 2,
                    this.indices[r + 3] = i + 0,
                    this.indices[r + 4] = i + 2,
                    this.indices[r + 5] = i + 3;
                this.shader = null,
                this.indexBuffer = null,
                this.properties = null,
                this.tempMatrix = new h.Matrix
            }
            var n = t("../../renderers/webgl/utils/ObjectRenderer")
              , o = t("../../renderers/webgl/WebGLRenderer")
              , s = t("./ParticleShader")
              , a = t("./ParticleBuffer")
              , h = t("../../math");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            o.registerPlugin("particle", i),
            i.prototype.onContextChange = function() {
                var t = this.renderer.gl;
                this.shader = new s(this.renderer.shaderManager),
                this.indexBuffer = t.createBuffer(),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW),
                this.properties = [{
                    attribute: this.shader.attributes.aVertexPosition,
                    dynamic: !1,
                    size: 2,
                    uploadFunction: this.uploadVertices,
                    offset: 0
                }, {
                    attribute: this.shader.attributes.aPositionCoord,
                    dynamic: !0,
                    size: 2,
                    uploadFunction: this.uploadPosition,
                    offset: 0
                }, {
                    attribute: this.shader.attributes.aRotation,
                    dynamic: !1,
                    size: 1,
                    uploadFunction: this.uploadRotation,
                    offset: 0
                }, {
                    attribute: this.shader.attributes.aTextureCoord,
                    dynamic: !1,
                    size: 2,
                    uploadFunction: this.uploadUvs,
                    offset: 0
                }, {
                    attribute: this.shader.attributes.aColor,
                    dynamic: !1,
                    size: 1,
                    uploadFunction: this.uploadAlpha,
                    offset: 0
                }]
            }
            ,
            i.prototype.start = function() {
                var t = this.renderer.gl;
                t.activeTexture(t.TEXTURE0),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
                var e = this.shader;
                this.renderer.shaderManager.setShader(e)
            }
            ,
            i.prototype.render = function(t) {
                var e = t.children
                  , r = e.length
                  , i = t._size;
                if (0 !== r) {
                    r > i && (r = i),
                    t._buffers || (t._buffers = this.generateBuffers(t)),
                    this.renderer.blendModeManager.setBlendMode(t.blendMode);
                    var n = this.renderer.gl
                      , o = t.worldTransform.copy(this.tempMatrix);
                    o.prepend(this.renderer.currentRenderTarget.projectionMatrix),
                    n.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location, !1, o.toArray(!0)),
                    n.uniform1f(this.shader.uniforms.uAlpha._location, t.worldAlpha);
                    var s = t._updateStatic
                      , a = e[0]._texture.baseTexture;
                    if (a._glTextures[n.id])
                        n.bindTexture(n.TEXTURE_2D, a._glTextures[n.id]);
                    else {
                        if (!this.renderer.updateTexture(a))
                            return;
                        this.properties[0].dynamic && this.properties[3].dynamic || (s = !0)
                    }
                    for (var h = 0, l = 0; r > l; l += this.size) {
                        var u = r - l;
                        u > this.size && (u = this.size);
                        var c = t._buffers[h++];
                        c.uploadDynamic(e, l, u),
                        s && c.uploadStatic(e, l, u),
                        c.bind(this.shader),
                        n.drawElements(n.TRIANGLES, 6 * u, n.UNSIGNED_SHORT, 0),
                        this.renderer.drawCount++
                    }
                    t._updateStatic = !1
                }
            }
            ,
            i.prototype.generateBuffers = function(t) {
                var e, r = this.renderer.gl, i = [], n = t._size;
                for (e = 0; e < t._properties.length; e++)
                    this.properties[e].dynamic = t._properties[e];
                for (e = 0; n > e; e += this.size)
                    i.push(new a(r,this.properties,this.size,this.shader));
                return i
            }
            ,
            i.prototype.uploadVertices = function(t, e, r, i, n, o) {
                for (var s, a, h, l, u, c, p, d, f, v = 0; r > v; v++)
                    s = t[e + v],
                    a = s._texture,
                    l = s.scale.x,
                    u = s.scale.y,
                    a.trim ? (h = a.trim,
                    p = h.x - s.anchor.x * h.width,
                    c = p + a.crop.width,
                    f = h.y - s.anchor.y * h.height,
                    d = f + a.crop.height) : (c = a._frame.width * (1 - s.anchor.x),
                    p = a._frame.width * -s.anchor.x,
                    d = a._frame.height * (1 - s.anchor.y),
                    f = a._frame.height * -s.anchor.y),
                    i[o] = p * l,
                    i[o + 1] = f * u,
                    i[o + n] = c * l,
                    i[o + n + 1] = f * u,
                    i[o + 2 * n] = c * l,
                    i[o + 2 * n + 1] = d * u,
                    i[o + 3 * n] = p * l,
                    i[o + 3 * n + 1] = d * u,
                    o += 4 * n
            }
            ,
            i.prototype.uploadPosition = function(t, e, r, i, n, o) {
                for (var s = 0; r > s; s++) {
                    var a = t[e + s].position;
                    i[o] = a.x,
                    i[o + 1] = a.y,
                    i[o + n] = a.x,
                    i[o + n + 1] = a.y,
                    i[o + 2 * n] = a.x,
                    i[o + 2 * n + 1] = a.y,
                    i[o + 3 * n] = a.x,
                    i[o + 3 * n + 1] = a.y,
                    o += 4 * n
                }
            }
            ,
            i.prototype.uploadRotation = function(t, e, r, i, n, o) {
                for (var s = 0; r > s; s++) {
                    var a = t[e + s].rotation;
                    i[o] = a,
                    i[o + n] = a,
                    i[o + 2 * n] = a,
                    i[o + 3 * n] = a,
                    o += 4 * n
                }
            }
            ,
            i.prototype.uploadUvs = function(t, e, r, i, n, o) {
                for (var s = 0; r > s; s++) {
                    var a = t[e + s]._texture._uvs;
                    a ? (i[o] = a.x0,
                    i[o + 1] = a.y0,
                    i[o + n] = a.x1,
                    i[o + n + 1] = a.y1,
                    i[o + 2 * n] = a.x2,
                    i[o + 2 * n + 1] = a.y2,
                    i[o + 3 * n] = a.x3,
                    i[o + 3 * n + 1] = a.y3,
                    o += 4 * n) : (i[o] = 0,
                    i[o + 1] = 0,
                    i[o + n] = 0,
                    i[o + n + 1] = 0,
                    i[o + 2 * n] = 0,
                    i[o + 2 * n + 1] = 0,
                    i[o + 3 * n] = 0,
                    i[o + 3 * n + 1] = 0,
                    o += 4 * n)
                }
            }
            ,
            i.prototype.uploadAlpha = function(t, e, r, i, n, o) {
                for (var s = 0; r > s; s++) {
                    var a = t[e + s].alpha;
                    i[o] = a,
                    i[o + n] = a,
                    i[o + 2 * n] = a,
                    i[o + 3 * n] = a,
                    o += 4 * n
                }
            }
            ,
            i.prototype.destroy = function() {
                this.renderer.gl && this.renderer.gl.deleteBuffer(this.indexBuffer),
                n.prototype.destroy.apply(this, arguments),
                this.shader.destroy(),
                this.indices = null,
                this.tempMatrix = null
            }
        }
        , {
            "../../math": 32,
            "../../renderers/webgl/WebGLRenderer": 48,
            "../../renderers/webgl/utils/ObjectRenderer": 62,
            "./ParticleBuffer": 39,
            "./ParticleShader": 41
        }],
        41: [function(t, e, r) {
            function i(t) {
                n.call(this, t, ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "uniform mat3 projectionMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "void main(void){", "   vec2 v = aVertexPosition;", "   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);", "   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);", "   v = v + aPositionCoord;", "   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"].join("\n"), ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "uniform float uAlpha;", "void main(void){", "  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;", "  if (color.a == 0.0) discard;", "  gl_FragColor = color;", "}"].join("\n"), {
                    uAlpha: {
                        type: "1f",
                        value: 1
                    }
                }, {
                    aPositionCoord: 0,
                    aRotation: 0
                })
            }
            var n = t("../../renderers/webgl/shaders/TextureShader");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i
        }
        , {
            "../../renderers/webgl/shaders/TextureShader": 61
        }],
        42: [function(t, e, r) {
            function i(t, e, r, i) {
                if (a.call(this),
                n.sayHello(t),
                i)
                    for (var h in s.DEFAULT_RENDER_OPTIONS)
                        "undefined" == typeof i[h] && (i[h] = s.DEFAULT_RENDER_OPTIONS[h]);
                else
                    i = s.DEFAULT_RENDER_OPTIONS;
                this.type = s.RENDERER_TYPE.UNKNOWN,
                this.width = e || 800,
                this.height = r || 600,
                this.view = i.view || document.createElement("canvas"),
                this.resolution = i.resolution,
                this.transparent = i.transparent,
                this.autoResize = i.autoResize || !1,
                this.blendModes = null,
                this.preserveDrawingBuffer = i.preserveDrawingBuffer,
                this.clearBeforeRender = i.clearBeforeRender,
                this._backgroundColor = 0,
                this._backgroundColorRgb = [0, 0, 0],
                this._backgroundColorString = "#000000",
                this.backgroundColor = i.backgroundColor || this._backgroundColor,
                this._tempDisplayObjectParent = {
                    worldTransform: new o.Matrix,
                    worldAlpha: 1,
                    children: []
                },
                this._lastObjectRendered = this._tempDisplayObjectParent
            }
            var n = t("../utils")
              , o = t("../math")
              , s = t("../const")
              , a = t("eventemitter3");
            i.prototype = Object.create(a.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                backgroundColor: {
                    get: function() {
                        return this._backgroundColor
                    },
                    set: function(t) {
                        this._backgroundColor = t,
                        this._backgroundColorString = n.hex2string(t),
                        n.hex2rgb(t, this._backgroundColorRgb)
                    }
                }
            }),
            i.prototype.resize = function(t, e) {
                this.width = t * this.resolution,
                this.height = e * this.resolution,
                this.view.width = this.width,
                this.view.height = this.height,
                this.autoResize && (this.view.style.width = this.width / this.resolution + "px",
                this.view.style.height = this.height / this.resolution + "px")
            }
            ,
            i.prototype.destroy = function(t) {
                t && this.view.parent && this.view.parent.removeChild(this.view),
                this.type = s.RENDERER_TYPE.UNKNOWN,
                this.width = 0,
                this.height = 0,
                this.view = null,
                this.resolution = 0,
                this.transparent = !1,
                this.autoResize = !1,
                this.blendModes = null,
                this.preserveDrawingBuffer = !1,
                this.clearBeforeRender = !1,
                this._backgroundColor = 0,
                this._backgroundColorRgb = null,
                this._backgroundColorString = null
            }
        }
        , {
            "../const": 22,
            "../math": 32,
            "../utils": 76,
            eventemitter3: 11
        }],
        43: [function(t, e, r) {
            function i(t, e, r) {
                n.call(this, "Canvas", t, e, r),
                this.type = h.RENDERER_TYPE.CANVAS,
                this.context = this.view.getContext("2d", {
                    alpha: this.transparent
                }),
                this.refresh = !0,
                this.maskManager = new o,
                this.roundPixels = !1,
                this.currentScaleMode = h.SCALE_MODES.DEFAULT,
                this.currentBlendMode = h.BLEND_MODES.NORMAL,
                this.smoothProperty = "imageSmoothingEnabled",
                this.context.imageSmoothingEnabled || (this.context.webkitImageSmoothingEnabled ? this.smoothProperty = "webkitImageSmoothingEnabled" : this.context.mozImageSmoothingEnabled ? this.smoothProperty = "mozImageSmoothingEnabled" : this.context.oImageSmoothingEnabled ? this.smoothProperty = "oImageSmoothingEnabled" : this.context.msImageSmoothingEnabled && (this.smoothProperty = "msImageSmoothingEnabled")),
                this.initPlugins(),
                this._mapBlendModes(),
                this._tempDisplayObjectParent = {
                    worldTransform: new a.Matrix,
                    worldAlpha: 1
                },
                this.resize(t, e)
            }
            var n = t("../SystemRenderer")
              , o = t("./utils/CanvasMaskManager")
              , s = t("../../utils")
              , a = t("../../math")
              , h = t("../../const");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            s.pluginTarget.mixin(i),
            i.prototype.render = function(t) {
                var e = t.parent;
                this._lastObjectRendered = t,
                t.parent = this._tempDisplayObjectParent,
                t.updateTransform(),
                t.parent = e,
                this.context.setTransform(1, 0, 0, 1, 0, 0),
                this.context.globalAlpha = 1,
                this.currentBlendMode = h.BLEND_MODES.NORMAL,
                this.context.globalCompositeOperation = this.blendModes[h.BLEND_MODES.NORMAL],
                navigator.isCocoonJS && this.view.screencanvas && (this.context.fillStyle = "black",
                this.context.clear()),
                this.clearBeforeRender && (this.transparent ? this.context.clearRect(0, 0, this.width, this.height) : (this.context.fillStyle = this._backgroundColorString,
                this.context.fillRect(0, 0, this.width, this.height))),
                this.renderDisplayObject(t, this.context)
            }
            ,
            i.prototype.destroy = function(t) {
                this.destroyPlugins(),
                n.prototype.destroy.call(this, t),
                this.context = null,
                this.refresh = !0,
                this.maskManager.destroy(),
                this.maskManager = null,
                this.roundPixels = !1,
                this.currentScaleMode = 0,
                this.currentBlendMode = 0,
                this.smoothProperty = null
            }
            ,
            i.prototype.renderDisplayObject = function(t, e) {
                var r = this.context;
                this.context = e,
                t.renderCanvas(this),
                this.context = r
            }
            ,
            i.prototype.resize = function(t, e) {
                n.prototype.resize.call(this, t, e),
                this.currentScaleMode = h.SCALE_MODES.DEFAULT,
                this.smoothProperty && (this.context[this.smoothProperty] = this.currentScaleMode === h.SCALE_MODES.LINEAR)
            }
            ,
            i.prototype._mapBlendModes = function() {
                this.blendModes || (this.blendModes = {},
                s.canUseNewCanvasBlendModes() ? (this.blendModes[h.BLEND_MODES.NORMAL] = "source-over",
                this.blendModes[h.BLEND_MODES.ADD] = "lighter",
                this.blendModes[h.BLEND_MODES.MULTIPLY] = "multiply",
                this.blendModes[h.BLEND_MODES.SCREEN] = "screen",
                this.blendModes[h.BLEND_MODES.OVERLAY] = "overlay",
                this.blendModes[h.BLEND_MODES.DARKEN] = "darken",
                this.blendModes[h.BLEND_MODES.LIGHTEN] = "lighten",
                this.blendModes[h.BLEND_MODES.COLOR_DODGE] = "color-dodge",
                this.blendModes[h.BLEND_MODES.COLOR_BURN] = "color-burn",
                this.blendModes[h.BLEND_MODES.HARD_LIGHT] = "hard-light",
                this.blendModes[h.BLEND_MODES.SOFT_LIGHT] = "soft-light",
                this.blendModes[h.BLEND_MODES.DIFFERENCE] = "difference",
                this.blendModes[h.BLEND_MODES.EXCLUSION] = "exclusion",
                this.blendModes[h.BLEND_MODES.HUE] = "hue",
                this.blendModes[h.BLEND_MODES.SATURATION] = "saturate",
                this.blendModes[h.BLEND_MODES.COLOR] = "color",
                this.blendModes[h.BLEND_MODES.LUMINOSITY] = "luminosity") : (this.blendModes[h.BLEND_MODES.NORMAL] = "source-over",
                this.blendModes[h.BLEND_MODES.ADD] = "lighter",
                this.blendModes[h.BLEND_MODES.MULTIPLY] = "source-over",
                this.blendModes[h.BLEND_MODES.SCREEN] = "source-over",
                this.blendModes[h.BLEND_MODES.OVERLAY] = "source-over",
                this.blendModes[h.BLEND_MODES.DARKEN] = "source-over",
                this.blendModes[h.BLEND_MODES.LIGHTEN] = "source-over",
                this.blendModes[h.BLEND_MODES.COLOR_DODGE] = "source-over",
                this.blendModes[h.BLEND_MODES.COLOR_BURN] = "source-over",
                this.blendModes[h.BLEND_MODES.HARD_LIGHT] = "source-over",
                this.blendModes[h.BLEND_MODES.SOFT_LIGHT] = "source-over",
                this.blendModes[h.BLEND_MODES.DIFFERENCE] = "source-over",
                this.blendModes[h.BLEND_MODES.EXCLUSION] = "source-over",
                this.blendModes[h.BLEND_MODES.HUE] = "source-over",
                this.blendModes[h.BLEND_MODES.SATURATION] = "source-over",
                this.blendModes[h.BLEND_MODES.COLOR] = "source-over",
                this.blendModes[h.BLEND_MODES.LUMINOSITY] = "source-over"))
            }
        }
        , {
            "../../const": 22,
            "../../math": 32,
            "../../utils": 76,
            "../SystemRenderer": 42,
            "./utils/CanvasMaskManager": 46
        }],
        44: [function(t, e, r) {
            function i(t, e) {
                this.canvas = document.createElement("canvas"),
                this.context = this.canvas.getContext("2d"),
                this.canvas.width = t,
                this.canvas.height = e
            }
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                width: {
                    get: function() {
                        return this.canvas.width
                    },
                    set: function(t) {
                        this.canvas.width = t
                    }
                },
                height: {
                    get: function() {
                        return this.canvas.height
                    },
                    set: function(t) {
                        this.canvas.height = t
                    }
                }
            }),
            i.prototype.clear = function() {
                this.context.setTransform(1, 0, 0, 1, 0, 0),
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)
            }
            ,
            i.prototype.resize = function(t, e) {
                this.canvas.width = t,
                this.canvas.height = e
            }
            ,
            i.prototype.destroy = function() {
                this.context = null,
                this.canvas = null
            }
        }
        , {}],
        45: [function(t, e, r) {
            var i = t("../../../const")
              , n = {};
            e.exports = n,
            n.renderGraphics = function(t, e) {
                var r = t.worldAlpha;
                t.dirty && (this.updateGraphicsTint(t),
                t.dirty = !1);
                for (var n = 0; n < t.graphicsData.length; n++) {
                    var o = t.graphicsData[n]
                      , s = o.shape
                      , a = o._fillTint
                      , h = o._lineTint;
                    if (e.lineWidth = o.lineWidth,
                    o.type === i.SHAPES.POLY) {
                        e.beginPath();
                        var l = s.points;
                        e.moveTo(l[0], l[1]);
                        for (var u = 1; u < l.length / 2; u++)
                            e.lineTo(l[2 * u], l[2 * u + 1]);
                        s.closed && e.lineTo(l[0], l[1]),
                        l[0] === l[l.length - 2] && l[1] === l[l.length - 1] && e.closePath(),
                        o.fill && (e.globalAlpha = o.fillAlpha * r,
                        e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6),
                        e.fill()),
                        o.lineWidth && (e.globalAlpha = o.lineAlpha * r,
                        e.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6),
                        e.stroke())
                    } else if (o.type === i.SHAPES.RECT)
                        (o.fillColor || 0 === o.fillColor) && (e.globalAlpha = o.fillAlpha * r,
                        e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6),
                        e.fillRect(s.x, s.y, s.width, s.height)),
                        o.lineWidth && (e.globalAlpha = o.lineAlpha * r,
                        e.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6),
                        e.strokeRect(s.x, s.y, s.width, s.height));
                    else if (o.type === i.SHAPES.CIRC)
                        e.beginPath(),
                        e.arc(s.x, s.y, s.radius, 0, 2 * Math.PI),
                        e.closePath(),
                        o.fill && (e.globalAlpha = o.fillAlpha * r,
                        e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6),
                        e.fill()),
                        o.lineWidth && (e.globalAlpha = o.lineAlpha * r,
                        e.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6),
                        e.stroke());
                    else if (o.type === i.SHAPES.ELIP) {
                        var c = 2 * s.width
                          , p = 2 * s.height
                          , d = s.x - c / 2
                          , f = s.y - p / 2;
                        e.beginPath();
                        var v = .5522848
                          , g = c / 2 * v
                          , m = p / 2 * v
                          , y = d + c
                          , x = f + p
                          , b = d + c / 2
                          , _ = f + p / 2;
                        e.moveTo(d, _),
                        e.bezierCurveTo(d, _ - m, b - g, f, b, f),
                        e.bezierCurveTo(b + g, f, y, _ - m, y, _),
                        e.bezierCurveTo(y, _ + m, b + g, x, b, x),
                        e.bezierCurveTo(b - g, x, d, _ + m, d, _),
                        e.closePath(),
                        o.fill && (e.globalAlpha = o.fillAlpha * r,
                        e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6),
                        e.fill()),
                        o.lineWidth && (e.globalAlpha = o.lineAlpha * r,
                        e.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6),
                        e.stroke())
                    } else if (o.type === i.SHAPES.RREC) {
                        var T = s.x
                          , E = s.y
                          , S = s.width
                          , A = s.height
                          , w = s.radius
                          , C = Math.min(S, A) / 2 | 0;
                        w = w > C ? C : w,
                        e.beginPath(),
                        e.moveTo(T, E + w),
                        e.lineTo(T, E + A - w),
                        e.quadraticCurveTo(T, E + A, T + w, E + A),
                        e.lineTo(T + S - w, E + A),
                        e.quadraticCurveTo(T + S, E + A, T + S, E + A - w),
                        e.lineTo(T + S, E + w),
                        e.quadraticCurveTo(T + S, E, T + S - w, E),
                        e.lineTo(T + w, E),
                        e.quadraticCurveTo(T, E, T, E + w),
                        e.closePath(),
                        (o.fillColor || 0 === o.fillColor) && (e.globalAlpha = o.fillAlpha * r,
                        e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6),
                        e.fill()),
                        o.lineWidth && (e.globalAlpha = o.lineAlpha * r,
                        e.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6),
                        e.stroke())
                    }
                }
            }
            ,
            n.renderGraphicsMask = function(t, e) {
                var r = t.graphicsData.length;
                if (0 !== r) {
                    e.beginPath();
                    for (var n = 0; r > n; n++) {
                        var o = t.graphicsData[n]
                          , s = o.shape;
                        if (o.type === i.SHAPES.POLY) {
                            var a = s.points;
                            e.moveTo(a[0], a[1]);
                            for (var h = 1; h < a.length / 2; h++)
                                e.lineTo(a[2 * h], a[2 * h + 1]);
                            a[0] === a[a.length - 2] && a[1] === a[a.length - 1] && e.closePath()
                        } else if (o.type === i.SHAPES.RECT)
                            e.rect(s.x, s.y, s.width, s.height),
                            e.closePath();
                        else if (o.type === i.SHAPES.CIRC)
                            e.arc(s.x, s.y, s.radius, 0, 2 * Math.PI),
                            e.closePath();
                        else if (o.type === i.SHAPES.ELIP) {
                            var l = 2 * s.width
                              , u = 2 * s.height
                              , c = s.x - l / 2
                              , p = s.y - u / 2
                              , d = .5522848
                              , f = l / 2 * d
                              , v = u / 2 * d
                              , g = c + l
                              , m = p + u
                              , y = c + l / 2
                              , x = p + u / 2;
                            e.moveTo(c, x),
                            e.bezierCurveTo(c, x - v, y - f, p, y, p),
                            e.bezierCurveTo(y + f, p, g, x - v, g, x),
                            e.bezierCurveTo(g, x + v, y + f, m, y, m),
                            e.bezierCurveTo(y - f, m, c, x + v, c, x),
                            e.closePath()
                        } else if (o.type === i.SHAPES.RREC) {
                            var b = s.x
                              , _ = s.y
                              , T = s.width
                              , E = s.height
                              , S = s.radius
                              , A = Math.min(T, E) / 2 | 0;
                            S = S > A ? A : S,
                            e.moveTo(b, _ + S),
                            e.lineTo(b, _ + E - S),
                            e.quadraticCurveTo(b, _ + E, b + S, _ + E),
                            e.lineTo(b + T - S, _ + E),
                            e.quadraticCurveTo(b + T, _ + E, b + T, _ + E - S),
                            e.lineTo(b + T, _ + S),
                            e.quadraticCurveTo(b + T, _, b + T - S, _),
                            e.lineTo(b + S, _),
                            e.quadraticCurveTo(b, _, b, _ + S),
                            e.closePath()
                        }
                    }
                }
            }
            ,
            n.updateGraphicsTint = function(t) {
                if (16777215 !== t.tint)
                    for (var e = (t.tint >> 16 & 255) / 255, r = (t.tint >> 8 & 255) / 255, i = (255 & t.tint) / 255, n = 0; n < t.graphicsData.length; n++) {
                        var o = t.graphicsData[n]
                          , s = 0 | o.fillColor
                          , a = 0 | o.lineColor;
                        o._fillTint = ((s >> 16 & 255) / 255 * e * 255 << 16) + ((s >> 8 & 255) / 255 * r * 255 << 8) + (255 & s) / 255 * i * 255,
                        o._lineTint = ((a >> 16 & 255) / 255 * e * 255 << 16) + ((a >> 8 & 255) / 255 * r * 255 << 8) + (255 & a) / 255 * i * 255
                    }
            }
        }
        , {
            "../../../const": 22
        }],
        46: [function(t, e, r) {
            function i() {}
            var n = t("./CanvasGraphics");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.pushMask = function(t, e) {
                e.context.save();
                var r = t.alpha
                  , i = t.worldTransform
                  , o = e.resolution;
                e.context.setTransform(i.a * o, i.b * o, i.c * o, i.d * o, i.tx * o, i.ty * o),
                t.texture || (n.renderGraphicsMask(t, e.context),
                e.context.clip()),
                t.worldAlpha = r
            }
            ,
            i.prototype.popMask = function(t) {
                t.context.restore()
            }
            ,
            i.prototype.destroy = function() {}
        }
        , {
            "./CanvasGraphics": 45
        }],
        47: [function(t, e, r) {
            var i = t("../../../utils")
              , n = {};
            e.exports = n,
            n.getTintedTexture = function(t, e) {
                var r = t.texture;
                e = n.roundColor(e);
                var i = "#" + ("00000" + (0 | e).toString(16)).substr(-6);
                if (r.tintCache = r.tintCache || {},
                r.tintCache[i])
                    return r.tintCache[i];
                var o = n.canvas || document.createElement("canvas");
                if (n.tintMethod(r, e, o),
                n.convertTintToImage) {
                    var s = new Image;
                    s.src = o.toDataURL(),
                    r.tintCache[i] = s
                } else
                    r.tintCache[i] = o,
                    n.canvas = null;
                return o
            }
            ,
            n.tintWithMultiply = function(t, e, r) {
                var i = r.getContext("2d")
                  , n = t.crop;
                r.width = n.width,
                r.height = n.height,
                i.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6),
                i.fillRect(0, 0, n.width, n.height),
                i.globalCompositeOperation = "multiply",
                i.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height),
                i.globalCompositeOperation = "destination-atop",
                i.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height)
            }
            ,
            n.tintWithOverlay = function(t, e, r) {
                var i = r.getContext("2d")
                  , n = t.crop;
                r.width = n.width,
                r.height = n.height,
                i.globalCompositeOperation = "copy",
                i.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6),
                i.fillRect(0, 0, n.width, n.height),
                i.globalCompositeOperation = "destination-atop",
                i.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height)
            }
            ,
            n.tintWithPerPixel = function(t, e, r) {
                var n = r.getContext("2d")
                  , o = t.crop;
                r.width = o.width,
                r.height = o.height,
                n.globalCompositeOperation = "copy",
                n.drawImage(t.baseTexture.source, o.x, o.y, o.width, o.height, 0, 0, o.width, o.height);
                for (var s = i.hex2rgb(e), a = s[0], h = s[1], l = s[2], u = n.getImageData(0, 0, o.width, o.height), c = u.data, p = 0; p < c.length; p += 4)
                    c[p + 0] *= a,
                    c[p + 1] *= h,
                    c[p + 2] *= l;
                n.putImageData(u, 0, 0)
            }
            ,
            n.roundColor = function(t) {
                var e = n.cacheStepsPerColorChannel
                  , r = i.hex2rgb(t);
                return r[0] = Math.min(255, r[0] / e * e),
                r[1] = Math.min(255, r[1] / e * e),
                r[2] = Math.min(255, r[2] / e * e),
                i.rgb2hex(r)
            }
            ,
            n.cacheStepsPerColorChannel = 8,
            n.convertTintToImage = !1,
            n.canUseMultiply = i.canUseNewCanvasBlendModes(),
            n.tintMethod = n.canUseMultiply ? n.tintWithMultiply : n.tintWithPerPixel
        }
        , {
            "../../../utils": 76
        }],
        48: [function(t, e, r) {
            function i(t, e, r) {
                r = r || {},
                n.call(this, "WebGL", t, e, r),
                this.type = f.RENDERER_TYPE.WEBGL,
                this.handleContextLost = this.handleContextLost.bind(this),
                this.handleContextRestored = this.handleContextRestored.bind(this),
                this.view.addEventListener("webglcontextlost", this.handleContextLost, !1),
                this.view.addEventListener("webglcontextrestored", this.handleContextRestored, !1),
                this._useFXAA = !!r.forceFXAA && r.antialias,
                this._FXAAFilter = null,
                this._contextOptions = {
                    alpha: this.transparent,
                    antialias: r.antialias,
                    premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent,
                    stencil: !0,
                    preserveDrawingBuffer: r.preserveDrawingBuffer
                },
                this.drawCount = 0,
                this.shaderManager = new o(this),
                this.maskManager = new s(this),
                this.stencilManager = new a(this),
                this.filterManager = new h(this),
                this.blendModeManager = new l(this),
                this.currentRenderTarget = null,
                this.currentRenderer = new c(this),
                this.initPlugins(),
                this._createContext(),
                this._initContext(),
                this._mapGlModes(),
                this._renderTargetStack = []
            }
            var n = t("../SystemRenderer")
              , o = t("./managers/ShaderManager")
              , s = t("./managers/MaskManager")
              , a = t("./managers/StencilManager")
              , h = t("./managers/FilterManager")
              , l = t("./managers/BlendModeManager")
              , u = t("./utils/RenderTarget")
              , c = t("./utils/ObjectRenderer")
              , p = t("./filters/FXAAFilter")
              , d = t("../../utils")
              , f = t("../../const");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            d.pluginTarget.mixin(i),
            i.glContextId = 0,
            i.prototype._createContext = function() {
                var t = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);
                if (this.gl = t,
                !t)
                    throw new Error("This browser does not support webGL. Try using the canvas renderer");
                this.glContextId = i.glContextId++,
                t.id = this.glContextId,
                t.renderer = this
            }
            ,
            i.prototype._initContext = function() {
                var t = this.gl;
                t.disable(t.DEPTH_TEST),
                t.disable(t.CULL_FACE),
                t.enable(t.BLEND),
                this.renderTarget = new u(t,this.width,this.height,null,this.resolution,!0),
                this.setRenderTarget(this.renderTarget),
                this.emit("context", t),
                this.resize(this.width, this.height),
                this._useFXAA || (this._useFXAA = this._contextOptions.antialias && !t.getContextAttributes().antialias),
                this._useFXAA && (window.console.warn("FXAA antialiasing being used instead of native antialiasing"),
                this._FXAAFilter = [new p])
            }
            ,
            i.prototype.render = function(t) {
                if (!this.gl.isContextLost()) {
                    this.drawCount = 0,
                    this._lastObjectRendered = t,
                    this._useFXAA && (this._FXAAFilter[0].uniforms.resolution.value.x = this.width,
                    this._FXAAFilter[0].uniforms.resolution.value.y = this.height,
                    t.filterArea = this.renderTarget.size,
                    t.filters = this._FXAAFilter);
                    var e = t.parent;
                    t.parent = this._tempDisplayObjectParent,
                    t.updateTransform(),
                    t.parent = e;
                    var r = this.gl;
                    this.setRenderTarget(this.renderTarget),
                    this.clearBeforeRender && (this.transparent ? r.clearColor(0, 0, 0, 0) : r.clearColor(this._backgroundColorRgb[0], this._backgroundColorRgb[1], this._backgroundColorRgb[2], 1),
                    r.clear(r.COLOR_BUFFER_BIT)),
                    this.renderDisplayObject(t, this.renderTarget)
                }
            }
            ,
            i.prototype.renderDisplayObject = function(t, e, r) {
                this.setRenderTarget(e),
                r && e.clear(),
                this.filterManager.setFilterStack(e.filterStack),
                t.renderWebGL(this),
                this.currentRenderer.flush()
            }
            ,
            i.prototype.setObjectRenderer = function(t) {
                this.currentRenderer !== t && (this.currentRenderer.stop(),
                this.currentRenderer = t,
                this.currentRenderer.start())
            }
            ,
            i.prototype.setRenderTarget = function(t) {
                this.currentRenderTarget !== t && (this.currentRenderTarget = t,
                this.currentRenderTarget.activate(),
                this.stencilManager.setMaskStack(t.stencilMaskStack))
            }
            ,
            i.prototype.resize = function(t, e) {
                n.prototype.resize.call(this, t, e),
                this.filterManager.resize(t, e),
                this.renderTarget.resize(t, e),
                this.currentRenderTarget === this.renderTarget && (this.renderTarget.activate(),
                this.gl.viewport(0, 0, this.width, this.height))
            }
            ,
            i.prototype.updateTexture = function(t) {
                if (t = t.baseTexture || t,
                t.hasLoaded) {
                    var e = this.gl;
                    return t._glTextures[e.id] || (t._glTextures[e.id] = e.createTexture(),
                    t.on("update", this.updateTexture, this),
                    t.on("dispose", this.destroyTexture, this)),
                    e.bindTexture(e.TEXTURE_2D, t._glTextures[e.id]),
                    e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultipliedAlpha),
                    e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, t.source),
                    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, t.scaleMode === f.SCALE_MODES.LINEAR ? e.LINEAR : e.NEAREST),
                    t.mipmap && t.isPowerOfTwo ? (e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t.scaleMode === f.SCALE_MODES.LINEAR ? e.LINEAR_MIPMAP_LINEAR : e.NEAREST_MIPMAP_NEAREST),
                    e.generateMipmap(e.TEXTURE_2D)) : e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t.scaleMode === f.SCALE_MODES.LINEAR ? e.LINEAR : e.NEAREST),
                    t.isPowerOfTwo ? (e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT),
                    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT)) : (e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE)),
                    t._glTextures[e.id]
                }
            }
            ,
            i.prototype.destroyTexture = function(t) {
                t = t.baseTexture || t,
                t.hasLoaded && t._glTextures[this.gl.id] && this.gl.deleteTexture(t._glTextures[this.gl.id])
            }
            ,
            i.prototype.handleContextLost = function(t) {
                t.preventDefault()
            }
            ,
            i.prototype.handleContextRestored = function() {
                this._initContext();
                for (var t in d.BaseTextureCache)
                    d.BaseTextureCache[t]._glTextures.length = 0
            }
            ,
            i.prototype.destroy = function(t) {
                this.destroyPlugins(),
                this.view.removeEventListener("webglcontextlost", this.handleContextLost),
                this.view.removeEventListener("webglcontextrestored", this.handleContextRestored),
                n.prototype.destroy.call(this, t),
                this.uid = 0,
                this.shaderManager.destroy(),
                this.maskManager.destroy(),
                this.stencilManager.destroy(),
                this.filterManager.destroy(),
                this.shaderManager = null,
                this.maskManager = null,
                this.filterManager = null,
                this.blendModeManager = null,
                this.handleContextLost = null,
                this.handleContextRestored = null,
                this._contextOptions = null,
                this.drawCount = 0,
                this.gl = null
            }
            ,
            i.prototype._mapGlModes = function() {
                var t = this.gl;
                this.blendModes || (this.blendModes = {},
                this.blendModes[f.BLEND_MODES.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.ADD] = [t.SRC_ALPHA, t.DST_ALPHA],
                this.blendModes[f.BLEND_MODES.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.SCREEN] = [t.SRC_ALPHA, t.ONE],
                this.blendModes[f.BLEND_MODES.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA],
                this.blendModes[f.BLEND_MODES.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]),
                this.drawModes || (this.drawModes = {},
                this.drawModes[f.DRAW_MODES.POINTS] = t.POINTS,
                this.drawModes[f.DRAW_MODES.LINES] = t.LINES,
                this.drawModes[f.DRAW_MODES.LINE_LOOP] = t.LINE_LOOP,
                this.drawModes[f.DRAW_MODES.LINE_STRIP] = t.LINE_STRIP,
                this.drawModes[f.DRAW_MODES.TRIANGLES] = t.TRIANGLES,
                this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP] = t.TRIANGLE_STRIP,
                this.drawModes[f.DRAW_MODES.TRIANGLE_FAN] = t.TRIANGLE_FAN)
            }
        }
        , {
            "../../const": 22,
            "../../utils": 76,
            "../SystemRenderer": 42,
            "./filters/FXAAFilter": 50,
            "./managers/BlendModeManager": 52,
            "./managers/FilterManager": 53,
            "./managers/MaskManager": 54,
            "./managers/ShaderManager": 55,
            "./managers/StencilManager": 56,
            "./utils/ObjectRenderer": 62,
            "./utils/RenderTarget": 64
        }],
        49: [function(t, e, r) {
            function i(t, e, r) {
                this.shaders = [],
                this.padding = 0,
                this.uniforms = r || {},
                this.vertexSrc = t || n.defaultVertexSrc,
                this.fragmentSrc = e || n.defaultFragmentSrc
            }
            var n = t("../shaders/TextureShader");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.getShader = function(t) {
                var e = t.gl
                  , r = this.shaders[e.id];
                return r || (r = new n(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),
                this.shaders[e.id] = r),
                r
            }
            ,
            i.prototype.applyFilter = function(t, e, r, i) {
                var n = this.getShader(t);
                t.filterManager.applyFilter(n, e, r, i)
            }
            ,
            i.prototype.syncUniform = function(t) {
                for (var e = 0, r = this.shaders.length; r > e; ++e)
                    this.shaders[e].syncUniform(t)
            }
        }
        , {
            "../shaders/TextureShader": 61
        }],
        50: [function(t, e, r) {
            function i() {
                n.call(this, "\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n", 'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n', {
                    resolution: {
                        type: "v2",
                        value: {
                            x: 1,
                            y: 1
                        }
                    }
                })
            }
            var n = t("./AbstractFilter");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager
                  , n = this.getShader(t);
                i.applyFilter(n, e, r)
            }
        }
        , {
            "./AbstractFilter": 49
        }],
        51: [function(t, e, r) {
            function i(t) {
                var e = new o.Matrix;
                n.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n", "precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n", {
                    mask: {
                        type: "sampler2D",
                        value: t._texture
                    },
                    alpha: {
                        type: "f",
                        value: 1
                    },
                    otherMatrix: {
                        type: "mat3",
                        value: e.toArray(!0)
                    }
                }),
                this.maskSprite = t,
                this.maskMatrix = e
            }
            var n = t("./AbstractFilter")
              , o = t("../../../math");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager;
                this.uniforms.mask.value = this.maskSprite._texture,
                i.calculateMappedMatrix(e.frame, this.maskSprite, this.maskMatrix),
                this.uniforms.otherMatrix.value = this.maskMatrix.toArray(!0),
                this.uniforms.alpha.value = this.maskSprite.worldAlpha;
                var n = this.getShader(t);
                i.applyFilter(n, e, r)
            }
            ,
            Object.defineProperties(i.prototype, {
                map: {
                    get: function() {
                        return this.uniforms.mask.value
                    },
                    set: function(t) {
                        this.uniforms.mask.value = t
                    }
                },
                offset: {
                    get: function() {
                        return this.uniforms.offset.value
                    },
                    set: function(t) {
                        this.uniforms.offset.value = t
                    }
                }
            })
        }
        , {
            "../../../math": 32,
            "./AbstractFilter": 49
        }],
        52: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.currentBlendMode = 99999
            }
            var n = t("./WebGLManager");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.setBlendMode = function(t) {
                if (this.currentBlendMode === t)
                    return !1;
                this.currentBlendMode = t;
                var e = this.renderer.blendModes[this.currentBlendMode];
                return this.renderer.gl.blendFunc(e[0], e[1]),
                !0
            }
        }
        , {
            "./WebGLManager": 57
        }],
        53: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.filterStack = [],
                this.filterStack.push({
                    renderTarget: t.currentRenderTarget,
                    filter: [],
                    bounds: null
                }),
                this.texturePool = [],
                this.textureSize = new h.Rectangle(0,0,t.width,t.height),
                this.currentFrame = null
            }
            var n = t("./WebGLManager")
              , o = t("../utils/RenderTarget")
              , s = t("../../../const")
              , a = t("../utils/Quad")
              , h = t("../../../math");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.onContextChange = function() {
                this.texturePool.length = 0;
                var t = this.renderer.gl;
                this.quad = new a(t)
            }
            ,
            i.prototype.setFilterStack = function(t) {
                this.filterStack = t
            }
            ,
            i.prototype.pushFilter = function(t, e) {
                var r = t.filterArea ? t.filterArea.clone() : t.getBounds();
                r.x = 0 | r.x,
                r.y = 0 | r.y,
                r.width = 0 | r.width,
                r.height = 0 | r.height;
                var i = 0 | e[0].padding;
                if (r.x -= i,
                r.y -= i,
                r.width += 2 * i,
                r.height += 2 * i,
                this.renderer.currentRenderTarget.transform) {
                    var n = this.renderer.currentRenderTarget.transform;
                    r.x += n.tx,
                    r.y += n.ty,
                    this.capFilterArea(r),
                    r.x -= n.tx,
                    r.y -= n.ty
                } else
                    this.capFilterArea(r);
                if (r.width > 0 && r.height > 0) {
                    this.currentFrame = r;
                    var o = this.getRenderTarget();
                    this.renderer.setRenderTarget(o),
                    o.clear(),
                    this.filterStack.push({
                        renderTarget: o,
                        filter: e
                    })
                } else
                    this.filterStack.push({
                        renderTarget: null,
                        filter: e
                    })
            }
            ,
            i.prototype.popFilter = function() {
                var t = this.filterStack.pop()
                  , e = this.filterStack[this.filterStack.length - 1]
                  , r = t.renderTarget;
                if (t.renderTarget) {
                    var i = e.renderTarget
                      , n = this.renderer.gl;
                    this.currentFrame = r.frame,
                    this.quad.map(this.textureSize, r.frame),
                    n.bindBuffer(n.ARRAY_BUFFER, this.quad.vertexBuffer),
                    n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, this.quad.indexBuffer);
                    var o = t.filter;
                    if (n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition, 2, n.FLOAT, !1, 0, 0),
                    n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord, 2, n.FLOAT, !1, 0, 32),
                    n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor, 4, n.FLOAT, !1, 0, 64),
                    this.renderer.blendModeManager.setBlendMode(s.BLEND_MODES.NORMAL),
                    1 === o.length)
                        o[0].uniforms.dimensions && (o[0].uniforms.dimensions.value[0] = this.renderer.width,
                        o[0].uniforms.dimensions.value[1] = this.renderer.height,
                        o[0].uniforms.dimensions.value[2] = this.quad.vertices[0],
                        o[0].uniforms.dimensions.value[3] = this.quad.vertices[5]),
                        o[0].applyFilter(this.renderer, r, i),
                        this.returnRenderTarget(r);
                    else {
                        for (var a = r, h = this.getRenderTarget(!0), l = 0; l < o.length - 1; l++) {
                            var u = o[l];
                            u.uniforms.dimensions && (u.uniforms.dimensions.value[0] = this.renderer.width,
                            u.uniforms.dimensions.value[1] = this.renderer.height,
                            u.uniforms.dimensions.value[2] = this.quad.vertices[0],
                            u.uniforms.dimensions.value[3] = this.quad.vertices[5]),
                            u.applyFilter(this.renderer, a, h);
                            var c = a;
                            a = h,
                            h = c
                        }
                        o[o.length - 1].applyFilter(this.renderer, a, i),
                        this.returnRenderTarget(a),
                        this.returnRenderTarget(h)
                    }
                    return t.filter
                }
            }
            ,
            i.prototype.getRenderTarget = function(t) {
                var e = this.texturePool.pop() || new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,s.SCALE_MODES.LINEAR,this.renderer.resolution * s.FILTER_RESOLUTION);
                return e.frame = this.currentFrame,
                t && e.clear(!0),
                e
            }
            ,
            i.prototype.returnRenderTarget = function(t) {
                this.texturePool.push(t)
            }
            ,
            i.prototype.applyFilter = function(t, e, r, i) {
                var n = this.renderer.gl;
                this.renderer.setRenderTarget(r),
                i && r.clear(),
                this.renderer.shaderManager.setShader(t),
                t.uniforms.projectionMatrix.value = this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),
                t.syncUniforms(),
                n.activeTexture(n.TEXTURE0),
                n.bindTexture(n.TEXTURE_2D, e.texture),
                n.drawElements(n.TRIANGLES, 6, n.UNSIGNED_SHORT, 0)
            }
            ,
            i.prototype.calculateMappedMatrix = function(t, e, r) {
                var i = e.worldTransform.copy(h.Matrix.TEMP_MATRIX)
                  , n = e._texture.baseTexture
                  , o = r.identity()
                  , s = this.textureSize.height / this.textureSize.width;
                o.translate(t.x / this.textureSize.width, t.y / this.textureSize.height),
                o.scale(1, s);
                var a = this.textureSize.width / n.width
                  , l = this.textureSize.height / n.height;
                return i.tx /= n.width * a,
                i.ty /= n.width * a,
                i.invert(),
                o.prepend(i),
                o.scale(1, 1 / s),
                o.scale(a, l),
                o.translate(e.anchor.x, e.anchor.y),
                o
            }
            ,
            i.prototype.capFilterArea = function(t) {
                t.x < 0 && (t.width += t.x,
                t.x = 0),
                t.y < 0 && (t.height += t.y,
                t.y = 0),
                t.x + t.width > this.textureSize.width && (t.width = this.textureSize.width - t.x),
                t.y + t.height > this.textureSize.height && (t.height = this.textureSize.height - t.y)
            }
            ,
            i.prototype.resize = function(t, e) {
                this.textureSize.width = t,
                this.textureSize.height = e;
                for (var r = 0; r < this.texturePool.length; r++)
                    this.texturePool[r].resize(t, e)
            }
            ,
            i.prototype.destroy = function() {
                this.filterStack = null,
                this.offsetY = 0;
                for (var t = 0; t < this.texturePool.length; t++)
                    this.texturePool[t].destroy();
                this.texturePool = null
            }
        }
        , {
            "../../../const": 22,
            "../../../math": 32,
            "../utils/Quad": 63,
            "../utils/RenderTarget": 64,
            "./WebGLManager": 57
        }],
        54: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.stencilStack = [],
                this.reverse = !0,
                this.count = 0,
                this.alphaMaskPool = []
            }
            var n = t("./WebGLManager")
              , o = t("../filters/SpriteMaskFilter");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.pushMask = function(t, e) {
                e.texture ? this.pushSpriteMask(t, e) : this.pushStencilMask(t, e)
            }
            ,
            i.prototype.popMask = function(t, e) {
                e.texture ? this.popSpriteMask(t, e) : this.popStencilMask(t, e)
            }
            ,
            i.prototype.pushSpriteMask = function(t, e) {
                var r = this.alphaMaskPool.pop();
                r || (r = [new o(e)]),
                r[0].maskSprite = e,
                this.renderer.filterManager.pushFilter(t, r)
            }
            ,
            i.prototype.popSpriteMask = function() {
                var t = this.renderer.filterManager.popFilter();
                this.alphaMaskPool.push(t)
            }
            ,
            i.prototype.pushStencilMask = function(t, e) {
                this.renderer.stencilManager.pushMask(e)
            }
            ,
            i.prototype.popStencilMask = function(t, e) {
                this.renderer.stencilManager.popMask(e)
            }
        }
        , {
            "../filters/SpriteMaskFilter": 51,
            "./WebGLManager": 57
        }],
        55: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.maxAttibs = 10,
                this.attribState = [],
                this.tempAttribState = [];
                for (var e = 0; e < this.maxAttibs; e++)
                    this.attribState[e] = !1;
                this.stack = [],
                this._currentId = -1,
                this.currentShader = null
            }
            var n = t("./WebGLManager")
              , o = t("../shaders/TextureShader")
              , s = t("../shaders/ComplexPrimitiveShader")
              , a = t("../shaders/PrimitiveShader")
              , h = t("../../../utils");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            h.pluginTarget.mixin(i),
            e.exports = i,
            i.prototype.onContextChange = function() {
                this.initPlugins();
                var t = this.renderer.gl;
                this.maxAttibs = t.getParameter(t.MAX_VERTEX_ATTRIBS),
                this.attribState = [];
                for (var e = 0; e < this.maxAttibs; e++)
                    this.attribState[e] = !1;
                this.defaultShader = new o(this),
                this.primitiveShader = new a(this),
                this.complexPrimitiveShader = new s(this)
            }
            ,
            i.prototype.setAttribs = function(t) {
                var e;
                for (e = 0; e < this.tempAttribState.length; e++)
                    this.tempAttribState[e] = !1;
                for (var r in t)
                    this.tempAttribState[t[r]] = !0;
                var i = this.renderer.gl;
                for (e = 0; e < this.attribState.length; e++)
                    this.attribState[e] !== this.tempAttribState[e] && (this.attribState[e] = this.tempAttribState[e],
                    this.attribState[e] ? i.enableVertexAttribArray(e) : i.disableVertexAttribArray(e))
            }
            ,
            i.prototype.setShader = function(t) {
                return this._currentId === t.uid ? !1 : (this._currentId = t.uid,
                this.currentShader = t,
                this.renderer.gl.useProgram(t.program),
                this.setAttribs(t.attributes),
                !0)
            }
            ,
            i.prototype.destroy = function() {
                n.prototype.destroy.call(this),
                this.destroyPlugins(),
                this.attribState = null,
                this.tempAttribState = null
            }
        }
        , {
            "../../../utils": 76,
            "../shaders/ComplexPrimitiveShader": 58,
            "../shaders/PrimitiveShader": 59,
            "../shaders/TextureShader": 61,
            "./WebGLManager": 57
        }],
        56: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.stencilMaskStack = null
            }
            var n = t("./WebGLManager")
              , o = t("../../../utils");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.setMaskStack = function(t) {
                this.stencilMaskStack = t;
                var e = this.renderer.gl;
                0 === t.stencilStack.length ? e.disable(e.STENCIL_TEST) : e.enable(e.STENCIL_TEST)
            }
            ,
            i.prototype.pushStencil = function(t, e) {
                this.renderer.currentRenderTarget.attachStencilBuffer();
                var r = this.renderer.gl
                  , i = this.stencilMaskStack;
                this.bindGraphics(t, e, this.renderer),
                0 === i.stencilStack.length && (r.enable(r.STENCIL_TEST),
                r.clear(r.STENCIL_BUFFER_BIT),
                i.reverse = !0,
                i.count = 0),
                i.stencilStack.push(e);
                var n = i.count;
                r.colorMask(!1, !1, !1, !1),
                r.stencilFunc(r.ALWAYS, 0, 255),
                r.stencilOp(r.KEEP, r.KEEP, r.INVERT),
                1 === e.mode ? (r.drawElements(r.TRIANGLE_FAN, e.indices.length - 4, r.UNSIGNED_SHORT, 0),
                i.reverse ? (r.stencilFunc(r.EQUAL, 255 - n, 255),
                r.stencilOp(r.KEEP, r.KEEP, r.DECR)) : (r.stencilFunc(r.EQUAL, n, 255),
                r.stencilOp(r.KEEP, r.KEEP, r.INCR)),
                r.drawElements(r.TRIANGLE_FAN, 4, r.UNSIGNED_SHORT, 2 * (e.indices.length - 4)),
                i.reverse ? r.stencilFunc(r.EQUAL, 255 - (n + 1), 255) : r.stencilFunc(r.EQUAL, n + 1, 255),
                i.reverse = !i.reverse) : (i.reverse ? (r.stencilFunc(r.EQUAL, n, 255),
                r.stencilOp(r.KEEP, r.KEEP, r.INCR)) : (r.stencilFunc(r.EQUAL, 255 - n, 255),
                r.stencilOp(r.KEEP, r.KEEP, r.DECR)),
                r.drawElements(r.TRIANGLE_STRIP, e.indices.length, r.UNSIGNED_SHORT, 0),
                i.reverse ? r.stencilFunc(r.EQUAL, n + 1, 255) : r.stencilFunc(r.EQUAL, 255 - (n + 1), 255)),
                r.colorMask(!0, !0, !0, !0),
                r.stencilOp(r.KEEP, r.KEEP, r.KEEP),
                i.count++
            }
            ,
            i.prototype.bindGraphics = function(t, e) {
                this._currentGraphics = t;
                var r, i = this.renderer.gl;
                1 === e.mode ? (r = this.renderer.shaderManager.complexPrimitiveShader,
                this.renderer.shaderManager.setShader(r),
                i.uniformMatrix3fv(r.uniforms.translationMatrix._location, !1, t.worldTransform.toArray(!0)),
                i.uniformMatrix3fv(r.uniforms.projectionMatrix._location, !1, this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),
                i.uniform3fv(r.uniforms.tint._location, o.hex2rgb(t.tint)),
                i.uniform3fv(r.uniforms.color._location, e.color),
                i.uniform1f(r.uniforms.alpha._location, t.worldAlpha),
                i.bindBuffer(i.ARRAY_BUFFER, e.buffer),
                i.vertexAttribPointer(r.attributes.aVertexPosition, 2, i.FLOAT, !1, 8, 0),
                i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, e.indexBuffer)) : (r = this.renderer.shaderManager.primitiveShader,
                this.renderer.shaderManager.setShader(r),
                i.uniformMatrix3fv(r.uniforms.translationMatrix._location, !1, t.worldTransform.toArray(!0)),
                i.uniformMatrix3fv(r.uniforms.projectionMatrix._location, !1, this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),
                i.uniform3fv(r.uniforms.tint._location, o.hex2rgb(t.tint)),
                i.uniform1f(r.uniforms.alpha._location, t.worldAlpha),
                i.bindBuffer(i.ARRAY_BUFFER, e.buffer),
                i.vertexAttribPointer(r.attributes.aVertexPosition, 2, i.FLOAT, !1, 24, 0),
                i.vertexAttribPointer(r.attributes.aColor, 4, i.FLOAT, !1, 24, 8),
                i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, e.indexBuffer))
            }
            ,
            i.prototype.popStencil = function(t, e) {
                var r = this.renderer.gl
                  , i = this.stencilMaskStack;
                if (i.stencilStack.pop(),
                i.count--,
                0 === i.stencilStack.length)
                    r.disable(r.STENCIL_TEST);
                else {
                    var n = i.count;
                    this.bindGraphics(t, e, this.renderer),
                    r.colorMask(!1, !1, !1, !1),
                    1 === e.mode ? (i.reverse = !i.reverse,
                    i.reverse ? (r.stencilFunc(r.EQUAL, 255 - (n + 1), 255),
                    r.stencilOp(r.KEEP, r.KEEP, r.INCR)) : (r.stencilFunc(r.EQUAL, n + 1, 255),
                    r.stencilOp(r.KEEP, r.KEEP, r.DECR)),
                    r.drawElements(r.TRIANGLE_FAN, 4, r.UNSIGNED_SHORT, 2 * (e.indices.length - 4)),
                    r.stencilFunc(r.ALWAYS, 0, 255),
                    r.stencilOp(r.KEEP, r.KEEP, r.INVERT),
                    r.drawElements(r.TRIANGLE_FAN, e.indices.length - 4, r.UNSIGNED_SHORT, 0),
                    i.reverse ? r.stencilFunc(r.EQUAL, n, 255) : r.stencilFunc(r.EQUAL, 255 - n, 255)) : (i.reverse ? (r.stencilFunc(r.EQUAL, n + 1, 255),
                    r.stencilOp(r.KEEP, r.KEEP, r.DECR)) : (r.stencilFunc(r.EQUAL, 255 - (n + 1), 255),
                    r.stencilOp(r.KEEP, r.KEEP, r.INCR)),
                    r.drawElements(r.TRIANGLE_STRIP, e.indices.length, r.UNSIGNED_SHORT, 0),
                    i.reverse ? r.stencilFunc(r.EQUAL, n, 255) : r.stencilFunc(r.EQUAL, 255 - n, 255)),
                    r.colorMask(!0, !0, !0, !0),
                    r.stencilOp(r.KEEP, r.KEEP, r.KEEP)
                }
            }
            ,
            i.prototype.destroy = function() {
                n.prototype.destroy.call(this),
                this.stencilMaskStack.stencilStack = null
            }
            ,
            i.prototype.pushMask = function(t) {
                this.renderer.setObjectRenderer(this.renderer.plugins.graphics),
                t.dirty && this.renderer.plugins.graphics.updateGraphics(t, this.renderer.gl),
                t._webGL[this.renderer.gl.id].data.length && this.pushStencil(t, t._webGL[this.renderer.gl.id].data[0], this.renderer)
            }
            ,
            i.prototype.popMask = function(t) {
                this.renderer.setObjectRenderer(this.renderer.plugins.graphics),
                this.popStencil(t, t._webGL[this.renderer.gl.id].data[0], this.renderer)
            }
        }
        , {
            "../../../utils": 76,
            "./WebGLManager": 57
        }],
        57: [function(t, e, r) {
            function i(t) {
                this.renderer = t,
                this.renderer.on("context", this.onContextChange, this)
            }
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.onContextChange = function() {}
            ,
            i.prototype.destroy = function() {
                this.renderer.off("context", this.onContextChange, this),
                this.renderer = null
            }
        }
        , {}],
        58: [function(t, e, r) {
            function i(t) {
                n.call(this, t, ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform mat3 projectionMatrix;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "varying vec4 vColor;", "void main(void){", "   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"].join("\n"), ["precision mediump float;", "varying vec4 vColor;", "void main(void){", "   gl_FragColor = vColor;", "}"].join("\n"), {
                    tint: {
                        type: "3f",
                        value: [0, 0, 0]
                    },
                    alpha: {
                        type: "1f",
                        value: 0
                    },
                    color: {
                        type: "3f",
                        value: [0, 0, 0]
                    },
                    translationMatrix: {
                        type: "mat3",
                        value: new Float32Array(9)
                    },
                    projectionMatrix: {
                        type: "mat3",
                        value: new Float32Array(9)
                    }
                }, {
                    aVertexPosition: 0
                })
            }
            var n = t("./Shader");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i
        }
        , {
            "./Shader": 60
        }],
        59: [function(t, e, r) {
            function i(t) {
                n.call(this, t, ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform mat3 projectionMatrix;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void){", "   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"].join("\n"), ["precision mediump float;", "varying vec4 vColor;", "void main(void){", "   gl_FragColor = vColor;", "}"].join("\n"), {
                    tint: {
                        type: "3f",
                        value: [0, 0, 0]
                    },
                    alpha: {
                        type: "1f",
                        value: 0
                    },
                    translationMatrix: {
                        type: "mat3",
                        value: new Float32Array(9)
                    },
                    projectionMatrix: {
                        type: "mat3",
                        value: new Float32Array(9)
                    }
                }, {
                    aVertexPosition: 0,
                    aColor: 0
                })
            }
            var n = t("./Shader");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i
        }
        , {
            "./Shader": 60
        }],
        60: [function(t, e, r) {
            function i(t, e, r, i, o) {
                if (!e || !r)
                    throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");
                this.uid = n.uid(),
                this.gl = t.renderer.gl,
                this.shaderManager = t,
                this.program = null,
                this.uniforms = i || {},
                this.attributes = o || {},
                this.textureCount = 1,
                this.vertexSrc = e,
                this.fragmentSrc = r,
                this.init()
            }
            var n = t("../../../utils");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.init = function() {
                this.compile(),
                this.gl.useProgram(this.program),
                this.cacheUniformLocations(Object.keys(this.uniforms)),
                this.cacheAttributeLocations(Object.keys(this.attributes))
            }
            ,
            i.prototype.cacheUniformLocations = function(t) {
                for (var e = 0; e < t.length; ++e)
                    this.uniforms[t[e]]._location = this.gl.getUniformLocation(this.program, t[e])
            }
            ,
            i.prototype.cacheAttributeLocations = function(t) {
                for (var e = 0; e < t.length; ++e)
                    this.attributes[t[e]] = this.gl.getAttribLocation(this.program, t[e])
            }
            ,
            i.prototype.compile = function() {
                var t = this.gl
                  , e = this._glCompile(t.VERTEX_SHADER, this.vertexSrc)
                  , r = this._glCompile(t.FRAGMENT_SHADER, this.fragmentSrc)
                  , i = t.createProgram();
                return t.attachShader(i, e),
                t.attachShader(i, r),
                t.linkProgram(i),
                t.getProgramParameter(i, t.LINK_STATUS) || (console.error("Pixi.js Error: Could not initialize shader."),
                console.error("gl.VALIDATE_STATUS", t.getProgramParameter(i, t.VALIDATE_STATUS)),
                console.error("gl.getError()", t.getError()),
                "" !== t.getProgramInfoLog(i) && console.warn("Pixi.js Warning: gl.getProgramInfoLog()", t.getProgramInfoLog(i)),
                t.deleteProgram(i),
                i = null),
                t.deleteShader(e),
                t.deleteShader(r),
                this.program = i
            }
            ,
            i.prototype.syncUniform = function(t) {
                var e, r, i = t._location, o = t.value, s = this.gl;
                switch (t.type) {
                case "b":
                case "bool":
                case "boolean":
                    s.uniform1i(i, o ? 1 : 0);
                    break;
                case "i":
                case "1i":
                    s.uniform1i(i, o);
                    break;
                case "f":
                case "1f":
                    s.uniform1f(i, o);
                    break;
                case "2f":
                    s.uniform2f(i, o[0], o[1]);
                    break;
                case "3f":
                    s.uniform3f(i, o[0], o[1], o[2]);
                    break;
                case "4f":
                    s.uniform4f(i, o[0], o[1], o[2], o[3]);
                    break;
                case "v2":
                    s.uniform2f(i, o.x, o.y);
                    break;
                case "v3":
                    s.uniform3f(i, o.x, o.y, o.z);
                    break;
                case "v4":
                    s.uniform4f(i, o.x, o.y, o.z, o.w);
                    break;
                case "1iv":
                    s.uniform1iv(i, o);
                    break;
                case "2iv":
                    s.uniform2iv(i, o);
                    break;
                case "3iv":
                    s.uniform3iv(i, o);
                    break;
                case "4iv":
                    s.uniform4iv(i, o);
                    break;
                case "1fv":
                    s.uniform1fv(i, o);
                    break;
                case "2fv":
                    s.uniform2fv(i, o);
                    break;
                case "3fv":
                    s.uniform3fv(i, o);
                    break;
                case "4fv":
                    s.uniform4fv(i, o);
                    break;
                case "m2":
                case "mat2":
                case "Matrix2fv":
                    s.uniformMatrix2fv(i, t.transpose, o);
                    break;
                case "m3":
                case "mat3":
                case "Matrix3fv":
                    s.uniformMatrix3fv(i, t.transpose, o);
                    break;
                case "m4":
                case "mat4":
                case "Matrix4fv":
                    s.uniformMatrix4fv(i, t.transpose, o);
                    break;
                case "c":
                    "number" == typeof o && (o = n.hex2rgb(o)),
                    s.uniform3f(i, o[0], o[1], o[2]);
                    break;
                case "iv1":
                    s.uniform1iv(i, o);
                    break;
                case "iv":
                    s.uniform3iv(i, o);
                    break;
                case "fv1":
                    s.uniform1fv(i, o);
                    break;
                case "fv":
                    s.uniform3fv(i, o);
                    break;
                case "v2v":
                    for (t._array || (t._array = new Float32Array(2 * o.length)),
                    e = 0,
                    r = o.length; r > e; ++e)
                        t._array[2 * e] = o[e].x,
                        t._array[2 * e + 1] = o[e].y;
                    s.uniform2fv(i, t._array);
                    break;
                case "v3v":
                    for (t._array || (t._array = new Float32Array(3 * o.length)),
                    e = 0,
                    r = o.length; r > e; ++e)
                        t._array[3 * e] = o[e].x,
                        t._array[3 * e + 1] = o[e].y,
                        t._array[3 * e + 2] = o[e].z;
                    s.uniform3fv(i, t._array);
                    break;
                case "v4v":
                    for (t._array || (t._array = new Float32Array(4 * o.length)),
                    e = 0,
                    r = o.length; r > e; ++e)
                        t._array[4 * e] = o[e].x,
                        t._array[4 * e + 1] = o[e].y,
                        t._array[4 * e + 2] = o[e].z,
                        t._array[4 * e + 3] = o[e].w;
                    s.uniform4fv(i, t._array);
                    break;
                case "t":
                case "sampler2D":
                    if (!t.value || !t.value.baseTexture.hasLoaded)
                        break;
                    s.activeTexture(s["TEXTURE" + this.textureCount]);
                    var a = t.value.baseTexture._glTextures[s.id];
                    a || (this.initSampler2D(t),
                    a = t.value.baseTexture._glTextures[s.id]),
                    s.bindTexture(s.TEXTURE_2D, a),
                    s.uniform1i(t._location, this.textureCount),
                    this.textureCount++;
                    break;
                default:
                    console.warn("Pixi.js Shader Warning: Unknown uniform type: " + t.type)
                }
            }
            ,
            i.prototype.syncUniforms = function() {
                this.textureCount = 1;
                for (var t in this.uniforms)
                    this.syncUniform(this.uniforms[t])
            }
            ,
            i.prototype.initSampler2D = function(t) {
                var e = this.gl
                  , r = t.value.baseTexture;
                if (r.hasLoaded)
                    if (t.textureData) {
                        var i = t.textureData;
                        r._glTextures[e.id] = e.createTexture(),
                        e.bindTexture(e.TEXTURE_2D, r._glTextures[e.id]),
                        e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, r.premultipliedAlpha),
                        e.texImage2D(e.TEXTURE_2D, 0, i.luminance ? e.LUMINANCE : e.RGBA, e.RGBA, e.UNSIGNED_BYTE, r.source),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, i.magFilter ? i.magFilter : e.LINEAR),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, i.wrapS ? i.wrapS : e.CLAMP_TO_EDGE),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, i.wrapS ? i.wrapS : e.CLAMP_TO_EDGE),
                        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, i.wrapT ? i.wrapT : e.CLAMP_TO_EDGE)
                    } else
                        this.shaderManager.renderer.updateTexture(r)
            }
            ,
            i.prototype.destroy = function() {
                this.gl.deleteProgram(this.program),
                this.gl = null,
                this.uniforms = null,
                this.attributes = null,
                this.vertexSrc = null,
                this.fragmentSrc = null
            }
            ,
            i.prototype._glCompile = function(t, e) {
                var r = this.gl.createShader(t);
                return this.gl.shaderSource(r, e),
                this.gl.compileShader(r),
                this.gl.getShaderParameter(r, this.gl.COMPILE_STATUS) ? r : (console.log(this.gl.getShaderInfoLog(r)),
                null)
            }
        }
        , {
            "../../../utils": 76
        }],
        61: [function(t, e, r) {
            function i(t, e, r, o, s) {
                var a = {
                    uSampler: {
                        type: "sampler2D",
                        value: 0
                    },
                    projectionMatrix: {
                        type: "mat3",
                        value: new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1])
                    }
                };
                if (o)
                    for (var h in o)
                        a[h] = o[h];
                var l = {
                    aVertexPosition: 0,
                    aTextureCoord: 0,
                    aColor: 0
                };
                if (s)
                    for (var u in s)
                        l[u] = s[u];
                e = e || i.defaultVertexSrc,
                r = r || i.defaultFragmentSrc,
                n.call(this, t, e, r, a, l)
            }
            var n = t("./Shader");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.defaultVertexSrc = ["precision lowp float;", "attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform mat3 projectionMatrix;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "void main(void){", "   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"].join("\n"),
            i.defaultFragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void){", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"].join("\n")
        }
        , {
            "./Shader": 60
        }],
        62: [function(t, e, r) {
            function i(t) {
                n.call(this, t)
            }
            var n = t("../managers/WebGLManager");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.start = function() {}
            ,
            i.prototype.stop = function() {
                this.flush()
            }
            ,
            i.prototype.flush = function() {}
            ,
            i.prototype.render = function(t) {}
        }
        , {
            "../managers/WebGLManager": 57
        }],
        63: [function(t, e, r) {
            function i(t) {
                this.gl = t,
                this.vertices = new Float32Array([0, 0, 200, 0, 200, 200, 0, 200]),
                this.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
                this.colors = new Float32Array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]),
                this.indices = new Uint16Array([0, 1, 2, 0, 3, 2]),
                this.vertexBuffer = t.createBuffer(),
                this.indexBuffer = t.createBuffer(),
                t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
                t.bufferData(t.ARRAY_BUFFER, 128, t.DYNAMIC_DRAW),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW),
                this.upload()
            }
            i.prototype.constructor = i,
            i.prototype.map = function(t, e) {
                var r = 0
                  , i = 0;
                this.uvs[0] = r,
                this.uvs[1] = i,
                this.uvs[2] = r + e.width / t.width,
                this.uvs[3] = i,
                this.uvs[4] = r + e.width / t.width,
                this.uvs[5] = i + e.height / t.height,
                this.uvs[6] = r,
                this.uvs[7] = i + e.height / t.height,
                r = e.x,
                i = e.y,
                this.vertices[0] = r,
                this.vertices[1] = i,
                this.vertices[2] = r + e.width,
                this.vertices[3] = i,
                this.vertices[4] = r + e.width,
                this.vertices[5] = i + e.height,
                this.vertices[6] = r,
                this.vertices[7] = i + e.height,
                this.upload()
            }
            ,
            i.prototype.upload = function() {
                var t = this.gl;
                t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
                t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices),
                t.bufferSubData(t.ARRAY_BUFFER, 32, this.uvs),
                t.bufferSubData(t.ARRAY_BUFFER, 64, this.colors)
            }
            ,
            e.exports = i
        }
        , {}],
        64: [function(t, e, r) {
            var i = t("../../../math")
              , n = t("../../../utils")
              , o = t("../../../const")
              , s = t("./StencilMaskStack")
              , a = function(t, e, r, a, h, l) {
                if (this.gl = t,
                this.frameBuffer = null,
                this.texture = null,
                this.size = new i.Rectangle(0,0,1,1),
                this.resolution = h || o.RESOLUTION,
                this.projectionMatrix = new i.Matrix,
                this.transform = null,
                this.frame = null,
                this.stencilBuffer = null,
                this.stencilMaskStack = new s,
                this.filterStack = [{
                    renderTarget: this,
                    filter: [],
                    bounds: this.size
                }],
                this.scaleMode = a || o.SCALE_MODES.DEFAULT,
                this.root = l,
                !this.root) {
                    this.frameBuffer = t.createFramebuffer(),
                    this.texture = t.createTexture(),
                    t.bindTexture(t.TEXTURE_2D, this.texture),
                    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, a === o.SCALE_MODES.LINEAR ? t.LINEAR : t.NEAREST),
                    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, a === o.SCALE_MODES.LINEAR ? t.LINEAR : t.NEAREST);
                    var u = n.isPowerOfTwo(e, r);
                    u ? (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT),
                    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT)) : (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE),
                    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE)),
                    t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer),
                    t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0)
                }
                this.resize(e, r)
            };
            a.prototype.constructor = a,
            e.exports = a,
            a.prototype.clear = function(t) {
                var e = this.gl;
                t && e.bindFramebuffer(e.FRAMEBUFFER, this.frameBuffer),
                e.clearColor(0, 0, 0, 0),
                e.clear(e.COLOR_BUFFER_BIT)
            }
            ,
            a.prototype.attachStencilBuffer = function() {
                if (!this.stencilBuffer && !this.root) {
                    var t = this.gl;
                    this.stencilBuffer = t.createRenderbuffer(),
                    t.bindRenderbuffer(t.RENDERBUFFER, this.stencilBuffer),
                    t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.stencilBuffer),
                    t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_STENCIL, this.size.width * this.resolution, this.size.height * this.resolution)
                }
            }
            ,
            a.prototype.activate = function() {
                var t = this.gl;
                t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer);
                var e = this.frame || this.size;
                this.calculateProjection(e),
                this.transform && this.projectionMatrix.append(this.transform),
                t.viewport(0, 0, e.width * this.resolution, e.height * this.resolution)
            }
            ,
            a.prototype.calculateProjection = function(t) {
                var e = this.projectionMatrix;
                e.identity(),
                this.root ? (e.a = 1 / t.width * 2,
                e.d = -1 / t.height * 2,
                e.tx = -1 - t.x * e.a,
                e.ty = 1 - t.y * e.d) : (e.a = 1 / t.width * 2,
                e.d = 1 / t.height * 2,
                e.tx = -1 - t.x * e.a,
                e.ty = -1 - t.y * e.d)
            }
            ,
            a.prototype.resize = function(t, e) {
                if (t = 0 | t,
                e = 0 | e,
                this.size.width !== t || this.size.height !== e) {
                    if (this.size.width = t,
                    this.size.height = e,
                    !this.root) {
                        var r = this.gl;
                        r.bindTexture(r.TEXTURE_2D, this.texture),
                        r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, t * this.resolution, e * this.resolution, 0, r.RGBA, r.UNSIGNED_BYTE, null),
                        this.stencilBuffer && (r.bindRenderbuffer(r.RENDERBUFFER, this.stencilBuffer),
                        r.renderbufferStorage(r.RENDERBUFFER, r.DEPTH_STENCIL, t * this.resolution, e * this.resolution))
                    }
                    var i = this.frame || this.size;
                    this.calculateProjection(i)
                }
            }
            ,
            a.prototype.destroy = function() {
                var t = this.gl;
                t.deleteFramebuffer(this.frameBuffer),
                t.deleteTexture(this.texture),
                this.frameBuffer = null,
                this.texture = null
            }
        }
        , {
            "../../../const": 22,
            "../../../math": 32,
            "../../../utils": 76,
            "./StencilMaskStack": 65
        }],
        65: [function(t, e, r) {
            function i() {
                this.stencilStack = [],
                this.reverse = !0,
                this.count = 0
            }
            i.prototype.constructor = i,
            e.exports = i
        }
        , {}],
        66: [function(t, e, r) {
            function i(t) {
                s.call(this),
                this.anchor = new n.Point,
                this._texture = null,
                this._width = 0,
                this._height = 0,
                this.tint = 16777215,
                this.blendMode = l.BLEND_MODES.NORMAL,
                this.shader = null,
                this.cachedTint = 16777215,
                this.texture = t || o.EMPTY
            }
            var n = t("../math")
              , o = t("../textures/Texture")
              , s = t("../display/Container")
              , a = t("../renderers/canvas/utils/CanvasTinter")
              , h = t("../utils")
              , l = t("../const")
              , u = new n.Point;
            i.prototype = Object.create(s.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                width: {
                    get: function() {
                        return this.scale.x * this.texture._frame.width
                    },
                    set: function(t) {
                        this.scale.x = t / this.texture._frame.width,
                        this._width = t
                    }
                },
                height: {
                    get: function() {
                        return this.scale.y * this.texture._frame.height
                    },
                    set: function(t) {
                        this.scale.y = t / this.texture._frame.height,
                        this._height = t
                    }
                },
                texture: {
                    get: function() {
                        return this._texture
                    },
                    set: function(t) {
                        this._texture !== t && (this._texture = t,
                        this.cachedTint = 16777215,
                        t && (t.baseTexture.hasLoaded ? this._onTextureUpdate() : t.once("update", this._onTextureUpdate, this)))
                    }
                }
            }),
            i.prototype._onTextureUpdate = function() {
                this._width && (this.scale.x = this._width / this.texture.frame.width),
                this._height && (this.scale.y = this._height / this.texture.frame.height)
            }
            ,
            i.prototype._renderWebGL = function(t) {
                t.setObjectRenderer(t.plugins.sprite),
                t.plugins.sprite.render(this)
            }
            ,
            i.prototype.getBounds = function(t) {
                if (!this._currentBounds) {
                    var e, r, i, n, o = this._texture._frame.width, s = this._texture._frame.height, a = o * (1 - this.anchor.x), h = o * -this.anchor.x, l = s * (1 - this.anchor.y), u = s * -this.anchor.y, c = t || this.worldTransform, p = c.a, d = c.b, f = c.c, v = c.d, g = c.tx, m = c.ty;
                    if (0 === d && 0 === f)
                        0 > p && (p *= -1),
                        0 > v && (v *= -1),
                        e = p * h + g,
                        r = p * a + g,
                        i = v * u + m,
                        n = v * l + m;
                    else {
                        var y = p * h + f * u + g
                          , x = v * u + d * h + m
                          , b = p * a + f * u + g
                          , _ = v * u + d * a + m
                          , T = p * a + f * l + g
                          , E = v * l + d * a + m
                          , S = p * h + f * l + g
                          , A = v * l + d * h + m;
                        e = y,
                        e = e > b ? b : e,
                        e = e > T ? T : e,
                        e = e > S ? S : e,
                        i = x,
                        i = i > _ ? _ : i,
                        i = i > E ? E : i,
                        i = i > A ? A : i,
                        r = y,
                        r = b > r ? b : r,
                        r = T > r ? T : r,
                        r = S > r ? S : r,
                        n = x,
                        n = _ > n ? _ : n,
                        n = E > n ? E : n,
                        n = A > n ? A : n
                    }
                    if (this.children.length) {
                        var w = this.containerGetBounds();
                        a = w.x,
                        h = w.x + w.width,
                        l = w.y,
                        u = w.y + w.height,
                        e = a > e ? e : a,
                        i = l > i ? i : l,
                        r = r > h ? r : h,
                        n = n > u ? n : u
                    }
                    var C = this._bounds;
                    C.x = e,
                    C.width = r - e,
                    C.y = i,
                    C.height = n - i,
                    this._currentBounds = C
                }
                return this._currentBounds
            }
            ,
            i.prototype.getLocalBounds = function() {
                return this._bounds.x = -this._texture._frame.width * this.anchor.x,
                this._bounds.y = -this._texture._frame.height * this.anchor.y,
                this._bounds.width = this._texture._frame.width,
                this._bounds.height = this._texture._frame.height,
                this._bounds
            }
            ,
            i.prototype.containsPoint = function(t) {
                this.worldTransform.applyInverse(t, u);
                var e, r = this._texture._frame.width, i = this._texture._frame.height, n = -r * this.anchor.x;
                return u.x > n && u.x < n + r && (e = -i * this.anchor.y,
                u.y > e && u.y < e + i) ? !0 : !1
            }
            ,
            i.prototype._renderCanvas = function(t) {
                if (!(this.texture.crop.width <= 0 || this.texture.crop.height <= 0) && (this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode,
                t.context.globalCompositeOperation = t.blendModes[t.currentBlendMode]),
                this.texture.valid)) {
                    var e, r, i, n, o = this._texture, s = this.worldTransform;
                    if (t.context.globalAlpha = this.worldAlpha,
                    t.smoothProperty && t.currentScaleMode !== o.baseTexture.scaleMode && (t.currentScaleMode = o.baseTexture.scaleMode,
                    t.context[t.smoothProperty] = t.currentScaleMode === l.SCALE_MODES.LINEAR),
                    o.rotate) {
                        var h = s.a
                          , u = s.b;
                        s.a = -s.c,
                        s.b = -s.d,
                        s.c = h,
                        s.d = u,
                        i = o.crop.height,
                        n = o.crop.width,
                        e = o.trim ? o.trim.y - this.anchor.y * o.trim.height : this.anchor.y * -o._frame.height,
                        r = o.trim ? o.trim.x - this.anchor.x * o.trim.width : this.anchor.x * -o._frame.width
                    } else
                        i = o.crop.width,
                        n = o.crop.height,
                        e = o.trim ? o.trim.x - this.anchor.x * o.trim.width : this.anchor.x * -o._frame.width,
                        r = o.trim ? o.trim.y - this.anchor.y * o.trim.height : this.anchor.y * -o._frame.height;
                    t.roundPixels ? (t.context.setTransform(s.a, s.b, s.c, s.d, s.tx * t.resolution | 0, s.ty * t.resolution | 0),
                    e = 0 | e,
                    r = 0 | r) : t.context.setTransform(s.a, s.b, s.c, s.d, s.tx * t.resolution, s.ty * t.resolution);
                    var c = o.baseTexture.resolution;
                    16777215 !== this.tint ? (this.cachedTint !== this.tint && (this.cachedTint = this.tint,
                    this.tintedTexture = a.getTintedTexture(this, this.tint)),
                    t.context.drawImage(this.tintedTexture, 0, 0, i * c, n * c, e * t.resolution, r * t.resolution, i * t.resolution, n * t.resolution)) : t.context.drawImage(o.baseTexture.source, o.crop.x * c, o.crop.y * c, i * c, n * c, e * t.resolution, r * t.resolution, i * t.resolution, n * t.resolution)
                }
            }
            ,
            i.prototype.destroy = function(t, e) {
                s.prototype.destroy.call(this),
                this.anchor = null,
                t && this._texture.destroy(e),
                this._texture = null,
                this.shader = null
            }
            ,
            i.fromFrame = function(t) {
                var e = h.TextureCache[t];
                if (!e)
                    throw new Error('The frameId "' + t + '" does not exist in the texture cache');

                return new i(e)
            }
            ,
            i.fromImage = function(t, e, r) {
                return new i(o.fromImage(t, e, r))
            }
        }
        , {
            "../const": 22,
            "../display/Container": 23,
            "../math": 32,
            "../renderers/canvas/utils/CanvasTinter": 47,
            "../textures/Texture": 71,
            "../utils": 76
        }],
        67: [function(t, e, r) {
            function i(t) {
                n.call(this, t),
                this.vertSize = 5,
                this.vertByteSize = 4 * this.vertSize,
                this.size = s.SPRITE_BATCH_SIZE;
                var e = 4 * this.size * this.vertByteSize
                  , r = 6 * this.size;
                this.vertices = new ArrayBuffer(e),
                this.positions = new Float32Array(this.vertices),
                this.colors = new Uint32Array(this.vertices),
                this.indices = new Uint16Array(r);
                for (var i = 0, o = 0; r > i; i += 6,
                o += 4)
                    this.indices[i + 0] = o + 0,
                    this.indices[i + 1] = o + 1,
                    this.indices[i + 2] = o + 2,
                    this.indices[i + 3] = o + 0,
                    this.indices[i + 4] = o + 2,
                    this.indices[i + 5] = o + 3;
                this.currentBatchSize = 0,
                this.sprites = [],
                this.shader = null
            }
            var n = t("../../renderers/webgl/utils/ObjectRenderer")
              , o = t("../../renderers/webgl/WebGLRenderer")
              , s = t("../../const");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            o.registerPlugin("sprite", i),
            i.prototype.onContextChange = function() {
                var t = this.renderer.gl;
                this.shader = this.renderer.shaderManager.defaultShader,
                this.vertexBuffer = t.createBuffer(),
                this.indexBuffer = t.createBuffer(),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW),
                t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
                t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW),
                this.currentBlendMode = 99999
            }
            ,
            i.prototype.render = function(t) {
                var e = t._texture;
                this.currentBatchSize >= this.size && this.flush();
                var r = e._uvs;
                if (r) {
                    var i, n, o, s, a = t.anchor.x, h = t.anchor.y;
                    if (e.trim) {
                        var l = e.trim;
                        n = l.x - a * l.width,
                        i = n + e.crop.width,
                        s = l.y - h * l.height,
                        o = s + e.crop.height
                    } else
                        i = e._frame.width * (1 - a),
                        n = e._frame.width * -a,
                        o = e._frame.height * (1 - h),
                        s = e._frame.height * -h;
                    var u = this.currentBatchSize * this.vertByteSize
                      , c = t.worldTransform
                      , p = c.a
                      , d = c.b
                      , f = c.c
                      , v = c.d
                      , g = c.tx
                      , m = c.ty
                      , y = this.colors
                      , x = this.positions;
                    this.renderer.roundPixels ? (x[u] = p * n + f * s + g | 0,
                    x[u + 1] = v * s + d * n + m | 0,
                    x[u + 5] = p * i + f * s + g | 0,
                    x[u + 6] = v * s + d * i + m | 0,
                    x[u + 10] = p * i + f * o + g | 0,
                    x[u + 11] = v * o + d * i + m | 0,
                    x[u + 15] = p * n + f * o + g | 0,
                    x[u + 16] = v * o + d * n + m | 0) : (x[u] = p * n + f * s + g,
                    x[u + 1] = v * s + d * n + m,
                    x[u + 5] = p * i + f * s + g,
                    x[u + 6] = v * s + d * i + m,
                    x[u + 10] = p * i + f * o + g,
                    x[u + 11] = v * o + d * i + m,
                    x[u + 15] = p * n + f * o + g,
                    x[u + 16] = v * o + d * n + m),
                    x[u + 2] = r.x0,
                    x[u + 3] = r.y0,
                    x[u + 7] = r.x1,
                    x[u + 8] = r.y1,
                    x[u + 12] = r.x2,
                    x[u + 13] = r.y2,
                    x[u + 17] = r.x3,
                    x[u + 18] = r.y3;
                    var b = t.tint;
                    y[u + 4] = y[u + 9] = y[u + 14] = y[u + 19] = (b >> 16) + (65280 & b) + ((255 & b) << 16) + (255 * t.worldAlpha << 24),
                    this.sprites[this.currentBatchSize++] = t
                }
            }
            ,
            i.prototype.flush = function() {
                if (0 !== this.currentBatchSize) {
                    var t, e = this.renderer.gl;
                    if (this.currentBatchSize > .5 * this.size)
                        e.bufferSubData(e.ARRAY_BUFFER, 0, this.vertices);
                    else {
                        var r = this.positions.subarray(0, this.currentBatchSize * this.vertByteSize);
                        e.bufferSubData(e.ARRAY_BUFFER, 0, r)
                    }
                    for (var i, n, o, s, a = 0, h = 0, l = null, u = this.renderer.blendModeManager.currentBlendMode, c = null, p = !1, d = !1, f = 0, v = this.currentBatchSize; v > f; f++)
                        s = this.sprites[f],
                        i = s._texture.baseTexture,
                        n = s.blendMode,
                        o = s.shader || this.shader,
                        p = u !== n,
                        d = c !== o,
                        (l !== i || p || d) && (this.renderBatch(l, a, h),
                        h = f,
                        a = 0,
                        l = i,
                        p && (u = n,
                        this.renderer.blendModeManager.setBlendMode(u)),
                        d && (c = o,
                        t = c.shaders ? c.shaders[e.id] : c,
                        t || (t = c.getShader(this.renderer)),
                        this.renderer.shaderManager.setShader(t),
                        t.uniforms.projectionMatrix.value = this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),
                        t.syncUniforms(),
                        e.activeTexture(e.TEXTURE0))),
                        a++;
                    this.renderBatch(l, a, h),
                    this.currentBatchSize = 0
                }
            }
            ,
            i.prototype.renderBatch = function(t, e, r) {
                if (0 !== e) {
                    var i = this.renderer.gl;
                    t._glTextures[i.id] ? i.bindTexture(i.TEXTURE_2D, t._glTextures[i.id]) : this.renderer.updateTexture(t),
                    i.drawElements(i.TRIANGLES, 6 * e, i.UNSIGNED_SHORT, 6 * r * 2),
                    this.renderer.drawCount++
                }
            }
            ,
            i.prototype.start = function() {
                var t = this.renderer.gl;
                t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
                t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
                var e = this.vertByteSize;
                t.vertexAttribPointer(this.shader.attributes.aVertexPosition, 2, t.FLOAT, !1, e, 0),
                t.vertexAttribPointer(this.shader.attributes.aTextureCoord, 2, t.FLOAT, !1, e, 8),
                t.vertexAttribPointer(this.shader.attributes.aColor, 4, t.UNSIGNED_BYTE, !0, e, 16)
            }
            ,
            i.prototype.destroy = function() {
                this.renderer.gl.deleteBuffer(this.vertexBuffer),
                this.renderer.gl.deleteBuffer(this.indexBuffer),
                this.shader.destroy(),
                this.renderer = null,
                this.vertices = null,
                this.positions = null,
                this.colors = null,
                this.indices = null,
                this.vertexBuffer = null,
                this.indexBuffer = null,
                this.sprites = null,
                this.shader = null
            }
        }
        , {
            "../../const": 22,
            "../../renderers/webgl/WebGLRenderer": 48,
            "../../renderers/webgl/utils/ObjectRenderer": 62
        }],
        68: [function(t, e, r) {
            function i(t, e, r) {
                this.canvas = document.createElement("canvas"),
                this.context = this.canvas.getContext("2d"),
                this.resolution = r || h.RESOLUTION,
                this._text = null,
                this._style = null;
                var i = o.fromCanvas(this.canvas);
                i.trim = new s.Rectangle,
                n.call(this, i),
                this.text = t,
                this.style = e
            }
            var n = t("../sprites/Sprite")
              , o = t("../textures/Texture")
              , s = t("../math")
              , a = t("../utils")
              , h = t("../const");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.fontPropertiesCache = {},
            i.fontPropertiesCanvas = document.createElement("canvas"),
            i.fontPropertiesContext = i.fontPropertiesCanvas.getContext("2d"),
            Object.defineProperties(i.prototype, {
                width: {
                    get: function() {
                        return this.dirty && this.updateText(),
                        this.scale.x * this._texture._frame.width
                    },
                    set: function(t) {
                        this.scale.x = t / this._texture._frame.width,
                        this._width = t
                    }
                },
                height: {
                    get: function() {
                        return this.dirty && this.updateText(),
                        this.scale.y * this._texture._frame.height
                    },
                    set: function(t) {
                        this.scale.y = t / this._texture._frame.height,
                        this._height = t
                    }
                },
                style: {
                    get: function() {
                        return this._style
                    },
                    set: function(t) {
                        t = t || {},
                        "number" == typeof t.fill && (t.fill = a.hex2string(t.fill)),
                        "number" == typeof t.stroke && (t.stroke = a.hex2string(t.stroke)),
                        "number" == typeof t.dropShadowColor && (t.dropShadowColor = a.hex2string(t.dropShadowColor)),
                        t.font = t.font || "bold 20pt Arial",
                        t.fill = t.fill || "black",
                        t.align = t.align || "left",
                        t.stroke = t.stroke || "black",
                        t.strokeThickness = t.strokeThickness || 0,
                        t.wordWrap = t.wordWrap || !1,
                        t.wordWrapWidth = t.wordWrapWidth || 100,
                        t.dropShadow = t.dropShadow || !1,
                        t.dropShadowColor = t.dropShadowColor || "#000000",
                        t.dropShadowAngle = t.dropShadowAngle || Math.PI / 6,
                        t.dropShadowDistance = t.dropShadowDistance || 5,
                        t.padding = t.padding || 0,
                        t.textBaseline = t.textBaseline || "alphabetic",
                        t.lineJoin = t.lineJoin || "miter",
                        t.miterLimit = t.miterLimit || 10,
                        this._style = t,
                        this.dirty = !0
                    }
                },
                text: {
                    get: function() {
                        return this._text
                    },
                    set: function(t) {
                        t = t.toString() || " ",
                        this._text !== t && (this._text = t,
                        this.dirty = !0)
                    }
                }
            }),
            i.prototype.updateText = function() {
                var t = this._style;
                this.context.font = t.font;
                for (var e = t.wordWrap ? this.wordWrap(this._text) : this._text, r = e.split(/(?:\r\n|\r|\n)/), i = new Array(r.length), n = 0, o = this.determineFontProperties(t.font), s = 0; s < r.length; s++) {
                    var a = this.context.measureText(r[s]).width;
                    i[s] = a,
                    n = Math.max(n, a)
                }
                var h = n + t.strokeThickness;
                t.dropShadow && (h += t.dropShadowDistance),
                this.canvas.width = (h + this.context.lineWidth) * this.resolution;
                var l = this.style.lineHeight || o.fontSize + t.strokeThickness
                  , u = l * r.length;
                t.dropShadow && (u += t.dropShadowDistance),
                this.canvas.height = (u + 2 * this._style.padding) * this.resolution,
                this.context.scale(this.resolution, this.resolution),
                navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height),
                this.context.font = t.font,
                this.context.strokeStyle = t.stroke,
                this.context.lineWidth = t.strokeThickness,
                this.context.textBaseline = t.textBaseline,
                this.context.lineJoin = t.lineJoin,
                this.context.miterLimit = t.miterLimit;
                var c, p;
                if (t.dropShadow) {
                    this.context.fillStyle = t.dropShadowColor;
                    var d = Math.cos(t.dropShadowAngle) * t.dropShadowDistance
                      , f = Math.sin(t.dropShadowAngle) * t.dropShadowDistance;
                    for (s = 0; s < r.length; s++)
                        c = t.strokeThickness / 2,
                        p = t.strokeThickness / 2 + s * l + o.ascent,
                        "right" === t.align ? c += n - i[s] : "center" === t.align && (c += (n - i[s]) / 2),
                        t.fill && this.context.fillText(r[s], c + d, p + f + this._style.padding)
                }
                for (this.context.fillStyle = t.fill,
                s = 0; s < r.length; s++)
                    c = t.strokeThickness / 2,
                    p = t.strokeThickness / 2 + s * l + o.ascent,
                    "right" === t.align ? c += n - i[s] : "center" === t.align && (c += (n - i[s]) / 2),
                    t.stroke && t.strokeThickness && this.context.strokeText(r[s], c, p + this._style.padding),
                    t.fill && this.context.fillText(r[s], c, p + this._style.padding);
                this.updateTexture()
            }
            ,
            i.prototype.updateTexture = function() {
                var t = this._texture;
                t.baseTexture.hasLoaded = !0,
                t.baseTexture.resolution = this.resolution,
                t.baseTexture.width = this.canvas.width / this.resolution,
                t.baseTexture.height = this.canvas.height / this.resolution,
                t.crop.width = t._frame.width = this.canvas.width / this.resolution,
                t.crop.height = t._frame.height = this.canvas.height / this.resolution,
                t.trim.x = 0,
                t.trim.y = -this._style.padding,
                t.trim.width = t._frame.width,
                t.trim.height = t._frame.height - 2 * this._style.padding,
                this._width = this.canvas.width / this.resolution,
                this._height = this.canvas.height / this.resolution,
                t.baseTexture.emit("update", t.baseTexture),
                this.dirty = !1
            }
            ,
            i.prototype.renderWebGL = function(t) {
                this.dirty && this.updateText(),
                n.prototype.renderWebGL.call(this, t)
            }
            ,
            i.prototype._renderCanvas = function(t) {
                this.dirty && this.updateText(),
                n.prototype._renderCanvas.call(this, t)
            }
            ,
            i.prototype.determineFontProperties = function(t) {
                var e = i.fontPropertiesCache[t];
                if (!e) {
                    e = {};
                    var r = i.fontPropertiesCanvas
                      , n = i.fontPropertiesContext;
                    n.font = t;
                    var o = Math.ceil(n.measureText("|MÉq").width)
                      , s = Math.ceil(n.measureText("M").width)
                      , a = 2 * s;
                    s = 1.4 * s | 0,
                    r.width = o,
                    r.height = a,
                    n.fillStyle = "#f00",
                    n.fillRect(0, 0, o, a),
                    n.font = t,
                    n.textBaseline = "alphabetic",
                    n.fillStyle = "#000",
                    n.fillText("|MÉq", 0, s);
                    var h, l, u = n.getImageData(0, 0, o, a).data, c = u.length, p = 4 * o, d = 0, f = !1;
                    for (h = 0; s > h; h++) {
                        for (l = 0; p > l; l += 4)
                            if (255 !== u[d + l]) {
                                f = !0;
                                break
                            }
                        if (f)
                            break;
                        d += p
                    }
                    for (e.ascent = s - h,
                    d = c - p,
                    f = !1,
                    h = a; h > s; h--) {
                        for (l = 0; p > l; l += 4)
                            if (255 !== u[d + l]) {
                                f = !0;
                                break
                            }
                        if (f)
                            break;
                        d -= p
                    }
                    e.descent = h - s,
                    e.fontSize = e.ascent + e.descent,
                    i.fontPropertiesCache[t] = e
                }
                return e
            }
            ,
            i.prototype.wordWrap = function(t) {
                for (var e = "", r = t.split("\n"), i = this._style.wordWrapWidth, n = 0; n < r.length; n++) {
                    for (var o = i, s = r[n].split(" "), a = 0; a < s.length; a++) {
                        var h = this.context.measureText(s[a]).width
                          , l = h + this.context.measureText(" ").width;
                        0 === a || l > o ? (a > 0 && (e += "\n"),
                        e += s[a],
                        o = i - h) : (o -= l,
                        e += " " + s[a])
                    }
                    n < r.length - 1 && (e += "\n")
                }
                return e
            }
            ,
            i.prototype.getBounds = function(t) {
                return this.dirty && this.updateText(),
                n.prototype.getBounds.call(this, t)
            }
            ,
            i.prototype.destroy = function(t) {
                this.context = null,
                this.canvas = null,
                this._style = null,
                this._texture.destroy(void 0 === t ? !0 : t)
            }
        }
        , {
            "../const": 22,
            "../math": 32,
            "../sprites/Sprite": 66,
            "../textures/Texture": 71,
            "../utils": 76
        }],
        69: [function(t, e, r) {
            function i(t, e, r) {
                s.call(this),
                this.uid = n.uid(),
                this.resolution = r || 1,
                this.width = 100,
                this.height = 100,
                this.realWidth = 100,
                this.realHeight = 100,
                this.scaleMode = e || o.SCALE_MODES.DEFAULT,
                this.hasLoaded = !1,
                this.isLoading = !1,
                this.source = null,
                this.premultipliedAlpha = !0,
                this.imageUrl = null,
                this.isPowerOfTwo = !1,
                this.mipmap = !1,
                this._glTextures = [],
                t && this.loadSource(t)
            }
            var n = t("../utils")
              , o = t("../const")
              , s = t("eventemitter3");
            i.prototype = Object.create(s.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.update = function() {
                this.realWidth = this.source.naturalWidth || this.source.width,
                this.realHeight = this.source.naturalHeight || this.source.height,
                this.width = this.realWidth / this.resolution,
                this.height = this.realHeight / this.resolution,
                this.isPowerOfTwo = n.isPowerOfTwo(this.realWidth, this.realHeight),
                this.emit("update", this)
            }
            ,
            i.prototype.loadSource = function(t) {
                var e = this.isLoading;
                if (this.hasLoaded = !1,
                this.isLoading = !1,
                e && this.source && (this.source.onload = null,
                this.source.onerror = null),
                this.source = t,
                (this.source.complete || this.source.getContext) && this.source.width && this.source.height)
                    this._sourceLoaded();
                else if (!t.getContext) {
                    this.isLoading = !0;
                    var r = this;
                    t.onload = function() {
                        t.onload = null,
                        t.onerror = null,
                        r.isLoading && (r.isLoading = !1,
                        r._sourceLoaded(),
                        r.emit("loaded", r))
                    }
                    ,
                    t.onerror = function() {
                        t.onload = null,
                        t.onerror = null,
                        r.isLoading && (r.isLoading = !1,
                        r.emit("error", r))
                    }
                    ,
                    t.complete && t.src && (this.isLoading = !1,
                    t.onload = null,
                    t.onerror = null,
                    t.width && t.height ? (this._sourceLoaded(),
                    e && this.emit("loaded", this)) : e && this.emit("error", this))
                }
            }
            ,
            i.prototype._sourceLoaded = function() {
                this.hasLoaded = !0,
                this.update()
            }
            ,
            i.prototype.destroy = function() {
                this.imageUrl ? (delete n.BaseTextureCache[this.imageUrl],
                delete n.TextureCache[this.imageUrl],
                this.imageUrl = null,
                navigator.isCocoonJS || (this.source.src = "")) : this.source && this.source._pixiId && delete n.BaseTextureCache[this.source._pixiId],
                this.source = null,
                this.dispose()
            }
            ,
            i.prototype.dispose = function() {
                this.emit("dispose", this),
                this._glTextures.length = 0
            }
            ,
            i.prototype.updateSourceImage = function(t) {
                this.source.src = t,
                this.loadSource(this.source)
            }
            ,
            i.fromImage = function(t, e, r) {
                var o = n.BaseTextureCache[t];
                if (void 0 === e && 0 !== t.indexOf("data:") && (e = !0),
                !o) {
                    var s = new Image;
                    e && (s.crossOrigin = ""),
                    o = new i(s,r),
                    o.imageUrl = t,
                    s.src = t,
                    n.BaseTextureCache[t] = o,
                    o.resolution = n.getResolutionOfUrl(t)
                }
                return o
            }
            ,
            i.fromCanvas = function(t, e) {
                t._pixiId || (t._pixiId = "canvas_" + n.uid());
                var r = n.BaseTextureCache[t._pixiId];
                return r || (r = new i(t,e),
                n.BaseTextureCache[t._pixiId] = r),
                r
            }
        }
        , {
            "../const": 22,
            "../utils": 76,
            eventemitter3: 11
        }],
        70: [function(t, e, r) {
            function i(t, e, r, i, c) {
                if (!t)
                    throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");
                e = e || 100,
                r = r || 100,
                c = c || u.RESOLUTION;
                var p = new n;
                if (p.width = e,
                p.height = r,
                p.resolution = c,
                p.scaleMode = i || u.SCALE_MODES.DEFAULT,
                p.hasLoaded = !0,
                o.call(this, p, new l.Rectangle(0,0,e,r)),
                this.width = e,
                this.height = r,
                this.resolution = c,
                this.render = null,
                this.renderer = t,
                this.renderer.type === u.RENDERER_TYPE.WEBGL) {
                    var d = this.renderer.gl;
                    this.textureBuffer = new s(d,this.width,this.height,p.scaleMode,this.resolution),
                    this.baseTexture._glTextures[d.id] = this.textureBuffer.texture,
                    this.filterManager = new a(this.renderer),
                    this.filterManager.onContextChange(),
                    this.filterManager.resize(e, r),
                    this.render = this.renderWebGL,
                    this.renderer.currentRenderer.start(),
                    this.renderer.currentRenderTarget.activate()
                } else
                    this.render = this.renderCanvas,
                    this.textureBuffer = new h(this.width * this.resolution,this.height * this.resolution),
                    this.baseTexture.source = this.textureBuffer.canvas;
                this.valid = !0,
                this._updateUvs()
            }
            var n = t("./BaseTexture")
              , o = t("./Texture")
              , s = t("../renderers/webgl/utils/RenderTarget")
              , a = t("../renderers/webgl/managers/FilterManager")
              , h = t("../renderers/canvas/utils/CanvasBuffer")
              , l = t("../math")
              , u = t("../const")
              , c = new l.Matrix;
            i.prototype = Object.create(o.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.resize = function(t, e, r) {
                (t !== this.width || e !== this.height) && (this.valid = t > 0 && e > 0,
                this.width = this._frame.width = this.crop.width = t,
                this.height = this._frame.height = this.crop.height = e,
                r && (this.baseTexture.width = this.width,
                this.baseTexture.height = this.height),
                this.valid && (this.textureBuffer.resize(this.width, this.height),
                this.filterManager && this.filterManager.resize(this.width, this.height)))
            }
            ,
            i.prototype.clear = function() {
                this.valid && (this.renderer.type === u.RENDERER_TYPE.WEBGL && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer),
                this.textureBuffer.clear())
            }
            ,
            i.prototype.renderWebGL = function(t, e, r, i) {
                if (this.valid) {
                    if (i = void 0 !== i ? i : !0,
                    this.textureBuffer.transform = e,
                    this.textureBuffer.activate(),
                    t.worldAlpha = 1,
                    i) {
                        t.worldTransform.identity(),
                        t.currentBounds = null;
                        var n, o, s = t.children;
                        for (n = 0,
                        o = s.length; o > n; ++n)
                            s[n].updateTransform()
                    }
                    var a = this.renderer.filterManager;
                    this.renderer.filterManager = this.filterManager,
                    this.renderer.renderDisplayObject(t, this.textureBuffer, r),
                    this.renderer.filterManager = a
                }
            }
            ,
            i.prototype.renderCanvas = function(t, e, r, i) {
                if (this.valid) {
                    i = !!i;
                    var n = t.worldTransform
                      , o = c;
                    o.identity(),
                    e && o.append(e),
                    t.worldTransform = o,
                    t.worldAlpha = 1;
                    var s, a, h = t.children;
                    for (s = 0,
                    a = h.length; a > s; ++s)
                        h[s].updateTransform();
                    r && this.textureBuffer.clear(),
                    t.worldTransform = n;
                    var l = this.textureBuffer.context
                      , u = this.renderer.resolution;
                    this.renderer.resolution = this.resolution,
                    this.renderer.renderDisplayObject(t, l),
                    this.renderer.resolution = u
                }
            }
            ,
            i.prototype.destroy = function() {
                o.prototype.destroy.call(this, !0),
                this.textureBuffer.destroy(),
                this.filterManager && this.filterManager.destroy(),
                this.renderer = null
            }
            ,
            i.prototype.getImage = function() {
                var t = new Image;
                return t.src = this.getBase64(),
                t
            }
            ,
            i.prototype.getBase64 = function() {
                return this.getCanvas().toDataURL()
            }
            ,
            i.prototype.getCanvas = function() {
                if (this.renderer.type === u.RENDERER_TYPE.WEBGL) {
                    var t = this.renderer.gl
                      , e = this.textureBuffer.size.width
                      , r = this.textureBuffer.size.height
                      , i = new Uint8Array(4 * e * r);
                    t.bindFramebuffer(t.FRAMEBUFFER, this.textureBuffer.frameBuffer),
                    t.readPixels(0, 0, e, r, t.RGBA, t.UNSIGNED_BYTE, i),
                    t.bindFramebuffer(t.FRAMEBUFFER, null);
                    var n = new h(e,r)
                      , o = n.context.getImageData(0, 0, e, r);
                    return o.data.set(i),
                    n.context.putImageData(o, 0, 0),
                    n.canvas
                }
                return this.textureBuffer.canvas
            }
            ,
            i.prototype.getPixels = function() {
                var t, e;
                if (this.renderer.type === u.RENDERER_TYPE.WEBGL) {
                    var r = this.renderer.gl;
                    t = this.textureBuffer.size.width,
                    e = this.textureBuffer.size.height;
                    var i = new Uint8Array(4 * t * e);
                    return r.bindFramebuffer(r.FRAMEBUFFER, this.textureBuffer.frameBuffer),
                    r.readPixels(0, 0, t, e, r.RGBA, r.UNSIGNED_BYTE, i),
                    r.bindFramebuffer(r.FRAMEBUFFER, null),
                    i
                }
                return t = this.textureBuffer.canvas.width,
                e = this.textureBuffer.canvas.height,
                this.textureBuffer.canvas.getContext("2d").getImageData(0, 0, t, e).data
            }
            ,
            i.prototype.getPixel = function(t, e) {
                if (this.renderer.type === u.RENDERER_TYPE.WEBGL) {
                    var r = this.renderer.gl
                      , i = new Uint8Array(4);
                    return r.bindFramebuffer(r.FRAMEBUFFER, this.textureBuffer.frameBuffer),
                    r.readPixels(t, e, 1, 1, r.RGBA, r.UNSIGNED_BYTE, i),
                    r.bindFramebuffer(r.FRAMEBUFFER, null),
                    i
                }
                return this.textureBuffer.canvas.getContext("2d").getImageData(t, e, 1, 1).data
            }
        }
        , {
            "../const": 22,
            "../math": 32,
            "../renderers/canvas/utils/CanvasBuffer": 44,
            "../renderers/webgl/managers/FilterManager": 53,
            "../renderers/webgl/utils/RenderTarget": 64,
            "./BaseTexture": 69,
            "./Texture": 71
        }],
        71: [function(t, e, r) {
            function i(t, e, r, n, o) {
                a.call(this),
                this.noFrame = !1,
                e || (this.noFrame = !0,
                e = new h.Rectangle(0,0,1,1)),
                t instanceof i && (t = t.baseTexture),
                this.baseTexture = t,
                this._frame = e,
                this.trim = n,
                this.valid = !1,
                this.requiresUpdate = !1,
                this._uvs = null,
                this.width = 0,
                this.height = 0,
                this.crop = r || e,
                this.rotate = !!o,
                t.hasLoaded ? (this.noFrame && (e = new h.Rectangle(0,0,t.width,t.height),
                t.on("update", this.onBaseTextureUpdated, this)),
                this.frame = e) : t.once("loaded", this.onBaseTextureLoaded, this)
            }
            var n = t("./BaseTexture")
              , o = t("./VideoBaseTexture")
              , s = t("./TextureUvs")
              , a = t("eventemitter3")
              , h = t("../math")
              , l = t("../utils");
            i.prototype = Object.create(a.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                frame: {
                    get: function() {
                        return this._frame
                    },
                    set: function(t) {
                        if (this._frame = t,
                        this.noFrame = !1,
                        this.width = t.width,
                        this.height = t.height,
                        !this.trim && !this.rotate && (t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height))
                            throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
                        this.valid = t && t.width && t.height && this.baseTexture.hasLoaded,
                        this.trim ? (this.width = this.trim.width,
                        this.height = this.trim.height,
                        this._frame.width = this.trim.width,
                        this._frame.height = this.trim.height) : this.crop = t,
                        this.valid && this._updateUvs()
                    }
                }
            }),
            i.prototype.update = function() {
                this.baseTexture.update()
            }
            ,
            i.prototype.onBaseTextureLoaded = function(t) {
                this.frame = this.noFrame ? new h.Rectangle(0,0,t.width,t.height) : this._frame,
                this.emit("update", this)
            }
            ,
            i.prototype.onBaseTextureUpdated = function(t) {
                this._frame.width = t.width,
                this._frame.height = t.height,
                this.emit("update", this)
            }
            ,
            i.prototype.destroy = function(t) {
                this.baseTexture && (t && this.baseTexture.destroy(),
                this.baseTexture.off("update", this.onBaseTextureUpdated, this),
                this.baseTexture.off("loaded", this.onBaseTextureLoaded, this),
                this.baseTexture = null),
                this._frame = null,
                this._uvs = null,
                this.trim = null,
                this.crop = null,
                this.valid = !1
            }
            ,
            i.prototype.clone = function() {
                return new i(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)
            }
            ,
            i.prototype._updateUvs = function() {
                this._uvs || (this._uvs = new s),
                this._uvs.set(this.crop, this.baseTexture, this.rotate)
            }
            ,
            i.fromImage = function(t, e, r) {
                var o = l.TextureCache[t];
                return o || (o = new i(n.fromImage(t, e, r)),
                l.TextureCache[t] = o),
                o
            }
            ,
            i.fromFrame = function(t) {
                var e = l.TextureCache[t];
                if (!e)
                    throw new Error('The frameId "' + t + '" does not exist in the texture cache');
                return e
            }
            ,
            i.fromCanvas = function(t, e) {
                return new i(n.fromCanvas(t, e))
            }
            ,
            i.fromVideo = function(t, e) {
                return "string" == typeof t ? i.fromVideoUrl(t, e) : new i(o.fromVideo(t, e))
            }
            ,
            i.fromVideoUrl = function(t, e) {
                return new i(o.fromUrl(t, e))
            }
            ,
            i.addTextureToCache = function(t, e) {
                l.TextureCache[e] = t
            }
            ,
            i.removeTextureFromCache = function(t) {
                var e = l.TextureCache[t];
                return delete l.TextureCache[t],
                delete l.BaseTextureCache[t],
                e
            }
            ,
            i.EMPTY = new i(new n)
        }
        , {
            "../math": 32,
            "../utils": 76,
            "./BaseTexture": 69,
            "./TextureUvs": 72,
            "./VideoBaseTexture": 73,
            eventemitter3: 11
        }],
        72: [function(t, e, r) {
            function i() {
                this.x0 = 0,
                this.y0 = 0,
                this.x1 = 1,
                this.y1 = 0,
                this.x2 = 1,
                this.y2 = 1,
                this.x3 = 0,
                this.y3 = 1
            }
            e.exports = i,
            i.prototype.set = function(t, e, r) {
                var i = e.width
                  , n = e.height;
                r ? (this.x0 = (t.x + t.height) / i,
                this.y0 = t.y / n,
                this.x1 = (t.x + t.height) / i,
                this.y1 = (t.y + t.width) / n,
                this.x2 = t.x / i,
                this.y2 = (t.y + t.width) / n,
                this.x3 = t.x / i,
                this.y3 = t.y / n) : (this.x0 = t.x / i,
                this.y0 = t.y / n,
                this.x1 = (t.x + t.width) / i,
                this.y1 = t.y / n,
                this.x2 = (t.x + t.width) / i,
                this.y2 = (t.y + t.height) / n,
                this.x3 = t.x / i,
                this.y3 = (t.y + t.height) / n)
            }
        }
        , {}],
        73: [function(t, e, r) {
            function i(t, e) {
                if (!t)
                    throw new Error("No video source element specified.");
                (t.readyState === t.HAVE_ENOUGH_DATA || t.readyState === t.HAVE_FUTURE_DATA) && t.width && t.height && (t.complete = !0),
                o.call(this, t, e),
                this.autoUpdate = !1,
                this._onUpdate = this._onUpdate.bind(this),
                this._onCanPlay = this._onCanPlay.bind(this),
                t.complete || (t.addEventListener("canplay", this._onCanPlay),
                t.addEventListener("canplaythrough", this._onCanPlay),
                t.addEventListener("play", this._onPlayStart.bind(this)),
                t.addEventListener("pause", this._onPlayStop.bind(this))),
                this.__loaded = !1
            }
            function n(t, e) {
                e || (e = "video/" + t.substr(t.lastIndexOf(".") + 1));
                var r = document.createElement("source");
                return r.src = t,
                r.type = e,
                r
            }
            var o = t("./BaseTexture")
              , s = t("../utils");
            i.prototype = Object.create(o.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype._onUpdate = function() {
                this.autoUpdate && (window.requestAnimationFrame(this._onUpdate),
                this.update())
            }
            ,
            i.prototype._onPlayStart = function() {
                this.autoUpdate || (window.requestAnimationFrame(this._onUpdate),
                this.autoUpdate = !0)
            }
            ,
            i.prototype._onPlayStop = function() {
                this.autoUpdate = !1
            }
            ,
            i.prototype._onCanPlay = function() {
                this.hasLoaded = !0,
                this.source && (this.source.removeEventListener("canplay", this._onCanPlay),
                this.source.removeEventListener("canplaythrough", this._onCanPlay),
                this.width = this.source.videoWidth,
                this.height = this.source.videoHeight,
                this.source.play(),
                this.__loaded || (this.__loaded = !0,
                this.emit("loaded", this)))
            }
            ,
            i.prototype.destroy = function() {
                this.source && this.source._pixiId && (delete s.BaseTextureCache[this.source._pixiId],
                delete this.source._pixiId),
                o.prototype.destroy.call(this)
            }
            ,
            i.fromVideo = function(t, e) {
                t._pixiId || (t._pixiId = "video_" + s.uid());
                var r = s.BaseTextureCache[t._pixiId];
                return r || (r = new i(t,e),
                s.BaseTextureCache[t._pixiId] = r),
                r
            }
            ,
            i.fromUrl = function(t, e) {
                var r = document.createElement("video");
                if (Array.isArray(t))
                    for (var o = 0; o < t.length; ++o)
                        r.appendChild(n(t.src || t, t.mime));
                else
                    r.appendChild(n(t.src || t, t.mime));
                return r.load(),
                r.play(),
                i.fromVideo(r, e)
            }
            ,
            i.fromUrls = i.fromUrl
        }
        , {
            "../utils": 76,
            "./BaseTexture": 69
        }],
        74: [function(t, e, r) {
            function i() {
                var t = this;
                this._tick = function(e) {
                    t._requestId = null,
                    t.started && (t.update(e),
                    t.started && null === t._requestId && t._emitter.listeners(s, !0) && (t._requestId = requestAnimationFrame(t._tick)))
                }
                ,
                this._emitter = new o,
                this._requestId = null,
                this._maxElapsedMS = 100,
                this.autoStart = !1,
                this.deltaTime = 1,
                this.elapsedMS = 1 / n.TARGET_FPMS,
                this.lastTime = 0,
                this.speed = 1,
                this.started = !1
            }
            var n = t("../const")
              , o = t("eventemitter3")
              , s = "tick";
            Object.defineProperties(i.prototype, {
                FPS: {
                    get: function() {
                        return 1e3 / this.elapsedMS
                    }
                },
                minFPS: {
                    get: function() {
                        return 1e3 / this._maxElapsedMS
                    },
                    set: function(t) {
                        var e = Math.min(Math.max(0, t) / 1e3, n.TARGET_FPMS);
                        this._maxElapsedMS = 1 / e
                    }
                }
            }),
            i.prototype._requestIfNeeded = function() {
                null === this._requestId && this._emitter.listeners(s, !0) && (this.lastTime = performance.now(),
                this._requestId = requestAnimationFrame(this._tick))
            }
            ,
            i.prototype._cancelIfNeeded = function() {
                null !== this._requestId && (cancelAnimationFrame(this._requestId),
                this._requestId = null)
            }
            ,
            i.prototype._startIfPossible = function() {
                this.started ? this._requestIfNeeded() : this.autoStart && this.start()
            }
            ,
            i.prototype.add = function(t, e) {
                return this._emitter.on(s, t, e),
                this._startIfPossible(),
                this
            }
            ,
            i.prototype.addOnce = function(t, e) {
                return this._emitter.once(s, t, e),
                this._startIfPossible(),
                this
            }
            ,
            i.prototype.remove = function(t, e) {
                return this._emitter.off(s, t, e),
                this._emitter.listeners(s, !0) || this._cancelIfNeeded(),
                this
            }
            ,
            i.prototype.start = function() {
                this.started || (this.started = !0,
                this._requestIfNeeded())
            }
            ,
            i.prototype.stop = function() {
                this.started && (this.started = !1,
                this._cancelIfNeeded())
            }
            ,
            i.prototype.update = function(t) {
                var e;
                t = t || performance.now(),
                e = this.elapsedMS = t - this.lastTime,
                e > this._maxElapsedMS && (e = this._maxElapsedMS),
                this.deltaTime = e * n.TARGET_FPMS * this.speed,
                this._emitter.emit(s, this.deltaTime),
                this.lastTime = t
            }
            ,
            e.exports = i
        }
        , {
            "../const": 22,
            eventemitter3: 11
        }],
        75: [function(t, e, r) {
            var i = t("./Ticker")
              , n = new i;
            n.autoStart = !0,
            e.exports = {
                shared: n,
                Ticker: i
            }
        }
        , {
            "./Ticker": 74
        }],
        76: [function(t, e, r) {
            var i = t("../const")
              , n = e.exports = {
                _uid: 0,
                _saidHello: !1,
                pluginTarget: t("./pluginTarget"),
                async: t("async"),
                uid: function() {
                    return ++n._uid
                },
                hex2rgb: function(t, e) {
                    return e = e || [],
                    e[0] = (t >> 16 & 255) / 255,
                    e[1] = (t >> 8 & 255) / 255,
                    e[2] = (255 & t) / 255,
                    e
                },
                hex2string: function(t) {
                    return t = t.toString(16),
                    t = "000000".substr(0, 6 - t.length) + t,
                    "#" + t
                },
                rgb2hex: function(t) {
                    return (255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2]
                },
                canUseNewCanvasBlendModes: function() {
                    if ("undefined" == typeof document)
                        return !1;
                    var t = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/"
                      , e = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg=="
                      , r = new Image;
                    r.src = t + "AP804Oa6" + e;
                    var i = new Image;
                    i.src = t + "/wCKxvRF" + e;
                    var n = document.createElement("canvas");
                    n.width = 6,
                    n.height = 1;
                    var o = n.getContext("2d");
                    o.globalCompositeOperation = "multiply",
                    o.drawImage(r, 0, 0),
                    o.drawImage(i, 2, 0);
                    var s = o.getImageData(2, 0, 1, 1).data;
                    return 255 === s[0] && 0 === s[1] && 0 === s[2]
                },
                getNextPowerOfTwo: function(t) {
                    if (t > 0 && 0 === (t & t - 1))
                        return t;
                    for (var e = 1; t > e; )
                        e <<= 1;
                    return e
                },
                isPowerOfTwo: function(t, e) {
                    return t > 0 && 0 === (t & t - 1) && e > 0 && 0 === (e & e - 1)
                },
                getResolutionOfUrl: function(t) {
                    var e = i.RETINA_PREFIX.exec(t);
                    return e ? parseFloat(e[1]) : 1
                },
                sayHello: function(t) {
                    if (!n._saidHello) {
                        if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                            var e = ["\n %c %c %c Pixi.js " + i.VERSION + " - ✰ " + t + " ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n", "background: #ff66a5; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff66a5; background: #030307; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "background: #ffc3dc; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;"];
                            window.console.log.apply(console, e)
                        } else
                            window.console && window.console.log("Pixi.js " + i.VERSION + " - " + t + " - http://www.pixijs.com/");
                        n._saidHello = !0
                    }
                },
                isWebGLSupported: function() {
                    var t = {
                        stencil: !0
                    };
                    try {
                        if (!window.WebGLRenderingContext)
                            return !1;
                        var e = document.createElement("canvas")
                          , r = e.getContext("webgl", t) || e.getContext("experimental-webgl", t);
                        return !(!r || !r.getContextAttributes().stencil)
                    } catch (i) {
                        return !1
                    }
                },
                TextureCache: {},
                BaseTextureCache: {}
            }
        }
        , {
            "../const": 22,
            "./pluginTarget": 77,
            async: 2
        }],
        77: [function(t, e, r) {
            function i(t) {
                t.__plugins = {},
                t.registerPlugin = function(e, r) {
                    t.__plugins[e] = r
                }
                ,
                t.prototype.initPlugins = function() {
                    this.plugins = this.plugins || {};
                    for (var e in t.__plugins)
                        this.plugins[e] = new t.__plugins[e](this)
                }
                ,
                t.prototype.destroyPlugins = function() {
                    for (var t in this.plugins)
                        this.plugins[t].destroy(),
                        this.plugins[t] = null;
                    this.plugins = null
                }
            }
            e.exports = {
                mixin: function(t) {
                    i(t)
                }
            }
        }
        , {}],
        78: [function(t, e, r) {
            var i = t("./core")
              , n = t("./mesh")
              , o = t("./extras")
              , s = t("./filters");
            i.SpriteBatch = function() {
                throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")
            }
            ,
            i.AssetLoader = function() {
                throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")
            }
            ,
            Object.defineProperties(i, {
                Stage: {
                    get: function() {
                        return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),
                        i.Container
                    }
                },
                DisplayObjectContainer: {
                    get: function() {
                        return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),
                        i.Container
                    }
                },
                Strip: {
                    get: function() {
                        return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),
                        n.Mesh
                    }
                },
                Rope: {
                    get: function() {
                        return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),
                        n.Rope
                    }
                },
                MovieClip: {
                    get: function() {
                        return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),
                        o.MovieClip
                    }
                },
                TilingSprite: {
                    get: function() {
                        return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),
                        o.TilingSprite
                    }
                },
                BitmapText: {
                    get: function() {
                        return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),
                        o.BitmapText
                    }
                },
                blendModes: {
                    get: function() {
                        return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),
                        i.BLEND_MODES
                    }
                },
                scaleModes: {
                    get: function() {
                        return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),
                        i.SCALE_MODES
                    }
                },
                BaseTextureCache: {
                    get: function() {
                        return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),
                        i.utils.BaseTextureCache
                    }
                },
                TextureCache: {
                    get: function() {
                        return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),
                        i.utils.TextureCache
                    }
                },
                math: {
                    get: function() {
                        return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),
                        i
                    }
                }
            }),
            i.Sprite.prototype.setTexture = function(t) {
                this.texture = t,
                console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")
            }
            ,
            o.BitmapText.prototype.setText = function(t) {
                this.text = t,
                console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")
            }
            ,
            i.Text.prototype.setText = function(t) {
                this.text = t,
                console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")
            }
            ,
            i.Text.prototype.setStyle = function(t) {
                this.style = t,
                console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")
            }
            ,
            i.Texture.prototype.setFrame = function(t) {
                this.frame = t,
                console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")
            }
            ,
            Object.defineProperties(s, {
                AbstractFilter: {
                    get: function() {
                        return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),
                        i.AbstractFilter
                    }
                },
                FXAAFilter: {
                    get: function() {
                        return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),
                        i.FXAAFilter
                    }
                },
                SpriteMaskFilter: {
                    get: function() {
                        return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),
                        i.SpriteMaskFilter
                    }
                }
            }),
            i.utils.uuid = function() {
                return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),
                i.utils.uid()
            }
        }
        , {
            "./core": 29,
            "./extras": 85,
            "./filters": 102,
            "./mesh": 126
        }],
        79: [function(t, e, r) {
            function i(t, e) {
                n.Container.call(this),
                e = e || {},
                this.textWidth = 0,
                this.textHeight = 0,
                this._glyphs = [],
                this._font = {
                    tint: void 0 !== e.tint ? e.tint : 16777215,
                    align: e.align || "left",
                    name: null,
                    size: 0
                },
                this.font = e.font,
                this._text = t,
                this.maxWidth = 0,
                this.dirty = !1,
                this.updateText()
            }
            var n = t("../core");
            i.prototype = Object.create(n.Container.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                tint: {
                    get: function() {
                        return this._font.tint
                    },
                    set: function(t) {
                        this._font.tint = "number" == typeof t && t >= 0 ? t : 16777215,
                        this.dirty = !0
                    }
                },
                align: {
                    get: function() {
                        return this._font.align
                    },
                    set: function(t) {
                        this._font.align = t || "left",
                        this.dirty = !0
                    }
                },
                font: {
                    get: function() {
                        return this._font
                    },
                    set: function(t) {
                        t && ("string" == typeof t ? (t = t.split(" "),
                        this._font.name = 1 === t.length ? t[0] : t.slice(1).join(" "),
                        this._font.size = t.length >= 2 ? parseInt(t[0], 10) : i.fonts[this._font.name].size) : (this._font.name = t.name,
                        this._font.size = "number" == typeof t.size ? t.size : parseInt(t.size, 10)),
                        this.dirty = !0)
                    }
                },
                text: {
                    get: function() {
                        return this._text
                    },
                    set: function(t) {
                        t = t.toString() || " ",
                        this._text !== t && (this._text = t,
                        this.dirty = !0)
                    }
                }
            }),
            i.prototype.updateText = function() {
                for (var t = i.fonts[this._font.name], e = new n.Point, r = null, o = [], s = 0, a = 0, h = [], l = 0, u = this._font.size / t.size, c = -1, p = 0; p < this.text.length; p++) {
                    var d = this.text.charCodeAt(p);
                    if (c = /(\s)/.test(this.text.charAt(p)) ? p : c,
                    /(?:\r\n|\r|\n)/.test(this.text.charAt(p)))
                        h.push(s),
                        a = Math.max(a, s),
                        l++,
                        e.x = 0,
                        e.y += t.lineHeight,
                        r = null;
                    else if (-1 !== c && this.maxWidth > 0 && e.x * u > this.maxWidth)
                        o.splice(c, p - c),
                        p = c,
                        c = -1,
                        h.push(s),
                        a = Math.max(a, s),
                        l++,
                        e.x = 0,
                        e.y += t.lineHeight,
                        r = null;
                    else {
                        var f = t.chars[d];
                        f && (r && f.kerning[r] && (e.x += f.kerning[r]),
                        o.push({
                            texture: f.texture,
                            line: l,
                            charCode: d,
                            position: new n.Point(e.x + f.xOffset,e.y + f.yOffset)
                        }),
                        s = e.x + (f.texture.width + f.xOffset),
                        e.x += f.xAdvance,
                        r = d)
                    }
                }
                h.push(s),
                a = Math.max(a, s);
                var v = [];
                for (p = 0; l >= p; p++) {
                    var g = 0;
                    "right" === this._font.align ? g = a - h[p] : "center" === this._font.align && (g = (a - h[p]) / 2),
                    v.push(g)
                }
                var m = o.length
                  , y = this.tint;
                for (p = 0; m > p; p++) {
                    var x = this._glyphs[p];
                    x ? x.texture = o[p].texture : (x = new n.Sprite(o[p].texture),
                    this._glyphs.push(x)),
                    x.position.x = (o[p].position.x + v[o[p].line]) * u,
                    x.position.y = o[p].position.y * u,
                    x.scale.x = x.scale.y = u,
                    x.tint = y,
                    x.parent || this.addChild(x)
                }
                for (p = m; p < this._glyphs.length; ++p)
                    this.removeChild(this._glyphs[p]);
                this.textWidth = a * u,
                this.textHeight = (e.y + t.lineHeight) * u
            }
            ,
            i.prototype.updateTransform = function() {
                this.validate(),
                this.containerUpdateTransform()
            }
            ,
            i.prototype.getLocalBounds = function() {
                return this.validate(),
                n.Container.prototype.getLocalBounds.call(this)
            }
            ,
            i.prototype.validate = function() {
                this.dirty && (this.updateText(),
                this.dirty = !1)
            }
            ,
            i.fonts = {}
        }
        , {
            "../core": 29
        }],
        80: [function(t, e, r) {
            function i(t) {
                n.Sprite.call(this, t[0]),
                this._textures = t,
                this.animationSpeed = 1,
                this.loop = !0,
                this.onComplete = null,
                this._currentTime = 0,
                this.playing = !1
            }
            var n = t("../core");
            i.prototype = Object.create(n.Sprite.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                totalFrames: {
                    get: function() {
                        return this._textures.length
                    }
                },
                textures: {
                    get: function() {
                        return this._textures
                    },
                    set: function(t) {
                        this._textures = t,
                        this.texture = this._textures[Math.floor(this._currentTime) % this._textures.length]
                    }
                },
                currentFrame: {
                    get: function() {
                        return Math.floor(this._currentTime) % this._textures.length
                    }
                }
            }),
            i.prototype.stop = function() {
                this.playing && (this.playing = !1,
                n.ticker.shared.remove(this.update, this))
            }
            ,
            i.prototype.play = function() {
                this.playing || (this.playing = !0,
                n.ticker.shared.add(this.update, this))
            }
            ,
            i.prototype.gotoAndStop = function(t) {
                this.stop(),
                this._currentTime = t;
                var e = Math.floor(this._currentTime);
                this._texture = this._textures[e % this._textures.length]
            }
            ,
            i.prototype.gotoAndPlay = function(t) {
                this._currentTime = t,
                this.play()
            }
            ,
            i.prototype.update = function(t) {
                this._currentTime += this.animationSpeed * t;
                var e = Math.floor(this._currentTime);
                0 > e ? this.loop ? this._texture = this._textures[this._textures.length - 1 + e % this._textures.length] : (this.gotoAndStop(0),
                this.onComplete && this.onComplete()) : this.loop || e < this._textures.length ? this._texture = this._textures[e % this._textures.length] : e >= this._textures.length && (this.gotoAndStop(this.textures.length - 1),
                this.onComplete && this.onComplete())
            }
            ,
            i.prototype.destroy = function() {
                this.stop(),
                n.Sprite.prototype.destroy.call(this)
            }
            ,
            i.fromFrames = function(t) {
                for (var e = [], r = 0; r < t.length; ++r)
                    e.push(new n.Texture.fromFrame(t[r]));
                return new i(e)
            }
            ,
            i.fromImages = function(t) {
                for (var e = [], r = 0; r < t.length; ++r)
                    e.push(new n.Texture.fromImage(t[r]));
                return new i(e)
            }
        }
        , {
            "../core": 29
        }],
        81: [function(t, e, r) {
            function i(t, e, r) {
                n.Sprite.call(this, t),
                this.tileScale = new n.Point(1,1),
                this.tilePosition = new n.Point(0,0),
                this._width = e || 100,
                this._height = r || 100,
                this._uvs = new n.TextureUvs,
                this._canvasPattern = null,
                this.shader = new n.AbstractFilter(["precision lowp float;", "attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform mat3 projectionMatrix;", "uniform vec4 uFrame;", "uniform vec4 uTransform;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "void main(void){", "   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vec2 coord = aTextureCoord;", "   coord -= uTransform.xy;", "   coord /= uTransform.zw;", "   vTextureCoord = coord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"].join("\n"),["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "uniform vec4 uFrame;", "uniform vec2 uPixelSize;", "void main(void){", "   vec2 coord = mod(vTextureCoord, uFrame.zw);", "   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);", "   coord += uFrame.xy;", "   gl_FragColor =  texture2D(uSampler, coord) * vColor ;", "}"].join("\n"),{
                    uFrame: {
                        type: "4fv",
                        value: [0, 0, 1, 1]
                    },
                    uTransform: {
                        type: "4fv",
                        value: [0, 0, 1, 1]
                    },
                    uPixelSize: {
                        type: "2fv",
                        value: [1, 1]
                    }
                })
            }
            var n = t("../core")
              , o = new n.Point;
            i.prototype = Object.create(n.Sprite.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                width: {
                    get: function() {
                        return this._width
                    },
                    set: function(t) {
                        this._width = t
                    }
                },
                height: {
                    get: function() {
                        return this._height
                    },
                    set: function(t) {
                        this._height = t
                    }
                }
            }),
            i.prototype._onTextureUpdate = function() {}
            ,
            i.prototype._renderWebGL = function(t) {
                var e = this._texture;
                if (e && e._uvs) {
                    var r = e._uvs
                      , i = e._frame.width
                      , n = e._frame.height
                      , o = e.baseTexture.width
                      , s = e.baseTexture.height;
                    e._uvs = this._uvs,
                    e._frame.width = this.width,
                    e._frame.height = this.height,
                    this.shader.uniforms.uPixelSize.value[0] = 1 / o,
                    this.shader.uniforms.uPixelSize.value[1] = 1 / s,
                    this.shader.uniforms.uFrame.value[0] = r.x0,
                    this.shader.uniforms.uFrame.value[1] = r.y0,
                    this.shader.uniforms.uFrame.value[2] = r.x1 - r.x0,
                    this.shader.uniforms.uFrame.value[3] = r.y2 - r.y0,
                    this.shader.uniforms.uTransform.value[0] = this.tilePosition.x % (i * this.tileScale.x) / this._width,
                    this.shader.uniforms.uTransform.value[1] = this.tilePosition.y % (n * this.tileScale.y) / this._height,
                    this.shader.uniforms.uTransform.value[2] = o / this._width * this.tileScale.x,
                    this.shader.uniforms.uTransform.value[3] = s / this._height * this.tileScale.y,
                    t.setObjectRenderer(t.plugins.sprite),
                    t.plugins.sprite.render(this),
                    e._uvs = r,
                    e._frame.width = i,
                    e._frame.height = n
                }
            }
            ,
            i.prototype._renderCanvas = function(t) {
                var e = this._texture;
                if (e.baseTexture.hasLoaded) {
                    var r = t.context
                      , i = this.worldTransform
                      , o = t.resolution
                      , s = e.baseTexture
                      , a = this.tilePosition.x % (e._frame.width * this.tileScale.x)
                      , h = this.tilePosition.y % (e._frame.height * this.tileScale.y);
                    if (!this._canvasPattern) {
                        var l = new n.CanvasBuffer(e._frame.width,e._frame.height);
                        l.context.drawImage(s.source, -e._frame.x, -e._frame.y),
                        this._canvasPattern = l.context.createPattern(l.canvas, "repeat")
                    }
                    r.globalAlpha = this.worldAlpha,
                    r.setTransform(i.a * o, i.b * o, i.c * o, i.d * o, i.tx * o, i.ty * o),
                    r.scale(this.tileScale.x, this.tileScale.y),
                    r.translate(a + this.anchor.x * -this._width, h + this.anchor.y * -this._height),
                    this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode,
                    r.globalCompositeOperation = t.blendModes[t.currentBlendMode]),
                    r.fillStyle = this._canvasPattern,
                    r.fillRect(-a, -h, this._width / this.tileScale.x, this._height / this.tileScale.y)
                }
            }
            ,
            i.prototype.getBounds = function() {
                var t, e, r, i, n = this._width, o = this._height, s = n * (1 - this.anchor.x), a = n * -this.anchor.x, h = o * (1 - this.anchor.y), l = o * -this.anchor.y, u = this.worldTransform, c = u.a, p = u.b, d = u.c, f = u.d, v = u.tx, g = u.ty, m = c * a + d * l + v, y = f * l + p * a + g, x = c * s + d * l + v, b = f * l + p * s + g, _ = c * s + d * h + v, T = f * h + p * s + g, E = c * a + d * h + v, S = f * h + p * a + g;
                t = m,
                t = t > x ? x : t,
                t = t > _ ? _ : t,
                t = t > E ? E : t,
                r = y,
                r = r > b ? b : r,
                r = r > T ? T : r,
                r = r > S ? S : r,
                e = m,
                e = x > e ? x : e,
                e = _ > e ? _ : e,
                e = E > e ? E : e,
                i = y,
                i = b > i ? b : i,
                i = T > i ? T : i,
                i = S > i ? S : i;
                var A = this._bounds;
                return A.x = t,
                A.width = e - t,
                A.y = r,
                A.height = i - r,
                this._currentBounds = A,
                A
            }
            ,
            i.prototype.containsPoint = function(t) {
                this.worldTransform.applyInverse(t, o);
                var e, r = this._width, i = this._height, n = -r * this.anchor.x;
                return o.x > n && o.x < n + r && (e = -i * this.anchor.y,
                o.y > e && o.y < e + i) ? !0 : !1
            }
            ,
            i.prototype.destroy = function() {
                n.Sprite.prototype.destroy.call(this),
                this.tileScale = null,
                this._tileScaleOffset = null,
                this.tilePosition = null,
                this._uvs = null
            }
            ,
            i.fromFrame = function(t, e, r) {
                var o = n.utils.TextureCache[t];
                if (!o)
                    throw new Error('The frameId "' + t + '" does not exist in the texture cache ' + this);
                return new i(o,e,r)
            }
            ,
            i.fromImage = function(t, e, r, o, s) {
                return new i(n.Texture.fromImage(t, o, s),e,r)
            }
        }
        , {
            "../core": 29
        }],
        82: [function(t, e, r) {
            var i = t("../core")
              , n = i.DisplayObject
              , o = new i.Matrix;
            n.prototype._cacheAsBitmap = !1,
            n.prototype._originalRenderWebGL = null,
            n.prototype._originalRenderCanvas = null,
            n.prototype._originalUpdateTransform = null,
            n.prototype._originalHitTest = null,
            n.prototype._originalDestroy = null,
            n.prototype._cachedSprite = null,
            Object.defineProperties(n.prototype, {
                cacheAsBitmap: {
                    get: function() {
                        return this._cacheAsBitmap
                    },
                    set: function(t) {
                        this._cacheAsBitmap !== t && (this._cacheAsBitmap = t,
                        t ? (this._originalRenderWebGL = this.renderWebGL,
                        this._originalRenderCanvas = this.renderCanvas,
                        this._originalUpdateTransform = this.updateTransform,
                        this._originalGetBounds = this.getBounds,
                        this._originalDestroy = this.destroy,
                        this._originalContainsPoint = this.containsPoint,
                        this.renderWebGL = this._renderCachedWebGL,
                        this.renderCanvas = this._renderCachedCanvas,
                        this.destroy = this._cacheAsBitmapDestroy) : (this._cachedSprite && this._destroyCachedDisplayObject(),
                        this.renderWebGL = this._originalRenderWebGL,
                        this.renderCanvas = this._originalRenderCanvas,
                        this.getBounds = this._originalGetBounds,
                        this.destroy = this._originalDestroy,
                        this.updateTransform = this._originalUpdateTransform,
                        this.containsPoint = this._originalContainsPoint))
                    }
                }
            }),
            n.prototype._renderCachedWebGL = function(t) {
                !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t),
                this._cachedSprite.worldAlpha = this.worldAlpha,
                t.setObjectRenderer(t.plugins.sprite),
                t.plugins.sprite.render(this._cachedSprite))
            }
            ,
            n.prototype._initCachedDisplayObject = function(t) {
                if (!this._cachedSprite) {
                    t.currentRenderer.flush();
                    var e = this.getLocalBounds().clone();
                    if (this._filters) {
                        var r = this._filters[0].padding;
                        e.x -= r,
                        e.y -= r,
                        e.width += 2 * r,
                        e.height += 2 * r
                    }
                    var n = t.currentRenderTarget
                      , s = t.filterManager.filterStack
                      , a = new i.RenderTexture(t,0 | e.width,0 | e.height)
                      , h = o;
                    h.tx = -e.x,
                    h.ty = -e.y,
                    this.renderWebGL = this._originalRenderWebGL,
                    a.render(this, h, !0, !0),
                    t.setRenderTarget(n),
                    t.filterManager.filterStack = s,
                    this.renderWebGL = this._renderCachedWebGL,
                    this.updateTransform = this.displayObjectUpdateTransform,
                    this.getBounds = this._getCachedBounds,
                    this._cachedSprite = new i.Sprite(a),
                    this._cachedSprite.worldTransform = this.worldTransform,
                    this._cachedSprite.anchor.x = -(e.x / e.width),
                    this._cachedSprite.anchor.y = -(e.y / e.height),
                    this.updateTransform(),
                    this.containsPoint = this._cachedSprite.containsPoint.bind(this._cachedSprite)
                }
            }
            ,
            n.prototype._renderCachedCanvas = function(t) {
                !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t),
                this._cachedSprite.worldAlpha = this.worldAlpha,
                this._cachedSprite.renderCanvas(t))
            }
            ,
            n.prototype._initCachedDisplayObjectCanvas = function(t) {
                if (!this._cachedSprite) {
                    var e = this.getLocalBounds()
                      , r = t.context
                      , n = new i.RenderTexture(t,0 | e.width,0 | e.height)
                      , s = o;
                    s.tx = -e.x,
                    s.ty = -e.y,
                    this.renderCanvas = this._originalRenderCanvas,
                    n.render(this, s, !0),
                    t.context = r,
                    this.renderCanvas = this._renderCachedCanvas,
                    this.updateTransform = this.displayObjectUpdateTransform,
                    this.getBounds = this._getCachedBounds,
                    this._cachedSprite = new i.Sprite(n),
                    this._cachedSprite.worldTransform = this.worldTransform,
                    this._cachedSprite.anchor.x = -(e.x / e.width),
                    this._cachedSprite.anchor.y = -(e.y / e.height),
                    this.updateTransform(),
                    this.containsPoint = this._cachedSprite.containsPoint.bind(this._cachedSprite)
                }
            }
            ,
            n.prototype._getCachedBounds = function() {
                return this._cachedSprite._currentBounds = null,
                this._cachedSprite.getBounds()
            }
            ,
            n.prototype._destroyCachedDisplayObject = function() {
                this._cachedSprite._texture.destroy(),
                this._cachedSprite = null
            }
            ,
            n.prototype._cacheAsBitmapDestroy = function() {
                this.cacheAsBitmap = !1,
                this._originalDestroy()
            }
        }
        , {
            "../core": 29
        }],
        83: [function(t, e, r) {
            var i = t("../core");
            i.DisplayObject.prototype.name = null,
            i.Container.prototype.getChildByName = function(t) {
                for (var e = 0; e < this.children.length; e++)
                    if (this.children[e].name === t)
                        return this.children[e];
                return null
            }
        }
        , {
            "../core": 29
        }],
        84: [function(t, e, r) {
            var i = t("../core");
            i.DisplayObject.prototype.getGlobalPosition = function(t) {
                return t = t || new i.Point,
                this.parent ? (this.displayObjectUpdateTransform(),
                t.x = this.worldTransform.tx,
                t.y = this.worldTransform.ty) : (t.x = this.position.x,
                t.y = this.position.y),
                t
            }
        }
        , {
            "../core": 29
        }],
        85: [function(t, e, r) {
            t("./cacheAsBitmap"),
            t("./getChildByName"),
            t("./getGlobalPosition"),
            e.exports = {
                MovieClip: t("./MovieClip"),
                TilingSprite: t("./TilingSprite"),
                BitmapText: t("./BitmapText")
            }
        }
        , {
            "./BitmapText": 79,
            "./MovieClip": 80,
            "./TilingSprite": 81,
            "./cacheAsBitmap": 82,
            "./getChildByName": 83,
            "./getGlobalPosition": 84
        }],
        86: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n", {
                    dimensions: {
                        type: "4fv",
                        value: new Float32Array([0, 0, 0, 0])
                    },
                    pixelSize: {
                        type: "1f",
                        value: 8
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                size: {
                    get: function() {
                        return this.uniforms.pixelSize.value
                    },
                    set: function(t) {
                        this.uniforms.pixelSize.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        87: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this),
                this.blurXFilter = new o,
                this.blurYFilter = new s,
                this.defaultFilter = new n.AbstractFilter
            }
            var n = t("../../core")
              , o = t("../blur/BlurXFilter")
              , s = t("../blur/BlurYFilter");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager.getRenderTarget(!0);
                this.defaultFilter.applyFilter(t, e, r),
                this.blurXFilter.applyFilter(t, e, i),
                t.blendModeManager.setBlendMode(n.BLEND_MODES.SCREEN),
                this.blurYFilter.applyFilter(t, i, r),
                t.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),
                t.filterManager.returnRenderTarget(i)
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.blurXFilter.blur
                    },
                    set: function(t) {
                        this.blurXFilter.blur = this.blurYFilter.blur = t
                    }
                },
                blurX: {
                    get: function() {
                        return this.blurXFilter.blur
                    },
                    set: function(t) {
                        this.blurXFilter.blur = t
                    }
                },
                blurY: {
                    get: function() {
                        return this.blurYFilter.blur
                    },
                    set: function(t) {
                        this.blurYFilter.blur = t
                    }
                }
            })
        }
        , {
            "../../core": 29,
            "../blur/BlurXFilter": 90,
            "../blur/BlurYFilter": 91
        }],
        88: [function(t, e, r) {
            function i(t, e) {
                n.AbstractFilter.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n", "precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n", {
                    strength: {
                        type: "1f",
                        value: 1
                    },
                    dirX: {
                        type: "1f",
                        value: t || 0
                    },
                    dirY: {
                        type: "1f",
                        value: e || 0
                    }
                }),
                this.defaultFilter = new n.AbstractFilter,
                this.passes = 1,
                this.dirX = t || 0,
                this.dirY = e || 0,
                this.strength = 4
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r, i) {
                var n = this.getShader(t);
                if (this.uniforms.strength.value = this.strength / 4 / this.passes * (e.frame.width / e.size.width),
                1 === this.passes)
                    t.filterManager.applyFilter(n, e, r, i);
                else {
                    var o = t.filterManager.getRenderTarget(!0);
                    t.filterManager.applyFilter(n, e, o, i);
                    for (var s = 0; s < this.passes - 2; s++)
                        t.filterManager.applyFilter(n, o, o, i);
                    t.filterManager.applyFilter(n, o, r, i),
                    t.filterManager.returnRenderTarget(o)
                }
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.strength
                    },
                    set: function(t) {
                        this.padding = .5 * t,
                        this.strength = t
                    }
                },
                dirX: {
                    get: function() {
                        return this.dirX
                    },
                    set: function(t) {
                        this.uniforms.dirX.value = t
                    }
                },
                dirY: {
                    get: function() {
                        return this.dirY
                    },
                    set: function(t) {
                        this.uniforms.dirY.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        89: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this),
                this.blurXFilter = new o,
                this.blurYFilter = new s
            }
            var n = t("../../core")
              , o = t("./BlurXFilter")
              , s = t("./BlurYFilter");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager.getRenderTarget(!0);
                this.blurXFilter.applyFilter(t, e, i),
                this.blurYFilter.applyFilter(t, i, r),
                t.filterManager.returnRenderTarget(i)
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.blurXFilter.blur
                    },
                    set: function(t) {
                        this.padding = .5 * Math.abs(t),
                        this.blurXFilter.blur = this.blurYFilter.blur = t
                    }
                },
                passes: {
                    get: function() {
                        return this.blurXFilter.passes
                    },
                    set: function(t) {
                        this.blurXFilter.passes = this.blurYFilter.passes = t
                    }
                },
                blurX: {
                    get: function() {
                        return this.blurXFilter.blur
                    },
                    set: function(t) {
                        this.blurXFilter.blur = t
                    }
                },
                blurY: {
                    get: function() {
                        return this.blurYFilter.blur
                    },
                    set: function(t) {
                        this.blurYFilter.blur = t
                    }
                }
            })
        }
        , {
            "../../core": 29,
            "./BlurXFilter": 90,
            "./BlurYFilter": 91
        }],
        90: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n", "precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n", {
                    strength: {
                        type: "1f",
                        value: 1
                    }
                }),
                this.passes = 1,
                this.strength = 4
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r, i) {
                var n = this.getShader(t);
                if (this.uniforms.strength.value = this.strength / 4 / this.passes * (e.frame.width / e.size.width),
                1 === this.passes)
                    t.filterManager.applyFilter(n, e, r, i);
                else {
                    for (var o = t.filterManager.getRenderTarget(!0), s = e, a = o, h = 0; h < this.passes - 1; h++) {
                        t.filterManager.applyFilter(n, s, a, !0);
                        var l = a;
                        a = s,
                        s = l
                    }
                    t.filterManager.applyFilter(n, s, r, i),
                    t.filterManager.returnRenderTarget(o)
                }
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.strength
                    },
                    set: function(t) {
                        this.padding = .5 * Math.abs(t),
                        this.strength = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        91: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n", "precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n", {
                    strength: {
                        type: "1f",
                        value: 1
                    }
                }),
                this.passes = 1,
                this.strength = 4
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r, i) {
                var n = this.getShader(t);
                if (this.uniforms.strength.value = Math.abs(this.strength) / 4 / this.passes * (e.frame.height / e.size.height),
                1 === this.passes)
                    t.filterManager.applyFilter(n, e, r, i);
                else {
                    for (var o = t.filterManager.getRenderTarget(!0), s = e, a = o, h = 0; h < this.passes - 1; h++) {
                        t.filterManager.applyFilter(n, s, a, !0);
                        var l = a;
                        a = s,
                        s = l
                    }
                    t.filterManager.applyFilter(n, s, r, i),
                    t.filterManager.returnRenderTarget(o)
                }
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.strength
                    },
                    set: function(t) {
                        this.padding = .5 * Math.abs(t),
                        this.strength = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        92: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n", {
                    delta: {
                        type: "v2",
                        value: {
                            x: .1,
                            y: 0
                        }
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i
        }
        , {
            "../../core": 29
        }],
        93: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n", {
                    m: {
                        type: "1fv",
                        value: [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype._loadMatrix = function(t, e) {
                e = !!e;
                var r = t;
                e && (this._multiply(r, this.uniforms.m.value, t),
                r = this._colorMatrix(r)),
                this.uniforms.m.value = r
            }
            ,
            i.prototype._multiply = function(t, e, r) {
                return t[0] = e[0] * r[0] + e[1] * r[5] + e[2] * r[10] + e[3] * r[15],
                t[1] = e[0] * r[1] + e[1] * r[6] + e[2] * r[11] + e[3] * r[16],
                t[2] = e[0] * r[2] + e[1] * r[7] + e[2] * r[12] + e[3] * r[17],
                t[3] = e[0] * r[3] + e[1] * r[8] + e[2] * r[13] + e[3] * r[18],
                t[4] = e[0] * r[4] + e[1] * r[9] + e[2] * r[14] + e[3] * r[19],
                t[5] = e[5] * r[0] + e[6] * r[5] + e[7] * r[10] + e[8] * r[15],
                t[6] = e[5] * r[1] + e[6] * r[6] + e[7] * r[11] + e[8] * r[16],
                t[7] = e[5] * r[2] + e[6] * r[7] + e[7] * r[12] + e[8] * r[17],
                t[8] = e[5] * r[3] + e[6] * r[8] + e[7] * r[13] + e[8] * r[18],
                t[9] = e[5] * r[4] + e[6] * r[9] + e[7] * r[14] + e[8] * r[19],
                t[10] = e[10] * r[0] + e[11] * r[5] + e[12] * r[10] + e[13] * r[15],
                t[11] = e[10] * r[1] + e[11] * r[6] + e[12] * r[11] + e[13] * r[16],
                t[12] = e[10] * r[2] + e[11] * r[7] + e[12] * r[12] + e[13] * r[17],
                t[13] = e[10] * r[3] + e[11] * r[8] + e[12] * r[13] + e[13] * r[18],
                t[14] = e[10] * r[4] + e[11] * r[9] + e[12] * r[14] + e[13] * r[19],
                t[15] = e[15] * r[0] + e[16] * r[5] + e[17] * r[10] + e[18] * r[15],
                t[16] = e[15] * r[1] + e[16] * r[6] + e[17] * r[11] + e[18] * r[16],
                t[17] = e[15] * r[2] + e[16] * r[7] + e[17] * r[12] + e[18] * r[17],
                t[18] = e[15] * r[3] + e[16] * r[8] + e[17] * r[13] + e[18] * r[18],
                t[19] = e[15] * r[4] + e[16] * r[9] + e[17] * r[14] + e[18] * r[19],
                t
            }
            ,
            i.prototype._colorMatrix = function(t) {
                var e = new Float32Array(t);
                return e[4] /= 255,
                e[9] /= 255,
                e[14] /= 255,
                e[19] /= 255,
                e
            }
            ,
            i.prototype.brightness = function(t, e) {
                var r = [t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(r, e)
            }
            ,
            i.prototype.greyscale = function(t, e) {
                var r = [t, t, t, 0, 0, t, t, t, 0, 0, t, t, t, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(r, e)
            }
            ,
            i.prototype.grayscale = i.prototype.greyscale,
            i.prototype.blackAndWhite = function(t) {
                var e = [.3, .6, .1, 0, 0, .3, .6, .1, 0, 0, .3, .6, .1, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.hue = function(t, e) {
                t = (t || 0) / 180 * Math.PI;
                var r = Math.cos(t)
                  , i = Math.sin(t)
                  , n = .213
                  , o = .715
                  , s = .072
                  , a = [n + r * (1 - n) + i * -n, o + r * -o + i * -o, s + r * -s + i * (1 - s), 0, 0, n + r * -n + .143 * i, o + r * (1 - o) + .14 * i, s + r * -s + i * -.283, 0, 0, n + r * -n + i * -(1 - n), o + r * -o + i * o, s + r * (1 - s) + i * s, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(a, e)
            }
            ,
            i.prototype.contrast = function(t, e) {
                var r = (t || 0) + 1
                  , i = -128 * (r - 1)
                  , n = [r, 0, 0, 0, i, 0, r, 0, 0, i, 0, 0, r, 0, i, 0, 0, 0, 1, 0];
                this._loadMatrix(n, e)
            }
            ,
            i.prototype.saturate = function(t, e) {
                var r = 2 * (t || 0) / 3 + 1
                  , i = (r - 1) * -.5
                  , n = [r, i, i, 0, 0, i, r, i, 0, 0, i, i, r, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(n, e)
            }
            ,
            i.prototype.desaturate = function(t) {
                this.saturate(-1)
            }
            ,
            i.prototype.negative = function(t) {
                var e = [0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.sepia = function(t) {
                var e = [.393, .7689999, .18899999, 0, 0, .349, .6859999, .16799999, 0, 0, .272, .5339999, .13099999, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.technicolor = function(t) {
                var e = [1.9125277891456083, -.8545344976951645, -.09155508482755585, 0, 11.793603434377337, -.3087833385928097, 1.7658908555458428, -.10601743074722245, 0, -70.35205161461398, -.231103377548616, -.7501899197440212, 1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.polaroid = function(t) {
                var e = [1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.toBGR = function(t) {
                var e = [0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.kodachrome = function(t) {
                var e = [1.1285582396593525, -.3967382283601348, -.03992559172921793, 0, 63.72958762196502, -.16404339962244616, 1.0835251566291304, -.05498805115633132, 0, 24.732407896706203, -.16786010706155763, -.5603416277695248, 1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.browni = function(t) {
                var e = [.5997023498159715, .34553243048391263, -.2708298674538042, 0, 47.43192855600873, -.037703249837783157, .8609577587992641, .15059552388459913, 0, -36.96841498319127, .24113635128153335, -.07441037908422492, .44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.vintage = function(t) {
                var e = [.6279345635605994, .3202183420819367, -.03965408211312453, 0, 9.651285835294123, .02578397704808868, .6441188644374771, .03259127616149294, 0, 7.462829176470591, .0466055556782719, -.0851232987247891, .5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.colorTone = function(t, e, r, i, n) {
                t = t || .2,
                e = e || .15,
                r = r || 16770432,
                i = i || 3375104;
                var o = (r >> 16 & 255) / 255
                  , s = (r >> 8 & 255) / 255
                  , a = (255 & r) / 255
                  , h = (i >> 16 & 255) / 255
                  , l = (i >> 8 & 255) / 255
                  , u = (255 & i) / 255
                  , c = [.3, .59, .11, 0, 0, o, s, a, t, 0, h, l, u, e, 0, o - h, s - l, a - u, 0, 0];
                this._loadMatrix(c, n)
            }
            ,
            i.prototype.night = function(t, e) {
                t = t || .1;
                var r = [-2 * t, -t, 0, 0, 0, -t, 0, t, 0, 0, 0, t, 2 * t, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(r, e)
            }
            ,
            i.prototype.predator = function(t, e) {
                var r = [11.224130630493164 * t, -4.794486999511719 * t, -2.8746118545532227 * t, 0 * t, .40342438220977783 * t, -3.6330697536468506 * t, 9.193157196044922 * t, -2.951810836791992 * t, 0 * t, -1.316135048866272 * t, -3.2184197902679443 * t, -4.2375030517578125 * t, 7.476448059082031 * t, 0 * t, .8044459223747253 * t, 0, 0, 0, 1, 0];
                this._loadMatrix(r, e)
            }
            ,
            i.prototype.lsd = function(t) {
                var e = [2, -.4, .5, 0, 0, -.5, 2, -.4, 0, 0, -.4, -.5, 3, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(e, t)
            }
            ,
            i.prototype.reset = function() {
                var t = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
                this._loadMatrix(t, !1)
            }
            ,
            Object.defineProperties(i.prototype, {
                matrix: {
                    get: function() {
                        return this.uniforms.m.value
                    },
                    set: function(t) {
                        this.uniforms.m.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        94: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n", {
                    step: {
                        type: "1f",
                        value: 5
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                step: {
                    get: function() {
                        return this.uniforms.step.value
                    },
                    set: function(t) {
                        this.uniforms.step.value = t;

                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        95: [function(t, e, r) {
            function i(t, e, r) {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n", {
                    matrix: {
                        type: "1fv",
                        value: new Float32Array(t)
                    },
                    texelSize: {
                        type: "v2",
                        value: {
                            x: 1 / e,
                            y: 1 / r
                        }
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                matrix: {
                    get: function() {
                        return this.uniforms.matrix.value
                    },
                    set: function(t) {
                        this.uniforms.matrix.value = new Float32Array(t)
                    }
                },
                width: {
                    get: function() {
                        return 1 / this.uniforms.texelSize.value.x
                    },
                    set: function(t) {
                        this.uniforms.texelSize.value.x = 1 / t
                    }
                },
                height: {
                    get: function() {
                        return 1 / this.uniforms.texelSize.value.y
                    },
                    set: function(t) {
                        this.uniforms.texelSize.value.y = 1 / t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        96: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i
        }
        , {
            "../../core": 29
        }],
        97: [function(t, e, r) {
            function i(t) {
                var e = new n.Matrix;
                t.renderable = !1,
                n.AbstractFilter.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n", "precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n", {
                    mapSampler: {
                        type: "sampler2D",
                        value: t.texture
                    },
                    otherMatrix: {
                        type: "mat3",
                        value: e.toArray(!0)
                    },
                    scale: {
                        type: "v2",
                        value: {
                            x: 1,
                            y: 1
                        }
                    }
                }),
                this.maskSprite = t,
                this.maskMatrix = e,
                this.scale = new n.Point(20,20)
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager;
                i.calculateMappedMatrix(e.frame, this.maskSprite, this.maskMatrix),
                this.uniforms.otherMatrix.value = this.maskMatrix.toArray(!0),
                this.uniforms.scale.value.x = this.scale.x * (1 / e.frame.width),
                this.uniforms.scale.value.y = this.scale.y * (1 / e.frame.height);
                var n = this.getShader(t);
                i.applyFilter(n, e, r)
            }
            ,
            Object.defineProperties(i.prototype, {
                map: {
                    get: function() {
                        return this.uniforms.mapSampler.value
                    },
                    set: function(t) {
                        this.uniforms.mapSampler.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        98: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n", {
                    scale: {
                        type: "1f",
                        value: 1
                    },
                    angle: {
                        type: "1f",
                        value: 5
                    },
                    dimensions: {
                        type: "4fv",
                        value: [0, 0, 0, 0]
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                scale: {
                    get: function() {
                        return this.uniforms.scale.value
                    },
                    set: function(t) {
                        this.uniforms.scale.value = t
                    }
                },
                angle: {
                    get: function() {
                        return this.uniforms.angle.value
                    },
                    set: function(t) {
                        this.uniforms.angle.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        99: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n", "precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n", {
                    blur: {
                        type: "1f",
                        value: 1 / 512
                    },
                    color: {
                        type: "c",
                        value: [0, 0, 0]
                    },
                    alpha: {
                        type: "1f",
                        value: .7
                    },
                    offset: {
                        type: "2f",
                        value: [5, 5]
                    },
                    strength: {
                        type: "1f",
                        value: 1
                    }
                }),
                this.passes = 1,
                this.strength = 4
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r, i) {
                var n = this.getShader(t);
                if (this.uniforms.strength.value = this.strength / 4 / this.passes * (e.frame.height / e.size.height),
                1 === this.passes)
                    t.filterManager.applyFilter(n, e, r, i);
                else {
                    for (var o = t.filterManager.getRenderTarget(!0), s = e, a = o, h = 0; h < this.passes - 1; h++) {
                        t.filterManager.applyFilter(n, s, a, i);
                        var l = a;
                        a = s,
                        s = l
                    }
                    t.filterManager.applyFilter(n, s, r, i),
                    t.filterManager.returnRenderTarget(o)
                }
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.strength
                    },
                    set: function(t) {
                        this.padding = .5 * t,
                        this.strength = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        100: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this),
                this.blurXFilter = new o,
                this.blurYTintFilter = new s,
                this.defaultFilter = new n.AbstractFilter,
                this.padding = 30,
                this._dirtyPosition = !0,
                this._angle = 45 * Math.PI / 180,
                this._distance = 10,
                this.alpha = .75,
                this.hideObject = !1,
                this.blendMode = n.BLEND_MODES.MULTIPLY
            }
            var n = t("../../core")
              , o = t("../blur/BlurXFilter")
              , s = t("./BlurYTintFilter");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager.getRenderTarget(!0);
                this._dirtyPosition && (this._dirtyPosition = !1,
                this.blurYTintFilter.uniforms.offset.value[0] = Math.sin(this._angle) * this._distance,
                this.blurYTintFilter.uniforms.offset.value[1] = Math.cos(this._angle) * this._distance),
                this.blurXFilter.applyFilter(t, e, i),
                t.blendModeManager.setBlendMode(this.blendMode),
                this.blurYTintFilter.applyFilter(t, i, r),
                t.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),
                this.hideObject || this.defaultFilter.applyFilter(t, e, r),
                t.filterManager.returnRenderTarget(i)
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.blurXFilter.blur
                    },
                    set: function(t) {
                        this.blurXFilter.blur = this.blurYTintFilter.blur = t
                    }
                },
                blurX: {
                    get: function() {
                        return this.blurXFilter.blur
                    },
                    set: function(t) {
                        this.blurXFilter.blur = t
                    }
                },
                blurY: {
                    get: function() {
                        return this.blurYTintFilter.blur
                    },
                    set: function(t) {
                        this.blurYTintFilter.blur = t
                    }
                },
                color: {
                    get: function() {
                        return n.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)
                    },
                    set: function(t) {
                        this.blurYTintFilter.uniforms.color.value = n.utils.hex2rgb(t)
                    }
                },
                alpha: {
                    get: function() {
                        return this.blurYTintFilter.uniforms.alpha.value
                    },
                    set: function(t) {
                        this.blurYTintFilter.uniforms.alpha.value = t
                    }
                },
                distance: {
                    get: function() {
                        return this._distance
                    },
                    set: function(t) {
                        this._dirtyPosition = !0,
                        this._distance = t
                    }
                },
                angle: {
                    get: function() {
                        return this._angle
                    },
                    set: function(t) {
                        this._dirtyPosition = !0,
                        this._angle = t
                    }
                }
            })
        }
        , {
            "../../core": 29,
            "../blur/BlurXFilter": 90,
            "./BlurYTintFilter": 99
        }],
        101: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n", {
                    gray: {
                        type: "1f",
                        value: 1
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                gray: {
                    get: function() {
                        return this.uniforms.gray.value
                    },
                    set: function(t) {
                        this.uniforms.gray.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        102: [function(t, e, r) {
            e.exports = {
                AsciiFilter: t("./ascii/AsciiFilter"),
                BloomFilter: t("./bloom/BloomFilter"),
                BlurFilter: t("./blur/BlurFilter"),
                BlurXFilter: t("./blur/BlurXFilter"),
                BlurYFilter: t("./blur/BlurYFilter"),
                BlurDirFilter: t("./blur/BlurDirFilter"),
                ColorMatrixFilter: t("./color/ColorMatrixFilter"),
                ColorStepFilter: t("./color/ColorStepFilter"),
                ConvolutionFilter: t("./convolution/ConvolutionFilter"),
                CrossHatchFilter: t("./crosshatch/CrossHatchFilter"),
                DisplacementFilter: t("./displacement/DisplacementFilter"),
                DotScreenFilter: t("./dot/DotScreenFilter"),
                GrayFilter: t("./gray/GrayFilter"),
                DropShadowFilter: t("./dropshadow/DropShadowFilter"),
                InvertFilter: t("./invert/InvertFilter"),
                NoiseFilter: t("./noise/NoiseFilter"),
                NormalMapFilter: t("./normal/NormalMapFilter"),
                PixelateFilter: t("./pixelate/PixelateFilter"),
                RGBSplitFilter: t("./rgb/RGBSplitFilter"),
                ShockwaveFilter: t("./shockwave/ShockwaveFilter"),
                SepiaFilter: t("./sepia/SepiaFilter"),
                SmartBlurFilter: t("./blur/SmartBlurFilter"),
                TiltShiftFilter: t("./tiltshift/TiltShiftFilter"),
                TiltShiftXFilter: t("./tiltshift/TiltShiftXFilter"),
                TiltShiftYFilter: t("./tiltshift/TiltShiftYFilter"),
                TwistFilter: t("./twist/TwistFilter")
            }
        }
        , {
            "./ascii/AsciiFilter": 86,
            "./bloom/BloomFilter": 87,
            "./blur/BlurDirFilter": 88,
            "./blur/BlurFilter": 89,
            "./blur/BlurXFilter": 90,
            "./blur/BlurYFilter": 91,
            "./blur/SmartBlurFilter": 92,
            "./color/ColorMatrixFilter": 93,
            "./color/ColorStepFilter": 94,
            "./convolution/ConvolutionFilter": 95,
            "./crosshatch/CrossHatchFilter": 96,
            "./displacement/DisplacementFilter": 97,
            "./dot/DotScreenFilter": 98,
            "./dropshadow/DropShadowFilter": 100,
            "./gray/GrayFilter": 101,
            "./invert/InvertFilter": 103,
            "./noise/NoiseFilter": 104,
            "./normal/NormalMapFilter": 105,
            "./pixelate/PixelateFilter": 106,
            "./rgb/RGBSplitFilter": 107,
            "./sepia/SepiaFilter": 108,
            "./shockwave/ShockwaveFilter": 109,
            "./tiltshift/TiltShiftFilter": 111,
            "./tiltshift/TiltShiftXFilter": 112,
            "./tiltshift/TiltShiftYFilter": 113,
            "./twist/TwistFilter": 114
        }],
        103: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n", {
                    invert: {
                        type: "1f",
                        value: 1
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                invert: {
                    get: function() {
                        return this.uniforms.invert.value
                    },
                    set: function(t) {
                        this.uniforms.invert.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        104: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n", {
                    noise: {
                        type: "1f",
                        value: .5
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                noise: {
                    get: function() {
                        return this.uniforms.noise.value
                    },
                    set: function(t) {
                        this.uniforms.noise.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        105: [function(t, e, r) {
            function i(t) {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n", {
                    displacementMap: {
                        type: "sampler2D",
                        value: t
                    },
                    scale: {
                        type: "2f",
                        value: {
                            x: 15,
                            y: 15
                        }
                    },
                    offset: {
                        type: "2f",
                        value: {
                            x: 0,
                            y: 0
                        }
                    },
                    mapDimensions: {
                        type: "2f",
                        value: {
                            x: 1,
                            y: 1
                        }
                    },
                    dimensions: {
                        type: "4f",
                        value: [0, 0, 0, 0]
                    },
                    LightPos: {
                        type: "3f",
                        value: [0, 1, 0]
                    }
                }),
                t.baseTexture._powerOf2 = !0,
                t.baseTexture.hasLoaded ? this.onTextureLoaded() : t.baseTexture.once("loaded", this.onTextureLoaded, this)
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.onTextureLoaded = function() {
                this.uniforms.mapDimensions.value.x = this.uniforms.displacementMap.value.width,
                this.uniforms.mapDimensions.value.y = this.uniforms.displacementMap.value.height
            }
            ,
            Object.defineProperties(i.prototype, {
                map: {
                    get: function() {
                        return this.uniforms.displacementMap.value
                    },
                    set: function(t) {
                        this.uniforms.displacementMap.value = t
                    }
                },
                scale: {
                    get: function() {
                        return this.uniforms.scale.value
                    },
                    set: function(t) {
                        this.uniforms.scale.value = t
                    }
                },
                offset: {
                    get: function() {
                        return this.uniforms.offset.value
                    },
                    set: function(t) {
                        this.uniforms.offset.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        106: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n", {
                    dimensions: {
                        type: "4fv",
                        value: new Float32Array([0, 0, 0, 0])
                    },
                    pixelSize: {
                        type: "v2",
                        value: {
                            x: 10,
                            y: 10
                        }
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                size: {
                    get: function() {
                        return this.uniforms.pixelSize.value
                    },
                    set: function(t) {
                        this.uniforms.pixelSize.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        107: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n", {
                    red: {
                        type: "v2",
                        value: {
                            x: 20,
                            y: 20
                        }
                    },
                    green: {
                        type: "v2",
                        value: {
                            x: -20,
                            y: 20
                        }
                    },
                    blue: {
                        type: "v2",
                        value: {
                            x: 20,
                            y: -20
                        }
                    },
                    dimensions: {
                        type: "4fv",
                        value: [0, 0, 0, 0]
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                red: {
                    get: function() {
                        return this.uniforms.red.value
                    },
                    set: function(t) {
                        this.uniforms.red.value = t
                    }
                },
                green: {
                    get: function() {
                        return this.uniforms.green.value
                    },
                    set: function(t) {
                        this.uniforms.green.value = t
                    }
                },
                blue: {
                    get: function() {
                        return this.uniforms.blue.value
                    },
                    set: function(t) {
                        this.uniforms.blue.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        108: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n", {
                    sepia: {
                        type: "1f",
                        value: 1
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                sepia: {
                    get: function() {
                        return this.uniforms.sepia.value
                    },
                    set: function(t) {
                        this.uniforms.sepia.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        109: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n", {
                    center: {
                        type: "v2",
                        value: {
                            x: .5,
                            y: .5
                        }
                    },
                    params: {
                        type: "v3",
                        value: {
                            x: 10,
                            y: .8,
                            z: .1
                        }
                    },
                    time: {
                        type: "1f",
                        value: 0
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                center: {
                    get: function() {
                        return this.uniforms.center.value
                    },
                    set: function(t) {
                        this.uniforms.center.value = t
                    }
                },
                params: {
                    get: function() {
                        return this.uniforms.params.value
                    },
                    set: function(t) {
                        this.uniforms.params.value = t
                    }
                },
                time: {
                    get: function() {
                        return this.uniforms.time.value
                    },
                    set: function(t) {
                        this.uniforms.time.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        110: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n", {
                    blur: {
                        type: "1f",
                        value: 100
                    },
                    gradientBlur: {
                        type: "1f",
                        value: 600
                    },
                    start: {
                        type: "v2",
                        value: {
                            x: 0,
                            y: window.innerHeight / 2
                        }
                    },
                    end: {
                        type: "v2",
                        value: {
                            x: 600,
                            y: window.innerHeight / 2
                        }
                    },
                    delta: {
                        type: "v2",
                        value: {
                            x: 30,
                            y: 30
                        }
                    },
                    texSize: {
                        type: "v2",
                        value: {
                            x: window.innerWidth,
                            y: window.innerHeight
                        }
                    }
                }),
                this.updateDelta()
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.updateDelta = function() {
                this.uniforms.delta.value.x = 0,
                this.uniforms.delta.value.y = 0
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.uniforms.blur.value
                    },
                    set: function(t) {
                        this.uniforms.blur.value = t
                    }
                },
                gradientBlur: {
                    get: function() {
                        return this.uniforms.gradientBlur.value
                    },
                    set: function(t) {
                        this.uniforms.gradientBlur.value = t
                    }
                },
                start: {
                    get: function() {
                        return this.uniforms.start.value
                    },
                    set: function(t) {
                        this.uniforms.start.value = t,
                        this.updateDelta()
                    }
                },
                end: {
                    get: function() {
                        return this.uniforms.end.value
                    },
                    set: function(t) {
                        this.uniforms.end.value = t,
                        this.updateDelta()
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        111: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this),
                this.tiltShiftXFilter = new o,
                this.tiltShiftYFilter = new s
            }
            var n = t("../../core")
              , o = t("./TiltShiftXFilter")
              , s = t("./TiltShiftYFilter");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.applyFilter = function(t, e, r) {
                var i = t.filterManager.getRenderTarget(!0);
                this.tiltShiftXFilter.applyFilter(t, e, i),
                this.tiltShiftYFilter.applyFilter(t, i, r),
                t.filterManager.returnRenderTarget(i)
            }
            ,
            Object.defineProperties(i.prototype, {
                blur: {
                    get: function() {
                        return this.tiltShiftXFilter.blur
                    },
                    set: function(t) {
                        this.tiltShiftXFilter.blur = this.tiltShiftYFilter.blur = t
                    }
                },
                gradientBlur: {
                    get: function() {
                        return this.tiltShiftXFilter.gradientBlur
                    },
                    set: function(t) {
                        this.tiltShiftXFilter.gradientBlur = this.tiltShiftYFilter.gradientBlur = t
                    }
                },
                start: {
                    get: function() {
                        return this.tiltShiftXFilter.start
                    },
                    set: function(t) {
                        this.tiltShiftXFilter.start = this.tiltShiftYFilter.start = t
                    }
                },
                end: {
                    get: function() {
                        return this.tiltShiftXFilter.end
                    },
                    set: function(t) {
                        this.tiltShiftXFilter.end = this.tiltShiftYFilter.end = t
                    }
                }
            })
        }
        , {
            "../../core": 29,
            "./TiltShiftXFilter": 112,
            "./TiltShiftYFilter": 113
        }],
        112: [function(t, e, r) {
            function i() {
                n.call(this)
            }
            var n = t("./TiltShiftAxisFilter");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.updateDelta = function() {
                var t = this.uniforms.end.value.x - this.uniforms.start.value.x
                  , e = this.uniforms.end.value.y - this.uniforms.start.value.y
                  , r = Math.sqrt(t * t + e * e);
                this.uniforms.delta.value.x = t / r,
                this.uniforms.delta.value.y = e / r
            }
        }
        , {
            "./TiltShiftAxisFilter": 110
        }],
        113: [function(t, e, r) {
            function i() {
                n.call(this)
            }
            var n = t("./TiltShiftAxisFilter");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.updateDelta = function() {
                var t = this.uniforms.end.value.x - this.uniforms.start.value.x
                  , e = this.uniforms.end.value.y - this.uniforms.start.value.y
                  , r = Math.sqrt(t * t + e * e);
                this.uniforms.delta.value.x = -e / r,
                this.uniforms.delta.value.y = t / r
            }
        }
        , {
            "./TiltShiftAxisFilter": 110
        }],
        114: [function(t, e, r) {
            function i() {
                n.AbstractFilter.call(this, null, "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n", {
                    radius: {
                        type: "1f",
                        value: .5
                    },
                    angle: {
                        type: "1f",
                        value: 5
                    },
                    offset: {
                        type: "v2",
                        value: {
                            x: .5,
                            y: .5
                        }
                    }
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.AbstractFilter.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                offset: {
                    get: function() {
                        return this.uniforms.offset.value
                    },
                    set: function(t) {
                        this.uniforms.offset.value = t
                    }
                },
                radius: {
                    get: function() {
                        return this.uniforms.radius.value
                    },
                    set: function(t) {
                        this.uniforms.radius.value = t
                    }
                },
                angle: {
                    get: function() {
                        return this.uniforms.angle.value
                    },
                    set: function(t) {
                        this.uniforms.angle.value = t
                    }
                }
            })
        }
        , {
            "../../core": 29
        }],
        115: [function(t, e, r) {
            function i() {
                this.global = new n.Point,
                this.target = null,
                this.originalEvent = null
            }
            var n = t("../core");
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.getLocalPosition = function(t, e, r) {
                var i = t.worldTransform
                  , o = r ? r : this.global
                  , s = i.a
                  , a = i.c
                  , h = i.tx
                  , l = i.b
                  , u = i.d
                  , c = i.ty
                  , p = 1 / (s * u + a * -l);
                return e = e || new n.Point,
                e.x = u * p * o.x + -a * p * o.x + (c * a - h * u) * p,
                e.y = s * p * o.y + -l * p * o.y + (-c * s + h * l) * p,
                e
            }
        }
        , {
            "../core": 29
        }],
        116: [function(t, e, r) {
            function i(t, e) {
                e = e || {},
                this.renderer = t,
                this.autoPreventDefault = void 0 !== e.autoPreventDefault ? e.autoPreventDefault : !0,
                this.interactionFrequency = e.interactionFrequency || 10,
                this.mouse = new o,
                this.eventData = {
                    stopped: !1,
                    target: null,
                    type: null,
                    data: this.mouse,
                    stopPropagation: function() {
                        this.stopped = !0
                    }
                },
                this.interactiveDataPool = [],
                this.interactionDOMElement = null,
                this.eventsAdded = !1,
                this.onMouseUp = this.onMouseUp.bind(this),
                this.processMouseUp = this.processMouseUp.bind(this),
                this.onMouseDown = this.onMouseDown.bind(this),
                this.processMouseDown = this.processMouseDown.bind(this),
                this.onMouseMove = this.onMouseMove.bind(this),
                this.processMouseMove = this.processMouseMove.bind(this),
                this.onMouseOut = this.onMouseOut.bind(this),
                this.processMouseOverOut = this.processMouseOverOut.bind(this),
                this.onTouchStart = this.onTouchStart.bind(this),
                this.processTouchStart = this.processTouchStart.bind(this),
                this.onTouchEnd = this.onTouchEnd.bind(this),
                this.processTouchEnd = this.processTouchEnd.bind(this),
                this.onTouchMove = this.onTouchMove.bind(this),
                this.processTouchMove = this.processTouchMove.bind(this),
                this.last = 0,
                this.currentCursorStyle = "inherit",
                this._tempPoint = new n.Point,
                this.resolution = 1,
                this.setTargetElement(this.renderer.view, this.renderer.resolution)
            }
            var n = t("../core")
              , o = t("./InteractionData");
            Object.assign(n.DisplayObject.prototype, t("./interactiveTarget")),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.setTargetElement = function(t, e) {
                this.removeEvents(),
                this.interactionDOMElement = t,
                this.resolution = e || 1,
                this.addEvents()
            }
            ,
            i.prototype.addEvents = function() {
                this.interactionDOMElement && (n.ticker.shared.add(this.update, this),
                window.navigator.msPointerEnabled && (this.interactionDOMElement.style["-ms-content-zooming"] = "none",
                this.interactionDOMElement.style["-ms-touch-action"] = "none"),
                window.document.addEventListener("mousemove", this.onMouseMove, !0),
                this.interactionDOMElement.addEventListener("mousedown", this.onMouseDown, !0),
                this.interactionDOMElement.addEventListener("mouseout", this.onMouseOut, !0),
                this.interactionDOMElement.addEventListener("touchstart", this.onTouchStart, !0),
                this.interactionDOMElement.addEventListener("touchend", this.onTouchEnd, !0),
                this.interactionDOMElement.addEventListener("touchmove", this.onTouchMove, !0),
                window.addEventListener("mouseup", this.onMouseUp, !0),
                this.eventsAdded = !0)
            }
            ,
            i.prototype.removeEvents = function() {
                this.interactionDOMElement && (n.ticker.shared.remove(this.update),
                window.navigator.msPointerEnabled && (this.interactionDOMElement.style["-ms-content-zooming"] = "",
                this.interactionDOMElement.style["-ms-touch-action"] = ""),
                window.document.removeEventListener("mousemove", this.onMouseMove, !0),
                this.interactionDOMElement.removeEventListener("mousedown", this.onMouseDown, !0),
                this.interactionDOMElement.removeEventListener("mouseout", this.onMouseOut, !0),
                this.interactionDOMElement.removeEventListener("touchstart", this.onTouchStart, !0),
                this.interactionDOMElement.removeEventListener("touchend", this.onTouchEnd, !0),
                this.interactionDOMElement.removeEventListener("touchmove", this.onTouchMove, !0),
                this.interactionDOMElement = null,
                window.removeEventListener("mouseup", this.onMouseUp, !0),
                this.eventsAdded = !1)
            }
            ,
            i.prototype.update = function(t) {
                if (this._deltaTime += t,
                !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0,
                this.interactionDOMElement)) {
                    if (this.didMove)
                        return void (this.didMove = !1);
                    this.cursor = "inherit",
                    this.processInteractive(this.mouse.global, this.renderer._lastObjectRendered, this.processMouseOverOut, !0),
                    this.currentCursorStyle !== this.cursor && (this.currentCursorStyle = this.cursor,
                    this.interactionDOMElement.style.cursor = this.cursor)
                }
            }
            ,
            i.prototype.dispatchEvent = function(t, e, r) {
                r.stopped || (r.target = t,
                r.type = e,
                t.emit(e, r),
                t[e] && t[e](r))
            }
            ,
            i.prototype.mapPositionToPoint = function(t, e, r) {
                var i = this.interactionDOMElement.getBoundingClientRect();
                t.x = (e - i.left) * (this.interactionDOMElement.width / i.width) / this.resolution,
                t.y = (r - i.top) * (this.interactionDOMElement.height / i.height) / this.resolution
            }
            ,
            i.prototype.processInteractive = function(t, e, r, i, n) {
                if (!e.visible)
                    return !1;
                var o = e.children
                  , s = !1;
                if (n = n || e.interactive,
                e.interactiveChildren)
                    for (var a = o.length - 1; a >= 0; a--)
                        !s && i ? s = this.processInteractive(t, o[a], r, !0, n) : this.processInteractive(t, o[a], r, !1, !1);
                return n && (i && (e.hitArea ? (e.worldTransform.applyInverse(t, this._tempPoint),
                s = e.hitArea.contains(this._tempPoint.x, this._tempPoint.y)) : e.containsPoint && (s = e.containsPoint(t))),
                e.interactive && r(e, s)),
                s
            }
            ,
            i.prototype.onMouseDown = function(t) {
                this.mouse.originalEvent = t,
                this.eventData.data = this.mouse,
                this.eventData.stopped = !1,
                this.mapPositionToPoint(this.mouse.global, t.clientX, t.clientY),
                this.autoPreventDefault && this.mouse.originalEvent.preventDefault(),
                this.processInteractive(this.mouse.global, this.renderer._lastObjectRendered, this.processMouseDown, !0)
            }
            ,
            i.prototype.processMouseDown = function(t, e) {
                var r = this.mouse.originalEvent
                  , i = 2 === r.button || 3 === r.which;
                e && (t[i ? "_isRightDown" : "_isLeftDown"] = !0,
                this.dispatchEvent(t, i ? "rightdown" : "mousedown", this.eventData))
            }
            ,
            i.prototype.onMouseUp = function(t) {
                this.mouse.originalEvent = t,
                this.eventData.data = this.mouse,
                this.eventData.stopped = !1,
                this.mapPositionToPoint(this.mouse.global, t.clientX, t.clientY),
                this.processInteractive(this.mouse.global, this.renderer._lastObjectRendered, this.processMouseUp, !0)
            }
            ,
            i.prototype.processMouseUp = function(t, e) {
                var r = this.mouse.originalEvent
                  , i = 2 === r.button || 3 === r.which
                  , n = i ? "_isRightDown" : "_isLeftDown";
                e ? (this.dispatchEvent(t, i ? "rightup" : "mouseup", this.eventData),
                t[n] && (t[n] = !1,
                this.dispatchEvent(t, i ? "rightclick" : "click", this.eventData))) : t[n] && (t[n] = !1,
                this.dispatchEvent(t, i ? "rightupoutside" : "mouseupoutside", this.eventData))
            }
            ,
            i.prototype.onMouseMove = function(t) {
                this.mouse.originalEvent = t,
                this.eventData.data = this.mouse,
                this.eventData.stopped = !1,
                this.mapPositionToPoint(this.mouse.global, t.clientX, t.clientY),
                this.didMove = !0,
                this.cursor = "inherit",
                this.processInteractive(this.mouse.global, this.renderer._lastObjectRendered, this.processMouseMove, !0),
                this.currentCursorStyle !== this.cursor && (this.currentCursorStyle = this.cursor,
                this.interactionDOMElement.style.cursor = this.cursor)
            }
            ,
            i.prototype.processMouseMove = function(t, e) {
                this.dispatchEvent(t, "mousemove", this.eventData),
                this.processMouseOverOut(t, e)
            }
            ,
            i.prototype.onMouseOut = function(t) {
                this.mouse.originalEvent = t,
                this.eventData.stopped = !1,
                this.mapPositionToPoint(this.mouse.global, t.clientX, t.clientY),
                this.interactionDOMElement.style.cursor = "inherit",
                this.mapPositionToPoint(this.mouse.global, t.clientX, t.clientY),
                this.processInteractive(this.mouse.global, this.renderer._lastObjectRendered, this.processMouseOverOut, !1)
            }
            ,
            i.prototype.processMouseOverOut = function(t, e) {
                e ? (t._over || (t._over = !0,
                this.dispatchEvent(t, "mouseover", this.eventData)),
                t.buttonMode && (this.cursor = t.defaultCursor)) : t._over && (t._over = !1,
                this.dispatchEvent(t, "mouseout", this.eventData))
            }
            ,
            i.prototype.onTouchStart = function(t) {
                this.autoPreventDefault && t.preventDefault();
                for (var e = t.changedTouches, r = e.length, i = 0; r > i; i++) {
                    var n = e[i]
                      , o = this.getTouchData(n);
                    o.originalEvent = t,
                    this.eventData.data = o,
                    this.eventData.stopped = !1,
                    this.processInteractive(o.global, this.renderer._lastObjectRendered, this.processTouchStart, !0),
                    this.returnTouchData(o)
                }
            }
            ,
            i.prototype.processTouchStart = function(t, e) {
                e && (t._touchDown = !0,
                this.dispatchEvent(t, "touchstart", this.eventData))
            }
            ,
            i.prototype.onTouchEnd = function(t) {
                this.autoPreventDefault && t.preventDefault();
                for (var e = t.changedTouches, r = e.length, i = 0; r > i; i++) {
                    var n = e[i]
                      , o = this.getTouchData(n);
                    o.originalEvent = t,
                    this.eventData.data = o,
                    this.eventData.stopped = !1,
                    this.processInteractive(o.global, this.renderer._lastObjectRendered, this.processTouchEnd, !0),
                    this.returnTouchData(o)
                }
            }
            ,
            i.prototype.processTouchEnd = function(t, e) {
                e ? (this.dispatchEvent(t, "touchend", this.eventData),
                t._touchDown && (t._touchDown = !1,
                this.dispatchEvent(t, "tap", this.eventData))) : t._touchDown && (t._touchDown = !1,
                this.dispatchEvent(t, "touchendoutside", this.eventData))
            }
            ,
            i.prototype.onTouchMove = function(t) {
                this.autoPreventDefault && t.preventDefault();
                for (var e = t.changedTouches, r = e.length, i = 0; r > i; i++) {
                    var n = e[i]
                      , o = this.getTouchData(n);
                    o.originalEvent = t,
                    this.eventData.data = o,
                    this.eventData.stopped = !1,
                    this.processInteractive(o.global, this.renderer._lastObjectRendered, this.processTouchMove, !1),
                    this.returnTouchData(o)
                }
            }
            ,
            i.prototype.processTouchMove = function(t, e) {
                e = e,
                this.dispatchEvent(t, "touchmove", this.eventData)
            }
            ,
            i.prototype.getTouchData = function(t) {
                var e = this.interactiveDataPool.pop();
                return e || (e = new o),
                e.identifier = t.identifier,
                this.mapPositionToPoint(e.global, t.clientX, t.clientY),
                navigator.isCocoonJS && (e.global.x = e.global.x / this.resolution,
                e.global.y = e.global.y / this.resolution),
                t.globalX = e.global.x,
                t.globalY = e.global.y,
                e
            }
            ,
            i.prototype.returnTouchData = function(t) {
                this.interactiveDataPool.push(t)
            }
            ,
            i.prototype.destroy = function() {
                this.removeEvents(),
                this.renderer = null,
                this.mouse = null,
                this.eventData = null,
                this.interactiveDataPool = null,
                this.interactionDOMElement = null,
                this.onMouseUp = null,
                this.processMouseUp = null,
                this.onMouseDown = null,
                this.processMouseDown = null,
                this.onMouseMove = null,
                this.processMouseMove = null,
                this.onMouseOut = null,
                this.processMouseOverOut = null,
                this.onTouchStart = null,
                this.processTouchStart = null,
                this.onTouchEnd = null,
                this.processTouchEnd = null,
                this.onTouchMove = null,
                this.processTouchMove = null,
                this._tempPoint = null
            }
            ,
            n.WebGLRenderer.registerPlugin("interaction", i),
            n.CanvasRenderer.registerPlugin("interaction", i)
        }
        , {
            "../core": 29,
            "./InteractionData": 115,
            "./interactiveTarget": 118
        }],
        117: [function(t, e, r) {
            e.exports = {
                InteractionData: t("./InteractionData"),
                InteractionManager: t("./InteractionManager"),
                interactiveTarget: t("./interactiveTarget")
            }
        }
        , {
            "./InteractionData": 115,
            "./InteractionManager": 116,
            "./interactiveTarget": 118
        }],
        118: [function(t, e, r) {
            var i = {
                interactive: !1,
                buttonMode: !1,
                interactiveChildren: !0,
                defaultCursor: "pointer",
                _over: !1,
                _touchDown: !1
            };
            e.exports = i
        }
        , {}],
        119: [function(t, e, r) {
            function i(t, e) {
                var r = {}
                  , i = t.data.getElementsByTagName("info")[0]
                  , n = t.data.getElementsByTagName("common")[0];
                r.font = i.getAttribute("face"),
                r.size = parseInt(i.getAttribute("size"), 10),
                r.lineHeight = parseInt(n.getAttribute("lineHeight"), 10),
                r.chars = {};
                for (var a = t.data.getElementsByTagName("char"), h = 0; h < a.length; h++) {
                    var l = parseInt(a[h].getAttribute("id"), 10)
                      , u = new o.Rectangle(parseInt(a[h].getAttribute("x"), 10) + e.frame.x,parseInt(a[h].getAttribute("y"), 10) + e.frame.y,parseInt(a[h].getAttribute("width"), 10),parseInt(a[h].getAttribute("height"), 10));
                    r.chars[l] = {
                        xOffset: parseInt(a[h].getAttribute("xoffset"), 10),
                        yOffset: parseInt(a[h].getAttribute("yoffset"), 10),
                        xAdvance: parseInt(a[h].getAttribute("xadvance"), 10),
                        kerning: {},
                        texture: new o.Texture(e.baseTexture,u)
                    }
                }
                var c = t.data.getElementsByTagName("kerning");
                for (h = 0; h < c.length; h++) {
                    var p = parseInt(c[h].getAttribute("first"), 10)
                      , d = parseInt(c[h].getAttribute("second"), 10)
                      , f = parseInt(c[h].getAttribute("amount"), 10);
                    r.chars[d].kerning[p] = f
                }
                t.bitmapFont = r,
                s.BitmapText.fonts[r.font] = r
            }
            var n = t("resource-loader").Resource
              , o = t("../core")
              , s = t("../extras")
              , a = t("path");
            e.exports = function() {
                return function(t, e) {
                    if (!t.data || !t.isXml)
                        return e();
                    if (0 === t.data.getElementsByTagName("page").length || 0 === t.data.getElementsByTagName("info").length || null === t.data.getElementsByTagName("info")[0].getAttribute("face"))
                        return e();
                    var r = a.dirname(t.url);
                    "." === r && (r = ""),
                    this.baseUrl && r && ("/" === this.baseUrl.charAt(this.baseUrl.length - 1) && (r += "/"),
                    r = r.replace(this.baseUrl, "")),
                    r && "/" !== r.charAt(r.length - 1) && (r += "/");
                    var s = r + t.data.getElementsByTagName("page")[0].getAttribute("file");
                    if (o.utils.TextureCache[s])
                        i(t, o.utils.TextureCache[s]),
                        e();
                    else {
                        var h = {
                            crossOrigin: t.crossOrigin,
                            loadType: n.LOAD_TYPE.IMAGE
                        };
                        this.add(t.name + "_image", s, h, function(r) {
                            i(t, r.texture),
                            e()
                        })
                    }
                }
            }
        }
        , {
            "../core": 29,
            "../extras": 85,
            path: 3,
            "resource-loader": 18
        }],
        120: [function(t, e, r) {
            e.exports = {
                Loader: t("./loader"),
                bitmapFontParser: t("./bitmapFontParser"),
                spritesheetParser: t("./spritesheetParser"),
                textureParser: t("./textureParser"),
                Resource: t("resource-loader").Resource
            }
        }
        , {
            "./bitmapFontParser": 119,
            "./loader": 121,
            "./spritesheetParser": 122,
            "./textureParser": 123,
            "resource-loader": 18
        }],
        121: [function(t, e, r) {
            function i(t, e) {
                n.call(this, t, e);
                for (var r = 0; r < i._pixiMiddleware.length; ++r)
                    this.use(i._pixiMiddleware[r]())
            }
            var n = t("resource-loader")
              , o = t("./textureParser")
              , s = t("./spritesheetParser")
              , a = t("./bitmapFontParser");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i._pixiMiddleware = [n.middleware.parsing.blob, o, s, a],
            i.addPixiMiddleware = function(t) {
                i._pixiMiddleware.push(t)
            }
            ;
            var h = n.Resource;
            h.setExtensionXhrType("fnt", h.XHR_RESPONSE_TYPE.DOCUMENT)
        }
        , {
            "./bitmapFontParser": 119,
            "./spritesheetParser": 122,
            "./textureParser": 123,
            "resource-loader": 18
        }],
        122: [function(t, e, r) {
            var i = t("resource-loader").Resource
              , n = t("path")
              , o = t("../core");
            e.exports = function() {
                return function(t, e) {
                    if (!t.data || !t.isJson || !t.data.frames)
                        return e();
                    var r = {
                        crossOrigin: t.crossOrigin,
                        loadType: i.LOAD_TYPE.IMAGE
                    }
                      , s = n.dirname(t.url.replace(this.baseUrl, ""))
                      , a = o.utils.getResolutionOfUrl(t.url);
                    this.add(t.name + "_image", s + "/" + t.data.meta.image, r, function(r) {
                        t.textures = {};
                        var i = t.data.frames;
                        for (var n in i) {
                            var s = i[n].frame;
                            if (s) {
                                var h = null
                                  , l = null;
                                if (h = i[n].rotated ? new o.Rectangle(s.x,s.y,s.h,s.w) : new o.Rectangle(s.x,s.y,s.w,s.h),
                                i[n].trimmed && (l = new o.Rectangle(i[n].spriteSourceSize.x / a,i[n].spriteSourceSize.y / a,i[n].sourceSize.w / a,i[n].sourceSize.h / a)),
                                i[n].rotated) {
                                    var u = h.width;
                                    h.width = h.height,
                                    h.height = u
                                }
                                h.x /= a,
                                h.y /= a,
                                h.width /= a,
                                h.height /= a,
                                t.textures[n] = new o.Texture(r.texture.baseTexture,h,h.clone(),l,i[n].rotated),
                                o.utils.TextureCache[n] = t.textures[n]
                            }
                        }
                        e()
                    })
                }
            }
        }
        , {
            "../core": 29,
            path: 3,
            "resource-loader": 18
        }],
        123: [function(t, e, r) {
            var i = t("../core");
            e.exports = function() {
                return function(t, e) {
                    t.data && t.isImage && (t.texture = new i.Texture(new i.BaseTexture(t.data,null,i.utils.getResolutionOfUrl(t.url))),
                    i.utils.TextureCache[t.url] = t.texture),
                    e()
                }
            }
        }
        , {
            "../core": 29
        }],
        124: [function(t, e, r) {
            function i(t, e, r, o, s) {
                n.Container.call(this),
                this._texture = null,
                this.uvs = r || new Float32Array([0, 1, 1, 1, 1, 0, 0, 1]),
                this.vertices = e || new Float32Array([0, 0, 100, 0, 100, 100, 0, 100]),
                this.indices = o || new Uint16Array([0, 1, 2, 3]),
                this.dirty = !0,
                this.blendMode = n.BLEND_MODES.NORMAL,
                this.canvasPadding = 0,
                this.drawMode = s || i.DRAW_MODES.TRIANGLE_MESH,
                this.texture = t
            }
            var n = t("../core")
              , o = new n.Point
              , s = new n.Polygon;
            i.prototype = Object.create(n.Container.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            Object.defineProperties(i.prototype, {
                texture: {
                    get: function() {
                        return this._texture
                    },
                    set: function(t) {
                        this._texture !== t && (this._texture = t,
                        t && (t.baseTexture.hasLoaded ? this._onTextureUpdate() : t.once("update", this._onTextureUpdate, this)))
                    }
                }
            }),
            i.prototype._renderWebGL = function(t) {
                t.setObjectRenderer(t.plugins.mesh),
                t.plugins.mesh.render(this)
            }
            ,
            i.prototype._renderCanvas = function(t) {
                var e = t.context
                  , r = this.worldTransform;
                t.roundPixels ? e.setTransform(r.a, r.b, r.c, r.d, 0 | r.tx, 0 | r.ty) : e.setTransform(r.a, r.b, r.c, r.d, r.tx, r.ty),
                this.drawMode === i.DRAW_MODES.TRIANGLE_MESH ? this._renderCanvasTriangleMesh(e) : this._renderCanvasTriangles(e)
            }
            ,
            i.prototype._renderCanvasTriangleMesh = function(t) {
                for (var e = this.vertices, r = this.uvs, i = e.length / 2, n = 0; i - 2 > n; n++) {
                    var o = 2 * n;
                    this._renderCanvasDrawTriangle(t, e, r, o, o + 2, o + 4)
                }
            }
            ,
            i.prototype._renderCanvasTriangles = function(t) {
                for (var e = this.vertices, r = this.uvs, i = this.indices, n = i.length, o = 0; n > o; o += 3) {
                    var s = 2 * i[o]
                      , a = 2 * i[o + 1]
                      , h = 2 * i[o + 2];
                    this._renderCanvasDrawTriangle(t, e, r, s, a, h)
                }
            }
            ,
            i.prototype._renderCanvasDrawTriangle = function(t, e, r, i, n, o) {
                var s = this._texture.baseTexture.source
                  , a = this._texture.baseTexture.width
                  , h = this._texture.baseTexture.height
                  , l = e[i]
                  , u = e[n]
                  , c = e[o]
                  , p = e[i + 1]
                  , d = e[n + 1]
                  , f = e[o + 1]
                  , v = r[i] * a
                  , g = r[n] * a
                  , m = r[o] * a
                  , y = r[i + 1] * h
                  , x = r[n + 1] * h
                  , b = r[o + 1] * h;
                if (this.canvasPadding > 0) {
                    var _ = this.canvasPadding / this.worldTransform.a
                      , T = this.canvasPadding / this.worldTransform.d
                      , E = (l + u + c) / 3
                      , S = (p + d + f) / 3
                      , A = l - E
                      , w = p - S
                      , C = Math.sqrt(A * A + w * w);
                    l = E + A / C * (C + _),
                    p = S + w / C * (C + T),
                    A = u - E,
                    w = d - S,
                    C = Math.sqrt(A * A + w * w),
                    u = E + A / C * (C + _),
                    d = S + w / C * (C + T),
                    A = c - E,
                    w = f - S,
                    C = Math.sqrt(A * A + w * w),
                    c = E + A / C * (C + _),
                    f = S + w / C * (C + T)
                }
                t.save(),
                t.beginPath(),
                t.moveTo(l, p),
                t.lineTo(u, d),
                t.lineTo(c, f),
                t.closePath(),
                t.clip();
                var M = v * x + y * m + g * b - x * m - y * g - v * b
                  , R = l * x + y * c + u * b - x * c - y * u - l * b
                  , D = v * u + l * m + g * c - u * m - l * g - v * c
                  , F = v * x * c + y * u * m + l * g * b - l * x * m - y * g * c - v * u * b
                  , P = p * x + y * f + d * b - x * f - y * d - p * b
                  , O = v * d + p * m + g * f - d * m - p * g - v * f
                  , B = v * x * f + y * d * m + p * g * b - p * x * m - y * g * f - v * d * b;
                t.transform(R / M, P / M, D / M, O / M, F / M, B / M),
                t.drawImage(s, 0, 0),
                t.restore()
            }
            ,
            i.prototype.renderMeshFlat = function(t) {
                var e = this.context
                  , r = t.vertices
                  , i = r.length / 2;
                e.beginPath();
                for (var n = 1; i - 2 > n; n++) {
                    var o = 2 * n
                      , s = r[o]
                      , a = r[o + 2]
                      , h = r[o + 4]
                      , l = r[o + 1]
                      , u = r[o + 3]
                      , c = r[o + 5];
                    e.moveTo(s, l),
                    e.lineTo(a, u),
                    e.lineTo(h, c)
                }
                e.fillStyle = "#FF0000",
                e.fill(),
                e.closePath()
            }
            ,
            i.prototype._onTextureUpdate = function() {
                this.updateFrame = !0
            }
            ,
            i.prototype.getBounds = function(t) {
                if (!this._currentBounds) {
                    for (var e = t || this.worldTransform, r = e.a, i = e.b, o = e.c, s = e.d, a = e.tx, h = e.ty, l = -(1 / 0), u = -(1 / 0), c = 1 / 0, p = 1 / 0, d = this.vertices, f = 0, v = d.length; v > f; f += 2) {
                        var g = d[f]
                          , m = d[f + 1]
                          , y = r * g + o * m + a
                          , x = s * m + i * g + h;
                        c = c > y ? y : c,
                        p = p > x ? x : p,
                        l = y > l ? y : l,
                        u = x > u ? x : u
                    }
                    if (c === -(1 / 0) || u === 1 / 0)
                        return n.Rectangle.EMPTY;
                    var b = this._bounds;
                    b.x = c,
                    b.width = l - c,
                    b.y = p,
                    b.height = u - p,
                    this._currentBounds = b
                }
                return this._currentBounds
            }
            ,
            i.prototype.containsPoint = function(t) {
                if (!this.getBounds().contains(t.x, t.y))
                    return !1;
                this.worldTransform.applyInverse(t, o);
                var e, r, n = this.vertices, a = s.points;
                if (this.drawMode === i.DRAW_MODES.TRIANGLES) {
                    var h = this.indices;
                    for (r = this.indices.length,
                    e = 0; r > e; e += 3) {
                        var l = 2 * h[e]
                          , u = 2 * h[e + 1]
                          , c = 2 * h[e + 2];
                        if (a[0] = n[l],
                        a[1] = n[l + 1],
                        a[2] = n[u],
                        a[3] = n[u + 1],
                        a[4] = n[c],
                        a[5] = n[c + 1],
                        s.contains(o.x, o.y))
                            return !0
                    }
                } else
                    for (r = n.length,
                    e = 0; r > e; e += 6)
                        if (a[0] = n[e],
                        a[1] = n[e + 1],
                        a[2] = n[e + 2],
                        a[3] = n[e + 3],
                        a[4] = n[e + 4],
                        a[5] = n[e + 5],
                        s.contains(o.x, o.y))
                            return !0;
                return !1
            }
            ,
            i.DRAW_MODES = {
                TRIANGLE_MESH: 0,
                TRIANGLES: 1
            }
        }
        , {
            "../core": 29
        }],
        125: [function(t, e, r) {
            function i(t, e) {
                n.call(this, t),
                this.points = e,
                this.vertices = new Float32Array(4 * e.length),
                this.uvs = new Float32Array(4 * e.length),
                this.colors = new Float32Array(2 * e.length),
                this.indices = new Uint16Array(2 * e.length),
                this._ready = !0,
                this.refresh()
            }
            var n = t("./Mesh")
              , o = t("../core");
            i.prototype = Object.create(n.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            i.prototype.refresh = function() {
                var t = this.points;
                if (!(t.length < 1) && this._texture._uvs) {
                    var e = this.uvs
                      , r = this.indices
                      , i = this.colors
                      , n = this._texture._uvs
                      , s = new o.Point(n.x0,n.y0)
                      , a = new o.Point(n.x2 - n.x0,n.y2 - n.y0);
                    e[0] = 0 + s.x,
                    e[1] = 0 + s.y,
                    e[2] = 0 + s.x,
                    e[3] = 1 * a.y + s.y,
                    i[0] = 1,
                    i[1] = 1,
                    r[0] = 0,
                    r[1] = 1;
                    for (var h, l, u, c = t.length, p = 1; c > p; p++)
                        h = t[p],
                        l = 4 * p,
                        u = p / (c - 1),
                        e[l] = u * a.x + s.x,
                        e[l + 1] = 0 + s.y,
                        e[l + 2] = u * a.x + s.x,
                        e[l + 3] = 1 * a.y + s.y,
                        l = 2 * p,
                        i[l] = 1,
                        i[l + 1] = 1,
                        l = 2 * p,
                        r[l] = l,
                        r[l + 1] = l + 1;
                    this.dirty = !0
                }
            }
            ,
            i.prototype._onTextureUpdate = function() {
                n.prototype._onTextureUpdate.call(this),
                this._ready && this.refresh()
            }
            ,
            i.prototype.updateTransform = function() {
                var t = this.points;
                if (!(t.length < 1)) {
                    for (var e, r, i, n, o, s, a = t[0], h = 0, l = 0, u = this.vertices, c = t.length, p = 0; c > p; p++)
                        r = t[p],
                        i = 4 * p,
                        e = p < t.length - 1 ? t[p + 1] : r,
                        l = -(e.x - a.x),
                        h = e.y - a.y,
                        n = 10 * (1 - p / (c - 1)),
                        n > 1 && (n = 1),
                        o = Math.sqrt(h * h + l * l),
                        s = this._texture.height / 2,
                        h /= o,
                        l /= o,
                        h *= s,
                        l *= s,
                        u[i] = r.x + h,
                        u[i + 1] = r.y + l,
                        u[i + 2] = r.x - h,
                        u[i + 3] = r.y - l,
                        a = r;
                    this.containerUpdateTransform()
                }
            }
        }
        , {
            "../core": 29,
            "./Mesh": 124
        }],
        126: [function(t, e, r) {
            e.exports = {
                Mesh: t("./Mesh"),
                Rope: t("./Rope"),
                MeshRenderer: t("./webgl/MeshRenderer"),
                MeshShader: t("./webgl/MeshShader")
            }
        }
        , {
            "./Mesh": 124,
            "./Rope": 125,
            "./webgl/MeshRenderer": 127,
            "./webgl/MeshShader": 128
        }],
        127: [function(t, e, r) {
            function i(t) {
                n.ObjectRenderer.call(this, t),
                this.indices = new Uint16Array(15e3);
                for (var e = 0, r = 0; 15e3 > e; e += 6,
                r += 4)
                    this.indices[e + 0] = r + 0,
                    this.indices[e + 1] = r + 1,
                    this.indices[e + 2] = r + 2,
                    this.indices[e + 3] = r + 0,
                    this.indices[e + 4] = r + 2,
                    this.indices[e + 5] = r + 3
            }
            var n = t("../../core")
              , o = t("../Mesh");
            i.prototype = Object.create(n.ObjectRenderer.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            n.WebGLRenderer.registerPlugin("mesh", i),
            i.prototype.onContextChange = function() {}
            ,
            i.prototype.render = function(t) {
                t._vertexBuffer || this._initWebGL(t);
                var e = this.renderer
                  , r = e.gl
                  , i = t._texture.baseTexture
                  , n = e.shaderManager.plugins.meshShader
                  , s = t.drawMode === o.DRAW_MODES.TRIANGLE_MESH ? r.TRIANGLE_STRIP : r.TRIANGLES;
                e.blendModeManager.setBlendMode(t.blendMode),
                r.uniformMatrix3fv(n.uniforms.translationMatrix._location, !1, t.worldTransform.toArray(!0)),
                r.uniformMatrix3fv(n.uniforms.projectionMatrix._location, !1, e.currentRenderTarget.projectionMatrix.toArray(!0)),
                r.uniform1f(n.uniforms.alpha._location, t.worldAlpha),
                t.dirty ? (t.dirty = !1,
                r.bindBuffer(r.ARRAY_BUFFER, t._vertexBuffer),
                r.bufferData(r.ARRAY_BUFFER, t.vertices, r.STATIC_DRAW),
                r.vertexAttribPointer(n.attributes.aVertexPosition, 2, r.FLOAT, !1, 0, 0),
                r.bindBuffer(r.ARRAY_BUFFER, t._uvBuffer),
                r.bufferData(r.ARRAY_BUFFER, t.uvs, r.STATIC_DRAW),
                r.vertexAttribPointer(n.attributes.aTextureCoord, 2, r.FLOAT, !1, 0, 0),
                r.activeTexture(r.TEXTURE0),
                i._glTextures[r.id] ? r.bindTexture(r.TEXTURE_2D, i._glTextures[r.id]) : this.renderer.updateTexture(i),
                r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, t._indexBuffer),
                r.bufferData(r.ELEMENT_ARRAY_BUFFER, t.indices, r.STATIC_DRAW)) : (r.bindBuffer(r.ARRAY_BUFFER, t._vertexBuffer),
                r.bufferSubData(r.ARRAY_BUFFER, 0, t.vertices),
                r.vertexAttribPointer(n.attributes.aVertexPosition, 2, r.FLOAT, !1, 0, 0),
                r.bindBuffer(r.ARRAY_BUFFER, t._uvBuffer),
                r.vertexAttribPointer(n.attributes.aTextureCoord, 2, r.FLOAT, !1, 0, 0),
                r.activeTexture(r.TEXTURE0),
                i._glTextures[r.id] ? r.bindTexture(r.TEXTURE_2D, i._glTextures[r.id]) : this.renderer.updateTexture(i),
                r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, t._indexBuffer),
                r.bufferSubData(r.ELEMENT_ARRAY_BUFFER, 0, t.indices)),
                r.drawElements(s, t.indices.length, r.UNSIGNED_SHORT, 0)
            }
            ,
            i.prototype._initWebGL = function(t) {
                var e = this.renderer.gl;
                t._vertexBuffer = e.createBuffer(),
                t._indexBuffer = e.createBuffer(),
                t._uvBuffer = e.createBuffer(),
                e.bindBuffer(e.ARRAY_BUFFER, t._vertexBuffer),
                e.bufferData(e.ARRAY_BUFFER, t.vertices, e.DYNAMIC_DRAW),
                e.bindBuffer(e.ARRAY_BUFFER, t._uvBuffer),
                e.bufferData(e.ARRAY_BUFFER, t.uvs, e.STATIC_DRAW),
                t.colors && (t._colorBuffer = e.createBuffer(),
                e.bindBuffer(e.ARRAY_BUFFER, t._colorBuffer),
                e.bufferData(e.ARRAY_BUFFER, t.colors, e.STATIC_DRAW)),
                e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t._indexBuffer),
                e.bufferData(e.ELEMENT_ARRAY_BUFFER, t.indices, e.STATIC_DRAW)
            }
            ,
            i.prototype.flush = function() {}
            ,
            i.prototype.start = function() {
                var t = this.renderer.shaderManager.plugins.meshShader;
                this.renderer.shaderManager.setShader(t)
            }
            ,
            i.prototype.destroy = function() {}
        }
        , {
            "../../core": 29,
            "../Mesh": 124
        }],
        128: [function(t, e, r) {
            function i(t) {
                n.Shader.call(this, t, ["precision lowp float;", "attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform mat3 projectionMatrix;", "varying vec2 vTextureCoord;", "void main(void){", "   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"].join("\n"), ["precision lowp float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void){", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;", "}"].join("\n"), {
                    alpha: {
                        type: "1f",
                        value: 0
                    },
                    translationMatrix: {
                        type: "mat3",
                        value: new Float32Array(9)
                    },
                    projectionMatrix: {
                        type: "mat3",
                        value: new Float32Array(9)
                    }
                }, {
                    aVertexPosition: 0,
                    aTextureCoord: 0
                })
            }
            var n = t("../../core");
            i.prototype = Object.create(n.Shader.prototype),
            i.prototype.constructor = i,
            e.exports = i,
            n.ShaderManager.registerPlugin("meshShader", i)
        }
        , {
            "../../core": 29
        }],
        129: [function(t, e, r) {
            Object.assign || (Object.assign = t("object-assign"))
        }
        , {
            "object-assign": 12
        }],
        130: [function(t, e, r) {
            t("./Object.assign"),
            t("./requestAnimationFrame")
        }
        , {
            "./Object.assign": 129,
            "./requestAnimationFrame": 131
        }],
        131: [function(t, e, r) {
            (function(t) {
                if (Date.now && Date.prototype.getTime || (Date.now = function() {
                    return (new Date).getTime()
                }
                ),
                !t.performance || !t.performance.now) {
                    var e = Date.now();
                    t.performance || (t.performance = {}),
                    t.performance.now = function() {
                        return Date.now() - e
                    }
                }
                for (var r = Date.now(), i = ["ms", "moz", "webkit", "o"], n = 0; n < i.length && !t.requestAnimationFrame; ++n)
                    t.requestAnimationFrame = t[i[n] + "RequestAnimationFrame"],
                    t.cancelAnimationFrame = t[i[n] + "CancelAnimationFrame"] || t[i[n] + "CancelRequestAnimationFrame"];
                t.requestAnimationFrame || (t.requestAnimationFrame = function(t) {
                    if ("function" != typeof t)
                        throw new TypeError(t + "is not a function");
                    var e = Date.now()
                      , i = 16 + r - e;
                    return 0 > i && (i = 0),
                    r = e,
                    setTimeout(function() {
                        r = Date.now(),
                        t(performance.now())
                    }, i)
                }
                ),
                t.cancelAnimationFrame || (t.cancelAnimationFrame = function(t) {
                    clearTimeout(t)
                }
                )
            }
            ).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
        }
        , {}]
    }, {}, [1])(1)
});
//XXX: PIXI 3.0.7 spine
!function t(e, n, i) {
    function r(o, s) {
        if (!n[o]) {
            if (!e[o]) {
                var l = "function" == typeof require && require;
                if (!s && l)
                    return l(o, !0);
                if (a)
                    return a(o, !0);
                var h = new Error("Cannot find module '" + o + "'");
                throw h.code = "MODULE_NOT_FOUND",
                h
            }
            var m = n[o] = {
                exports: {}
            };
            e[o][0].call(m.exports, function(t) {
                var n = e[o][1][t];
                return r(n ? n : t)
            }, m, m.exports, t, e, n, i)
        }
        return n[o].exports
    }
    for (var a = "function" == typeof require && require, o = 0; o < i.length; o++)
        r(i[o]);
    return r
}({
    1: [function(t, e, n) {
        e.exports = PIXI.spine = {
            Spine: t("./Spine"),
            SpineRuntime: t("./SpineRuntime"),
            loaders: t("./loaders")
        }
    }
    , {
        "./Spine": 43,
        "./SpineRuntime": 41,
        "./loaders": 46
    }],
    2: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = function(t, e, n) {
            this.name = t,
            this.timelines = e,
            this.duration = n
        }
        ,
        i.Animation.prototype = {
            apply: function(t, e, n, i, r) {
                i && 0 != this.duration && (n %= this.duration,
                e %= this.duration);
                for (var a = this.timelines, o = 0, s = a.length; s > o; o++)
                    a[o].apply(t, e, n, r, 1)
            },
            mix: function(t, e, n, i, r, a) {
                i && 0 != this.duration && (n %= this.duration,
                e %= this.duration);
                for (var o = this.timelines, s = 0, l = o.length; l > s; s++)
                    o[s].apply(t, e, n, r, a)
            }
        },
        i.Animation.binarySearch = function(t, e, n) {
            var i = 0
              , r = Math.floor(t.length / n) - 2;
            if (!r)
                return n;
            for (var a = r >>> 1; ; ) {
                if (t[(a + 1) * n] <= e ? i = a + 1 : r = a,
                i == r)
                    return (i + 1) * n;
                a = i + r >>> 1
            }
        }
        ,
        i.Animation.binarySearch1 = function(t, e) {
            var n = 0
              , i = t.length - 2;
            if (!i)
                return 1;
            for (var r = i >>> 1; ; ) {
                if (t[r + 1] <= e ? n = r + 1 : i = r,
                n == i)
                    return n + 1;
                r = n + i >>> 1
            }
        }
        ,
        i.Animation.linearSearch = function(t, e, n) {
            for (var i = 0, r = t.length - n; r >= i; i += n)
                if (t[i] > e)
                    return i;
            return -1
        }
        ,
        e.exports = i.Animation
    }
    , {
        "../SpineUtil": 42
    }],
    3: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.TrackEntry = t("./TrackEntry"),
        i.AnimationState = function(t) {
            this.data = t,
            this.tracks = [],
            this.events = []
        }
        ,
        i.AnimationState.prototype = {
            onStart: null,
            onEnd: null,
            onComplete: null,
            onEvent: null,
            timeScale: 1,
            update: function(t) {
                t *= this.timeScale;
                for (var e = 0; e < this.tracks.length; e++) {
                    var n = this.tracks[e];
                    if (n) {
                        if (n.time += t * n.timeScale,
                        n.previous) {
                            var i = t * n.previous.timeScale;
                            n.previous.time += i,
                            n.mixTime += i
                        }
                        var r = n.next;
                        r ? (r.time = n.lastTime - r.delay,
                        r.time >= 0 && this.setCurrent(e, r)) : !n.loop && n.lastTime >= n.endTime && this.clearTrack(e)
                    }
                }
            },
            apply: function(t) {
                t.resetDrawOrder();
                for (var e = 0; e < this.tracks.length; e++) {
                    var n = this.tracks[e];
                    if (n) {
                        this.events.length = 0;
                        var i = n.time
                          , r = n.lastTime
                          , a = n.endTime
                          , o = n.loop;
                        !o && i > a && (i = a);
                        var s = n.previous;
                        if (s) {
                            var l = s.time;
                            !s.loop && l > s.endTime && (l = s.endTime),
                            s.animation.apply(t, l, l, s.loop, null);
                            var h = n.mixTime / n.mixDuration * n.mix;
                            h >= 1 && (h = 1,
                            n.previous = null),
                            n.animation.mix(t, n.lastTime, i, o, this.events, h)
                        } else
                            1 == n.mix ? n.animation.apply(t, n.lastTime, i, o, this.events) : n.animation.mix(t, n.lastTime, i, o, this.events, n.mix);
                        for (var m = 0, u = this.events.length; u > m; m++) {
                            var f = this.events[m];
                            n.onEvent && n.onEvent(e, f),
                            this.onEvent && this.onEvent(e, f)
                        }
                        if (o ? r % a > i % a : a > r && i >= a) {
                            var c = Math.floor(i / a);
                            n.onComplete && n.onComplete(e, c),
                            this.onComplete && this.onComplete(e, c)
                        }
                        n.lastTime = n.time
                    }
                }
            },
            clearTracks: function() {
                for (var t = 0, e = this.tracks.length; e > t; t++)
                    this.clearTrack(t);
                this.tracks.length = 0
            },
            clearTrack: function(t) {
                if (!(t >= this.tracks.length)) {
                    var e = this.tracks[t];
                    e && (e.onEnd && e.onEnd(t),
                    this.onEnd && this.onEnd(t),
                    this.tracks[t] = null)
                }
            },
            _expandToIndex: function(t) {
                if (t < this.tracks.length)
                    return this.tracks[t];
                for (; t >= this.tracks.length; )
                    this.tracks.push(null);
                return null
            },
            setCurrent: function(t, e) {
                var n = this._expandToIndex(t);
                if (n) {
                    var i = n.previous;
                    n.previous = null,
                    n.onEnd && n.onEnd(t),
                    this.onEnd && this.onEnd(t),
                    e.mixDuration = this.data.getMix(n.animation, e.animation),
                    e.mixDuration > 0 && (e.mixTime = 0,
                    e.previous = i && n.mixTime / n.mixDuration < .5 ? i : n)
                }
                this.tracks[t] = e,
                e.onStart && e.onStart(t),
                this.onStart && this.onStart(t)
            },
            setAnimationByName: function(t, e, n) {
                var i = this.data.skeletonData.findAnimation(e);
                if (!i)
                    throw "Animation not found: " + e;
                return this.setAnimation(t, i, n)
            },
            setAnimation: function(t, e, n) {
                var r = new i.TrackEntry;
                return r.animation = e,
                r.loop = n,
                r.endTime = e.duration,
                this.setCurrent(t, r),
                r
            },
            addAnimationByName: function(t, e, n, i) {
                var r = this.data.skeletonData.findAnimation(e);
                if (!r)
                    throw "Animation not found: " + e;
                return this.addAnimation(t, r, n, i)
            },
            addAnimation: function(t, e, n, r) {
                var a = new i.TrackEntry;
                a.animation = e,
                a.loop = n,
                a.endTime = e.duration;
                var o = this._expandToIndex(t);
                if (o) {
                    for (; o.next; )
                        o = o.next;
                    o.next = a
                } else
                    this.tracks[t] = a;
                return 0 >= r && (o ? r += o.endTime - this.data.getMix(o.animation, e) : r = 0),
                a.delay = r,
                a
            },
            getCurrent: function(t) {
                return t >= this.tracks.length ? null : this.tracks[t]
            }
        },
        e.exports = i.AnimationState
    }
    , {
        "../SpineUtil": 42,
        "./TrackEntry": 39
    }],
    4: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AnimationStateData = function(t) {
            this.skeletonData = t,
            this.animationToMixTime = {}
        }
        ,
        i.AnimationStateData.prototype = {
            defaultMix: 0,
            setMixByName: function(t, e, n) {
                var i = this.skeletonData.findAnimation(t);
                if (!i)
                    throw "Animation not found: " + t;
                var r = this.skeletonData.findAnimation(e);
                if (!r)
                    throw "Animation not found: " + e;
                this.setMix(i, r, n)
            },
            setMix: function(t, e, n) {
                this.animationToMixTime[t.name + ":" + e.name] = n
            },
            getMix: function(t, e) {
                var n = t.name + ":" + e.name;
                return this.animationToMixTime.hasOwnProperty(n) ? this.animationToMixTime[n] : this.defaultMix
            }
        },
        e.exports = i.AnimationStateData
    }
    , {
        "../SpineUtil": 42
    }],
    5: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AtlasReader = t("./AtlasReader"),
        i.AtlasPage = t("./AtlasPage"),
        i.AtlasRegion = t("./AtlasRegion"),
        i.Atlas = function(t, e, n) {
            e && e.indexOf("/") !== e.length && (e += "/"),
            this.pages = [],
            this.regions = [],
            this.texturesLoading = 0;
            var r = new i.AtlasReader(t)
              , a = [];
            a.length = 4;
            for (var o = null; ; ) {
                var s = r.readLine();
                if (null === s)
                    break;
                if (s = r.trim(s),
                s.length)
                    if (o) {
                        var l = new i.AtlasRegion;
                        l.name = s,
                        l.page = o,
                        l.rotate = "true" == r.readValue(),
                        r.readTuple(a);
                        var h = parseInt(a[0])
                          , m = parseInt(a[1]);
                        r.readTuple(a);
                        var u = parseInt(a[0])
                          , f = parseInt(a[1]);
                        l.u = h / o.width,
                        l.v = m / o.height,
                        l.rotate ? (l.u2 = (h + f) / o.width,
                        l.v2 = (m + u) / o.height) : (l.u2 = (h + u) / o.width,
                        l.v2 = (m + f) / o.height),
                        l.x = h,
                        l.y = m,
                        l.width = Math.abs(u),
                        l.height = Math.abs(f),
                        4 == r.readTuple(a) && (l.splits = [parseInt(a[0]), parseInt(a[1]), parseInt(a[2]), parseInt(a[3])],
                        4 == r.readTuple(a) && (l.pads = [parseInt(a[0]), parseInt(a[1]), parseInt(a[2]), parseInt(a[3])],
                        r.readTuple(a))),
                        l.originalWidth = parseInt(a[0]),
                        l.originalHeight = parseInt(a[1]),
                        r.readTuple(a),
                        l.offsetX = parseInt(a[0]),
                        l.offsetY = parseInt(a[1]),
                        l.index = parseInt(r.readValue()),
                        this.regions.push(l)
                    } else {
                        o = new i.AtlasPage,
                        o.name = s,
                        2 == r.readTuple(a) && (o.width = parseInt(a[0]),
                        o.height = parseInt(a[1]),
                        r.readTuple(a)),
                        o.format = i.Atlas.Format[a[0]],
                        r.readTuple(a),
                        o.minFilter = i.Atlas.TextureFilter[a[0]],
                        o.magFilter = i.Atlas.TextureFilter[a[1]];
                        var c = r.readValue();
                        o.uWrap = i.Atlas.TextureWrap.clampToEdge,
                        o.vWrap = i.Atlas.TextureWrap.clampToEdge,
                        "x" == c ? o.uWrap = i.Atlas.TextureWrap.repeat : "y" == c ? o.vWrap = i.Atlas.TextureWrap.repeat : "xy" == c && (o.uWrap = o.vWrap = i.Atlas.TextureWrap.repeat),
                        o.rendererObject = PIXI.BaseTexture.fromImage(e + s, n),
                        this.pages.push(o)
                    }
                else
                    o = null
            }
        }
        ,
        i.Atlas.prototype = {
            findRegion: function(t) {
                for (var e = this.regions, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return e[n];
                return null
            },
            dispose: function() {
                for (var t = this.pages, e = 0, n = t.length; n > e; e++)
                    t[e].rendererObject.destroy(!0)
            },
            updateUVs: function(t) {
                for (var e = this.regions, n = 0, i = e.length; i > n; n++) {
                    var r = e[n];
                    r.page == t && (r.u = r.x / t.width,
                    r.v = r.y / t.height,
                    r.rotate ? (r.u2 = (r.x + r.height) / t.width,
                    r.v2 = (r.y + r.width) / t.height) : (r.u2 = (r.x + r.width) / t.width,
                    r.v2 = (r.y + r.height) / t.height))
                }
            }
        },
        i.Atlas.Format = {
            alpha: 0,
            intensity: 1,
            luminanceAlpha: 2,
            rgb565: 3,
            rgba4444: 4,
            rgb888: 5,
            rgba8888: 6
        },
        i.Atlas.TextureFilter = {
            nearest: 0,
            linear: 1,
            mipMap: 2,
            mipMapNearestNearest: 3,
            mipMapLinearNearest: 4,
            mipMapNearestLinear: 5,
            mipMapLinearLinear: 6
        },
        i.Atlas.TextureWrap = {
            mirroredRepeat: 0,
            clampToEdge: 1,
            repeat: 2
        },
        e.exports = i.Atlas
    }
    , {
        "../SpineUtil": 42,
        "./AtlasPage": 7,
        "./AtlasReader": 8,
        "./AtlasRegion": 9
    }],
    6: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.RegionAttachment = t("./RegionAttachment"),
        i.MeshAttachment = t("./MeshAttachment"),
        i.SkinnedMeshAttachment = t("./SkinnedMeshAttachment"),
        i.BoundingBoxAttachment = t("./BoundingBoxAttachment"),
        i.AtlasAttachmentParser = function(t) {
            this.atlas = t
        }
        ,
        i.AtlasAttachmentParser.prototype = {
            newRegionAttachment: function(t, e, n) {
                var r = this.atlas.findRegion(n);
                if (!r)
                    throw "Region not found in atlas: " + n + " (region attachment: " + e + ")";
                var a = new i.RegionAttachment(e);
                return a.rendererObject = r,
                a.setUVs(r.u, r.v, r.u2, r.v2, r.rotate),
                a.regionOffsetX = r.offsetX,
                a.regionOffsetY = r.offsetY,
                a.regionWidth = r.width,
                a.regionHeight = r.height,
                a.regionOriginalWidth = r.originalWidth,
                a.regionOriginalHeight = r.originalHeight,
                a
            },
            newMeshAttachment: function(t, e, n) {
                var r = this.atlas.findRegion(n);
                if (!r)
                    throw "Region not found in atlas: " + n + " (mesh attachment: " + e + ")";
                var a = new i.MeshAttachment(e);
                return a.rendererObject = r,
                a.regionU = r.u,
                a.regionV = r.v,
                a.regionU2 = r.u2,
                a.regionV2 = r.v2,
                a.regionRotate = r.rotate,
                a.regionOffsetX = r.offsetX,
                a.regionOffsetY = r.offsetY,
                a.regionWidth = r.width,
                a.regionHeight = r.height,
                a.regionOriginalWidth = r.originalWidth,
                a.regionOriginalHeight = r.originalHeight,
                a
            },
            newSkinnedMeshAttachment: function(t, e, n) {
                var r = this.atlas.findRegion(n);
                if (!r)
                    throw "Region not found in atlas: " + n + " (skinned mesh attachment: " + e + ")";
                var a = new i.SkinnedMeshAttachment(e);
                return a.rendererObject = r,
                a.regionU = r.u,
                a.regionV = r.v,
                a.regionU2 = r.u2,
                a.regionV2 = r.v2,
                a.regionRotate = r.rotate,
                a.regionOffsetX = r.offsetX,
                a.regionOffsetY = r.offsetY,
                a.regionWidth = r.width,
                a.regionHeight = r.height,
                a.regionOriginalWidth = r.originalWidth,
                a.regionOriginalHeight = r.originalHeight,
                a
            },
            newBoundingBoxAttachment: function(t, e) {
                return new i.BoundingBoxAttachment(e)
            }
        },
        e.exports = i.AtlasAttachmentParser
    }
    , {
        "../SpineUtil": 42,
        "./BoundingBoxAttachment": 14,
        "./MeshAttachment": 27,
        "./RegionAttachment": 28,
        "./SkinnedMeshAttachment": 36
    }],
    7: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AtlasPage = function() {}
        ,
        i.AtlasPage.prototype = {
            name: null,
            format: null,
            minFilter: null,
            magFilter: null,
            uWrap: null,
            vWrap: null,
            rendererObject: null,
            width: 0,
            height: 0
        },
        e.exports = i.AtlasPage
    }
    , {
        "../SpineUtil": 42
    }],
    8: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AtlasReader = function(t) {
            this.lines = t.split(/\r\n|\r|\n/)
        }
        ,
        i.AtlasReader.prototype = {
            index: 0,
            trim: function(t) {
                return t.replace(/^\s+|\s+$/g, "")
            },
            readLine: function() {
                return this.index >= this.lines.length ? null : this.lines[this.index++]
            },
            readValue: function() {
                var t = this.readLine()
                  , e = t.indexOf(":");
                if (-1 == e)
                    throw "Invalid line: " + t;
                return this.trim(t.substring(e + 1))
            },
            readTuple: function(t) {
                var e = this.readLine()
                  , n = e.indexOf(":");
                if (-1 == n)
                    throw "Invalid line: " + e;
                for (var i = 0, r = n + 1; 3 > i; i++) {
                    var a = e.indexOf(",", r);
                    if (-1 == a)
                        break;
                    t[i] = this.trim(e.substr(r, a - r)),
                    r = a + 1
                }
                return t[i] = this.trim(e.substring(r)),
                i + 1
            }
        },
        e.exports = i.AtlasReader
    }
    , {
        "../SpineUtil": 42
    }],
    9: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AtlasRegion = function() {}
        ,
        i.AtlasRegion.prototype = {
            page: null,
            name: null,
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            u: 0,
            v: 0,
            u2: 0,
            v2: 0,
            offsetX: 0,
            offsetY: 0,
            originalWidth: 0,
            originalHeight: 0,
            index: 0,
            rotate: !1,
            splits: null,
            pads: null
        },
        e.exports = i.AtlasRegion
    }
    , {
        "../SpineUtil": 42
    }],
    10: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Curves = t("./Curves"),
        i.Animation = t("./Animation"),
        i.AttachmentTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = t,
            this.attachmentNames = [],
            this.attachmentNames.length = t
        }
        ,
        i.AttachmentTimeline.prototype = {
            slotIndex: 0,
            getFrameCount: function() {
                return this.frames.length
            },
            setFrame: function(t, e, n) {
                this.frames[t] = e,
                this.attachmentNames[t] = n
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (n < o[0])
                    return void (e > n && this.apply(t, e, Number.MAX_VALUE, null, 0));
                e > n && (e = -1);
                var s = n >= o[o.length - 1] ? o.length - 1 : i.Animation.binarySearch1(o, n) - 1;
                if (!(o[s] < e)) {
                    var l = this.attachmentNames[s];
                    t.slots[this.slotIndex].setAttachment(l ? t.getAttachmentBySlotIndex(this.slotIndex, l) : null)
                }
            }
        },
        e.exports = i.AttachmentTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    11: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AttachmentType = {
            region: 0,
            boundingbox: 1,
            mesh: 2,
            skinnedmesh: 3
        },
        e.exports = i.AttachmentType
    }
    , {
        "../SpineUtil": 42
    }],
    12: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Bone = function(t, e, n) {
            this.data = t,
            this.skeleton = e,
            this.parent = n,
            this.setToSetupPose()
        }
        ,
        i.Bone.yDown = !1,
        i.Bone.prototype = {
            x: 0,
            y: 0,
            rotation: 0,
            rotationIK: 0,
            scaleX: 1,
            scaleY: 1,
            flipX: !1,
            flipY: !1,
            m00: 0,
            m01: 0,
            worldX: 0,
            m10: 0,
            m11: 0,
            worldY: 0,
            worldRotation: 0,
            worldScaleX: 1,
            worldScaleY: 1,
            worldFlipX: !1,
            worldFlipY: !1,
            updateWorldTransform: function() {
                var t = this.parent;
                if (t)
                    this.worldX = this.x * t.m00 + this.y * t.m01 + t.worldX,
                    this.worldY = this.x * t.m10 + this.y * t.m11 + t.worldY,
                    this.data.inheritScale ? (this.worldScaleX = t.worldScaleX * this.scaleX,
                    this.worldScaleY = t.worldScaleY * this.scaleY) : (this.worldScaleX = this.scaleX,
                    this.worldScaleY = this.scaleY),
                    this.worldRotation = this.data.inheritRotation ? t.worldRotation + this.rotationIK : this.rotationIK,
                    this.worldFlipX = t.worldFlipX != this.flipX,
                    this.worldFlipY = t.worldFlipY != this.flipY;
                else {
                    var e = this.skeleton.flipX
                      , n = this.skeleton.flipY;
                    this.worldX = e ? -this.x : this.x,
                    this.worldY = n != i.Bone.yDown ? -this.y : this.y,
                    this.worldScaleX = this.scaleX,
                    this.worldScaleY = this.scaleY,
                    this.worldRotation = this.rotationIK,
                    this.worldFlipX = e != this.flipX,
                    this.worldFlipY = n != this.flipY
                }
                var r = this.worldRotation * i.degRad
                  , a = Math.cos(r)
                  , o = Math.sin(r);
                this.worldFlipX ? (this.m00 = -a * this.worldScaleX,
                this.m01 = o * this.worldScaleY) : (this.m00 = a * this.worldScaleX,
                this.m01 = -o * this.worldScaleY),
                this.worldFlipY != i.Bone.yDown ? (this.m10 = -o * this.worldScaleX,
                this.m11 = -a * this.worldScaleY) : (this.m10 = o * this.worldScaleX,
                this.m11 = a * this.worldScaleY)
            },
            setToSetupPose: function() {
                var t = this.data;
                this.x = t.x,
                this.y = t.y,
                this.rotation = t.rotation,
                this.rotationIK = this.rotation,
                this.scaleX = t.scaleX,
                this.scaleY = t.scaleY,
                this.flipX = t.flipX,
                this.flipY = t.flipY
            },
            worldToLocal: function(t) {
                var e = t[0] - this.worldX
                  , n = t[1] - this.worldY
                  , r = this.m00
                  , a = this.m10
                  , o = this.m01
                  , s = this.m11;
                this.worldFlipX != (this.worldFlipY != i.Bone.yDown) && (r = -r,
                s = -s);
                var l = 1 / (r * s - o * a);
                t[0] = e * r * l - n * o * l,
                t[1] = n * s * l - e * a * l
            },
            localToWorld: function(t) {
                var e = t[0]
                  , n = t[1];
                t[0] = e * this.m00 + n * this.m01 + this.worldX,
                t[1] = e * this.m10 + n * this.m11 + this.worldY
            }
        },
        e.exports = i.Bone
    }
    , {
        "../SpineUtil": 42
    }],
    13: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.BoneData = function(t, e) {
            this.name = t,
            this.parent = e
        }
        ,
        i.BoneData.prototype = {
            length: 0,
            x: 0,
            y: 0,
            rotation: 0,
            scaleX: 1,
            scaleY: 1,
            inheritScale: !0,
            inheritRotation: !0,
            flipX: !1,
            flipY: !1
        },
        e.exports = i.BoneData
    }
    , {
        "../SpineUtil": 42
    }],
    14: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AttachmentType = t("./AttachmentType"),
        i.BoundingBoxAttachment = function(t) {
            this.name = t,
            this.vertices = []
        }
        ,
        i.BoundingBoxAttachment.prototype = {
            type: i.AttachmentType.boundingbox,
            computeWorldVertices: function(t, e, n, i) {
                t += n.worldX,
                e += n.worldY;
                for (var r = n.m00, a = n.m01, o = n.m10, s = n.m11, l = this.vertices, h = 0, m = l.length; m > h; h += 2) {
                    var u = l[h]
                      , f = l[h + 1];
                    i[h] = u * r + f * a + t,
                    i[h + 1] = u * o + f * s + e
                }
            }
        },
        e.exports = i.BoundingBoxAttachment
    }
    , {
        "../SpineUtil": 42,
        "./AttachmentType": 11
    }],
    15: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.ColorTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 5 * t
        }
        ,
        i.ColorTimeline.prototype = {
            slotIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 5
            },
            setFrame: function(t, e, n, i, r, a) {
                t *= 5,
                this.frames[t] = e,
                this.frames[t + 1] = n,
                this.frames[t + 2] = i,
                this.frames[t + 3] = r,
                this.frames[t + 4] = a
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (!(n < o[0])) {
                    var s, l, h, m;
                    if (n >= o[o.length - 5]) {
                        var u = o.length - 1;
                        s = o[u - 3],
                        l = o[u - 2],
                        h = o[u - 1],
                        m = o[u]
                    } else {
                        var f = i.Animation.binarySearch(o, n, 5)
                          , c = o[f - 4]
                          , p = o[f - 3]
                          , d = o[f - 2]
                          , g = o[f - 1]
                          , v = o[f]
                          , A = 1 - (n - v) / (o[f - 5] - v);
                        A = this.curves.getCurvePercent(f / 5 - 1, A),
                        s = c + (o[f + 1] - c) * A,
                        l = p + (o[f + 2] - p) * A,
                        h = d + (o[f + 3] - d) * A,
                        m = g + (o[f + 4] - g) * A
                    }
                    var S = t.slots[this.slotIndex];
                    1 > a ? (S.r += (s - S.r) * a,
                    S.g += (l - S.g) * a,
                    S.b += (h - S.b) * a,
                    S.a += (m - S.a) * a) : (S.r = s,
                    S.g = l,
                    S.b = h,
                    S.a = m)
                }
            }
        },
        e.exports = i.ColorTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    16: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Curves = function(t) {
            this.curves = []
        }
        ,
        i.Curves.prototype = {
            setLinear: function(t) {
                this.curves[19 * t] = 0
            },
            setStepped: function(t) {
                this.curves[19 * t] = 1
            },
            setCurve: function(t, e, n, i, r) {
                var a = .1
                  , o = a * a
                  , s = o * a
                  , l = 3 * a
                  , h = 3 * o
                  , m = 6 * o
                  , u = 6 * s
                  , f = 2 * -e + i
                  , c = 2 * -n + r
                  , p = 3 * (e - i) + 1
                  , d = 3 * (n - r) + 1
                  , g = e * l + f * h + p * s
                  , v = n * l + c * h + d * s
                  , A = f * m + p * u
                  , S = c * m + d * u
                  , y = p * u
                  , w = d * u
                  , T = 19 * t
                  , x = this.curves;
                x[T++] = 2;
                for (var b = g, C = v, k = T + 19 - 1; k > T; T += 2)
                    x[T] = b,
                    x[T + 1] = C,
                    g += A,
                    v += S,
                    A += y,
                    S += w,
                    b += g,
                    C += v
            },
            getCurvePercent: function(t, e) {
                e = 0 > e ? 0 : e > 1 ? 1 : e;
                var n = this.curves
                  , i = 19 * t
                  , r = n[i];
                if (0 === r)
                    return e;
                if (1 == r)
                    return 0;
                i++;
                for (var a = 0, o = i, s = i + 19 - 1; s > i; i += 2)
                    if (a = n[i],
                    a >= e) {
                        var l, h;
                        return i == o ? (l = 0,
                        h = 0) : (l = n[i - 2],
                        h = n[i - 1]),
                        h + (n[i + 1] - h) * (e - l) / (a - l)
                    }
                var m = n[i - 1];
                return m + (1 - m) * (e - a) / (1 - a)
            }
        },
        e.exports = i.Curves
    }
    , {
        "../SpineUtil": 42
    }],
    17: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.DrawOrderTimeline = function(t) {
            this.frames = [],
            this.frames.length = t,
            this.drawOrders = [],
            this.drawOrders.length = t
        }
        ,
        i.DrawOrderTimeline.prototype = {
            getFrameCount: function() {
                return this.frames.length
            },
            setFrame: function(t, e, n) {
                this.frames[t] = e,
                this.drawOrders[t] = n
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (!(n < o[0])) {
                    var s;
                    s = n >= o[o.length - 1] ? o.length - 1 : i.Animation.binarySearch1(o, n) - 1;
                    var l = t.drawOrder
                      , h = (t.slots,
                    this.drawOrders[s]);
                    if (h)
                        for (var m = 0, u = h.length; u > m; m++)
                            l[m] = h[m]
                }
            }
        },
        e.exports = i.DrawOrderTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2
    }],
    18: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Event = function(t) {
            this.data = t
        }
        ,
        i.Event.prototype = {
            intValue: 0,
            floatValue: 0,
            stringValue: null
        },
        e.exports = i.Event
    }
    , {
        "../SpineUtil": 42
    }],
    19: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.EventData = function(t) {
            this.name = t
        }
        ,
        i.EventData.prototype = {
            intValue: 0,
            floatValue: 0,
            stringValue: null
        },
        e.exports = i.EventData
    }
    , {
        "../SpineUtil": 42
    }],
    20: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.EventTimeline = function(t) {
            this.frames = [],
            this.frames.length = t,
            this.events = [],
            this.events.length = t
        }
        ,
        i.EventTimeline.prototype = {
            getFrameCount: function() {
                return this.frames.length
            },
            setFrame: function(t, e, n) {
                this.frames[t] = e,
                this.events[t] = n
            },
            apply: function(t, e, n, r, a) {
                if (r) {
                    var o = this.frames
                      , s = o.length;
                    if (e > n)
                        this.apply(t, e, Number.MAX_VALUE, r, a),
                        e = -1;
                    else if (e >= o[s - 1])
                        return;
                    if (!(n < o[0])) {
                        var l;
                        if (e < o[0])
                            l = 0;
                        else {
                            l = i.Animation.binarySearch1(o, e);
                            for (var h = o[l]; l > 0 && o[l - 1] == h; )
                                l--
                        }
                        for (var m = this.events; s > l && n >= o[l]; l++)
                            r.push(m[l])
                    }
                }
            }
        },
        e.exports = i.EventTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2
    }],
    21: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.FfdTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = t,
            this.frameVertices = [],
            this.frameVertices.length = t
        }
        ,
        i.FfdTimeline.prototype = {
            slotIndex: 0,
            attachment: 0,
            getFrameCount: function() {
                return this.frames.length
            },
            setFrame: function(t, e, n) {
                this.frames[t] = e,
                this.frameVertices[t] = n
            },
            apply: function(t, e, n, r, a) {
                var o = t.slots[this.slotIndex];
                if (o.attachment == this.attachment) {
                    var s = this.frames;
                    if (!(n < s[0])) {
                        var l = this.frameVertices
                          , h = l[0].length
                          , m = o.attachmentVertices;
                        if (m.length != h) {
                            m = o.attachmentVertices = [];
                            for (var u = 0; h > u; u++)
                                m.push(0);
                            a = 1
                        }
                        if (n >= s[s.length - 1]) {
                            var f = l[s.length - 1];
                            if (1 > a)
                                for (var c = 0; h > c; c++)
                                    m[c] += (f[c] - m[c]) * a;
                            else
                                for (var c = 0; h > c; c++)
                                    m[c] = f[c]
                        } else {
                            var p = i.Animation.binarySearch1(s, n)
                              , d = s[p]
                              , g = 1 - (n - d) / (s[p - 1] - d);
                            g = this.curves.getCurvePercent(p - 1, 0 > g ? 0 : g > 1 ? 1 : g);
                            var v = l[p - 1]
                              , A = l[p];
                            if (1 > a)
                                for (var c = 0; h > c; c++) {
                                    var S = v[c];
                                    m[c] += (S + (A[c] - S) * g - m[c]) * a
                                }
                            else
                                for (var c = 0; h > c; c++) {
                                    var S = v[c];
                                    m[c] = S + (A[c] - S) * g
                                }
                        }
                    }
                }
            }
        },
        e.exports = i.FfdTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    22: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.FlipXTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 2 * t
        }
        ,
        i.FlipXTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 2
            },
            setFrame: function(t, e, n) {
                t *= 2,
                this.frames[t] = e,
                this.frames[t + 1] = n ? 1 : 0
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (n < o[0])
                    return void (e > n && this.apply(t, e, Number.MAX_VALUE, null, 0));
                e > n && (e = -1);
                var s = (n >= o[o.length - 2] ? o.length : i.Animation.binarySearch(o, n, 2)) - 2;
                o[s] < e || (t.bones[this.boneIndex].flipX = 0 != o[s + 1])
            }
        },
        e.exports = i.FlipXTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    23: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.FlipYTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 2 * t
        }
        ,
        i.FlipYTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 2
            },
            setFrame: function(t, e, n) {
                t *= 2,
                this.frames[t] = e,
                this.frames[t + 1] = n ? 1 : 0
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (n < o[0])
                    return void (e > n && this.apply(t, e, Number.MAX_VALUE, null, 0));
                e > n && (e = -1);
                var s = (n >= o[o.length - 2] ? o.length : i.Animation.binarySearch(o, n, 2)) - 2;
                o[s] < e || (t.bones[this.boneIndex].flipY = 0 != o[s + 1])
            }
        },
        e.exports = i.FlipYTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    24: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.IkConstraint = function(t, e) {
            this.data = t,
            this.mix = t.mix,
            this.bendDirection = t.bendDirection,
            this.bones = [];
            for (var n = 0, i = t.bones.length; i > n; n++)
                this.bones.push(e.findBone(t.bones[n].name));
            this.target = e.findBone(t.target.name)
        }
        ,
        i.IkConstraint.prototype = {
            apply: function() {
                var t = this.target
                  , e = this.bones;
                switch (e.length) {
                case 1:
                    i.IkConstraint.apply1(e[0], t.worldX, t.worldY, this.mix);
                    break;
                case 2:
                    i.IkConstraint.apply2(e[0], e[1], t.worldX, t.worldY, this.bendDirection, this.mix)
                }
            }
        },
        i.IkConstraint.apply1 = function(t, e, n, r) {
            var a = t.data.inheritRotation && t.parent ? t.parent.worldRotation : 0
              , o = t.rotation
              , s = (i.Bone.yDown ? -i.radDeg : i.radDeg) * Math.atan2(n - t.worldY, e - t.worldX) - a;
            t.rotationIK = o + (s - o) * r
        }
        ,
        i.IkConstraint.apply2 = function(t, e, n, r, a, o) {
            var s = e.rotation
              , l = t.rotation;
            if (!o)
                return e.rotationIK = s,
                void (t.rotationIK = l);
            var h, m, u = i.temp, f = t.parent;
            f ? (u[0] = n,
            u[1] = r,
            f.worldToLocal(u),
            n = (u[0] - t.x) * f.worldScaleX,
            r = (u[1] - t.y) * f.worldScaleY) : (n -= t.x,
            r -= t.y),
            e.parent == t ? (h = e.x,
            m = e.y) : (u[0] = e.x,
            u[1] = e.y,
            e.parent.localToWorld(u),
            t.worldToLocal(u),
            h = u[0],
            m = u[1]);
            var c = h * t.worldScaleX
              , p = m * t.worldScaleY
              , d = Math.atan2(p, c)
              , g = Math.sqrt(c * c + p * p)
              , v = e.data.length * e.worldScaleX
              , A = 2 * g * v;
            if (1e-4 > A)
                return void (e.rotationIK = s + (Math.atan2(r, n) * i.radDeg - l - s) * o);
            var S = (n * n + r * r - g * g - v * v) / A;
            -1 > S ? S = -1 : S > 1 && (S = 1);
            var y = Math.acos(S) * a
              , w = g + v * S
              , T = v * Math.sin(y)
              , x = Math.atan2(r * w - n * T, n * w + r * T)
              , b = (x - d) * i.radDeg - l;
            b > 180 ? b -= 360 : -180 > b && (b += 360),
            t.rotationIK = l + b * o,
            b = (y + d) * i.radDeg - s,
            b > 180 ? b -= 360 : -180 > b && (b += 360),
            e.rotationIK = s + (b + t.worldRotation - e.parent.worldRotation) * o
        }
        ,
        e.exports = i.IkConstraint
    }
    , {
        "../SpineUtil": 42
    }],
    25: [function(t, e, n) {
        var i = t("../SpineUtil") || {};
        i.IkConstraintData = function(t) {
            this.name = t,
            this.bones = []
        }
        ,
        i.IkConstraintData.prototype = {
            target: null,
            bendDirection: 1,
            mix: 1
        },
        e.exports = i.IkConstraintData
    }
    , {
        "../SpineUtil": 42
    }],
    26: [function(t, e, n) {
        var i = t("../SpineUtil") || {};
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.IkConstraintTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 3 * t
        }
        ,
        i.IkConstraintTimeline.prototype = {
            ikConstraintIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 3
            },
            setFrame: function(t, e, n, i) {
                t *= 3,
                this.frames[t] = e,
                this.frames[t + 1] = n,
                this.frames[t + 2] = i
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (!(n < o[0])) {
                    var s = t.ikConstraints[this.ikConstraintIndex];
                    if (n >= o[o.length - 3])
                        return s.mix += (o[o.length - 2] - s.mix) * a,
                        void (s.bendDirection = o[o.length - 1]);
                    var l = i.Animation.binarySearch(o, n, 3)
                      , h = o[l + -2]
                      , m = o[l]
                      , u = 1 - (n - m) / (o[l + -3] - m);
                    u = this.curves.getCurvePercent(l / 3 - 1, u);
                    var f = h + (o[l + 1] - h) * u;
                    s.mix += (f - s.mix) * a,
                    s.bendDirection = o[l + -1]
                }
            }
        },
        e.exports = i.IkConstraintTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    27: [function(t, e, n) {
        var i = t("../SpineUtil") || {};
        i.AttachmentType = t("./AttachmentType"),
        i.MeshAttachment = function(t) {
            this.name = t
        }
        ,
        i.MeshAttachment.prototype = {
            type: i.AttachmentType.mesh,
            vertices: null,
            uvs: null,
            regionUVs: null,
            triangles: null,
            hullLength: 0,
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            path: null,
            rendererObject: null,
            regionU: 0,
            regionV: 0,
            regionU2: 0,
            regionV2: 0,
            regionRotate: !1,
            regionOffsetX: 0,
            regionOffsetY: 0,
            regionWidth: 0,
            regionHeight: 0,
            regionOriginalWidth: 0,
            regionOriginalHeight: 0,
            edges: null,
            width: 0,
            height: 0,
            updateUVs: function() {
                var t = this.regionU2 - this.regionU
                  , e = this.regionV2 - this.regionV
                  , n = this.regionUVs.length;
                if (this.uvs && this.uvs.length == n || (this.uvs = new i.Float32Array(n)),
                this.regionRotate)
                    for (var r = 0; n > r; r += 2)
                        this.uvs[r] = this.regionU + this.regionUVs[r + 1] * t,
                        this.uvs[r + 1] = this.regionV + e - this.regionUVs[r] * e;
                else
                    for (var r = 0; n > r; r += 2)
                        this.uvs[r] = this.regionU + this.regionUVs[r] * t,
                        this.uvs[r + 1] = this.regionV + this.regionUVs[r + 1] * e
            },
            computeWorldVertices: function(t, e, n, i) {
                var r = n.bone;
                t += r.worldX,
                e += r.worldY;
                var a = r.m00
                  , o = r.m01
                  , s = r.m10
                  , l = r.m11
                  , h = this.vertices
                  , m = h.length;
                n.attachmentVertices.length == m && (h = n.attachmentVertices);
                for (var u = 0; m > u; u += 2) {
                    var f = h[u]
                      , c = h[u + 1];
                    i[u] = f * a + c * o + t,
                    i[u + 1] = f * s + c * l + e
                }
            }
        },
        e.exports = i.MeshAttachment
    }
    , {
        "../SpineUtil": 42,
        "./AttachmentType": 11
    }],
    28: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.AttachmentType = t("./AttachmentType"),
        i.RegionAttachment = function(t) {
            this.name = t,
            this.offset = [],
            this.offset.length = 8,
            this.uvs = [],
            this.uvs.length = 8
        }
        ,
        i.RegionAttachment.prototype = {
            type: i.AttachmentType.region,
            x: 0,
            y: 0,
            rotation: 0,
            scaleX: 1,
            scaleY: 1,
            width: 0,
            height: 0,
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            path: null,
            rendererObject: null,
            regionOffsetX: 0,
            regionOffsetY: 0,
            regionWidth: 0,
            regionHeight: 0,
            regionOriginalWidth: 0,
            regionOriginalHeight: 0,
            setUVs: function(t, e, n, i, r) {
                var a = this.uvs;
                r ? (a[2] = t,
                a[3] = i,
                a[4] = t,
                a[5] = e,
                a[6] = n,
                a[7] = e,
                a[0] = n,
                a[1] = i) : (a[0] = t,
                a[1] = i,
                a[2] = t,
                a[3] = e,
                a[4] = n,
                a[5] = e,
                a[6] = n,
                a[7] = i)
            },
            updateOffset: function() {
                var t = this.width / this.regionOriginalWidth * this.scaleX
                  , e = this.height / this.regionOriginalHeight * this.scaleY
                  , n = -this.width / 2 * this.scaleX + this.regionOffsetX * t
                  , r = -this.height / 2 * this.scaleY + this.regionOffsetY * e
                  , a = n + this.regionWidth * t
                  , o = r + this.regionHeight * e
                  , s = this.rotation * i.degRad
                  , l = Math.cos(s)
                  , h = Math.sin(s)
                  , m = n * l + this.x
                  , u = n * h
                  , f = r * l + this.y
                  , c = r * h
                  , p = a * l + this.x
                  , d = a * h
                  , g = o * l + this.y
                  , v = o * h
                  , A = this.offset;
                A[0] = m - c,
                A[1] = f + u,
                A[2] = m - v,
                A[3] = g + u,
                A[4] = p - v,
                A[5] = g + d,
                A[6] = p - c,
                A[7] = f + d
            },
            computeVertices: function(t, e, n, i) {
                t += n.worldX,
                e += n.worldY;
                var r = n.m00
                  , a = n.m01
                  , o = n.m10
                  , s = n.m11
                  , l = this.offset;
                i[0] = l[0] * r + l[1] * a + t,
                i[1] = l[0] * o + l[1] * s + e,
                i[2] = l[2] * r + l[3] * a + t,
                i[3] = l[2] * o + l[3] * s + e,
                i[4] = l[4] * r + l[5] * a + t,
                i[5] = l[4] * o + l[5] * s + e,
                i[6] = l[6] * r + l[7] * a + t,
                i[7] = l[6] * o + l[7] * s + e
            }
        },
        e.exports = i.RegionAttachment
    }
    , {
        "../SpineUtil": 42,
        "./AttachmentType": 11
    }],
    29: [function(t, e, n) {
        var i = t("../SpineUtil") || {};
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.RotateTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 2 * t
        }
        ,
        i.RotateTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 2
            },
            setFrame: function(t, e, n) {
                t *= 2,
                this.frames[t] = e,
                this.frames[t + 1] = n
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (!(n < o[0])) {
                    var s = t.bones[this.boneIndex];
                    if (n >= o[o.length - 2]) {
                        for (var l = s.data.rotation + o[o.length - 1] - s.rotation; l > 180; )
                            l -= 360;
                        for (; -180 > l; )
                            l += 360;
                        return void (s.rotation += l * a)
                    }
                    var h = i.Animation.binarySearch(o, n, 2)
                      , m = o[h - 1]
                      , u = o[h]
                      , f = 1 - (n - u) / (o[h - 2] - u);
                    f = this.curves.getCurvePercent(h / 2 - 1, f);
                    for (var l = o[h + 1] - m; l > 180; )
                        l -= 360;
                    for (; -180 > l; )
                        l += 360;
                    for (l = s.data.rotation + (m + l * f) - s.rotation; l > 180; )
                        l -= 360;
                    for (; -180 > l; )
                        l += 360;
                    s.rotation += l * a
                }
            }
        },
        e.exports = i.RotateTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    30: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.ScaleTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 3 * t
        }
        ,
        i.ScaleTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 3
            },
            setFrame: function(t, e, n, i) {
                t *= 3,
                this.frames[t] = e,
                this.frames[t + 1] = n,
                this.frames[t + 2] = i
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (!(n < o[0])) {
                    var s = t.bones[this.boneIndex];
                    if (n >= o[o.length - 3])
                        return s.scaleX += (s.data.scaleX * o[o.length - 2] - s.scaleX) * a,
                        void (s.scaleY += (s.data.scaleY * o[o.length - 1] - s.scaleY) * a);
                    var l = i.Animation.binarySearch(o, n, 3)
                      , h = o[l - 2]
                      , m = o[l - 1]
                      , u = o[l]
                      , f = 1 - (n - u) / (o[l + -3] - u);
                    f = this.curves.getCurvePercent(l / 3 - 1, f),
                    s.scaleX += (s.data.scaleX * (h + (o[l + 1] - h) * f) - s.scaleX) * a,
                    s.scaleY += (s.data.scaleY * (m + (o[l + 2] - m) * f) - s.scaleY) * a
                }
            }
        },
        e.exports = i.ScaleTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    31: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Bone = t("./Bone"),
        i.Slot = t("./Slot"),
        i.IkConstraint = t("./IkConstraint"),
        i.Skeleton = function(t) {
            this.data = t,
            this.bones = [];
            for (var e = 0, n = t.bones.length; n > e; e++) {
                var r = t.bones[e]
                  , a = r.parent ? this.bones[t.bones.indexOf(r.parent)] : null;
                this.bones.push(new i.Bone(r,this,a))
            }
            this.slots = [],
            this.drawOrder = [];
            for (var e = 0, n = t.slots.length; n > e; e++) {
                var o = t.slots[e]
                  , s = this.bones[t.bones.indexOf(o.boneData)]
                  , l = new i.Slot(o,s);
                this.slots.push(l),
                this.drawOrder.push(e)
            }
            this.ikConstraints = [];
            for (var e = 0, n = t.ikConstraints.length; n > e; e++)
                this.ikConstraints.push(new i.IkConstraint(t.ikConstraints[e],this));
            this.boneCache = [],
            this.updateCache()
        }
        ,
        i.Skeleton.prototype = {
            x: 0,
            y: 0,
            skin: null,
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            time: 0,
            flipX: !1,
            flipY: !1,
            updateCache: function() {
                var t = this.ikConstraints
                  , e = t.length
                  , n = e + 1
                  , i = this.boneCache;
                i.length > n && (i.length = n);
                for (var r = 0, a = i.length; a > r; r++)
                    i[r].length = 0;
                for (; i.length < n; )
                    i[i.length] = [];
                var o = i[0]
                  , s = this.bones;
                t: for (var r = 0, a = s.length; a > r; r++) {
                    var l = s[r]
                      , h = l;
                    do {
                        for (var m = 0; e > m; m++)
                            for (var u = t[m], f = u.bones[0], c = u.bones[u.bones.length - 1]; ; ) {
                                if (h == c) {
                                    i[m].push(l),
                                    i[m + 1].push(l);
                                    continue t
                                }
                                if (c == f)
                                    break;
                                c = c.parent
                            }
                        h = h.parent
                    } while (h);
                    o[o.length] = l
                }
            },
            updateWorldTransform: function() {
                for (var t = this.bones, e = 0, n = t.length; n > e; e++) {
                    var i = t[e];
                    i.rotationIK = i.rotation
                }
                for (var e = 0, r = this.boneCache.length - 1; ; ) {
                    for (var a = this.boneCache[e], o = 0, s = a.length; s > o; o++)
                        a[o].updateWorldTransform();
                    if (e == r)
                        break;
                    this.ikConstraints[e].apply(),
                    e++
                }
            },
            setToSetupPose: function() {
                this.setBonesToSetupPose(),
                this.setSlotsToSetupPose()
            },
            setBonesToSetupPose: function() {
                for (var t = this.bones, e = 0, n = t.length; n > e; e++)
                    t[e].setToSetupPose();
                for (var i = this.ikConstraints, e = 0, n = i.length; n > e; e++) {
                    var r = i[e];
                    r.bendDirection = r.data.bendDirection,
                    r.mix = r.data.mix
                }
            },
            setSlotsToSetupPose: function() {
                for (var t = this.slots, e = 0, n = t.length; n > e; e++)
                    t[e].setToSetupPose(e);
                this.resetDrawOrder()
            },
            getRootBone: function() {
                return this.bones.length ? this.bones[0] : null
            },
            findBone: function(t) {
                for (var e = this.bones, n = 0, i = e.length; i > n; n++)
                    if (e[n].data.name == t)
                        return e[n];
                return null
            },
            findBoneIndex: function(t) {
                for (var e = this.bones, n = 0, i = e.length; i > n; n++)
                    if (e[n].data.name == t)
                        return n;
                return -1
            },
            findSlot: function(t) {
                for (var e = this.slots, n = 0, i = e.length; i > n; n++)
                    if (e[n].data.name == t)
                        return e[n];
                return null
            },
            findSlotIndex: function(t) {
                for (var e = this.slots, n = 0, i = e.length; i > n; n++)
                    if (e[n].data.name == t)
                        return n;
                return -1
            },
            setSkinByName: function(t) {
                var e = this.data.findSkin(t);
                if (!e)
                    throw "Skin not found: " + t;
                this.setSkin(e)
            },
            setSkin: function(t) {
                if (t)
                    if (this.skin)
                        t._attachAll(this, this.skin);
                    else
                        for (var e = this.slots, n = 0, i = e.length; i > n; n++) {
                            var r = e[n]
                              , a = r.data.attachmentName;
                            if (a) {
                                var o = t.getAttachment(n, a);
                                o && r.setAttachment(o)
                            }
                        }
                this.skin = t
            },
            getAttachmentBySlotName: function(t, e) {
                return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t), e)
            },
            getAttachmentBySlotIndex: function(t, e) {
                if (this.skin) {
                    var n = this.skin.getAttachment(t, e);
                    if (n)
                        return n
                }
                return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(t, e) : null
            },
            setAttachment: function(t, e) {
                for (var n = this.slots, i = 0, r = n.length; r > i; i++) {
                    var a = n[i];
                    if (a.data.name == t) {
                        var o = null;
                        if (e && (o = this.getAttachmentBySlotIndex(i, e),
                        !o))
                            throw "Attachment not found: " + e + ", for slot: " + t;
                        return void a.setAttachment(o)
                    }
                }
                throw "Slot not found: " + t
            },
            findIkConstraint: function(t) {
                for (var e = this.ikConstraints, n = 0, i = e.length; i > n; n++)
                    if (e[n].data.name == t)
                        return e[n];
                return null
            },
            update: function(t) {
                this.time += t
            },
            resetDrawOrder: function() {
                for (var t = 0, e = this.drawOrder.length; e > t; t++)
                    this.drawOrder[t] = t
            }
        },
        e.exports = i.Skeleton
    }
    , {
        "../SpineUtil": 42,
        "./Bone": 12,
        "./IkConstraint": 24,
        "./Slot": 37
    }],
    32: [function(t, e, n) {
        var i = t("../SpineRuntime") || {};
        i.AttachmentType = t("./AttachmentType"),
        i.SkeletonBounds = function() {
            this.polygonPool = [],
            this.polygons = [],
            this.boundingBoxes = []
        }
        ,
        i.SkeletonBounds.prototype = {
            minX: 0,
            minY: 0,
            maxX: 0,
            maxY: 0,
            update: function(t, e) {
                var n = t.slots
                  , r = n.length
                  , a = t.x
                  , o = t.y
                  , s = this.boundingBoxes
                  , l = this.polygonPool
                  , h = this.polygons;
                s.length = 0;
                for (var m = 0, u = h.length; u > m; m++)
                    l.push(h[m]);
                h.length = 0;
                for (var m = 0; r > m; m++) {
                    var f = n[m]
                      , c = f.attachment;
                    if (c.type == i.AttachmentType.boundingbox) {
                        s.push(c);
                        var p, d = l.length;
                        d > 0 ? (p = l[d - 1],
                        l.splice(d - 1, 1)) : p = [],
                        h.push(p),
                        p.length = c.vertices.length,
                        c.computeWorldVertices(a, o, f.bone, p);
                    }
                }
                e && this.aabbCompute()
            },
            aabbCompute: function() {
                for (var t = this.polygons, e = Number.MAX_VALUE, n = Number.MAX_VALUE, i = Number.MIN_VALUE, r = Number.MIN_VALUE, a = 0, o = t.length; o > a; a++)
                    for (var s = t[a], l = 0, h = s.length; h > l; l += 2) {
                        var m = s[l]
                          , u = s[l + 1];
                        e = Math.min(e, m),
                        n = Math.min(n, u),
                        i = Math.max(i, m),
                        r = Math.max(r, u)
                    }
                this.minX = e,
                this.minY = n,
                this.maxX = i,
                this.maxY = r
            },
            aabbContainsPoint: function(t, e) {
                return t >= this.minX && t <= this.maxX && e >= this.minY && e <= this.maxY
            },
            aabbIntersectsSegment: function(t, e, n, i) {
                var r = this.minX
                  , a = this.minY
                  , o = this.maxX
                  , s = this.maxY;
                if (r >= t && r >= n || a >= e && a >= i || t >= o && n >= o || e >= s && i >= s)
                    return !1;
                var l = (i - e) / (n - t)
                  , h = l * (r - t) + e;
                if (h > a && s > h)
                    return !0;
                if (h = l * (o - t) + e,
                h > a && s > h)
                    return !0;
                var m = (a - e) / l + t;
                return m > r && o > m ? !0 : (m = (s - e) / l + t,
                m > r && o > m ? !0 : !1)
            },
            aabbIntersectsSkeleton: function(t) {
                return this.minX < t.maxX && this.maxX > t.minX && this.minY < t.maxY && this.maxY > t.minY
            },
            containsPoint: function(t, e) {
                for (var n = this.polygons, i = 0, r = n.length; r > i; i++)
                    if (this.polygonContainsPoint(n[i], t, e))
                        return this.boundingBoxes[i];
                return null
            },
            intersectsSegment: function(t, e, n, i) {
                for (var r = this.polygons, a = 0, o = r.length; o > a; a++)
                    if (r[a].intersectsSegment(t, e, n, i))
                        return this.boundingBoxes[a];
                return null
            },
            polygonContainsPoint: function(t, e, n) {
                for (var i = t.length, r = i - 2, a = !1, o = 0; i > o; o += 2) {
                    var s = t[o + 1]
                      , l = t[r + 1];
                    if (n > s && l >= n || n > l && s >= n) {
                        var h = t[o];
                        h + (n - s) / (l - s) * (t[r] - h) < e && (a = !a)
                    }
                    r = o
                }
                return a
            },
            polygonIntersectsSegment: function(t, e, n, i, r) {
                for (var a = t.length, o = e - i, s = n - r, l = e * r - n * i, h = t[a - 2], m = t[a - 1], u = 0; a > u; u += 2) {
                    var f = t[u]
                      , c = t[u + 1]
                      , p = h * c - m * f
                      , d = h - f
                      , g = m - c
                      , v = o * g - s * d
                      , A = (l * d - o * p) / v;
                    if ((A >= h && f >= A || A >= f && h >= A) && (A >= e && i >= A || A >= i && e >= A)) {
                        var S = (l * g - s * p) / v;
                        if ((S >= m && c >= S || S >= c && m >= S) && (S >= n && r >= S || S >= r && n >= S))
                            return !0
                    }
                    h = f,
                    m = c
                }
                return !1
            },
            getPolygon: function(t) {
                var e = this.boundingBoxes.indexOf(t);
                return -1 == e ? null : this.polygons[e]
            },
            getWidth: function() {
                return this.maxX - this.minX
            },
            getHeight: function() {
                return this.maxY - this.minY
            }
        },
        e.exports = i.SkeletonBounds
    }
    , {
        "../SpineRuntime": 41,
        "./AttachmentType": 11
    }],
    33: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.SkeletonData = function() {
            this.bones = [],
            this.slots = [],
            this.skins = [],
            this.events = [],
            this.animations = [],
            this.ikConstraints = []
        }
        ,
        i.SkeletonData.prototype = {
            name: null,
            defaultSkin: null,
            width: 0,
            height: 0,
            version: null,
            hash: null,
            findBone: function(t) {
                for (var e = this.bones, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return e[n];
                return null
            },
            findBoneIndex: function(t) {
                for (var e = this.bones, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return n;
                return -1
            },
            findSlot: function(t) {
                for (var e = this.slots, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return this.slots[n];
                return null
            },
            findSlotIndex: function(t) {
                for (var e = this.slots, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return n;
                return -1
            },
            findSkin: function(t) {
                for (var e = this.skins, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return e[n];
                return null
            },
            findEvent: function(t) {
                for (var e = this.events, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return e[n];
                return null
            },
            findAnimation: function(t) {
                for (var e = this.animations, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return e[n];
                return null
            },
            findIkConstraint: function(t) {
                for (var e = this.ikConstraints, n = 0, i = e.length; i > n; n++)
                    if (e[n].name == t)
                        return e[n];
                return null
            }
        },
        e.exports = i.SkeletonData
    }
    , {
        "../SpineUtil": 42
    }],
    34: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.SkeletonData = t("./SkeletonData"),
        i.BoneData = t("./BoneData"),
        i.IkConstraintData = t("./IkConstraintData"),
        i.SlotData = t("./SlotData"),
        i.Skin = t("./Skin"),
        i.EventData = t("./EventData"),
        i.AttachmentType = t("./AttachmentType"),
        i.ColorTimeline = t("./ColorTimeline"),
        i.AttachmentTimeline = t("./AttachmentTimeline"),
        i.RotateTimeline = t("./RotateTimeline"),
        i.ScaleTimeline = t("./ScaleTimeline"),
        i.TranslateTimeline = t("./TranslateTimeline"),
        i.FlipXTimeline = t("./FlipXTimeline"),
        i.FlipYTimeline = t("./FlipYTimeline"),
        i.IkConstraintTimeline = t("./IkConstraintTimeline"),
        i.FfdTimeline = t("./FfdTimeline"),
        i.DrawOrderTimeline = t("./DrawOrderTimeline"),
        i.EventTimeline = t("./EventTimeline"),
        i.Event = t("./Event"),
        i.Animation = t("./Animation"),
        i.SkeletonJsonParser = function(t) {
            this.attachmentLoader = t
        }
        ,
        i.SkeletonJsonParser.prototype = {
            scale: 1,
            readSkeletonData: function(t, e) {
                var n = new i.SkeletonData;
                n.name = e;
                var r = t.skeleton;
                r && (n.hash = r.hash,
                n.version = r.spine,
                n.width = r.width || 0,
                n.height = r.height || 0);
                for (var a = t.bones, o = 0, s = a.length; s > o; o++) {
                    var l = a[o]
                      , h = null;
                    if (l.parent && (h = n.findBone(l.parent),
                    !h))
                        throw "Parent bone not found: " + l.parent;
                    var m = new i.BoneData(l.name,h);
                    m.length = (l.length || 0) * this.scale,
                    m.x = (l.x || 0) * this.scale,
                    m.y = (l.y || 0) * this.scale,
                    m.rotation = l.rotation || 0,
                    m.scaleX = l.hasOwnProperty("scaleX") ? l.scaleX : 1,
                    m.scaleY = l.hasOwnProperty("scaleY") ? l.scaleY : 1,
                    m.inheritScale = l.hasOwnProperty("inheritScale") ? l.inheritScale : !0,
                    m.inheritRotation = l.hasOwnProperty("inheritRotation") ? l.inheritRotation : !0,
                    n.bones.push(m)
                }
                var u = t.ik;
                if (u)
                    for (var o = 0, s = u.length; s > o; o++) {
                        for (var f = u[o], c = new i.IkConstraintData(f.name), a = f.bones, p = 0, d = a.length; d > p; p++) {
                            var g = n.findBone(a[p]);
                            if (!g)
                                throw "IK bone not found: " + a[p];
                            c.bones.push(g)
                        }
                        if (c.target = n.findBone(f.target),
                        !c.target)
                            throw "Target bone not found: " + f.target;
                        c.bendDirection = !f.hasOwnProperty("bendPositive") || f.bendPositive ? 1 : -1,
                        c.mix = f.hasOwnProperty("mix") ? f.mix : 1,
                        n.ikConstraints.push(c)
                    }
                for (var v = t.slots, o = 0, s = v.length; s > o; o++) {
                    var A = v[o]
                      , m = n.findBone(A.bone);
                    if (!m)
                        throw "Slot bone not found: " + A.bone;
                    var S = new i.SlotData(A.name,m)
                      , y = A.color;
                    y && (S.r = this.toColor(y, 0),
                    S.g = this.toColor(y, 1),
                    S.b = this.toColor(y, 2),
                    S.a = this.toColor(y, 3)),
                    S.attachmentName = A.attachment,
                    S.blendMode = A.blend && i.SlotData.PIXI_BLEND_MODE_MAP[A.blend] || i.SlotData.PIXI_BLEND_MODE_MAP.normal,
                    n.slots.push(S)
                }
                var w = t.skins;
                for (var T in w)
                    if (w.hasOwnProperty(T)) {
                        var x = w[T]
                          , b = new i.Skin(T);
                        for (var C in x)
                            if (x.hasOwnProperty(C)) {
                                var k = n.findSlotIndex(C)
                                  , I = x[C];
                                for (var D in I)
                                    if (I.hasOwnProperty(D)) {
                                        var X = this.readAttachment(b, D, I[D]);
                                        X && b.addAttachment(k, D, X)
                                    }
                            }
                        n.skins.push(b),
                        "default" == b.name && (n.defaultSkin = b)
                    }
                var U = t.events;
                for (var O in U)
                    if (U.hasOwnProperty(O)) {
                        var P = U[O]
                          , M = new i.EventData(O);
                        M.intValue = P["int"] || 0,
                        M.floatValue = P["float"] || 0,
                        M.stringValue = P.string || null,
                        n.events.push(M)
                    }
                var F = t.animations;
                for (var Y in F)
                    F.hasOwnProperty(Y) && this.readAnimation(Y, F[Y], n);
                return n
            },
            readAttachment: function(t, e, n) {
                e = n.name || e;
                var r = i.AttachmentType[n.type || "region"]
                  , a = n.path || e
                  , o = this.scale;
                if (r == i.AttachmentType.region) {
                    var s = this.attachmentLoader.newRegionAttachment(t, e, a);
                    if (!s)
                        return null;
                    s.path = a,
                    s.x = (n.x || 0) * o,
                    s.y = (n.y || 0) * o,
                    s.scaleX = n.hasOwnProperty("scaleX") ? n.scaleX : 1,
                    s.scaleY = n.hasOwnProperty("scaleY") ? n.scaleY : 1,
                    s.rotation = n.rotation || 0,
                    s.width = (n.width || 0) * o,
                    s.height = (n.height || 0) * o;
                    var l = n.color;
                    return l && (s.r = this.toColor(l, 0),
                    s.g = this.toColor(l, 1),
                    s.b = this.toColor(l, 2),
                    s.a = this.toColor(l, 3)),
                    s.updateOffset(),
                    s
                }
                if (r == i.AttachmentType.mesh) {
                    var h = this.attachmentLoader.newMeshAttachment(t, e, a);
                    return h ? (h.path = a,
                    h.vertices = this.getFloatArray(n, "vertices", o),
                    h.triangles = this.getIntArray(n, "triangles"),
                    h.regionUVs = this.getFloatArray(n, "uvs", 1),
                    h.updateUVs(),
                    l = n.color,
                    l && (h.r = this.toColor(l, 0),
                    h.g = this.toColor(l, 1),
                    h.b = this.toColor(l, 2),
                    h.a = this.toColor(l, 3)),
                    h.hullLength = 2 * (n.hull || 0),
                    n.edges && (h.edges = this.getIntArray(n, "edges")),
                    h.width = (n.width || 0) * o,
                    h.height = (n.height || 0) * o,
                    h) : null
                }
                if (r == i.AttachmentType.skinnedmesh) {
                    var h = this.attachmentLoader.newSkinnedMeshAttachment(t, e, a);
                    if (!h)
                        return null;
                    h.path = a;
                    for (var m = this.getFloatArray(n, "uvs", 1), u = this.getFloatArray(n, "vertices", 1), f = [], c = [], p = 0, d = u.length; d > p; ) {
                        var g = 0 | u[p++];
                        c[c.length] = g;
                        for (var v = p + 4 * g; v > p; )
                            c[c.length] = u[p],
                            f[f.length] = u[p + 1] * o,
                            f[f.length] = u[p + 2] * o,
                            f[f.length] = u[p + 3],
                            p += 4
                    }
                    return h.bones = c,
                    h.weights = f,
                    h.triangles = this.getIntArray(n, "triangles"),
                    h.regionUVs = m,
                    h.updateUVs(),
                    l = n.color,
                    l && (h.r = this.toColor(l, 0),
                    h.g = this.toColor(l, 1),
                    h.b = this.toColor(l, 2),
                    h.a = this.toColor(l, 3)),
                    h.hullLength = 2 * (n.hull || 0),
                    n.edges && (h.edges = this.getIntArray(n, "edges")),
                    h.width = (n.width || 0) * o,
                    h.height = (n.height || 0) * o,
                    h
                }
                if (r == i.AttachmentType.boundingbox) {
                    for (var A = this.attachmentLoader.newBoundingBoxAttachment(t, e), u = n.vertices, p = 0, d = u.length; d > p; p++)
                        A.vertices.push(u[p] * o);
                    return A
                }
                throw "Unknown attachment type: " + r
            },
            readAnimation: function(t, e, n) {
                var r = []
                  , a = 0
                  , o = e.slots;
                for (var s in o)
                    if (o.hasOwnProperty(s)) {
                        var l = o[s]
                          , h = n.findSlotIndex(s);
                        for (var m in l)
                            if (l.hasOwnProperty(m)) {
                                var u = l[m];
                                if ("color" == m) {
                                    var f = new i.ColorTimeline(u.length);
                                    f.slotIndex = h;
                                    for (var c = 0, p = 0, d = u.length; d > p; p++) {
                                        var g = u[p]
                                          , v = g.color
                                          , A = this.toColor(v, 0)
                                          , S = this.toColor(v, 1)
                                          , y = this.toColor(v, 2)
                                          , w = this.toColor(v, 3);
                                        f.setFrame(c, g.time, A, S, y, w),
                                        this.readCurve(f, c, g),
                                        c++
                                    }
                                    r.push(f),
                                    a = Math.max(a, f.frames[5 * f.getFrameCount() - 5])
                                } else {
                                    if ("attachment" != m)
                                        throw "Invalid timeline type for a slot: " + m + " (" + s + ")";
                                    var f = new i.AttachmentTimeline(u.length);
                                    f.slotIndex = h;
                                    for (var c = 0, p = 0, d = u.length; d > p; p++) {
                                        var g = u[p];
                                        f.setFrame(c++, g.time, g.name)
                                    }
                                    r.push(f),
                                    a = Math.max(a, f.frames[f.getFrameCount() - 1])
                                }
                            }
                    }
                var T = e.bones;
                for (var x in T)
                    if (T.hasOwnProperty(x)) {
                        var b = n.findBoneIndex(x);
                        if (-1 == b)
                            throw "Bone not found: " + x;
                        var C = T[x];
                        for (var m in C)
                            if (C.hasOwnProperty(m)) {
                                var u = C[m];
                                if ("rotate" == m) {
                                    var f = new i.RotateTimeline(u.length);
                                    f.boneIndex = b;
                                    for (var c = 0, p = 0, d = u.length; d > p; p++) {
                                        var g = u[p];
                                        f.setFrame(c, g.time, g.angle),
                                        this.readCurve(f, c, g),
                                        c++
                                    }
                                    r.push(f),
                                    a = Math.max(a, f.frames[2 * f.getFrameCount() - 2])
                                } else if ("translate" == m || "scale" == m) {
                                    var f, k = 1;
                                    "scale" == m ? f = new i.ScaleTimeline(u.length) : (f = new i.TranslateTimeline(u.length),
                                    k = this.scale),
                                    f.boneIndex = b;
                                    for (var c = 0, p = 0, d = u.length; d > p; p++) {
                                        var g = u[p]
                                          , I = (g.x || 0) * k
                                          , D = (g.y || 0) * k;
                                        f.setFrame(c, g.time, I, D),
                                        this.readCurve(f, c, g),
                                        c++
                                    }
                                    r.push(f),
                                    a = Math.max(a, f.frames[3 * f.getFrameCount() - 3])
                                } else {
                                    if ("flipX" != m && "flipY" != m)
                                        throw "Invalid timeline type for a bone: " + m + " (" + x + ")";
                                    var I = "flipX" == m
                                      , f = I ? new i.FlipXTimeline(u.length) : new i.FlipYTimeline(u.length);
                                    f.boneIndex = b;
                                    for (var X = I ? "x" : "y", c = 0, p = 0, d = u.length; d > p; p++) {
                                        var g = u[p];
                                        f.setFrame(c, g.time, g[X] || !1),
                                        c++
                                    }
                                    r.push(f),
                                    a = Math.max(a, f.frames[2 * f.getFrameCount() - 2])
                                }
                            }
                    }
                var U = e.ik;
                for (var O in U)
                    if (U.hasOwnProperty(O)) {
                        var P = n.findIkConstraint(O)
                          , u = U[O]
                          , f = new i.IkConstraintTimeline(u.length);
                        f.ikConstraintIndex = n.ikConstraints.indexOf(P);
                        for (var c = 0, p = 0, d = u.length; d > p; p++) {
                            var g = u[p]
                              , M = g.hasOwnProperty("mix") ? g.mix : 1
                              , F = !g.hasOwnProperty("bendPositive") || g.bendPositive ? 1 : -1;
                            f.setFrame(c, g.time, M, F),
                            this.readCurve(f, c, g),
                            c++
                        }
                        r.push(f),
                        a = Math.max(a, f.frames[3 * f.getFrameCount() - 3])
                    }
                var Y = e.ffd;
                for (var E in Y) {
                    var R = n.findSkin(E)
                      , l = Y[E];
                    for (s in l) {
                        var h = n.findSlotIndex(s)
                          , B = l[s];
                        for (var V in B) {
                            var u = B[V]
                              , f = new i.FfdTimeline(u.length)
                              , N = R.getAttachment(h, V);
                            if (!N)
                                throw "FFD attachment not found: " + V;
                            f.slotIndex = h,
                            f.attachment = N;
                            var L, W = N.type == i.AttachmentType.mesh;
                            L = W ? N.vertices.length : N.weights.length / 3 * 2;
                            for (var c = 0, p = 0, d = u.length; d > p; p++) {
                                var _, g = u[p];
                                if (g.vertices) {
                                    var j = g.vertices;
                                    _ = [];
                                    for (var H = 0; L > H; ++H)
                                        _.push(0);
                                    var K = g.offset || 0
                                      , J = j.length;
                                    if (1 == this.scale)
                                        for (var q = 0; J > q; q++)
                                            _[q + K] = j[q];
                                    else
                                        for (var q = 0; J > q; q++)
                                            _[q + K] = j[q] * this.scale;
                                    if (W)
                                        for (var G = N.vertices, q = 0, J = _.length; J > q; q++)
                                            _[q] += G[q]
                                } else if (W)
                                    _ = N.vertices;
                                else {
                                    _ = [];
                                    for (var H = 0; L > H; ++H)
                                        _.push(0)
                                }
                                f.setFrame(c, g.time, _),
                                this.readCurve(f, c, g),
                                c++
                            }
                            r[r.length] = f,
                            a = Math.max(a, f.frames[f.getFrameCount() - 1])
                        }
                    }
                }
                var $ = e.drawOrder;
                if ($ || ($ = e.draworder),
                $) {
                    for (var f = new i.DrawOrderTimeline($.length), z = n.slots.length, c = 0, p = 0, d = $.length; d > p; p++) {
                        var Q = $[p]
                          , Z = null;
                        if (Q.offsets) {
                            Z = [],
                            Z.length = z;
                            for (var q = z - 1; q >= 0; q--)
                                Z[q] = -1;
                            var tt = Q.offsets
                              , et = [];
                            et.length = z - tt.length;
                            for (var nt = 0, it = 0, q = 0, J = tt.length; J > q; q++) {
                                var rt = tt[q]
                                  , h = n.findSlotIndex(rt.slot);
                                if (-1 == h)
                                    throw "Slot not found: " + rt.slot;
                                for (; nt != h; )
                                    et[it++] = nt++;
                                Z[nt + rt.offset] = nt++
                            }
                            for (; z > nt; )
                                et[it++] = nt++;
                            for (var q = z - 1; q >= 0; q--)
                                -1 == Z[q] && (Z[q] = et[--it])
                        }
                        f.setFrame(c++, Q.time, Z)
                    }
                    r.push(f),
                    a = Math.max(a, f.frames[f.getFrameCount() - 1])
                }
                var at = e.events;
                if (at) {
                    for (var f = new i.EventTimeline(at.length), c = 0, p = 0, d = at.length; d > p; p++) {
                        var ot = at[p]
                          , st = n.findEvent(ot.name);
                        if (!st)
                            throw "Event not found: " + ot.name;
                        var lt = new i.Event(st);
                        lt.intValue = ot.hasOwnProperty("int") ? ot["int"] : st.intValue,
                        lt.floatValue = ot.hasOwnProperty("float") ? ot["float"] : st.floatValue,
                        lt.stringValue = ot.hasOwnProperty("string") ? ot.string : st.stringValue,
                        f.setFrame(c++, ot.time, lt)
                    }
                    r.push(f),
                    a = Math.max(a, f.frames[f.getFrameCount() - 1])
                }
                n.animations.push(new i.Animation(t,r,a))
            },
            readCurve: function(t, e, n) {
                var i = n.curve;
                i ? "stepped" == i ? t.curves.setStepped(e) : i instanceof Array && t.curves.setCurve(e, i[0], i[1], i[2], i[3]) : t.curves.setLinear(e)
            },
            toColor: function(t, e) {
                if (8 != t.length)
                    throw "Color hexidecimal length must be 8, recieved: " + t;
                return parseInt(t.substring(2 * e, 2 * e + 2), 16) / 255
            },
            getFloatArray: function(t, e, n) {
                var r = t[e]
                  , a = new i.Float32Array(r.length)
                  , o = 0
                  , s = r.length;
                if (1 == n)
                    for (; s > o; o++)
                        a[o] = r[o];
                else
                    for (; s > o; o++)
                        a[o] = r[o] * n;
                return a
            },
            getIntArray: function(t, e) {
                for (var n = t[e], r = new i.Uint16Array(n.length), a = 0, o = n.length; o > a; a++)
                    r[a] = 0 | n[a];
                return r
            }
        },
        e.exports = i.SkeletonJsonParser
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./AttachmentTimeline": 10,
        "./AttachmentType": 11,
        "./BoneData": 13,
        "./ColorTimeline": 15,
        "./DrawOrderTimeline": 17,
        "./Event": 18,
        "./EventData": 19,
        "./EventTimeline": 20,
        "./FfdTimeline": 21,
        "./FlipXTimeline": 22,
        "./FlipYTimeline": 23,
        "./IkConstraintData": 25,
        "./IkConstraintTimeline": 26,
        "./RotateTimeline": 29,
        "./ScaleTimeline": 30,
        "./SkeletonData": 33,
        "./Skin": 35,
        "./SlotData": 38,
        "./TranslateTimeline": 40
    }],
    35: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Skin = function(t) {
            this.name = t,
            this.attachments = {}
        }
        ,
        i.Skin.prototype = {
            addAttachment: function(t, e, n) {
                this.attachments[t + ":" + e] = n
            },
            getAttachment: function(t, e) {
                return this.attachments[t + ":" + e]
            },
            _attachAll: function(t, e) {
                for (var n in e.attachments) {
                    var i = n.indexOf(":")
                      , r = parseInt(n.substring(0, i))
                      , a = n.substring(i + 1)
                      , o = t.slots[r];
                    if (o.attachment && o.attachment.name == a) {
                        var s = this.getAttachment(r, a);
                        s && o.setAttachment(s)
                    }
                }
            }
        },
        e.exports = i.Skin
    }
    , {
        "../SpineUtil": 42
    }],
    36: [function(t, e, n) {
        var i = t("../SpineUtil") || {};
        i.AttachmentType = t("./AttachmentType"),
        i.SkinnedMeshAttachment = function(t) {
            this.name = t
        }
        ,
        i.SkinnedMeshAttachment.prototype = {
            type: i.AttachmentType.skinnedmesh,
            bones: null,
            weights: null,
            uvs: null,
            regionUVs: null,
            triangles: null,
            hullLength: 0,
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            path: null,
            rendererObject: null,
            regionU: 0,
            regionV: 0,
            regionU2: 0,
            regionV2: 0,
            regionRotate: !1,
            regionOffsetX: 0,
            regionOffsetY: 0,
            regionWidth: 0,
            regionHeight: 0,
            regionOriginalWidth: 0,
            regionOriginalHeight: 0,
            edges: null,
            width: 0,
            height: 0,
            updateUVs: function(t, e, n, r, a) {
                var o = this.regionU2 - this.regionU
                  , s = this.regionV2 - this.regionV
                  , l = this.regionUVs.length;
                if (this.uvs && this.uvs.length == l || (this.uvs = new i.Float32Array(l)),
                this.regionRotate)
                    for (var h = 0; l > h; h += 2)
                        this.uvs[h] = this.regionU + this.regionUVs[h + 1] * o,
                        this.uvs[h + 1] = this.regionV + s - this.regionUVs[h] * s;
                else
                    for (var h = 0; l > h; h += 2)
                        this.uvs[h] = this.regionU + this.regionUVs[h] * o,
                        this.uvs[h + 1] = this.regionV + this.regionUVs[h + 1] * s
            },
            computeWorldVertices: function(t, e, n, i) {
                var r, a, o, s, l, h, m, u = n.bone.skeleton.bones, f = this.weights, c = this.bones, p = 0, d = 0, g = 0, v = 0, A = c.length;
                if (n.attachmentVertices.length)
                    for (var S = n.attachmentVertices; A > d; p += 2) {
                        for (a = 0,
                        o = 0,
                        r = c[d++] + d; r > d; d++,
                        g += 3,
                        v += 2)
                            s = u[c[d]],
                            l = f[g] + S[v],
                            h = f[g + 1] + S[v + 1],
                            m = f[g + 2],
                            a += (l * s.m00 + h * s.m01 + s.worldX) * m,
                            o += (l * s.m10 + h * s.m11 + s.worldY) * m;
                        i[p] = a + t,
                        i[p + 1] = o + e
                    }
                else
                    for (; A > d; p += 2) {
                        for (a = 0,
                        o = 0,
                        r = c[d++] + d; r > d; d++,
                        g += 3)
                            s = u[c[d]],
                            l = f[g],
                            h = f[g + 1],
                            m = f[g + 2],
                            a += (l * s.m00 + h * s.m01 + s.worldX) * m,
                            o += (l * s.m10 + h * s.m11 + s.worldY) * m;
                        i[p] = a + t,
                        i[p + 1] = o + e
                    }
            }
        },
        e.exports = i.SkinnedMeshAttachment
    }
    , {
        "../SpineUtil": 42,
        "./AttachmentType": 11
    }],
    37: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Slot = function(t, e) {
            this.data = t,
            this.bone = e,
            this.setToSetupPose()
        }
        ,
        i.Slot.prototype = {
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            _attachmentTime: 0,
            attachment: null,
            attachmentVertices: [],
            setAttachment: function(t) {
                this.attachment = t,
                this._attachmentTime = this.bone.skeleton.time,
                this.attachmentVertices.length = 0
            },
            setAttachmentTime: function(t) {
                this._attachmentTime = this.bone.skeleton.time - t
            },
            getAttachmentTime: function() {
                return this.bone.skeleton.time - this._attachmentTime
            },
            setToSetupPose: function() {
                var t = this.data;
                this.r = t.r,
                this.g = t.g,
                this.b = t.b,
                this.a = t.a,
                this.blendMode = t.blendMode;
                for (var e = this.bone.skeleton.data.slots, n = 0, i = e.length; i > n; n++)
                    if (e[n] == t) {
                        this.setAttachment(t.attachmentName ? this.bone.skeleton.getAttachmentBySlotIndex(n, t.attachmentName) : null);
                        break
                    }
            }
        },
        e.exports = i.Slot
    }
    , {
        "../SpineUtil": 42
    }],
    38: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.SlotData = function(t, e) {
            this.name = t,
            this.boneData = e
        }
        ,
        i.SlotData.PIXI_BLEND_MODE_MAP = {
            multiply: PIXI.BLEND_MODES.MULTIPLY,
            screen: PIXI.BLEND_MODES.SCREEN,
            additive: PIXI.BLEND_MODES.ADD,
            normal: PIXI.BLEND_MODES.NORMAL
        },
        i.SlotData.prototype = {
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            attachmentName: null,
            blendMode: PIXI.BLEND_MODES.NORMAL
        },
        e.exports = i.SlotData
    }
    , {
        "../SpineUtil": 42
    }],
    39: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.TrackEntry = function() {}
        ,
        i.TrackEntry.prototype = {
            next: null,
            previous: null,
            animation: null,
            loop: !1,
            delay: 0,
            time: 0,
            lastTime: -1,
            endTime: 0,
            timeScale: 1,
            mixTime: 0,
            mixDuration: 0,
            mix: 1,
            onStart: null,
            onEnd: null,
            onComplete: null,
            onEvent: null
        },
        e.exports = i.TrackEntry
    }
    , {
        "../SpineUtil": 42
    }],
    40: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.Curves = t("./Curves"),
        i.TranslateTimeline = function(t) {
            this.curves = new i.Curves(t),
            this.frames = [],
            this.frames.length = 3 * t
        }
        ,
        i.TranslateTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 3
            },
            setFrame: function(t, e, n, i) {
                t *= 3,
                this.frames[t] = e,
                this.frames[t + 1] = n,
                this.frames[t + 2] = i
            },
            apply: function(t, e, n, r, a) {
                var o = this.frames;
                if (!(n < o[0])) {
                    var s = t.bones[this.boneIndex];
                    if (n >= o[o.length - 3])
                        return s.x += (s.data.x + o[o.length - 2] - s.x) * a,
                        void (s.y += (s.data.y + o[o.length - 1] - s.y) * a);
                    var l = i.Animation.binarySearch(o, n, 3)
                      , h = o[l - 2]
                      , m = o[l - 1]
                      , u = o[l]
                      , f = 1 - (n - u) / (o[l + -3] - u);
                    f = this.curves.getCurvePercent(l / 3 - 1, f),
                    s.x += (s.data.x + h + (o[l + 1] - h) * f - s.x) * a,
                    s.y += (s.data.y + m + (o[l + 2] - m) * f - s.y) * a
                }
            }
        },
        e.exports = i.TranslateTimeline
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./Curves": 16
    }],
    41: [function(t, e, n) {
        var i = t("../SpineUtil");
        i.Animation = t("./Animation"),
        i.AnimationStateData = t("./AnimationStateData"),
        i.AnimationState = t("./AnimationState"),
        i.AtlasAttachmentParser = t("./AtlasAttachmentParser"),
        i.Atlas = t("./Atlas"),
        i.AtlasPage = t("./AtlasPage"),
        i.AtlasReader = t("./AtlasReader"),
        i.AtlasRegion = t("./AtlasRegion"),
        i.AttachmentTimeline = t("./AttachmentTimeline"),
        i.AttachmentType = t("./AttachmentType"),
        i.BoneData = t("./BoneData"),
        i.Bone = t("./Bone"),
        i.BoundingBoxAttachment = t("./BoundingBoxAttachment"),
        i.ColorTimeline = t("./ColorTimeline"),
        i.Curves = t("./Curves"),
        i.DrawOrderTimeline = t("./DrawOrderTimeline"),
        i.EventData = t("./EventData"),
        i.Event = t("./Event"),
        i.EventTimeline = t("./EventTimeline"),
        i.FfdTimeline = t("./FfdTimeline"),
        i.FlipXTimeline = t("./FlipXTimeline"),
        i.FlipYTimeline = t("./FlipYTimeline"),
        i.IkConstraintData = t("./IkConstraintData"),
        i.IkConstraint = t("./IkConstraint"),
        i.IkConstraintTimeline = t("./IkConstraintTimeline"),
        i.MeshAttachment = t("./MeshAttachment"),
        i.RegionAttachment = t("./RegionAttachment"),
        i.RotateTimeline = t("./RotateTimeline"),
        i.ScaleTimeline = t("./ScaleTimeline"),
        i.SkeletonBounds = t("./SkeletonBounds"),
        i.SkeletonData = t("./SkeletonData"),
        i.Skeleton = t("./Skeleton"),
        i.SkeletonJsonParser = t("./SkeletonJsonParser"),
        i.Skin = t("./Skin.js"),
        i.SkinnedMeshAttachment = t("./SkinnedMeshAttachment"),
        i.SlotData = t("./SlotData"),
        i.Slot = t("./Slot"),
        i.TrackEntry = t("./TrackEntry"),
        i.TranslateTimeline = t("./TranslateTimeline"),
        e.exports = i
    }
    , {
        "../SpineUtil": 42,
        "./Animation": 2,
        "./AnimationState": 3,
        "./AnimationStateData": 4,
        "./Atlas": 5,
        "./AtlasAttachmentParser": 6,
        "./AtlasPage": 7,
        "./AtlasReader": 8,
        "./AtlasRegion": 9,
        "./AttachmentTimeline": 10,
        "./AttachmentType": 11,
        "./Bone": 12,
        "./BoneData": 13,
        "./BoundingBoxAttachment": 14,
        "./ColorTimeline": 15,
        "./Curves": 16,
        "./DrawOrderTimeline": 17,
        "./Event": 18,
        "./EventData": 19,
        "./EventTimeline": 20,
        "./FfdTimeline": 21,
        "./FlipXTimeline": 22,
        "./FlipYTimeline": 23,
        "./IkConstraint": 24,
        "./IkConstraintData": 25,
        "./IkConstraintTimeline": 26,
        "./MeshAttachment": 27,
        "./RegionAttachment": 28,
        "./RotateTimeline": 29,
        "./ScaleTimeline": 30,
        "./Skeleton": 31,
        "./SkeletonBounds": 32,
        "./SkeletonData": 33,
        "./SkeletonJsonParser": 34,
        "./Skin.js": 35,
        "./SkinnedMeshAttachment": 36,
        "./Slot": 37,
        "./SlotData": 38,
        "./TrackEntry": 39,
        "./TranslateTimeline": 40
    }],
    42: [function(t, e, n) {
        e.exports = {
            radDeg: 180 / Math.PI,
            degRad: Math.PI / 180,
            temp: [],
            Float32Array: "undefined" == typeof Float32Array ? Array : Float32Array,
            Uint16Array: "undefined" == typeof Uint16Array ? Array : Uint16Array
        }
    }
    , {}],
    43: [function(t, e, n) {
        function i(t) {
            if (PIXI.Container.call(this),
            !t)
                throw new Error("The spineData param is required.");
            if ("string" == typeof t)
                throw new Error('spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');
            this.spineData = t,
            this.skeleton = new r.Skeleton(t),
            this.skeleton.updateWorldTransform(),
            this.stateData = new r.AnimationStateData(t),
            this.state = new r.AnimationState(this.stateData),
            this.slotContainers = [];
            for (var e = 0, n = this.skeleton.slots.length; n > e; e++) {
                var i = this.skeleton.slots[e]
                  , a = i.attachment
                  , o = new PIXI.Container;
                if (this.slotContainers.push(o),
                this.addChild(o),
                a instanceof r.RegionAttachment) {
                    var s = a.rendererObject.name
                      , l = this.createSprite(i, a);
                    i.currentSprite = l,
                    i.currentSpriteName = s,
                    o.addChild(l)
                } else {
                    if (!(a instanceof r.MeshAttachment))
                        continue;
                    var h = this.createMesh(i, a);
                    i.currentMesh = h,
                    i.currentMeshName = a.name,
                    o.addChild(h)
                }
            }
            this.autoUpdate = !0
        }
        var r = t("../SpineRuntime")
          , a = t("../loaders/atlasParser");
        r.Bone.yDown = !0,
        i.fromAtlas = function(t) {
            var e = a.AnimCache[t];
            if (!e)
                throw new Error('Spine data "' + t + '" does not exist in the animation cache');
            return new i(e)
        }
        ,
        i.prototype = Object.create(PIXI.Container.prototype),
        i.prototype.constructor = i,
        e.exports = i,
        Object.defineProperties(i.prototype, {
            autoUpdate: {
                get: function() {
                    return this.updateTransform === i.prototype.autoUpdateTransform
                },
                set: function(t) {
                    this.updateTransform = t ? i.prototype.autoUpdateTransform : PIXI.Container.prototype.updateTransform
                }
            }
        }),
        i.prototype.update = function(t) {
            this.state.update(t),
            this.state.apply(this.skeleton),
            this.skeleton.updateWorldTransform();
            for (var e = this.skeleton.drawOrder, n = this.skeleton.slots, i = 0, a = e.length; a > i; i++)
                this.children[i] = this.slotContainers[e[i]];
            for (i = 0,
            a = n.length; a > i; i++) {
                var o = n[i]
                  , s = o.attachment
                  , l = this.slotContainers[i];
                if (s) {
                    var h = s.type;
                    if (h === r.AttachmentType.region) {
                        if (s.rendererObject && (!o.currentSpriteName || o.currentSpriteName !== s.rendererObject.name)) {
                            var m = s.rendererObject.name;
                            if (void 0 !== o.currentSprite && (o.currentSprite.visible = !1),
                            o.sprites = o.sprites || {},
                            void 0 !== o.sprites[m])
                                o.sprites[m].visible = !0;
                            else {
                                var u = this.createSprite(o, s);
                                l.addChild(u)
                            }
                            o.currentSprite = o.sprites[m],
                            o.currentSpriteName = m
                        }
                        var f = o.bone;
                        l.position.x = f.worldX + s.x * f.m00 + s.y * f.m01,
                        l.position.y = f.worldY + s.x * f.m10 + s.y * f.m11,
                        l.scale.x = f.worldScaleX,
                        l.scale.y = f.worldScaleY,
                        l.rotation = -(o.bone.worldRotation * r.degRad),
                        f.worldFlipX && (l.scale.x = -l.scale.x,
                        l.rotation = -l.rotation),
                        f.worldFlipY == r.Bone.yDown && (l.scale.y = -l.scale.y,
                        l.rotation = -l.rotation),
                        o.currentSprite.blendMode = o.blendMode,
                        o.currentSprite.tint = PIXI.utils.rgb2hex([o.r, o.g, o.b])
                    } else {
                        if (h !== r.AttachmentType.skinnedmesh && h !== r.AttachmentType.mesh) {
                            l.visible = !1;
                            continue
                        }
                        if (!o.currentMeshName || o.currentMeshName !== s.name) {
                            var c = s.name;
                            if (void 0 !== o.currentMesh && (o.currentMesh.visible = !1),
                            o.meshes = o.meshes || {},
                            void 0 !== o.meshes[c])
                                o.meshes[c].visible = !0;
                            else {
                                var p = this.createMesh(o, s);
                                l.addChild(p)
                            }
                            o.currentMesh = o.meshes[c],
                            o.currentMeshName = c
                        }
                        s.computeWorldVertices(o.bone.skeleton.x, o.bone.skeleton.y, o, o.currentMesh.vertices)
                    }
                    l.visible = !0,
                    l.alpha = o.a
                } else
                    l.visible = !1
            }
        }
        ,
        i.prototype.autoUpdateTransform = function() {
            this.lastTime = this.lastTime || Date.now();
            var t = .001 * (Date.now() - this.lastTime);
            this.lastTime = Date.now(),
            this.update(t),
            PIXI.Container.prototype.updateTransform.call(this)
        }
        ,
        i.prototype.createSprite = function(t, e) {
            var n = e.rendererObject
              , i = n.page.rendererObject
              , a = new PIXI.Rectangle(n.x,n.y,n.rotate ? n.height : n.width,n.rotate ? n.width : n.height)
              , o = new PIXI.Texture(i,a)
              , s = new PIXI.Sprite(o)
              , l = n.rotate ? .5 * Math.PI : 0;
            return s.scale.x = n.width / n.originalWidth * e.scaleX,
            s.scale.y = n.height / n.originalHeight * e.scaleY,
            s.rotation = l - e.rotation * r.degRad,
            s.anchor.x = s.anchor.y = .5,
            s.alpha = e.a,
            t.sprites = t.sprites || {},
            t.sprites[n.name] = s,
            s
        }
        ,
        i.prototype.createMesh = function(t, e) {
            var n = e.rendererObject
              , i = n.page.rendererObject
              , r = new PIXI.Texture(i)
              , a = new PIXI.mesh.Mesh(r,new Float32Array(e.uvs.length),new Float32Array(e.uvs),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);
            return a.canvasPadding = 1.5,
            a.alpha = e.a,
            t.meshes = t.meshes || {},
            t.meshes[e.name] = a,
            a
        }
    }
    , {
        "../SpineRuntime": 41,
        "../loaders/atlasParser": 45
    }],
    44: [function(t, e, n) {
        var i = t("./atlasParser");
        PIXI.loaders.Loader.addPixiMiddleware(i),
        PIXI.loader.use(i())
    }
    , {
        "./atlasParser": 45
    }],
    45: [function(t, e, n) {
        var i = PIXI.loaders.Resource
          , r = PIXI.utils.async
          , a = t("../SpineRuntime")
          , o = e.exports = function() {
            return function(t, e) {
                if (!t.data || !t.isJson || !t.data.bones)
                    return e();
                var n = t.url.substr(0, t.url.lastIndexOf(".")) + ".atlas"
                  , s = {
                    crossOrigin: t.crossOrigin,
                    xhrType: i.XHR_RESPONSE_TYPE.TEXT
                }
                  , l = t.url.substr(0, t.url.lastIndexOf("/") + 1);
                this.add(t.name + "_atlas", n, s, function(n) {
                    var i = new a.Atlas(this.xhr.responseText,l,n.crossOrigin)
                      , s = new a.SkeletonJsonParser(new a.AtlasAttachmentParser(i))
                      , h = s.readSkeletonData(t.data);
                    t.spineData = h,
                    t.spineAtlas = i,
                    o.enableCaching && (o.AnimCache[t.name] = t.spineData),
                    r.each(i.pages, function(t, e) {
                        t.rendererObject.hasLoaded ? e() : t.rendererObject.once("loaded", e)
                    }, e)
                })
            }
        }
        ;
        o.AnimCache = {},
        o.enableCaching = !0
    }
    , {
        "../SpineRuntime": 41
    }],
    46: [function(t, e, n) {
        e.exports = {
            atlasParser: t("./atlasParser"),
            Loader: t("./Loader")
        }
    }
    , {
        "./Loader": 44,
        "./atlasParser": 45
    }]
}, {}, [1]);
//XXX: PIXI 3.0.7 Extend
PIXI.extend = {
    param: {},
    method: {},
    child: {}
};
PIXI.extend.hitTestRectangle = function(r1, r2) {
    var hit, combinedHalfWidths, combinedHalfHeights, vx, vy;
    hit = false;
    r1.centerX = r1.x + r1.width / 2;
    r1.centerY = r1.y + r1.height / 2;
    r2.centerX = r2.x + r2.width / 2;
    r2.centerY = r2.y + r2.height / 2;
    r1.halfWidth = r1.width / 2;
    r1.halfHeight = r1.height / 2;
    r2.halfWidth = r2.width / 2;
    r2.halfHeight = r2.height / 2;
    vx = r1.centerX - r2.centerX;
    vy = r1.centerY - r2.centerY;
    combinedHalfWidths = r1.halfWidth + r2.halfWidth;
    combinedHalfHeights = r1.halfHeight + r2.halfHeight;
    if (Math.abs(vx) < combinedHalfWidths) {
        if (Math.abs(vy) < combinedHalfHeights) {
            hit = true;
        } else {
            hit = false;
        }
    } else {
        hit = false;
    }
    return hit;
}
;
//XXX: jCanvas v15.08.17
(function(g, L, J) {
    "object" === typeof module && "object" === typeof module.exports ? module.exports = L.document && "undefined" !== typeof g ? J(L, !0) : function(g, L) {
        return J(g, L)
    }
    : J(g, L)
}
)("undefined" !== typeof window ? window.$ : {}, "undefined" !== typeof window ? window : this, function(g, L) {
    function J(d) {
        for (var c in d)
            d.hasOwnProperty(c) && (this[c] = d[c]);
        return this
    }
    function na() {
        Z(this, na.baseDefaults)
    }
    function ja(d) {
        return "string" === aa(d)
    }
    function va(d) {
        return !isNaN(wa(d)) && !isNaN(ba(d))
    }
    function K(d) {
        return d && d.getContext ? d.getContext("2d") : null
    }
    function ka(d) {
        var c, a, b;
        for (c in d)
            d.hasOwnProperty(c) && (b = d[c],
            a = aa(b),
            "string" === a && va(b) && "text" !== c && (d[c] = ba(b)));
        void 0 !== d.text && (d.text = String(d.text))
    }
    function la(d) {
        d = Z({}, d);
        d.masks = d.masks.slice(0);
        return d
    }
    function fa(d, c) {
        var a;
        d.save();
        a = la(c.transforms);
        c.savedTransforms.push(a)
    }
    function xa(d, c, a, b) {
        a[b] && (da(a[b]) ? c[b] = a[b].call(d, a) : c[b] = a[b])
    }
    function S(d, c, a) {
        xa(d, c, a, "fillStyle");
        xa(d, c, a, "strokeStyle");
        c.lineWidth = a.strokeWidth;
        a.rounded ? c.lineCap = c.lineJoin = "round" : (c.lineCap = a.strokeCap,
        c.lineJoin = a.strokeJoin,
        c.miterLimit = a.miterLimit);
        a.strokeDash || (a.strokeDash = []);
        c.setLineDash && c.setLineDash(a.strokeDash);
        c.webkitLineDash = c.mozDash = a.strokeDash;
        c.lineDashOffset = c.webkitLineDashOffset = c.mozDashOffset = a.strokeDashOffset;
        c.shadowOffsetX = a.shadowX;
        c.shadowOffsetY = a.shadowY;
        c.shadowBlur = a.shadowBlur;
        c.shadowColor = a.shadowColor;
        c.globalAlpha = a.opacity;
        c.globalCompositeOperation = a.compositing;
        a.imageSmoothing && (c.imageSmoothingEnabled = c.mozImageSmoothingEnabled = a.imageSmoothingEnabled)
    }
    function ya(d, c, a) {
        a.mask && (a.autosave && fa(d, c),
        d.clip(),
        c.transforms.masks.push(a._args))
    }
    function W(d, c, a) {
        a.closed && c.closePath();
        a.shadowStroke && 0 !== a.strokeWidth ? (c.stroke(),
        c.fill(),
        c.shadowColor = "transparent",
        c.shadowBlur = 0,
        c.stroke()) : (c.fill(),
        "transparent" !== a.fillStyle && (c.shadowColor = "transparent"),
        0 !== a.strokeWidth && c.stroke());
        a.closed || c.closePath();
        a._transformed && c.restore();
        a.mask && (d = H(d),
        ya(c, d, a))
    }
    function Q(d, c, a, b, f) {
        a._toRad = a.inDegrees ? F / 180 : 1;
        a._transformed = !0;
        c.save();
        a.fromCenter || a._centered || void 0 === b || (void 0 === f && (f = b),
        a.x += b / 2,
        a.y += f / 2,
        a._centered = !0);
        a.rotate && za(c, a, null);
        1 === a.scale && 1 === a.scaleX && 1 === a.scaleY || Aa(c, a, null);
        (a.translate || a.translateX || a.translateY) && Ba(c, a, null)
    }
    function H(d) {
        var c = ca.dataCache, a;
        c._canvas === d && c._data ? a = c._data : (a = g.data(d, "jCanvas"),
        a || (a = {
            canvas: d,
            layers: [],
            layer: {
                names: {},
                groups: {}
            },
            eventHooks: {},
            intersecting: [],
            lastIntersected: null,
            cursor: g(d).css("cursor"),
            drag: {
                layer: null,
                dragging: !1
            },
            event: {
                type: null,
                x: null,
                y: null
            },
            events: {},
            transforms: la(oa),
            savedTransforms: [],
            animating: !1,
            animated: null,
            pixelRatio: 1,
            scaled: !1
        },
        g.data(d, "jCanvas", a)),
        c._canvas = d,
        c._data = a);
        return a
    }
    function Ca(d, c, a) {
        for (var b in Y.events)
            Y.events.hasOwnProperty(b) && (a[b] || a.cursors && a.cursors[b]) && Da(d, c, a, b);
        c.events.mouseout || (d.bind("mouseout.jCanvas", function() {
            var a = c.drag.layer, b;
            a && (c.drag = {},
            P(d, c, a, "dragcancel"));
            for (b = 0; b < c.layers.length; b += 1)
                a = c.layers[b],
                a._hovered && d.triggerLayerEvent(c.layers[b], "mouseout");
            d.drawLayers()
        }),
        c.events.mouseout = !0)
    }
    function Da(d, c, a, b) {
        Y.events[b](d, c);
        a._event = !0
    }
    function Ea(d, c, a) {
        var b, f, e;
        if (a.draggable || a.cursors) {
            b = ["mousedown", "mousemove", "mouseup"];
            for (e = 0; e < b.length; e += 1)
                f = b[e],
                Da(d, c, a, f);
            a._event = !0
        }
    }
    function pa(d, c, a, b) {
        d = c.layer.names;
        b ? void 0 !== b.name && ja(a.name) && a.name !== b.name && delete d[a.name] : b = a;
        ja(b.name) && (d[b.name] = a)
    }
    function qa(d, c, a, b) {
        d = c.layer.groups;
        var f, e, h, g;
        if (!b)
            b = a;
        else if (void 0 !== b.groups && null !== a.groups)
            for (e = 0; e < a.groups.length; e += 1)
                if (f = a.groups[e],
                c = d[f]) {
                    for (g = 0; g < c.length; g += 1)
                        if (c[g] === a) {
                            h = g;
                            c.splice(g, 1);
                            break
                        }
                    0 === c.length && delete d[f]
                }
        if (void 0 !== b.groups && null !== b.groups)
            for (e = 0; e < b.groups.length; e += 1)
                f = b.groups[e],
                c = d[f],
                c || (c = d[f] = [],
                c.name = f),
                void 0 === h && (h = c.length),
                c.splice(h, 0, a)
    }
    function ra(d, c, a, b, f) {
        b[a] && c._running && !c._running[a] && (c._running[a] = !0,
        b[a].call(d[0], c, f),
        c._running[a] = !1)
    }
    function P(d, c, a, b, f) {
        if (!(a.disableEvents || a.intangible && -1 !== g.inArray(b, Ua))) {
            if ("mouseout" !== b) {
                var e;
                a.cursors && (e = a.cursors[b]);
                -1 !== g.inArray(e, V.cursors) && (e = V.prefix + e);
                e && d.css({
                    cursor: e
                })
            }
            ra(d, a, b, a, f);
            ra(d, a, b, c.eventHooks, f);
            ra(d, a, b, Y.eventHooks, f)
        }
    }
    function N(d, c, a, b) {
        var f, e = c._layer ? a : c;
        c._args = a;
        if (c.draggable || c.dragGroups)
            c.layer = !0,
            c.draggable = !0;
        c._method || (c._method = b ? b : c.method ? g.fn[c.method] : c.type ? g.fn[X.drawings[c.type]] : function() {}
        );
        if (c.layer && !c._layer) {
            if (a = g(d),
            b = H(d),
            f = b.layers,
            null === e.name || ja(e.name) && void 0 === b.layer.names[e.name])
                ka(c),
                e = new J(c),
                e.canvas = d,
                e.layer = !0,
                e._layer = !0,
                e._running = {},
                e.data = null !== e.data ? Z({}, e.data) : {},
                e.groups = null !== e.groups ? e.groups.slice(0) : [],
                pa(a, b, e),
                qa(a, b, e),
                Ca(a, b, e),
                Ea(a, b, e),
                c._event = e._event,
                e._method === g.fn.drawText && a.measureText(e),
                null === e.index && (e.index = f.length),
                f.splice(e.index, 0, e),
                c._args = e,
                P(a, b, e, "add")
        } else
            c.layer || ka(c);
        return e
    }
    function Fa(d, c) {
        var a, b;
        for (b = 0; b < V.props.length; b += 1)
            a = V.props[b],
            void 0 !== d[a] && (d["_" + a] = d[a],
            V.propsObj[a] = !0,
            c && delete d[a])
    }
    function Va(d, c, a) {
        var b, f, e, h;
        for (b in a)
            if (a.hasOwnProperty(b) && (f = a[b],
            da(f) && (a[b] = f.call(d, c, b)),
            "object" === aa(f) && Ga(f))) {
                for (e in f)
                    f.hasOwnProperty(e) && (h = f[e],
                    void 0 !== c[b] && (c[b + "." + e] = c[b][e],
                    a[b + "." + e] = h));
                delete a[b]
            }
        return a
    }
    function Ha(d) {
        var c, a, b = [], f = 1;
        d.match(/^([a-z]+|#[0-9a-f]+)$/gi) && ("transparent" === d && (d = "rgba(0, 0, 0, 0)"),
        a = Ia.head,
        c = a.style.color,
        a.style.color = d,
        d = g.css(a, "color"),
        a.style.color = c);
        d.match(/^rgb/gi) && (b = d.match(/(\d+(\.\d+)?)/gi),
        d.match(/%/gi) && (f = 2.55),
        b[0] *= f,
        b[1] *= f,
        b[2] *= f,
        b[3] = void 0 !== b[3] ? ba(b[3]) : 1);
        return b
    }
    function Wa(d) {
        var c = 3, a;
        "array" !== aa(d.start) && (d.start = Ha(d.start),
        d.end = Ha(d.end));
        d.now = [];
        if (1 !== d.start[3] || 1 !== d.end[3])
            c = 4;
        for (a = 0; a < c; a += 1)
            d.now[a] = d.start[a] + (d.end[a] - d.start[a]) * d.pos,
            3 > a && (d.now[a] = Xa(d.now[a]));
        1 !== d.start[3] || 1 !== d.end[3] ? d.now = "rgba( " + d.now.join(",") + " )" : (d.now.slice(0, 3),
        d.now = "rgb( " + d.now.join(",") + " )");
        d.elem.nodeName ? d.elem.style[d.prop] = d.now : d.elem[d.prop] = d.now
    }
    function Ya(d) {
        X.touchEvents[d] && (d = X.touchEvents[d]);
        return d
    }
    function Za(d) {
        Y.events[d] = function(c, a) {
            function b(a) {
                h.x = a.offsetX;
                h.y = a.offsetY;
                h.type = f;
                h.event = a;
                c.drawLayers({
                    resetFire: !0
                });
                a.preventDefault()
            }
            var f, e, h;
            h = a.event;
            f = "mouseover" === d || "mouseout" === d ? "mousemove" : d;
            e = Ya(f);
            a.events[f] || (e !== f ? c.bind(f + ".jCanvas " + e + ".jCanvas", b) : c.bind(f + ".jCanvas", b),
            a.events[f] = !0)
        }
    }
    function T(d, c, a) {
        var b, f, e, h;
        if (a = a._args)
            d = H(d),
            b = d.event,
            null !== b.x && null !== b.y && (e = b.x * d.pixelRatio,
            h = b.y * d.pixelRatio,
            f = c.isPointInPath(e, h) || c.isPointInStroke && c.isPointInStroke(e, h)),
            c = d.transforms,
            a.eventX = b.x,
            a.eventY = b.y,
            a.event = b.event,
            b = d.transforms.rotate,
            e = a.eventX,
            h = a.eventY,
            0 !== b ? (a._eventX = e * O(-b) - h * U(-b),
            a._eventY = h * O(-b) + e * U(-b)) : (a._eventX = e,
            a._eventY = h),
            a._eventX /= c.scaleX,
            a._eventY /= c.scaleY,
            f && d.intersecting.push(a),
            a.intersects = !!f
    }
    function za(d, c, a) {
        c._toRad = c.inDegrees ? F / 180 : 1;
        d.translate(c.x, c.y);
        d.rotate(c.rotate * c._toRad);
        d.translate(-c.x, -c.y);
        a && (a.rotate += c.rotate * c._toRad)
    }
    function Aa(d, c, a) {
        1 !== c.scale && (c.scaleX = c.scaleY = c.scale);
        d.translate(c.x, c.y);
        d.scale(c.scaleX, c.scaleY);
        d.translate(-c.x, -c.y);
        a && (a.scaleX *= c.scaleX,
        a.scaleY *= c.scaleY)
    }
    function Ba(d, c, a) {
        c.translate && (c.translateX = c.translateY = c.translate);
        d.translate(c.translateX, c.translateY);
        a && (a.translateX += c.translateX,
        a.translateY += c.translateY)
    }
    function Ja(d) {
        for (; 0 > d; )
            d += 2 * F;
        return d
    }
    function Ka(d, c, a, b) {
        var f, e, h, g, n, t, y;
        a === b ? y = t = 0 : (t = a.x,
        y = a.y);
        b.inDegrees || 360 !== b.end || (b.end = 2 * F);
        b.start *= a._toRad;
        b.end *= a._toRad;
        b.start -= F / 2;
        b.end -= F / 2;
        n = F / 180;
        b.ccw && (n *= -1);
        f = b.x + b.radius * O(b.start + n);
        e = b.y + b.radius * U(b.start + n);
        h = b.x + b.radius * O(b.start);
        g = b.y + b.radius * U(b.start);
        ga(d, c, a, b, f, e, h, g);
        c.arc(b.x + t, b.y + y, b.radius, b.start, b.end, b.ccw);
        f = b.x + b.radius * O(b.end + n);
        n = b.y + b.radius * U(b.end + n);
        e = b.x + b.radius * O(b.end);
        h = b.y + b.radius * U(b.end);
        ha(d, c, a, b, e, h, f, n)
    }
    function La(d, c, a, b, f, e, h, g) {
        var n, t;
        b.arrowRadius && !a.closed && (t = $a(g - e, h - f),
        t -= F,
        d = a.strokeWidth * O(t),
        n = a.strokeWidth * U(t),
        a = h + b.arrowRadius * O(t + b.arrowAngle / 2),
        f = g + b.arrowRadius * U(t + b.arrowAngle / 2),
        e = h + b.arrowRadius * O(t - b.arrowAngle / 2),
        b = g + b.arrowRadius * U(t - b.arrowAngle / 2),
        c.moveTo(a - d, f - n),
        c.lineTo(h - d, g - n),
        c.lineTo(e - d, b - n),
        c.moveTo(h - d, g - n),
        c.lineTo(h + d, g + n),
        c.moveTo(h, g))
    }
    function ga(d, c, a, b, f, e, h, g) {
        b._arrowAngleConverted || (b.arrowAngle *= a._toRad,
        b._arrowAngleConverted = !0);
        b.startArrow && La(d, c, a, b, f, e, h, g)
    }
    function ha(d, c, a, b, f, e, h, g) {
        b._arrowAngleConverted || (b.arrowAngle *= a._toRad,
        b._arrowAngleConverted = !0);
        b.endArrow && La(d, c, a, b, f, e, h, g)
    }
    function Ma(d, c, a, b) {
        var f, e, h;
        f = 2;
        ga(d, c, a, b, b.x2 + a.x, b.y2 + a.y, b.x1 + a.x, b.y1 + a.y);
        for (void 0 !== b.x1 && void 0 !== b.y1 && c.moveTo(b.x1 + a.x, b.y1 + a.y); ; )
            if (e = b["x" + f],
            h = b["y" + f],
            void 0 !== e && void 0 !== h)
                c.lineTo(e + a.x, h + a.y),
                f += 1;
            else
                break;
        --f;
        ha(d, c, a, b, b["x" + (f - 1)] + a.x, b["y" + (f - 1)] + a.y, b["x" + f] + a.x, b["y" + f] + a.y)
    }
    function Na(d, c, a, b) {
        var f, e, h, g, n;
        f = 2;
        ga(d, c, a, b, b.cx1 + a.x, b.cy1 + a.y, b.x1 + a.x, b.y1 + a.y);
        for (void 0 !== b.x1 && void 0 !== b.y1 && c.moveTo(b.x1 + a.x, b.y1 + a.y); ; )
            if (e = b["x" + f],
            h = b["y" + f],
            g = b["cx" + (f - 1)],
            n = b["cy" + (f - 1)],
            void 0 !== e && void 0 !== h && void 0 !== g && void 0 !== n)
                c.quadraticCurveTo(g + a.x, n + a.y, e + a.x, h + a.y),
                f += 1;
            else
                break;
        --f;
        ha(d, c, a, b, b["cx" + (f - 1)] + a.x, b["cy" + (f - 1)] + a.y, b["x" + f] + a.x, b["y" + f] + a.y)
    }
    function Oa(d, c, a, b) {
        var f, e, h, g, n, t, y, E;
        f = 2;
        e = 1;
        ga(d, c, a, b, b.cx1 + a.x, b.cy1 + a.y, b.x1 + a.x, b.y1 + a.y);
        for (void 0 !== b.x1 && void 0 !== b.y1 && c.moveTo(b.x1 + a.x, b.y1 + a.y); ; )
            if (h = b["x" + f],
            g = b["y" + f],
            n = b["cx" + e],
            t = b["cy" + e],
            y = b["cx" + (e + 1)],
            E = b["cy" + (e + 1)],
            void 0 !== h && void 0 !== g && void 0 !== n && void 0 !== t && void 0 !== y && void 0 !== E)
                c.bezierCurveTo(n + a.x, t + a.y, y + a.x, E + a.y, h + a.x, g + a.y),
                f += 1,
                e += 2;
            else
                break;
        --f;
        e -= 2;
        ha(d, c, a, b, b["cx" + (e + 1)] + a.x, b["cy" + (e + 1)] + a.y, b["x" + f] + a.x, b["y" + f] + a.y)
    }
    function Pa(d, c, a) {
        c *= d._toRad;
        c -= F / 2;
        return a * O(c)
    }
    function Qa(d, c, a) {
        c *= d._toRad;
        c -= F / 2;
        return a * U(c)
    }
    function Ra(d, c, a, b) {
        var f, e, h, g, n, t, y;
        a === b ? n = g = 0 : (g = a.x,
        n = a.y);
        f = 1;
        e = g = t = b.x + g;
        h = n = y = b.y + n;
        ga(d, c, a, b, e + Pa(a, b.a1, b.l1), h + Qa(a, b.a1, b.l1), e, h);
        for (void 0 !== b.x && void 0 !== b.y && c.moveTo(e, h); ; )
            if (e = b["a" + f],
            h = b["l" + f],
            void 0 !== e && void 0 !== h)
                g = t,
                n = y,
                t += Pa(a, e, h),
                y += Qa(a, e, h),
                c.lineTo(t, y),
                f += 1;
            else
                break;
        ha(d, c, a, b, g, n, t, y)
    }
    function sa(d, c, a) {
        isNaN(wa(a.fontSize)) || (a.fontSize += "px");
        c.font = a.fontStyle + " " + a.fontSize + " " + a.fontFamily
    }
    function ta(d, c, a, b) {
        var f, e;
        f = ca.propCache;
        if (f.text === a.text && f.fontStyle === a.fontStyle && f.fontSize === a.fontSize && f.fontFamily === a.fontFamily && f.maxWidth === a.maxWidth && f.lineHeight === a.lineHeight)
            a.width = f.width,
            a.height = f.height;
        else {
            a.width = c.measureText(b[0]).width;
            for (e = 1; e < b.length; e += 1)
                f = c.measureText(b[e]).width,
                f > a.width && (a.width = f);
            c = d.style.fontSize;
            d.style.fontSize = a.fontSize;
            a.height = ba(g.css(d, "fontSize")) * b.length * a.lineHeight;
            d.style.fontSize = c
        }
    }
    function Sa(d, c) {
        var a = c.maxWidth, b = c.text.split("\n"), f = [], e, h, g, n, t;
        for (g = 0; g < b.length; g += 1) {
            n = b[g];
            t = n.split(" ");
            e = [];
            h = "";
            if (1 === t.length || d.measureText(n).width < a)
                e = [n];
            else {
                for (n = 0; n < t.length; n += 1)
                    d.measureText(h + t[n]).width > a && ("" !== h && e.push(h),
                    h = ""),
                    h += t[n],
                    n !== t.length - 1 && (h += " ");
                e.push(h)
            }
            f = f.concat(e.join("\n").replace(/( (\n))|( $)/gi, "$2").split("\n"))
        }
        return f
    }
    var Ia = L.document, Ta = L.Image, ab = L.getComputedStyle, ea = L.Math, wa = L.Number, ba = L.parseFloat, ma, Z = g.extend, ia = g.inArray, aa = function(d) {
        return Object.prototype.toString.call(d).slice(8, -1).toLowerCase()
    }, da = g.isFunction, Ga = g.isPlainObject, F = ea.PI, Xa = ea.round, bb = ea.abs, U = ea.sin, O = ea.cos, $a = ea.atan2, ua = L.Array.prototype.slice, cb = g.event.fix, X = {}, ca = {
        dataCache: {},
        propCache: {},
        imageCache: {}
    }, oa = {
        rotate: 0,
        scaleX: 1,
        scaleY: 1,
        translateX: 0,
        translateY: 0,
        masks: []
    }, V = {}, Ua = "mousedown mousemove mouseup mouseover mouseout touchstart touchmove touchend".split(" "), Y = {
        events: {},
        eventHooks: {},
        future: {}
    };
    na.baseDefaults = {
        align: "center",
        arrowAngle: 90,
        arrowRadius: 0,
        autosave: !0,
        baseline: "middle",
        bringToFront: !1,
        ccw: !1,
        closed: !1,
        compositing: "source-over",
        concavity: 0,
        cornerRadius: 0,
        count: 1,
        cropFromCenter: !0,
        crossOrigin: null,
        cursors: null,
        disableEvents: !1,
        draggable: !1,
        dragGroups: null,
        groups: null,
        data: null,
        dx: null,
        dy: null,
        end: 360,
        eventX: null,
        eventY: null,
        fillStyle: "transparent",
        fontStyle: "normal",
        fontSize: "12pt",
        fontFamily: "sans-serif",
        fromCenter: !0,
        height: null,
        imageSmoothing: !0,
        inDegrees: !0,
        intangible: !1,
        index: null,
        letterSpacing: null,
        lineHeight: 1,
        layer: !1,
        mask: !1,
        maxWidth: null,
        miterLimit: 10,
        name: null,
        opacity: 1,
        r1: null,
        r2: null,
        radius: 0,
        repeat: "repeat",
        respectAlign: !1,
        restrictDragToAxis: null,
        rotate: 0,
        rounded: !1,
        scale: 1,
        scaleX: 1,
        scaleY: 1,
        shadowBlur: 0,
        shadowColor: "transparent",
        shadowStroke: !1,
        shadowX: 0,
        shadowY: 0,
        sHeight: null,
        sides: 0,
        source: "",
        spread: 0,
        start: 0,
        strokeCap: "butt",
        strokeDash: null,
        strokeDashOffset: 0,
        strokeJoin: "miter",
        strokeStyle: "transparent",
        strokeWidth: 1,
        sWidth: null,
        sx: null,
        sy: null,
        text: "",
        translate: 0,
        translateX: 0,
        translateY: 0,
        type: null,
        visible: !0,
        width: null,
        x: 0,
        y: 0
    };
    ma = new na;
    J.prototype = ma;
    Y.extend = function(d) {
        d.name && (d.props && Z(ma, d.props),
        g.fn[d.name] = function a(b) {
            var f, e, h, g;
            for (e = 0; e < this.length; e += 1)
                if (f = this[e],
                h = K(f))
                    g = new J(b),
                    N(f, g, b, a),
                    S(f, h, g),
                    d.fn.call(f, h, g);
            return this
        }
        ,
        d.type && (X.drawings[d.type] = d.name));
        return g.fn[d.name]
    }
    ;
    g.fn.getEventHooks = function() {
        var d;
        d = {};
        0 !== this.length && (d = this[0],
        d = H(d),
        d = d.eventHooks);
        return d
    }
    ;
    g.fn.setEventHooks = function(d) {
        var c, a;
        for (c = 0; c < this.length; c += 1)
            g(this[c]),
            a = H(this[c]),
            Z(a.eventHooks, d);
        return this
    }
    ;
    g.fn.getLayers = function(d) {
        var c, a, b, f, e = [];
        if (0 !== this.length)
            if (c = this[0],
            a = H(c),
            a = a.layers,
            da(d))
                for (f = 0; f < a.length; f += 1)
                    b = a[f],
                    d.call(c, b) && e.push(b);
            else
                e = a;
        return e
    }
    ;
    g.fn.getLayer = function(d) {
        var c, a, b, f;
        if (0 !== this.length)
            if (c = this[0],
            a = H(c),
            c = a.layers,
            f = aa(d),
            d && d.layer)
                b = d;
            else if ("number" === f)
                0 > d && (d = c.length + d),
                b = c[d];
            else if ("regexp" === f)
                for (a = 0; a < c.length; a += 1) {
                    if (ja(c[a].name) && c[a].name.match(d)) {
                        b = c[a];
                        break
                    }
                }
            else
                b = a.layer.names[d];
        return b
    }
    ;
    g.fn.getLayerGroup = function(d) {
        var c, a, b, f = aa(d);
        if (0 !== this.length)
            if (c = this[0],
            "array" === f)
                b = d;
            else if ("regexp" === f)
                for (a in c = H(c),
                c = c.layer.groups,
                c) {
                    if (a.match(d)) {
                        b = c[a];
                        break
                    }
                }
            else
                c = H(c),
                b = c.layer.groups[d];
        return b
    }
    ;
    g.fn.getLayerIndex = function(d) {
        var c = this.getLayers();
        d = this.getLayer(d);
        return ia(d, c)
    }
    ;
    g.fn.setLayer = function(d, c) {
        var a, b, f, e, h, M, n;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = H(this[b]),
            e = g(this[b]).getLayer(d)) {
                pa(a, f, e, c);
                qa(a, f, e, c);
                ka(c);
                for (h in c)
                    c.hasOwnProperty(h) && (M = c[h],
                    n = aa(M),
                    "object" === n && Ga(M) ? (e[h] = Z({}, M),
                    ka(e[h])) : "array" === n ? e[h] = M.slice(0) : "string" === n ? 0 === M.indexOf("+=") ? e[h] += ba(M.substr(2)) : 0 === M.indexOf("-=") ? e[h] -= ba(M.substr(2)) : !isNaN(M) && va(M) ? e[h] = ba(M) : e[h] = M : e[h] = M);
                Ca(a, f, e);
                Ea(a, f, e);
                !1 === g.isEmptyObject(c) && P(a, f, e, "change", c)
            }
        return this
    }
    ;
    g.fn.setLayers = function(d, c) {
        var a, b, f, e;
        for (b = 0; b < this.length; b += 1)
            for (a = g(this[b]),
            f = a.getLayers(c),
            e = 0; e < f.length; e += 1)
                a.setLayer(f[e], d);
        return this
    }
    ;
    g.fn.setLayerGroup = function(d, c) {
        var a, b, f, e;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = a.getLayerGroup(d))
                for (e = 0; e < f.length; e += 1)
                    a.setLayer(f[e], c);
        return this
    }
    ;
    g.fn.moveLayer = function(d, c) {
        var a, b, f, e, h;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = H(this[b]),
            e = f.layers,
            h = a.getLayer(d))
                h.index = ia(h, e),
                e.splice(h.index, 1),
                e.splice(c, 0, h),
                0 > c && (c = e.length + c),
                h.index = c,
                P(a, f, h, "move");
        return this
    }
    ;
    g.fn.removeLayer = function(d) {
        var c, a, b, f, e;
        for (a = 0; a < this.length; a += 1)
            if (c = g(this[a]),
            b = H(this[a]),
            f = c.getLayers(),
            e = c.getLayer(d))
                e.index = ia(e, f),
                f.splice(e.index, 1),
                delete e._layer,
                pa(c, b, e, {
                    name: null
                }),
                qa(c, b, e, {
                    groups: null
                }),
                P(c, b, e, "remove");
        return this
    }
    ;
    g.fn.removeLayers = function(d) {
        var c, a, b, f, e, h;
        for (a = 0; a < this.length; a += 1) {
            c = g(this[a]);
            b = H(this[a]);
            f = c.getLayers(d);
            for (h = 0; h < f.length; h += 1)
                e = f[h],
                c.removeLayer(e),
                --h;
            b.layer.names = {};
            b.layer.groups = {}
        }
        return this
    }
    ;
    g.fn.removeLayerGroup = function(d) {
        var c, a, b, f;
        if (void 0 !== d)
            for (a = 0; a < this.length; a += 1)
                if (c = g(this[a]),
                H(this[a]),
                c.getLayers(),
                b = c.getLayerGroup(d))
                    for (b = b.slice(0),
                    f = 0; f < b.length; f += 1)
                        c.removeLayer(b[f]);
        return this
    }
    ;
    g.fn.addLayerToGroup = function(d, c) {
        var a, b, f, e = [c];
        for (b = 0; b < this.length; b += 1)
            a = g(this[b]),
            f = a.getLayer(d),
            f.groups && (e = f.groups.slice(0),
            -1 === ia(c, f.groups) && e.push(c)),
            a.setLayer(f, {
                groups: e
            });
        return this
    }
    ;
    g.fn.removeLayerFromGroup = function(d, c) {
        var a, b, f, e = [], h;
        for (b = 0; b < this.length; b += 1)
            a = g(this[b]),
            f = a.getLayer(d),
            f.groups && (h = ia(c, f.groups),
            -1 !== h && (e = f.groups.slice(0),
            e.splice(h, 1),
            a.setLayer(f, {
                groups: e
            })));
        return this
    }
    ;
    V.cursors = ["grab", "grabbing", "zoom-in", "zoom-out"];
    V.prefix = function() {
        var d = ab(Ia.documentElement, "");
        return "-" + (ua.call(d).join("").match(/-(moz|webkit|ms)-/) || "" === d.OLink && ["", "o"])[1] + "-"
    }();
    g.fn.triggerLayerEvent = function(d, c) {
        var a, b, f;
        for (b = 0; b < this.length; b += 1)
            a = g(this[b]),
            f = H(this[b]),
            (d = a.getLayer(d)) && P(a, f, d, c);
        return this
    }
    ;
    g.fn.drawLayer = function(d) {
        var c, a, b;
        for (c = 0; c < this.length; c += 1)
            b = g(this[c]),
            (a = K(this[c])) && (a = b.getLayer(d)) && a.visible && a._method && (a._next = null,
            a._method.call(b, a));
        return this
    }
    ;
    g.fn.drawLayers = function(d) {
        var c, a, b = d || {}, f, e, h, M, n, t, y, E;
        (M = b.index) || (M = 0);
        for (c = 0; c < this.length; c += 1)
            if (d = g(this[c]),
            a = K(this[c])) {
                n = H(this[c]);
                !1 !== b.clear && d.clearCanvas();
                a = n.layers;
                for (h = M; h < a.length; h += 1)
                    if (f = a[h],
                    f.index = h,
                    b.resetFire && (f._fired = !1),
                    t = d,
                    y = f,
                    e = h + 1,
                    y && y.visible && y._method && (y._next = e ? e : null,
                    y._method.call(t, y)),
                    f._masks = n.transforms.masks.slice(0),
                    f._method === g.fn.drawImage && f.visible) {
                        E = !0;
                        break
                    }
                if (E)
                    break;
                f = n;
                var w = e = y = t = void 0;
                t = null;
                for (y = f.intersecting.length - 1; 0 <= y; --y)
                    if (t = f.intersecting[y],
                    t._masks) {
                        for (w = t._masks.length - 1; 0 <= w; --w)
                            if (e = t._masks[w],
                            !e.intersects) {
                                t.intersects = !1;
                                break
                            }
                        if (t.intersects && !t.intangible)
                            break
                    }
                t && t.intangible && (t = null);
                f = t;
                t = n.event;
                y = t.type;
                if (n.drag.layer) {
                    e = d;
                    var w = n
                      , C = y
                      , u = void 0
                      , m = void 0
                      , k = void 0
                      , x = k = void 0
                      , B = void 0
                      , k = u = u = k = void 0
                      , k = w.drag
                      , x = (m = k.layer) && m.dragGroups || []
                      , u = w.layers;
                    if ("mousemove" === C || "touchmove" === C) {
                        if (k.dragging || (k.dragging = !0,
                        m.dragging = !0,
                        m.bringToFront && (u.splice(m.index, 1),
                        m.index = u.push(m)),
                        m._startX = m.x,
                        m._startY = m.y,
                        m._endX = m._eventX,
                        m._endY = m._eventY,
                        P(e, w, m, "dragstart")),
                        k.dragging)
                            for (u = m._eventX - (m._endX - m._startX),
                            k = m._eventY - (m._endY - m._startY),
                            m.dx = u - m.x,
                            m.dy = k - m.y,
                            "y" !== m.restrictDragToAxis && (m.x = u),
                            "x" !== m.restrictDragToAxis && (m.y = k),
                            P(e, w, m, "drag"),
                            u = 0; u < x.length; u += 1)
                                if (k = x[u],
                                B = w.layer.groups[k],
                                m.groups && B)
                                    for (k = 0; k < B.length; k += 1)
                                        B[k] !== m && ("y" !== m.restrictDragToAxis && "y" !== B[k].restrictDragToAxis && (B[k].x += m.dx),
                                        "x" !== m.restrictDragToAxis && "x" !== B[k].restrictDragToAxis && (B[k].y += m.dy))
                    } else if ("mouseup" === C || "touchend" === C)
                        k.dragging && (m.dragging = !1,
                        k.dragging = !1,
                        P(e, w, m, "dragstop")),
                        w.drag = {}
                }
                e = n.lastIntersected;
                null === e || f === e || !e._hovered || e._fired || n.drag.dragging || (n.lastIntersected = null,
                e._fired = !0,
                e._hovered = !1,
                P(d, n, e, "mouseout"),
                d.css({
                    cursor: n.cursor
                }));
                f && (f[y] || X.mouseEvents[y] && (y = X.mouseEvents[y]),
                f._event && f.intersects && (n.lastIntersected = f,
                !(f.mouseover || f.mouseout || f.cursors) || n.drag.dragging || f._hovered || f._fired || (f._fired = !0,
                f._hovered = !0,
                P(d, n, f, "mouseover")),
                f._fired || (f._fired = !0,
                t.type = null,
                P(d, n, f, y)),
                !f.draggable || f.disableEvents || "mousedown" !== y && "touchstart" !== y || (n.drag.layer = f)));
                null !== f || n.drag.dragging || d.css({
                    cursor: n.cursor
                });
                h === a.length && (n.intersecting.length = 0,
                n.transforms = la(oa),
                n.savedTransforms.length = 0)
            }
        return this
    }
    ;
    g.fn.addLayer = function(d) {
        var c, a;
        for (c = 0; c < this.length; c += 1)
            if (a = K(this[c]))
                a = new J(d),
                a.layer = !0,
                N(this[c], a, d);
        return this
    }
    ;
    V.props = ["width", "height", "opacity", "lineHeight"];
    V.propsObj = {};
    g.fn.animateLayer = function() {
        function d(a, b, c) {
            return function() {
                var d, f;
                for (f = 0; f < V.props.length; f += 1)
                    d = V.props[f],
                    c[d] = c["_" + d];
                for (var h in c)
                    c.hasOwnProperty(h) && -1 !== h.indexOf(".") && delete c[h];
                b.animating && b.animated !== c || a.drawLayers();
                c._animating = !1;
                b.animating = !1;
                b.animated = null;
                e[4] && e[4].call(a[0], c);
                P(a, b, c, "animateend")
            }
        }
        function c(a, b, c) {
            return function(d, f) {
                var h, g, m = !1;
                "_" === f.prop[0] && (m = !0,
                f.prop = f.prop.replace("_", ""),
                c[f.prop] = c["_" + f.prop]);
                -1 !== f.prop.indexOf(".") && (h = f.prop.split("."),
                g = h[0],
                h = h[1],
                c[g] && (c[g][h] = f.now));
                c._pos !== f.pos && (c._pos = f.pos,
                c._animating || b.animating || (c._animating = !0,
                b.animating = !0,
                b.animated = c),
                b.animating && b.animated !== c || a.drawLayers());
                e[5] && e[5].call(a[0], d, f, c);
                P(a, b, c, "animate", f);
                m && (f.prop = "_" + f.prop)
            }
        }
        var a, b, f, e = ua.call(arguments, 0), h, M;
        "object" === aa(e[2]) ? (e.splice(2, 0, e[2].duration || null),
        e.splice(3, 0, e[3].easing || null),
        e.splice(4, 0, e[4].complete || null),
        e.splice(5, 0, e[5].step || null)) : (void 0 === e[2] ? (e.splice(2, 0, null),
        e.splice(3, 0, null),
        e.splice(4, 0, null)) : da(e[2]) && (e.splice(2, 0, null),
        e.splice(3, 0, null)),
        void 0 === e[3] ? (e[3] = null,
        e.splice(4, 0, null)) : da(e[3]) && e.splice(3, 0, null));
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = K(this[b]))
                f = H(this[b]),
                (h = a.getLayer(e[0])) && h._method !== g.fn.draw && (M = Z({}, e[1]),
                M = Va(this[b], h, M),
                Fa(M, !0),
                Fa(h),
                h.style = V.propsObj,
                g(h).animate(M, {
                    duration: e[2],
                    easing: g.easing[e[3]] ? e[3] : null,
                    complete: d(a, f, h),
                    step: c(a, f, h)
                }),
                P(a, f, h, "animatestart"));
        return this
    }
    ;
    g.fn.animateLayerGroup = function(d) {
        var c, a, b = ua.call(arguments, 0), f, e;
        for (a = 0; a < this.length; a += 1)
            if (c = g(this[a]),
            f = c.getLayerGroup(d))
                for (e = 0; e < f.length; e += 1)
                    b[0] = f[e],
                    c.animateLayer.apply(c, b);
        return this
    }
    ;
    g.fn.delayLayer = function(d, c) {
        var a, b, f, e;
        c = c || 0;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = H(this[b]),
            e = a.getLayer(d))
                g(e).delay(c),
                P(a, f, e, "delay");
        return this
    }
    ;
    g.fn.delayLayerGroup = function(d, c) {
        var a, b, f, e, h;
        c = c || 0;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = a.getLayerGroup(d))
                for (h = 0; h < f.length; h += 1)
                    e = f[h],
                    a.delayLayer(e, c);
        return this
    }
    ;
    g.fn.stopLayer = function(d, c) {
        var a, b, f, e;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = H(this[b]),
            e = a.getLayer(d))
                g(e).stop(c),
                P(a, f, e, "stop");
        return this
    }
    ;
    g.fn.stopLayerGroup = function(d, c) {
        var a, b, f, e, h;
        for (b = 0; b < this.length; b += 1)
            if (a = g(this[b]),
            f = a.getLayerGroup(d))
                for (h = 0; h < f.length; h += 1)
                    e = f[h],
                    a.stopLayer(e, c);
        return this
    }
    ;
    (function(d) {
        var c;
        for (c = 0; c < d.length; c += 1)
            g.fx.step[d[c]] = Wa
    }
    )("color backgroundColor borderColor borderTopColor borderRightColor borderBottomColor borderLeftColor fillStyle outlineColor strokeStyle shadowColor".split(" "));
    X.touchEvents = {
        mousedown: "touchstart",
        mouseup: "touchend",
        mousemove: "touchmove"
    };
    X.mouseEvents = {
        touchstart: "mousedown",
        touchend: "mouseup",
        touchmove: "mousemove"
    };
    (function(d) {
        var c;
        for (c = 0; c < d.length; c += 1)
            Za(d[c])
    }
    )("click dblclick mousedown mouseup mousemove mouseover mouseout touchstart touchmove touchend contextmenu".split(" "));
    g.event.fix = function(d) {
        var c, a;
        d = cb.call(g.event, d);
        if (c = d.originalEvent)
            if (a = c.changedTouches,
            void 0 !== d.pageX && void 0 === d.offsetX) {
                if (c = g(d.currentTarget).offset())
                    d.offsetX = d.pageX - c.left,
                    d.offsetY = d.pageY - c.top
            } else
                a && (c = g(d.currentTarget).offset()) && (d.offsetX = a[0].pageX - c.left,
                d.offsetY = a[0].pageY - c.top);
        return d
    }
    ;
    X.drawings = {
        arc: "drawArc",
        bezier: "drawBezier",
        ellipse: "drawEllipse",
        "function": "draw",
        image: "drawImage",
        line: "drawLine",
        path: "drawPath",
        polygon: "drawPolygon",
        slice: "drawSlice",
        quadratic: "drawQuadratic",
        rectangle: "drawRect",
        text: "drawText",
        vector: "drawVector",
        save: "saveCanvas",
        restore: "restoreCanvas",
        rotate: "rotateCanvas",
        scale: "scaleCanvas",
        translate: "translateCanvas"
    };
    g.fn.draw = function c(a) {
        var b, f, e = new J(a);
        if (X.drawings[e.type] && "function" !== e.type)
            this[X.drawings[e.type]](a);
        else
            for (b = 0; b < this.length; b += 1)
                if (g(this[b]),
                f = K(this[b]))
                    e = new J(a),
                    N(this[b], e, a, c),
                    e.visible && e.fn && e.fn.call(this[b], f, e);
        return this
    }
    ;
    g.fn.clearCanvas = function a(b) {
        var f, e, h = new J(b);
        for (f = 0; f < this.length; f += 1)
            if (e = K(this[f]))
                null === h.width || null === h.height ? (e.save(),
                e.setTransform(1, 0, 0, 1, 0, 0),
                e.clearRect(0, 0, this[f].width, this[f].height),
                e.restore()) : (N(this[f], h, b, a),
                Q(this[f], e, h, h.width, h.height),
                e.clearRect(h.x - h.width / 2, h.y - h.height / 2, h.width, h.height),
                h._transformed && e.restore());
        return this
    }
    ;
    g.fn.saveCanvas = function b(f) {
        var e, h, g, n, t;
        for (e = 0; e < this.length; e += 1)
            if (h = K(this[e]))
                for (n = H(this[e]),
                g = new J(f),
                N(this[e], g, f, b),
                t = 0; t < g.count; t += 1)
                    fa(h, n);
        return this
    }
    ;
    g.fn.restoreCanvas = function f(e) {
        var h, g, n, t, y;
        for (h = 0; h < this.length; h += 1)
            if (g = K(this[h]))
                for (t = H(this[h]),
                n = new J(e),
                N(this[h], n, e, f),
                y = 0; y < n.count; y += 1) {
                    var E = g
                      , w = t;
                    0 === w.savedTransforms.length ? w.transforms = la(oa) : (E.restore(),
                    w.transforms = w.savedTransforms.pop())
                }
        return this
    }
    ;
    g.fn.rotateCanvas = function e(h) {
        var g, n, t, y;
        for (g = 0; g < this.length; g += 1)
            if (n = K(this[g]))
                y = H(this[g]),
                t = new J(h),
                N(this[g], t, h, e),
                t.autosave && fa(n, y),
                za(n, t, y.transforms);
        return this
    }
    ;
    g.fn.scaleCanvas = function h(g) {
        var n, t, y, E;
        for (n = 0; n < this.length; n += 1)
            if (t = K(this[n]))
                E = H(this[n]),
                y = new J(g),
                N(this[n], y, g, h),
                y.autosave && fa(t, E),
                Aa(t, y, E.transforms);
        return this
    }
    ;
    g.fn.translateCanvas = function M(g) {
        var t, y, E, w;
        for (t = 0; t < this.length; t += 1)
            if (y = K(this[t]))
                w = H(this[t]),
                E = new J(g),
                N(this[t], E, g, M),
                E.autosave && fa(y, w),
                Ba(y, E, w.transforms);
        return this
    }
    ;
    g.fn.drawRect = function n(g) {
        var y, E, w, C, u, m, k, x, B;
        for (y = 0; y < this.length; y += 1)
            if (E = K(this[y]))
                w = new J(g),
                N(this[y], w, g, n),
                w.visible && (Q(this[y], E, w, w.width, w.height),
                S(this[y], E, w),
                E.beginPath(),
                w.width && w.height && (C = w.x - w.width / 2,
                u = w.y - w.height / 2,
                (x = bb(w.cornerRadius)) ? (m = w.x + w.width / 2,
                k = w.y + w.height / 2,
                0 > w.width && (B = C,
                C = m,
                m = B),
                0 > w.height && (B = u,
                u = k,
                k = B),
                0 > m - C - 2 * x && (x = (m - C) / 2),
                0 > k - u - 2 * x && (x = (k - u) / 2),
                E.moveTo(C + x, u),
                E.lineTo(m - x, u),
                E.arc(m - x, u + x, x, 3 * F / 2, 2 * F, !1),
                E.lineTo(m, k - x),
                E.arc(m - x, k - x, x, 0, F / 2, !1),
                E.lineTo(C + x, k),
                E.arc(C + x, k - x, x, F / 2, F, !1),
                E.lineTo(C, u + x),
                E.arc(C + x, u + x, x, F, 3 * F / 2, !1),
                w.closed = !0) : E.rect(C, u, w.width, w.height)),
                T(this[y], E, w),
                W(this[y], E, w));
        return this
    }
    ;
    g.fn.drawArc = function t(g) {
        var E, w, C;
        for (E = 0; E < this.length; E += 1)
            if (w = K(this[E]))
                C = new J(g),
                N(this[E], C, g, t),
                C.visible && (Q(this[E], w, C, 2 * C.radius),
                S(this[E], w, C),
                w.beginPath(),
                Ka(this[E], w, C, C),
                T(this[E], w, C),
                W(this[E], w, C));
        return this
    }
    ;
    g.fn.drawEllipse = function y(g) {
        var w, C, u, m, k;
        for (w = 0; w < this.length; w += 1)
            if (C = K(this[w]))
                u = new J(g),
                N(this[w], u, g, y),
                u.visible && (Q(this[w], C, u, u.width, u.height),
                S(this[w], C, u),
                m = 4 / 3 * u.width,
                k = u.height,
                C.beginPath(),
                C.moveTo(u.x, u.y - k / 2),
                C.bezierCurveTo(u.x - m / 2, u.y - k / 2, u.x - m / 2, u.y + k / 2, u.x, u.y + k / 2),
                C.bezierCurveTo(u.x + m / 2, u.y + k / 2, u.x + m / 2, u.y - k / 2, u.x, u.y - k / 2),
                T(this[w], C, u),
                u.closed = !0,
                W(this[w], C, u));
        return this
    }
    ;
    g.fn.drawPolygon = function E(g) {
        var C, u, m, k, x, B, v, z, p, l;
        for (C = 0; C < this.length; C += 1)
            if (u = K(this[C]))
                if (m = new J(g),
                N(this[C], m, g, E),
                m.visible) {
                    Q(this[C], u, m, 2 * m.radius);
                    S(this[C], u, m);
                    x = 2 * F / m.sides;
                    B = x / 2;
                    k = B + F / 2;
                    v = m.radius * O(B);
                    u.beginPath();
                    for (l = 0; l < m.sides; l += 1)
                        z = m.x + m.radius * O(k),
                        p = m.y + m.radius * U(k),
                        u.lineTo(z, p),
                        m.concavity && (z = m.x + (v + -v * m.concavity) * O(k + B),
                        p = m.y + (v + -v * m.concavity) * U(k + B),
                        u.lineTo(z, p)),
                        k += x;
                    T(this[C], u, m);
                    m.closed = !0;
                    W(this[C], u, m)
                }
        return this
    }
    ;
    g.fn.drawSlice = function w(C) {
        var u, m, k, x, B;
        for (u = 0; u < this.length; u += 1)
            if (g(this[u]),
            m = K(this[u]))
                k = new J(C),
                N(this[u], k, C, w),
                k.visible && (Q(this[u], m, k, 2 * k.radius),
                S(this[u], m, k),
                k.start *= k._toRad,
                k.end *= k._toRad,
                k.start -= F / 2,
                k.end -= F / 2,
                k.start = Ja(k.start),
                k.end = Ja(k.end),
                k.end < k.start && (k.end += 2 * F),
                x = (k.start + k.end) / 2,
                B = k.radius * k.spread * O(x),
                x = k.radius * k.spread * U(x),
                k.x += B,
                k.y += x,
                m.beginPath(),
                m.arc(k.x, k.y, k.radius, k.start, k.end, k.ccw),
                m.lineTo(k.x, k.y),
                T(this[u], m, k),
                k.closed = !0,
                W(this[u], m, k));
        return this
    }
    ;
    g.fn.drawLine = function C(g) {
        var m, k, x;
        for (m = 0; m < this.length; m += 1)
            if (k = K(this[m]))
                x = new J(g),
                N(this[m], x, g, C),
                x.visible && (Q(this[m], k, x),
                S(this[m], k, x),
                k.beginPath(),
                Ma(this[m], k, x, x),
                T(this[m], k, x),
                W(this[m], k, x));
        return this
    }
    ;
    g.fn.drawQuadratic = function u(g) {
        var k, x, B;
        for (k = 0; k < this.length; k += 1)
            if (x = K(this[k]))
                B = new J(g),
                N(this[k], B, g, u),
                B.visible && (Q(this[k], x, B),
                S(this[k], x, B),
                x.beginPath(),
                Na(this[k], x, B, B),
                T(this[k], x, B),
                W(this[k], x, B));
        return this
    }
    ;
    g.fn.drawBezier = function m(g) {
        var x, B, v;
        for (x = 0; x < this.length; x += 1)
            if (B = K(this[x]))
                v = new J(g),
                N(this[x], v, g, m),
                v.visible && (Q(this[x], B, v),
                S(this[x], B, v),
                B.beginPath(),
                Oa(this[x], B, v, v),
                T(this[x], B, v),
                W(this[x], B, v));
        return this
    }
    ;
    g.fn.drawVector = function k(g) {
        var B, v, z;
        for (B = 0; B < this.length; B += 1)
            if (v = K(this[B]))
                z = new J(g),
                N(this[B], z, g, k),
                z.visible && (Q(this[B], v, z),
                S(this[B], v, z),
                v.beginPath(),
                Ra(this[B], v, z, z),
                T(this[B], v, z),
                W(this[B], v, z));
        return this
    }
    ;
    g.fn.drawPath = function x(g) {
        var v, z, p, l, A;
        for (v = 0; v < this.length; v += 1)
            if (z = K(this[v]))
                if (p = new J(g),
                N(this[v], p, g, x),
                p.visible) {
                    Q(this[v], z, p);
                    S(this[v], z, p);
                    z.beginPath();
                    for (l = 1; ; )
                        if (A = p["p" + l],
                        void 0 !== A)
                            A = new J(A),
                            "line" === A.type ? Ma(this[v], z, p, A) : "quadratic" === A.type ? Na(this[v], z, p, A) : "bezier" === A.type ? Oa(this[v], z, p, A) : "vector" === A.type ? Ra(this[v], z, p, A) : "arc" === A.type && Ka(this[v], z, p, A),
                            l += 1;
                        else
                            break;
                    T(this[v], z, p);
                    W(this[v], z, p)
                }
        return this
    }
    ;
    g.fn.drawText = function B(v) {
        var z, p, l, A, D, r, G, R, I, H;
        for (z = 0; z < this.length; z += 1)
            if (g(this[z]),
            p = K(this[z]))
                if (l = new J(v),
                A = N(this[z], l, v, B),
                l.visible) {
                    p.textBaseline = l.baseline;
                    p.textAlign = l.align;
                    sa(this[z], p, l);
                    D = null !== l.maxWidth ? Sa(p, l) : l.text.toString().split("\n");
                    ta(this[z], p, l, D);
                    A && (A.width = l.width,
                    A.height = l.height);
                    Q(this[z], p, l, l.width, l.height);
                    S(this[z], p, l);
                    G = l.x;
                    "left" === l.align ? l.respectAlign ? l.x += l.width / 2 : G -= l.width / 2 : "right" === l.align && (l.respectAlign ? l.x -= l.width / 2 : G += l.width / 2);
                    if (l.radius)
                        for (G = ba(l.fontSize),
                        null === l.letterSpacing && (l.letterSpacing = G / 500),
                        r = 0; r < D.length; r += 1) {
                            p.save();
                            p.translate(l.x, l.y);
                            A = D[r];
                            R = A.length;
                            p.rotate(-(F * l.letterSpacing * (R - 1)) / 2);
                            for (H = 0; H < R; H += 1)
                                I = A[H],
                                0 !== H && p.rotate(F * l.letterSpacing),
                                p.save(),
                                p.translate(0, -l.radius),
                                p.fillText(I, 0, 0),
                                p.restore();
                            l.radius -= G;
                            l.letterSpacing += G / (1E3 * F);
                            p.restore()
                        }
                    else
                        for (r = 0; r < D.length; r += 1)
                            A = D[r],
                            R = l.y + r * l.height / D.length - (D.length - 1) * l.height / D.length / 2,
                            p.shadowColor = l.shadowColor,
                            p.fillText(A, G, R),
                            "transparent" !== l.fillStyle && (p.shadowColor = "transparent"),
                            0 !== l.strokeWidth && p.strokeText(A, G, R);
                    R = 0;
                    "top" === l.baseline ? R += l.height / 2 : "bottom" === l.baseline && (R -= l.height / 2);
                    l._event && (p.beginPath(),
                    p.rect(l.x - l.width / 2, l.y - l.height / 2 + R, l.width, l.height),
                    T(this[z], p, l),
                    p.closePath());
                    l._transformed && p.restore()
                }
        ca.propCache = l;
        return this
    }
    ;
    g.fn.measureText = function(g) {
        var v, z;
        v = this.getLayer(g);
        if (!v || v && !v._layer)
            v = new J(g);
        if (g = K(this[0]))
            sa(this[0], g, v),
            z = Sa(g, v),
            ta(this[0], g, v, z);
        return v
    }
    ;
    g.fn.drawImage = function v(z) {
        function p(l, v, p, q, r) {
            return function() {
                var z = g(l);
                null === q.width && null === q.sWidth && (q.width = q.sWidth = I.width);
                null === q.height && null === q.sHeight && (q.height = q.sHeight = I.height);
                r && (r.width = q.width,
                r.height = q.height);
                null !== q.sWidth && null !== q.sHeight && null !== q.sx && null !== q.sy ? (null === q.width && (q.width = q.sWidth),
                null === q.height && (q.height = q.sHeight),
                q.cropFromCenter && (q.sx += q.sWidth / 2,
                q.sy += q.sHeight / 2),
                0 > q.sy - q.sHeight / 2 && (q.sy = q.sHeight / 2),
                q.sy + q.sHeight / 2 > I.height && (q.sy = I.height - q.sHeight / 2),
                0 > q.sx - q.sWidth / 2 && (q.sx = q.sWidth / 2),
                q.sx + q.sWidth / 2 > I.width && (q.sx = I.width - q.sWidth / 2),
                Q(l, v, q, q.width, q.height),
                S(l, v, q),
                v.drawImage(I, q.sx - q.sWidth / 2, q.sy - q.sHeight / 2, q.sWidth, q.sHeight, q.x - q.width / 2, q.y - q.height / 2, q.width, q.height)) : (Q(l, v, q, q.width, q.height),
                v.drawImage(I, q.x - q.width / 2, q.y - q.height / 2, q.width, q.height));
                v.beginPath();
                v.rect(q.x - q.width / 2, q.y - q.height / 2, q.width, q.height);
                T(l, v, q);
                v.closePath();
                q._transformed && v.restore();
                ya(v, p, q);
                q.layer ? P(z, p, r, "load") : q.load && q.load.call(z[0], r);
                q.layer && (r._masks = p.transforms.masks.slice(0),
                q._next && z.drawLayers({
                    clear: !1,
                    resetFire: !0,
                    index: q._next
                }))
            }
        }
        var l, A, D, r, G, R, I, F, L, O = ca.imageCache;
        for (A = 0; A < this.length; A += 1)
            if (l = this[A],
            D = K(this[A]))
                r = H(this[A]),
                G = new J(z),
                R = N(this[A], G, z, v),
                G.visible && (L = G.source,
                F = L.getContext,
                L.src || F ? I = L : L && (O[L] && O[L].complete ? I = O[L] : (I = new Ta,
                L.match(/^data:/i) || (I.crossOrigin = G.crossOrigin),
                I.src = L,
                O[L] = I)),
                I && (I.complete || F ? p(l, D, r, G, R)() : (I.onload = p(l, D, r, G, R),
                I.src = I.src)));
        return this
    }
    ;
    g.fn.createPattern = function(v) {
        function z() {
            r = l.createPattern(D, A.repeat);
            A.load && A.load.call(p[0], r)
        }
        var p = this, l, A, D, r, G;
        (l = K(p[0])) ? (A = new J(v),
        G = A.source,
        da(G) ? (D = g("<canvas />")[0],
        D.width = A.width,
        D.height = A.height,
        v = K(D),
        G.call(D, v),
        z()) : (v = G.getContext,
        G.src || v ? D = G : (D = new Ta,
        G.match(/^data:/i) || (D.crossOrigin = A.crossOrigin),
        D.src = G),
        D.complete || v ? z() : (D.onload = z(),
        D.src = D.src))) : r = null;
        return r
    }
    ;
    g.fn.createGradient = function(g) {
        var z, p = [], l, A, D, r, G, H, I;
        g = new J(g);
        if (z = K(this[0])) {
            g.x1 = g.x1 || 0;
            g.y1 = g.y1 || 0;
            g.x2 = g.x2 || 0;
            g.y2 = g.y2 || 0;
            z = null !== g.r1 && null !== g.r2 ? z.createRadialGradient(g.x1, g.y1, g.r1, g.x2, g.y2, g.r2) : z.createLinearGradient(g.x1, g.y1, g.x2, g.y2);
            for (r = 1; void 0 !== g["c" + r]; r += 1)
                void 0 !== g["s" + r] ? p.push(g["s" + r]) : p.push(null);
            l = p.length;
            null === p[0] && (p[0] = 0);
            null === p[l - 1] && (p[l - 1] = 1);
            for (r = 0; r < l; r += 1) {
                if (null !== p[r]) {
                    H = 1;
                    I = 0;
                    A = p[r];
                    for (G = r + 1; G < l; G += 1)
                        if (null !== p[G]) {
                            D = p[G];
                            break
                        } else
                            H += 1;
                    A > D && (p[G] = p[r])
                } else
                    null === p[r] && (I += 1,
                    p[r] = A + (D - A) / H * I);
                z.addColorStop(p[r], g["c" + (r + 1)])
            }
        } else
            z = null;
        return z
    }
    ;
    g.fn.setPixels = function z(g) {
        var l, A, D, r, G, H, I, F, L;
        for (A = 0; A < this.length; A += 1)
            if (l = this[A],
            D = K(l)) {
                r = new J(g);
                N(l, r, g, z);
                Q(this[A], D, r, r.width, r.height);
                if (null === r.width || null === r.height)
                    r.width = l.width,
                    r.height = l.height,
                    r.x = r.width / 2,
                    r.y = r.height / 2;
                if (0 !== r.width && 0 !== r.height) {
                    H = D.getImageData(r.x - r.width / 2, r.y - r.height / 2, r.width, r.height);
                    I = H.data;
                    L = I.length;
                    if (r.each)
                        for (F = 0; F < L; F += 4)
                            G = {
                                r: I[F],
                                g: I[F + 1],
                                b: I[F + 2],
                                a: I[F + 3]
                            },
                            r.each.call(l, G, r),
                            I[F] = G.r,
                            I[F + 1] = G.g,
                            I[F + 2] = G.b,
                            I[F + 3] = G.a;
                    D.putImageData(H, r.x - r.width / 2, r.y - r.height / 2);
                    D.restore()
                }
            }
        return this
    }
    ;
    g.fn.getCanvasImage = function(g, p) {
        var l, A = null;
        0 !== this.length && (l = this[0],
        l.toDataURL && (void 0 === p && (p = 1),
        A = l.toDataURL("image/" + g, p)));
        return A
    }
    ;
    g.fn.detectPixelRatio = function(z) {
        var p, l, A, D, r, G, F;
        for (l = 0; l < this.length; l += 1)
            p = this[l],
            g(this[l]),
            A = K(p),
            F = H(this[l]),
            F.scaled || (D = L.devicePixelRatio || 1,
            r = A.webkitBackingStorePixelRatio || A.mozBackingStorePixelRatio || A.msBackingStorePixelRatio || A.oBackingStorePixelRatio || A.backingStorePixelRatio || 1,
            D /= r,
            1 !== D && (r = p.width,
            G = p.height,
            p.width = r * D,
            p.height = G * D,
            p.style.width = r + "px",
            p.style.height = G + "px",
            A.scale(D, D)),
            F.pixelRatio = D,
            F.scaled = !0,
            z && z.call(p, D));
        return this
    }
    ;
    Y.clearCache = function() {
        for (var g in ca)
            ca.hasOwnProperty(g) && (ca[g] = {})
    }
    ;
    g.support.canvas = void 0 !== g("<canvas />")[0].getContext;
    Z(Y, {
        defaults: ma,
        setGlobalProps: S,
        transformShape: Q,
        detectEvents: T,
        closePath: W,
        setCanvasFont: sa,
        measureText: ta
    });
    g.jCanvas = Y;
    g.jCanvasObject = J
});
//XXX: jSmart Javascript template engine
(function() {
    function F(a, b) {
        for (var c = 1; c < arguments.length; ++c)
            for (var d in arguments[c])
                a[d] = arguments[c][d];
        return a
    }
    function S(a) {
        var b = 0, c;
        for (c in a)
            a.hasOwnProperty(c) && b++;
        return b
    }
    function C(a, b) {
        if (Array.prototype.indexOf)
            return a.indexOf(b);
        for (var c = 0; c < a.length; ++c)
            if (a[c] === b)
                return c;
        return -1
    }
    function K(a) {
        return a.replace(/\\t/, "\t").replace(/\\n/, "\n").replace(/\\(['"\\])/g, "$1")
    }
    function A(a) {
        return K(a.replace(/^['"](.*)['"]$/, "$1")).replace(/^\s+|\s+$/g, "")
    }
    function w(a, b) {
        for (var c = 0, d = 0, e = jSmart.prototype.left_delimiter, f = jSmart.prototype.right_delimiter, g = jSmart.prototype.auto_literal, h = /^\s*(.+)\s*$/i, h = a ? RegExp("^\\s*(" + a + ")\\s*$", "i") : h, k = 0; k < b.length; ++k)
            if (b.substr(k, e.length) == e)
                g && k + 1 < b.length && b.substr(k + 1, 1).match(/\s/) || (c || (b = b.slice(k),
                d += parseInt(k),
                k = 0),
                ++c);
            else if (b.substr(k, f.length) == f && !(g && 0 <= k - 1 && b.substr(k - 1, 1).match(/\s/))) {
                if (!--c) {
                    var x = b.slice(e.length, k).replace(/[\r\n]/g, " ").match(h);
                    if (x)
                        return x.index = d,
                        x[0] = b.slice(0, k + f.length),
                        x
                }
                0 > c && (c = 0)
            }
        return null
    }
    function L(a, b, c) {
        var d = ""
          , e = null
          , f = null
          , g = 0;
        do {
            e && (g += e[0].length);
            e = w(a, c);
            if (!e)
                throw Error("Unclosed {" + b + "}");
            d += c.slice(0, e.index);
            g += e.index;
            c = c.slice(e.index + e[0].length);
            (f = w(b, d)) && (d = d.slice(f.index + f[0].length))
        } while (f);
        e.index = g;
        return e
    }
    function G(a, b, c, d) {
        for (var e = 0, f = w(c, d); f; f = w(c, d)) {
            var g = w(a, d);
            if (!g || g.index > f.index)
                return f.index += e,
                f;
            d = d.slice(g.index + g[0].length);
            e += g.index + g[0].length;
            f = L(b, a, d);
            d = d.slice(f.index + f[0].length);
            e += f.index + f[0].length
        }
        return null
    }
    function M(a, b) {
        if ("string" == typeof a)
            with ({
                __code: a
            })
                with (D)
                    with (b)
                        try {
                            return eval(__code)
                        } catch (c) {
                            throw Error(c.message + " in \n" + a);
                        }
        return a
    }
    function v(a, b, c) {
        a.match(/\[\]$/) ? c[a.replace(/\[\]$/, "")].push(b) : c[a] = b
    }
    function n(a, b) {
        for (var c = w("", a); c; c = w("", a)) {
            c.index && q(a.slice(0, c.index), b);
            a = a.slice(c.index + c[0].length);
            var d = c[1].match(/^\s*(\w+)(.*)$/);
            if (d) {
                var e = d[1]
                  , d = 2 < d.length ? d[2].replace(/^\s+|\s+$/g, "") : "";
                if (e in B) {
                    var f = B[e]
                      , d = ("parseParams"in f ? f.parseParams : t)(d);
                    "block" == f.type ? (a = a.replace(/^\n/, ""),
                    c = L("/" + e, e + " +[^}]*", a),
                    f.parse(d, b, a.slice(0, c.index)),
                    a = a.slice(c.index + c[0].length)) : (f.parse(d, b),
                    "extends" == e && (b = []));
                    a = a.replace(/^\n/, "")
                } else if (e in u) {
                    if (c = u[e],
                    "block" == c.type ? (c = L("/" + e, e + " +[^}]*", a),
                    d = t(d),
                    f = a.slice(0, c.index),
                    b.push({
                        type: "plugin",
                        name: e,
                        params: d,
                        subTree: n(f, [])
                    }),
                    a = a.slice(c.index + c[0].length)) : "function" == c.type && (c = t(d),
                    b.push({
                        type: "plugin",
                        name: e,
                        params: c
                    })),
                    "append" == e || "assign" == e || "capture" == e || "eval" == e || "include" == e)
                        a = a.replace(/^\n/, "")
                } else
                    B.expression.parse(c[1], b)
            } else
                e = B.expression.parse(c[1], b),
                "build-in" == e.type && "operator" == e.name && "=" == e.op && (a = a.replace(/^\n/, ""))
        }
        a && q(a, b);
        return b
    }
    function q(a, b) {
        if (q.parseEmbeddedVars)
            for (var c = /([$][\w@]+)|`([^`]*)`/, d = a.match(c); d; d = a.match(c))
                b.push({
                    type: "text",
                    data: a.slice(0, d.index)
                }),
                b.push(E(d[1] ? d[1] : d[2]).tree),
                a = a.slice(d.index + d[0].length);
        b.push({
            type: "text",
            data: a
        });
        return b
    }
    function T(a, b, c) {
        b.__parsed.name = q(a, [])[0];
        c.push({
            type: "plugin",
            name: "__func",
            params: b
        });
        return c
    }
    function p(a, b, c, d) {
        d.push({
            type: "build-in",
            name: "operator",
            op: a,
            optype: b,
            precedence: c,
            params: {}
        })
    }
    function N(a, b, c) {
        var d = b.token;
        c = [{
            type: "text",
            data: c.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi, "$1__$2")
        }];
        for (var e = /^(?:\.|\s*->\s*|\[\s*)/, f = a.match(e); f; f = a.match(e)) {
            b.token += f[0];
            a = a.slice(f[0].length);
            var g = {
                value: "",
                tree: []
            };
            if (f[0].match(/\[/)) {
                if (g = E(a))
                    b.token += g.value,
                    c.push(g.tree),
                    a = a.slice(g.value.length);
                if (f = a.match(/\s*\]/))
                    b.token += f[0],
                    a = a.slice(f[0].length)
            } else {
                f = l.stop;
                l.stop = !0;
                if (O(a, g)) {
                    b.token += g.value;
                    var h = g.tree[0];
                    "plugin" == h.type && "__func" == h.name && (h.hasOwner = !0);
                    c.push(h);
                    a = a.slice(g.value.length)
                } else
                    g = !1;
                l.stop = f
            }
            g || c.push({
                type: "text",
                data: ""
            })
        }
        b.tree.push({
            type: "var",
            parts: c
        });
        b.value += b.token.substr(d.length);
        P(b.token);
        return a
    }
    function P(a) {}
    function l(a, b) {
        if (!l.stop) {
            var c = a.match(/^\|(\w+)/);
            if (c) {
                b.value += c[0];
                var d = "default" == c[1] ? "defaultValue" : c[1];
                a = a.slice(c[0].length).replace(/^\s+/, "");
                l.stop = !0;
                for (var c = [], e = a.match(/^\s*:\s*/); e; e = a.match(/^\s*:\s*/))
                    b.value += a.slice(0, e[0].length),
                    a = a.slice(e[0].length),
                    e = {
                        value: "",
                        tree: []
                    },
                    O(a, e) ? (b.value += e.value,
                    c.push(e.tree[0]),
                    a = a.slice(e.value.length)) : q("", c);
                l.stop = !1;
                c.unshift(b.tree.pop());
                b.tree.push(T(d, {
                    __parsed: c
                }, [])[0]);
                l(a, b)
            }
        }
    }
    function O(a, b) {
        if (!a)
            return !1;
        if (a.substr(0, jSmart.prototype.left_delimiter.length) == jSmart.prototype.left_delimiter) {
            var c = w("", a);
            if (c)
                return b.token = c[0],
                b.value += c[0],
                n(c[0], b.tree),
                l(a.slice(b.value.length), b),
                !0
        }
        for (c = 0; c < H.length; ++c)
            if (a.match(H[c].re))
                return b.token = RegExp.lastMatch,
                b.value += RegExp.lastMatch,
                H[c].parse(b, a.slice(b.token.length)),
                !0;
        return !1
    }
    function U(a, b, c) {
        var d = b[a];
        if ("operator" == d.name && d.precedence == c && !d.params.__parsed) {
            if ("binary" == d.optype)
                return d.params.__parsed = [b[a - 1], b[a + 1]],
                b.splice(a - 1, 3, d),
                !0;
            if ("post-unary" == d.optype)
                return d.params.__parsed = [b[a - 1]],
                b.splice(a - 1, 2, d),
                !0;
            d.params.__parsed = [b[a + 1]];
            b.splice(a, 2, d)
        }
        return !1
    }
    function V(a) {
        for (var b = 0, b = 0; b < a.length; ++b)
            a[b]instanceof Array && (a[b] = V(a[b]));
        for (var c = 1; 14 > c; ++c)
            if (2 == c || 10 == c)
                for (b = a.length; 0 < b; --b)
                    b -= U(b - 1, a, c);
            else
                for (b = 0; b < a.length; ++b)
                    b -= U(b, a, c);
        return a[0]
    }
    function E(a) {
        for (var b = {
            value: "",
            tree: []
        }; O(a.slice(b.value.length), b); )
            ;
        if (!b.tree.length)
            return !1;
        b.tree = V(b.tree);
        return b
    }
    function t(a, b, c) {
        var d = a.replace(/\n/g, " ").replace(/^\s+|\s+$/g, "")
          , e = [];
        e.__parsed = [];
        a = "";
        if (!d)
            return e;
        b || (b = /^\s+/,
        c = /^(\w+)\s*=\s*/);
        for (; d; ) {
            var f = null;
            if (c) {
                var g = d.match(c);
                g && (f = A(g[1]),
                a += d.slice(0, g[0].length),
                d = d.slice(g[0].length))
            }
            g = E(d);
            if (!g)
                break;
            f ? (e[f] = g.value,
            e.__parsed[f] = g.tree) : (e.push(g.value),
            e.__parsed.push(g.tree));
            a += d.slice(0, g.value.length);
            d = d.slice(g.value.length);
            if (f = d.match(b))
                a += d.slice(0, f[0].length),
                d = d.slice(f[0].length);
            else
                break
        }
        e.toString = function() {
            return a
        }
        ;
        return e
    }
    function r(a, b) {
        var c = [], d;
        for (d in a.__parsed)
            if (a.__parsed.hasOwnProperty(d)) {
                var e = m([a.__parsed[d]], b);
                "string" == typeof e && e.match(/^[1-9]\d{0,14}$/) && !isNaN(e) && (e = parseInt(e, 10));
                c[d] = e
            }
        c.__get = function(a, b, d) {
            if (a in c && "undefined" != typeof c[a])
                return c[a];
            if ("undefined" != typeof d && "undefined" != typeof c[d])
                return c[d];
            if (null === b)
                throw Error("The required attribute '" + a + "' is missing");
            return b
        }
        ;
        return c
    }
    function y(a, b, c) {
        for (var d = b, e = "", f = 0; f < a.parts.length; ++f) {
            var g = a.parts[f];
            if ("plugin" == g.type && "__func" == g.name && g.hasOwner)
                b.__owner = d,
                d = m([a.parts[f]], b),
                delete b.__owner;
            else {
                e = m([g], b);
                e in b.smarty.section && "text" == g.type && "smarty" != m([a.parts[0]], b) && (e = b.smarty.section[e].index);
                !e && "undefined" != typeof c && d instanceof Array && (e = d.length);
                "undefined" != typeof c && f == a.parts.length - 1 && (d[e] = c);
                if (!("object" == typeof d && null !== d && e in d)) {
                    if ("undefined" == typeof c)
                        return "";
                    d[e] = {}
                }
                d = d[e]
            }
        }
        return d
    }
    function m(a, b) {
        for (var c = "", d = 0; d < a.length; ++d) {
            var e = ""
              , f = a[d];
            if ("text" == f.type)
                e = f.data;
            else if ("var" == f.type)
                e = y(f, b);
            else if ("build-in" == f.type)
                e = B[f.name].process(f, b);
            else if ("plugin" == f.type) {
                var g = u[f.name];
                if ("block" == g.type) {
                    var h = {
                        value: !0
                    };
                    for (g.process(r(f.params, b), "", b, h); h.value; )
                        h.value = !1,
                        e += g.process(r(f.params, b), m(f.subTree, b), b, h)
                } else
                    "function" == g.type && (e = g.process(r(f.params, b), b))
            }
            "boolean" == typeof e && (e = e ? "1" : "");
            if (1 == a.length)
                return e;
            c += e;
            if (b.smarty["continue"] || b.smarty["break"])
                break
        }
        return c
    }
    function W(a, b, c) {
        if (!c && a in Q)
            b = Q[a];
        else {
            c = jSmart.prototype.getTemplate(a);
            if ("string" != typeof c)
                throw Error("No template for " + a);
            n(I(jSmart.prototype.filters_global.pre, X(c.replace(/\r\n/g, "\n"))), b);
            Q[a] = b
        }
        return b
    }
    function X(a) {
        for (var b = "", c = a.match(/{\*/); c; c = a.match(/{\*/)) {
            b += a.slice(0, c.index);
            a = a.slice(c.index + c[0].length);
            c = a.match(/\*}/);
            if (!c)
                throw Error("Unclosed {*");
            a = a.slice(c.index + c[0].length)
        }
        return b + a
    }
    function I(a, b) {
        for (var c = 0; c < a.length; ++c)
            b = a[c](b);
        return b
    }
    var B = {
        expression: {
            parse: function(a, b) {
                var c = E(a);
                b.push({
                    type: "build-in",
                    name: "expression",
                    expression: c.tree,
                    params: t(a.slice(c.value.length).replace(/^\s+|\s+$/g, ""))
                });
                return c.tree
            },
            process: function(a, b) {
                var c = r(a.params, b)
                  , d = m([a.expression], b);
                if (0 > C(c, "nofilter")) {
                    for (c = 0; c < default_modifiers.length; ++c) {
                        var e = default_modifiers[c];
                        e.params.__parsed[0] = {
                            type: "text",
                            data: d
                        };
                        d = m([e], b)
                    }
                    escape_html && (d = D.escape(d));
                    d = I(varFilters, d);
                    J.length && (__t = function() {
                        return d
                    }
                    ,
                    d = m(J, b))
                }
                return d
            }
        },
        operator: {
            process: function(a, b) {
                var c = r(a.params, b)
                  , d = c[0];
                if ("binary" == a.optype) {
                    c = c[1];
                    if ("=" == a.op)
                        return y(a.params.__parsed[0], b, c),
                        "";
                    if (a.op.match(/(\+=|-=|\*=|\/=|%=)/)) {
                        d = y(a.params.__parsed[0], b);
                        switch (a.op) {
                        case "+=":
                            d += c;
                            break;
                        case "-=":
                            d -= c;
                            break;
                        case "*=":
                            d *= c;
                            break;
                        case "/=":
                            d /= c;
                            break;
                        case "%=":
                            d %= c
                        }
                        return y(a.params.__parsed[0], b, d)
                    }
                    if (a.op.match(/div/))
                        return "div" != a.op ^ 0 == d % c;
                    if (a.op.match(/even/))
                        return "even" != a.op ^ 0 == d / c % 2;
                    if (a.op.match(/xor/))
                        return (d || c) && !(d && c);
                    switch (a.op) {
                    case "==":
                        return d == c;
                    case "!=":
                        return d != c;
                    case "+":
                        return d + c;
                    case "-":
                        return d - c;
                    case "*":
                        return d * c;
                    case "/":
                        return d / c;
                    case "%":
                        return d % c;
                    case "&&":
                        return d && c;
                    case "||":
                        return d || c;
                    case "<":
                        return d < c;
                    case "<=":
                        return d <= c;
                    case ">":
                        return d > c;
                    case ">=":
                        return d >= c;
                    case "===":
                        return d === c;
                    case "!==":
                        return d !== c
                    }
                } else {
                    if ("!" == a.op)
                        return !d;
                    (c = "var" == a.params.__parsed[0].type) && (d = y(a.params.__parsed[0], b));
                    var e = d;
                    if ("pre-unary" == a.optype) {
                        switch (a.op) {
                        case "-":
                            e = -d;
                            break;
                        case "++":
                            e = ++d;
                            break;
                        case "--":
                            e = --d
                        }
                        c && y(a.params.__parsed[0], b, d)
                    } else {
                        switch (a.op) {
                        case "++":
                            d++;
                            break;
                        case "--":
                            d--
                        }
                        y(a.params.__parsed[0], b, d)
                    }
                    return e
                }
            }
        },
        section: {
            type: "block",
            parse: function(a, b, c) {
                var d = []
                  , e = [];
                b.push({
                    type: "build-in",
                    name: "section",
                    params: a,
                    subTree: d,
                    subTreeElse: e
                });
                (a = G("section [^}]+", "/section", "sectionelse", c)) ? (n(c.slice(0, a.index), d),
                n(c.slice(a.index + a[0].length).replace(/^[\r\n]/, ""), e)) : n(c, d)
            },
            process: function(a, b) {
                var c = r(a.params, b)
                  , d = {};
                b.smarty.section[c.__get("name", null, 0)] = d;
                var e = c.__get("show", !0);
                d.show = e;
                if (!e)
                    return m(a.subTreeElse, b);
                var e = parseInt(c.__get("start", 0))
                  , f = c.loop instanceof Object ? S(c.loop) : isNaN(c.loop) ? 0 : parseInt(c.loop)
                  , g = parseInt(c.__get("step", 1))
                  , c = parseInt(c.__get("max"));
                isNaN(c) && (c = Number.MAX_VALUE);
                0 > e ? (e += f,
                0 > e && (e = 0)) : e >= f && (e = f ? f - 1 : 0);
                for (var h = 0, k = e; 0 <= k && k < f && h < c; k += g,
                ++h)
                    ;
                d.total = h;
                d.loop = h;
                for (var h = 0, x = "", k = e; 0 <= k && k < f && h < c && !b.smarty["break"]; k += g,
                ++h)
                    d.first = k == e,
                    d.last = 0 > k + g || k + g >= f,
                    d.index = k,
                    d.index_prev = k - g,
                    d.index_next = k + g,
                    d.iteration = d.rownum = h + 1,
                    x += m(a.subTree, b),
                    b.smarty["continue"] = !1;
                b.smarty["break"] = !1;
                return h ? x : m(a.subTreeElse, b)
            }
        },
        setfilter: {
            type: "block",
            parseParams: function(a) {
                return [E("__t()|" + a).tree]
            },
            parse: function(a, b, c) {
                b.push({
                    type: "build-in",
                    name: "setfilter",
                    params: a,
                    subTree: n(c, [])
                })
            },
            process: function(a, b) {
                J = a.params;
                var c = m(a.subTree, b);
                J = [];
                return c
            }
        },
        "for": {
            type: "block",
            parseParams: function(a) {
                var b = a.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);
                if (!b)
                    throw Error("Invalid {for} parameters: " + a);
                return t("varName='" + b[1] + "' from=" + b[2] + " to=" + b[3] + " step=" + (b[4] ? b[4] : "1") + " " + b[5])
            },
            parse: function(a, b, c) {
                var d = []
                  , e = [];
                b.push({
                    type: "build-in",
                    name: "for",
                    params: a,
                    subTree: d,
                    subTreeElse: e
                });
                (a = G("for\\s[^}]+", "/for", "forelse", c)) ? (n(c.slice(0, a.index), d),
                n(c.slice(a.index + a[0].length), e)) : n(c, d)
            },
            process: function(a, b) {
                var c = r(a.params, b)
                  , d = parseInt(c.__get("from"))
                  , e = parseInt(c.__get("to"))
                  , f = parseInt(c.__get("step"));
                isNaN(f) && (f = 1);
                var g = parseInt(c.__get("max"));
                isNaN(g) && (g = Number.MAX_VALUE);
                for (var h = 0, k = "", d = Math.min(Math.ceil(((0 < f ? e - d : d - e) + 1) / Math.abs(f)), g), e = parseInt(c.from); h < d && !b.smarty["break"]; e += f,
                ++h)
                    b[c.varName] = e,
                    k += m(a.subTree, b),
                    b.smarty["continue"] = !1;
                b.smarty["break"] = !1;
                h || (k = m(a.subTreeElse, b));
                return k
            }
        },
        "if": {
            type: "block",
            parse: function(a, b, c) {
                var d = []
                  , e = [];
                b.push({
                    type: "build-in",
                    name: "if",
                    params: a,
                    subTreeIf: d,
                    subTreeElse: e
                });
                (a = G("if\\s+[^}]+", "/if", "else[^}]*", c)) ? (n(c.slice(0, a.index), d),
                c = c.slice(a.index + a[0].length),
                (d = a[1].match(/^elseif(.*)/)) ? B["if"].parse(t(d[1]), e, c.replace(/^\n/, "")) : n(c.replace(/^\n/, ""), e)) : n(c, d)
            },
            process: function(a, b) {
                return r(a.params, b)[0] ? m(a.subTreeIf, b) : m(a.subTreeElse, b)
            }
        },
        foreach: {
            type: "block",
            parseParams: function(a) {
                var b = a.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);
                b && (a = "from=" + b[1] + " item=" + (b[4] || b[2]),
                b[4] && (a += " key=" + b[2]));
                return t(a)
            },
            parse: function(a, b, c) {
                var d = []
                  , e = [];
                b.push({
                    type: "build-in",
                    name: "foreach",
                    params: a,
                    subTree: d,
                    subTreeElse: e
                });
                (a = G("foreach\\s[^}]+", "/foreach", "foreachelse", c)) ? (n(c.slice(0, a.index), d),
                n(c.slice(a.index + a[0].length).replace(/^[\r\n]/, ""), e)) : n(c, d)
            },
            process: function(a, b) {
                var c = r(a.params, b)
                  , d = c.from;
                d instanceof Object || (d = [d]);
                var e = S(d);
                b[c.item + "__total"] = e;
                "name"in c && (b.smarty.foreach[c.name] = {},
                b.smarty.foreach[c.name].total = e);
                var f = "", g = 0, h;
                for (h in d)
                    if (d.hasOwnProperty(h)) {
                        if (b.smarty["break"])
                            break;
                        b[c.item + "__key"] = isNaN(h) ? h : parseInt(h);
                        "key"in c && (b[c.key] = b[c.item + "__key"]);
                        b[c.item] = d[h];
                        b[c.item + "__index"] = parseInt(g);
                        b[c.item + "__iteration"] = parseInt(g + 1);
                        b[c.item + "__first"] = 0 === g;
                        b[c.item + "__last"] = g == e - 1;
                        "name"in c && (b.smarty.foreach[c.name].index = parseInt(g),
                        b.smarty.foreach[c.name].iteration = parseInt(g + 1),
                        b.smarty.foreach[c.name].first = 0 === g ? 1 : "",
                        b.smarty.foreach[c.name].last = g == e - 1 ? 1 : "");
                        ++g;
                        f += m(a.subTree, b);
                        b.smarty["continue"] = !1
                    }
                b.smarty["break"] = !1;
                b[c.item + "__show"] = 0 < g;
                c.name && (b.smarty.foreach[c.name].show = 0 < g ? 1 : "");
                return 0 < g ? f : m(a.subTreeElse, b)
            }
        },
        "function": {
            type: "block",
            parse: function(a, b, c) {
                b = [];
                u[A(a.name ? a.name : a[0])] = {
                    type: "function",
                    subTree: b,
                    defautParams: a,
                    process: function(a, b) {
                        var c = r(this.defautParams, b);
                        delete c.name;
                        return m(this.subTree, F({}, b, c, a))
                    }
                };
                n(c, b)
            }
        },
        php: {
            type: "block",
            parse: function(a, b, c) {}
        },
        "extends": {
            type: "function",
            parse: function(a, b) {
                b.splice(0, b.length);
                W(A(a.file ? a.file : a[0]), b)
            }
        },
        block: {
            type: "block",
            parse: function(a, b, c) {
                b.push({
                    type: "build-in",
                    name: "block",
                    params: a
                });
                a.append = 0 <= C(a, "append");
                a.prepend = 0 <= C(a, "prepend");
                a.hide = 0 <= C(a, "hide");
                a.hasChild = a.hasParent = !1;
                P = function(b) {
                    b.match(/^\s*[$]smarty.block.child\s*$/) && (a.hasChild = !0);
                    b.match(/^\s*[$]smarty.block.parent\s*$/) && (a.hasParent = !0)
                }
                ;
                b = n(c, []);
                P = function(a) {}
                ;
                c = A(a.name ? a.name : a[0]);
                c in z || (z[c] = []);
                z[c].push({
                    tree: b,
                    params: a
                })
            },
            process: function(a, b) {
                b.smarty.block.parent = b.smarty.block.child = "";
                var c = A(a.params.name ? a.params.name : a.params[0]);
                this.processBlocks(z[c], z[c].length - 1, b);
                return b.smarty.block.child
            },
            processBlocks: function(a, b, c) {
                if (!b && a[b].params.hide)
                    c.smarty.block.child = "";
                else
                    for (var d = !0, e = !1; 0 <= b; --b) {
                        if (a[b].params.hasParent) {
                            var f = c.smarty.block.child;
                            c.smarty.block.child = "";
                            this.processBlocks(a, b - 1, c);
                            c.smarty.block.parent = c.smarty.block.child;
                            c.smarty.block.child = f
                        }
                        var f = c.smarty.block.child
                          , g = m(a[b].tree, c);
                        c.smarty.block.child = f;
                        a[b].params.hasChild ? c.smarty.block.child = g : d ? c.smarty.block.child = g + c.smarty.block.child : e && (c.smarty.block.child += g);
                        d = a[b].params.append;
                        e = a[b].params.prepend
                    }
            }
        },
        strip: {
            type: "block",
            parse: function(a, b, c) {
                n(c.replace(/[ \t]*[\r\n]+[ \t]*/g, ""), b)
            }
        },
        literal: {
            type: "block",
            parse: function(a, b, c) {
                q(c, b)
            }
        },
        ldelim: {
            type: "function",
            parse: function(a, b) {
                q(jSmart.prototype.left_delimiter, b)
            }
        },
        rdelim: {
            type: "function",
            parse: function(a, b) {
                q(jSmart.prototype.right_delimiter, b)
            }
        },
        "while": {
            type: "block",
            parse: function(a, b, c) {
                b.push({
                    type: "build-in",
                    name: "while",
                    params: a,
                    subTree: n(c, [])
                })
            },
            process: function(a, b) {
                for (var c = ""; r(a.params, b)[0] && !b.smarty["break"]; )
                    c += m(a.subTree, b),
                    b.smarty["continue"] = !1;
                b.smarty["break"] = !1;
                return c
            }
        }
    }
      , u = {}
      , D = {}
      , Q = {}
      , z = null
      , R = null
      , J = []
      , H = [{
        re: /^\$([\w@]+)/,
        parse: function(a, b) {
            l(N(b, a, RegExp.$1), a)
        }
    }, {
        re: /^(true|false)/i,
        parse: function(a, b) {
            q(a.token.match(/true/i) ? "1" : "", a.tree)
        }
    }, {
        re: /^'([^'\\]*(?:\\.[^'\\]*)*)'/,
        parse: function(a, b) {
            q(K(RegExp.$1), a.tree);
            l(b, a)
        }
    }, {
        re: /^"([^"\\]*(?:\\.[^"\\]*)*)"/,
        parse: function(a, b) {
            var c = K(RegExp.$1)
              , d = c.match(H[0].re);
            if (d) {
                var e = {
                    token: d[0],
                    tree: []
                };
                N(c, e, d[1]);
                if (e.token.length == c.length) {
                    a.tree.push(e.tree[0]);
                    return
                }
            }
            q.parseEmbeddedVars = !0;
            a.tree.push({
                type: "plugin",
                name: "__quoted",
                params: {
                    __parsed: n(c, [])
                }
            });
            q.parseEmbeddedVars = !1;
            l(b, a)
        }
    }, {
        re: /^(\w+)\s*[(]([)]?)/,
        parse: function(a, b) {
            var c = RegExp.$1
              , d = t(RegExp.$2 ? "" : b, /^\s*,\s*/);
            T(c, d, a.tree);
            a.value += d.toString();
            l(b.slice(d.toString().length), a)
        }
    }, {
        re: /^\s*\(\s*/,
        parse: function(a, b) {
            var c = [];
            a.tree.push(c);
            c.parent = a.tree;
            a.tree = c
        }
    }, {
        re: /^\s*\)\s*/,
        parse: function(a, b) {
            a.tree.parent && (a.tree = a.tree.parent)
        }
    }, {
        re: /^\s*(\+\+|--)\s*/,
        parse: function(a, b) {
            a.tree.length && "var" == a.tree[a.tree.length - 1].type ? p(RegExp.$1, "post-unary", 1, a.tree) : p(RegExp.$1, "pre-unary", 1, a.tree)
        }
    }, {
        re: /^\s*(===|!==|==|!=)\s*/,
        parse: function(a, b) {
            p(RegExp.$1, "binary", 6, a.tree)
        }
    }, {
        re: /^\s+(eq|ne|neq)\s+/i,
        parse: function(a, b) {
            var c = RegExp.$1.replace(/ne(q)?/, "!=").replace(/eq/, "==");
            p(c, "binary", 6, a.tree)
        }
    }, {
        re: /^\s*!\s*/,
        parse: function(a, b) {
            p("!", "pre-unary", 2, a.tree)
        }
    }, {
        re: /^\s+not\s+/i,
        parse: function(a, b) {
            p("!", "pre-unary", 2, a.tree)
        }
    }, {
        re: /^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,
        parse: function(a, b) {
            p(RegExp.$1, "binary", 10, a.tree)
        }
    }, {
        re: /^\s*(\*|\/|%)\s*/,
        parse: function(a, b) {
            p(RegExp.$1, "binary", 3, a.tree)
        }
    }, {
        re: /^\s+mod\s+/i,
        parse: function(a, b) {
            p("%", "binary", 3, a.tree)
        }
    }, {
        re: /^\s*(\+|-)\s*/,
        parse: function(a, b) {
            a.tree.length && "operator" != a.tree[a.tree.length - 1].name ? p(RegExp.$1, "binary", 4, a.tree) : p(RegExp.$1, "pre-unary", 4, a.tree)
        }
    }, {
        re: /^\s*(<=|>=|<>|<|>)\s*/,
        parse: function(a, b) {
            p(RegExp.$1.replace(/<>/, "!="), "binary", 5, a.tree)
        }
    }, {
        re: /^\s+(lt|lte|le|gt|gte|ge)\s+/i,
        parse: function(a, b) {
            var c = RegExp.$1.replace(/lt/, "<").replace(/l(t)?e/, "<=").replace(/gt/, ">").replace(/g(t)?e/, ">=");
            p(c, "binary", 5, a.tree)
        }
    }, {
        re: /^\s+(is\s+(not\s+)?div\s+by)\s+/i,
        parse: function(a, b) {
            p(RegExp.$2 ? "div_not" : "div", "binary", 7, a.tree)
        }
    }, {
        re: /^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,
        parse: function(a, b) {
            p(RegExp.$1 ? "odd" == RegExp.$2 ? "even" : "even_not" : "odd" == RegExp.$2 ? "even_not" : "even", "binary", 7, a.tree);
            RegExp.$3 || q("1", a.tree)
        }
    }, {
        re: /^\s*(&&)\s*/,
        parse: function(a, b) {
            p(RegExp.$1, "binary", 8, a.tree)
        }
    }, {
        re: /^\s*(\|\|)\s*/,
        parse: function(a, b) {
            p(RegExp.$1, "binary", 9, a.tree)
        }
    }, {
        re: /^\s+and\s+/i,
        parse: function(a, b) {
            p("&&", "binary", 11, a.tree)
        }
    }, {
        re: /^\s+xor\s+/i,
        parse: function(a, b) {
            p("xor", "binary", 12, a.tree)
        }
    }, {
        re: /^\s+or\s+/i,
        parse: function(a, b) {
            p("||", "binary", 13, a.tree)
        }
    }, {
        re: /^#(\w+)#/,
        parse: function(a, b) {
            var c = {
                token: "$smarty",
                tree: []
            };
            N(".config." + RegExp.$1, c, "smarty");
            a.tree.push(c.tree[0]);
            l(b, a)
        }
    }, {
        re: /^\s*\[\s*/,
        parse: function(a, b) {
            var c = t(b, /^\s*,\s*/, /^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/);
            a.tree.push({
                type: "plugin",
                name: "__array",
                params: c
            });
            a.value += c.toString();
            if (c = b.slice(c.toString().length).match(/\s*\]/))
                a.value += c[0]
        }
    }, {
        re: /^[\d.]+/,
        parse: function(a, b) {
            q(a.token, a.tree);
            l(b, a)
        }
    }, {
        re: /^\w+/,
        parse: function(a, b) {
            q(a.token, a.tree);
            l(b, a)
        }
    }];
    jSmart = function(a) {
        this.tree = [];
        this.tree.blocks = {};
        this.scripts = {};
        this.default_modifiers = [];
        this.filters = {
            variable: [],
            post: []
        };
        this.smarty = {
            smarty: {
                block: {},
                "break": !1,
                capture: {},
                "continue": !1,
                counter: {},
                cycle: {},
                foreach: {},
                section: {},
                now: Math.floor((new Date).getTime() / 1E3),
                "const": {},
                config: {},
                current_dir: "/",
                template: "",
                ldelim: jSmart.prototype.left_delimiter,
                rdelim: jSmart.prototype.right_delimiter,
                version: "2.9"
            }
        };
        z = this.tree.blocks;
        n(I(jSmart.prototype.filters_global.pre, X((new String(a ? a : "")).replace(/\r\n/g, "\n"))), this.tree)
    }
    ;
    jSmart.prototype.fetch = function(a) {
        z = this.tree.blocks;
        R = this.scripts;
        escape_html = this.escape_html;
        default_modifiers = jSmart.prototype.default_modifiers_global.concat(this.default_modifiers);
        this.data = F("object" == typeof a ? a : {}, this.smarty);
        varFilters = jSmart.prototype.filters_global.variable.concat(this.filters.variable);
        a = m(this.tree, this.data);
        jSmart.prototype.debugging && u.debug.process([], this.data);
        return I(jSmart.prototype.filters_global.post.concat(this.filters.post), a)
    }
    ;
    jSmart.prototype.escape_html = !1;
    jSmart.prototype.registerPlugin = function(a, b, c) {
        "modifier" == a ? D[b] = c : u[b] = {
            type: a,
            process: c
        }
    }
    ;
    jSmart.prototype.registerFilter = function(a, b) {
        (this.tree ? this.filters : jSmart.prototype.filters_global)["output" == a ? "post" : a].push(b)
    }
    ;
    jSmart.prototype.filters_global = {
        pre: [],
        variable: [],
        post: []
    };
    jSmart.prototype.configLoad = function(a, b, c) {
        c = c ? c : this.data;
        a = a.replace(/\r\n/g, "\n").replace(/^\s+|\s+$/g, "");
        for (var d = /^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m, e = "", f = a.match(d); f; f = a.match(d)) {
            a = a.slice(f.index + f[0].length);
            if (f[1])
                e = f[1];
            else if ((!e || e == b) && "." != e.substr(0, 1))
                if ('"""' == f[3]) {
                    var g = a.match(/"""/);
                    g && (c.smarty.config[f[2]] = a.slice(0, g.index),
                    a = a.slice(g.index + g[0].length))
                } else
                    c.smarty.config[f[2]] = A(f[3]);
            if (f = a.match(/\n+/))
                a = a.slice(f.index + f[0].length);
            else
                break
        }
    }
    ;
    jSmart.prototype.clearConfig = function(a) {
        a ? delete this.data.smarty.config[a] : this.data.smarty.config = {}
    }
    ;
    jSmart.prototype.addDefaultModifier = function(a) {
        a instanceof Array || (a = [a]);
        for (var b = 0; b < a.length; ++b) {
            var c = {
                value: "",
                tree: [0]
            };
            l("|" + a[b], c);
            (this.tree ? this.default_modifiers : this.default_modifiers_global).push(c.tree[0])
        }
    }
    ;
    jSmart.prototype.default_modifiers_global = [];
    jSmart.prototype.getTemplate = function(a) {
        throw Error("No template for " + a);
    }
    ;
    jSmart.prototype.getFile = function(a) {
        throw Error("No file for " + a);
    }
    ;
    jSmart.prototype.getJavascript = function(a) {
        throw Error("No Javascript for " + a);
    }
    ;
    jSmart.prototype.getConfig = function(a) {
        throw Error("No config for " + a);
    }
    ;
    jSmart.prototype.auto_literal = !0;
    jSmart.prototype.left_delimiter = "{";
    jSmart.prototype.right_delimiter = "}";
    jSmart.prototype.debugging = !1;
    jSmart.prototype.PHPJS = function(a, b) {
        if ("function" == eval("typeof " + a))
            return "object" == typeof window ? window : global;
        if ("function" == typeof PHP_JS)
            return new PHP_JS;
        throw Error("Modifier '" + b + "' uses JavaScript port of PHP function '" + a + "'. You can find one at http://phpjs.org");
    }
    ;
    jSmart.prototype.makeTimeStamp = function(a) {
        if (!a)
            return Math.floor((new Date).getTime() / 1E3);
        if (isNaN(a))
            return a = jSmart.prototype.PHPJS("strtotime", "date_format").strtotime(a),
            -1 == a || !1 === a ? Math.floor((new Date).getTime() / 1E3) : a;
        a = new String(a);
        return 14 == a.length ? Math.floor((new Date(a.substr(0, 4),a.substr(4, 2) - 1,a.substr(6, 2),a.substr(8, 2),a.substr(10, 2))).getTime() / 1E3) : parseInt(a)
    }
    ;
    jSmart.prototype.registerPlugin("function", "__array", function(a, b) {
        var c = [], d;
        for (d in a)
            a.hasOwnProperty(d) && a[d] && "function" != typeof a[d] && (c[d] = a[d]);
        return c
    });
    jSmart.prototype.registerPlugin("function", "__func", function(a, b) {
        for (var c = [], d = {}, e = 0; e < a.length; ++e)
            c.push(a.name + "__p" + e),
            d[a.name + "__p" + e] = a[e];
        return M(("__owner"in b && a.name in b.__owner ? "__owner." + a.name : a.name) + "(" + c.join(",") + ")", F({}, b, d))
    });
    jSmart.prototype.registerPlugin("function", "__quoted", function(a, b) {
        return a.join("")
    });
    jSmart.prototype.registerPlugin("function", "append", function(a, b) {
        var c = a.__get("var", null, 0);
        c in b && b[c]instanceof Array || (b[c] = []);
        var d = a.__get("index", !1)
          , e = a.__get("value", null, 1);
        !1 === d ? b[c].push(e) : b[c][d] = e;
        return ""
    });
    jSmart.prototype.registerPlugin("function", "assign", function(a, b) {
        v(a.__get("var", null, 0), a.__get("value", null, 1), b);
        return ""
    });
    jSmart.prototype.registerPlugin("function", "break", function(a, b) {
        b.smarty["break"] = !0;
        return ""
    });
    jSmart.prototype.registerPlugin("function", "call", function(a, b) {
        var c = a.__get("name", null, 0);
        delete a.name;
        var d = a.__get("assign", !1);
        delete a.assign;
        c = u[c].process(a, b);
        return d ? (v(d, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("block", "capture", function(a, b, c, d) {
        b && (b = b.replace(/^\n/, ""),
        c.smarty.capture[a.__get("name", "default", 0)] = b,
        "assign"in a && v(a.assign, b, c),
        (a = a.__get("append", !1)) && (a in c ? c[a]instanceof Array && c[a].push(b) : c[a] = [b]));
        return ""
    });
    jSmart.prototype.registerPlugin("function", "continue", function(a, b) {
        b.smarty["continue"] = !0;
        return ""
    });
    jSmart.prototype.registerPlugin("function", "counter", function(a, b) {
        var c = a.__get("name", "default");
        if (c in b.smarty.counter) {
            var d = b.smarty.counter[c];
            "start"in a ? d.value = parseInt(a.start) : (d.value = parseInt(d.value),
            d.skip = parseInt(d.skip),
            d.value = "down" == d.direction ? d.value - d.skip : d.value + d.skip);
            d.skip = a.__get("skip", d.skip);
            d.direction = a.__get("direction", d.direction);
            d.assign = a.__get("assign", d.assign)
        } else
            b.smarty.counter[c] = {
                value: parseInt(a.__get("start", 1)),
                skip: parseInt(a.__get("skip", 1)),
                direction: a.__get("direction", "up"),
                assign: a.__get("assign", !1)
            };
        return b.smarty.counter[c].assign ? (b[b.smarty.counter[c].assign] = b.smarty.counter[c].value,
        "") : a.__get("print", !0) ? b.smarty.counter[c].value : ""
    });
    jSmart.prototype.registerPlugin("function", "cycle", function(a, b) {
        var c = a.__get("name", "default")
          , d = a.__get("reset", !1);
        c in b.smarty.cycle || (b.smarty.cycle[c] = {
            arr: [""],
            delimiter: a.__get("delimiter", ","),
            index: 0
        },
        d = !0);
        a.__get("delimiter", !1) && (b.smarty.cycle[c].delimiter = a.delimiter);
        var e = a.__get("values", !1);
        if (e) {
            var f = [];
            if (e instanceof Object)
                for (nm in e)
                    f.push(e[nm]);
            else
                f = e.split(b.smarty.cycle[c].delimiter);
            if (f.length != b.smarty.cycle[c].arr.length || f[0] != b.smarty.cycle[c].arr[0])
                b.smarty.cycle[c].arr = f,
                b.smarty.cycle[c].index = 0,
                d = !0
        }
        a.__get("advance", "true") && (b.smarty.cycle[c].index += 1);
        if (b.smarty.cycle[c].index >= b.smarty.cycle[c].arr.length || d)
            b.smarty.cycle[c].index = 0;
        return a.__get("assign", !1) ? (v(a.assign, b.smarty.cycle[c].arr[b.smarty.cycle[c].index], b),
        "") : a.__get("print", !0) ? b.smarty.cycle[c].arr[b.smarty.cycle[c].index] : ""
    });
    jSmart.prototype.print_r = function(a, b) {
        if (a instanceof Object) {
            var c = (a instanceof Array ? "Array[" + a.length + "]" : "Object") + "<br>", d;
            for (d in a)
                a.hasOwnProperty(d) && (c += b + "&nbsp;&nbsp;<strong>" + d + "</strong> : " + jSmart.prototype.print_r(a[d], b + "&nbsp;&nbsp;&nbsp;") + "<br>");
            return c
        }
        return a
    }
    ;
    jSmart.prototype.registerPlugin("function", "debug", function(a, b) {
        "undefined" != typeof dbgWnd && dbgWnd.close();
        dbgWnd = window.open("", "", "width=680,height=600,resizable,scrollbars=yes");
        var c = "", d = 0, e;
        for (e in b)
            c += "<tr class=" + (++d % 2 ? "odd" : "even") + "><td><strong>" + e + "</strong></td><td>" + jSmart.prototype.print_r(b[e], "") + "</td></tr>";
        dbgWnd.document.write("                <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>                <head> \t\t            <title>jSmart Debug Console</title>                   <style type='text/css'>                      table {width: 100%;}                      td {vertical-align:top;width: 50%;}                      .even td {background-color: #fafafa;}                   </style>                </head>                <body>                   <h1>jSmart Debug Console</h1>                   <h2>assigned template variables</h2>                   <table>" + c + "</table>                </body>                </html>             ");
        return ""
    });
    jSmart.prototype.registerPlugin("function", "eval", function(a, b) {
        var c = [];
        n(a.__get("var", "", 0), c);
        c = m(c, b);
        return "assign"in a ? (v(a.assign, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("function", "fetch", function(a, b) {
        var c = jSmart.prototype.getFile(a.__get("file", null, 0));
        return "assign"in a ? (v(a.assign, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("function", "html_checkboxes", function(a, b) {
        var c = a.__get("type", "checkbox")
          , d = a.__get("name", c);
        "checkbox" == c && (d += "[]");
        var e = a.__get("values", a.options), f = a.__get("options", []), g = "options"in a, h;
        if (!g)
            for (h in a.output)
                f.push(a.output[h]);
        var k = a.__get("selected", !1)
          , x = a.__get("separator", "")
          , m = Boolean(a.__get("labels", !0))
          , n = []
          , p = 0
          , l = "";
        for (h in e)
            e.hasOwnProperty(h) && (l = m ? "<label>" : "",
            l += '<input type="' + c + '" name="' + d + '" value="' + (g ? h : e[h]) + '" ',
            k == (g ? h : e[h]) && (l += 'checked="checked" '),
            l += "/>" + f[g ? h : p++],
            l += m ? "</label>" : "",
            l += x,
            n.push(l));
        return "assign"in a ? (v(a.assign, n, b),
        "") : n.join("\n")
    });
    jSmart.prototype.registerPlugin("function", "html_image", function(a, b) {
        var c = a.__get("file", null), d = a.__get("width", !1), e = a.__get("height", !1), f = a.__get("alt", ""), g = a.__get("href", !1), h = {
            file: 1,
            width: 1,
            height: 1,
            alt: 1,
            href: 1,
            basedir: 1,
            path_prefix: 1
        }, c = '<img src="' + a.__get("path_prefix", "") + c + '" alt="' + f + '"' + (d ? ' width="' + d + '"' : "") + (e ? ' height="' + e + '"' : ""), k;
        for (k in a)
            a.hasOwnProperty(k) && "string" == typeof a[k] && (k in h || (c += " " + k + '="' + a[k] + '"'));
        c += " />";
        return g ? '<a href="' + g + '">' + c + "</a>" : c
    });
    jSmart.prototype.registerPlugin("function", "html_options", function(a, b) {
        var c = a.__get("values", a.options), d = a.__get("options", []), e = "options"in a, f;
        if (!e)
            for (f in a.output)
                d.push(a.output[f]);
        var g = a.__get("selected", !1)
          , h = []
          , k = ""
          , l = 0;
        for (f in c)
            c.hasOwnProperty(f) && (k = '<option value="' + (e ? f : c[f]) + '"',
            g == (e ? f : c[f]) && (k += ' selected="selected"'),
            k += ">" + d[e ? f : l++] + "</option>",
            h.push(k));
        c = a.__get("name", !1);
        return (c ? '<select name="' + c + '">\n' + h.join("\n") + "\n</select>" : h.join("\n")) + "\n"
    });
    jSmart.prototype.registerPlugin("function", "html_radios", function(a, b) {
        a.type = "radio";
        return u.html_checkboxes.process(a, b)
    });
    jSmart.prototype.registerPlugin("function", "html_select_date", function(a, b) {
        var c = a.__get("prefix", "Date_"), d = "January February March April May June July August September October November December".split(" "), e;
        e = "" + ('<select name="' + c + 'Month">\n');
        for (var f = 0, f = 0; f < d.length; ++f)
            e += '<option value="' + f + '">' + d[f] + "</option>\n";
        e = e + "</select>\n" + ('<select name="' + c + 'Day">\n');
        for (f = 0; 31 > f; ++f)
            e += '<option value="' + f + '">' + f + "</option>\n";
        return e += "</select>\n"
    });
    jSmart.prototype.registerPlugin("function", "html_table", function(a, b) {
        var c = [], d;
        if (a.loop instanceof Array)
            c = a.loop;
        else
            for (d in a.loop)
                a.loop.hasOwnProperty(d) && c.push(a.loop[d]);
        var e = a.__get("rows", !1)
          , f = a.__get("cols", !1);
        f || (f = e ? Math.ceil(c.length / e) : 3);
        var g = [];
        if (isNaN(f)) {
            if ("object" == typeof f)
                for (d in f)
                    f.hasOwnProperty(d) && g.push(f[d]);
            else
                g = f.split(/\s*,\s*/);
            f = g.length
        }
        var e = e ? e : Math.ceil(c.length / f)
          , h = a.__get("inner", "cols");
        d = a.__get("caption", "");
        var k = a.__get("table_attr", 'border="1"')
          , l = a.__get("th_attr", !1);
        l && "object" != typeof l && (l = [l]);
        var n = a.__get("tr_attr", !1);
        n && "object" != typeof n && (n = [n]);
        var m = a.__get("td_attr", !1);
        m && "object" != typeof m && (m = [m]);
        for (var p = a.__get("trailpad", "&nbsp;"), q = a.__get("hdir", "right"), v = a.__get("vdir", "down"), r = "", t = 0; t < e; ++t) {
            for (var r = r + ("<tr" + (n ? " " + n[t % n.length] : "") + ">\n"), u = 0; u < f; ++u)
                var w = "cols" == h ? ("down" == v ? t : e - 1 - t) * f + ("right" == q ? u : f - 1 - u) : ("right" == q ? u : f - 1 - u) * e + ("down" == v ? t : e - 1 - t)
                  , r = r + ("<td" + (m ? " " + m[u % m.length] : "") + ">" + (w < c.length ? c[w] : p) + "</td>\n");
            r += "</tr>\n"
        }
        c = "";
        if (g.length) {
            c = "\n<thead><tr>";
            for (e = 0; e < g.length; ++e)
                c += "\n<th" + (l ? " " + l[e % l.length] : "") + ">" + g["right" == q ? e : g.length - 1 - e] + "</th>";
            c += "\n</tr></thead>"
        }
        return "<table " + k + ">" + (d ? "\n<caption>" + d + "</caption>" : "") + c + "\n<tbody>\n" + r + "</tbody>\n</table>\n"
    });
    jSmart.prototype.registerPlugin("function", "include", function(a, b) {
        var c = a.__get("file", null, 0)
          , d = F({}, b, a);
        d.smarty.template = c;
        c = m(W(c, [], 0 <= C(a, "nocache")), d);
        return "assign"in a ? (v(a.assign, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("function", "include_javascript", function(a, b) {
        var c = a.__get("file", null, 0);
        if (a.__get("once", !0) && c in R)
            return "";
        R[c] = !0;
        c = M(jSmart.prototype.getJavascript(c), {
            $this: b
        });
        return "assign"in a ? (v(a.assign, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("function", "include_php", function(a, b) {
        return u.include_javascript.process(a, b)
    });
    jSmart.prototype.registerPlugin("function", "insert", function(a, b) {
        var c = {}, d;
        for (d in a)
            a.hasOwnProperty(d) && isNaN(d) && a[d] && "string" == typeof a[d] && "name" != d && "assign" != d && "script" != d && (c[d] = a[d]);
        d = "insert_";
        "script"in a && (eval(jSmart.prototype.getJavascript(a.script)),
        d = "smarty_insert_");
        c = eval(d + a.__get("name", null, 0))(c, b);
        return "assign"in a ? (v(a.assign, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("block", "javascript", function(a, b, c, d) {
        c.$this = c;
        M(b, c);
        delete c.$this;
        return ""
    });
    jSmart.prototype.registerPlugin("function", "config_load", function(a, b) {
        jSmart.prototype.configLoad(jSmart.prototype.getConfig(a.__get("file", null, 0)), a.__get("section", "", 1), b);
        return ""
    });
    jSmart.prototype.registerPlugin("function", "mailto", function(a, b) {
        var c = a.__get("address", null)
          , d = a.__get("encode", "none")
          , e = a.__get("text", c)
          , f = jSmart.prototype.PHPJS("rawurlencode", "mailto").rawurlencode(a.__get("cc", "")).replace("%40", "@")
          , g = jSmart.prototype.PHPJS("rawurlencode", "mailto").rawurlencode(a.__get("bcc", "")).replace("%40", "@")
          , h = jSmart.prototype.PHPJS("rawurlencode", "mailto").rawurlencode(a.__get("followupto", "")).replace("%40", "@")
          , k = jSmart.prototype.PHPJS("rawurlencode", "mailto").rawurlencode(a.__get("subject", ""))
          , l = jSmart.prototype.PHPJS("rawurlencode", "mailto").rawurlencode(a.__get("newsgroups", ""))
          , n = a.__get("extra", "")
          , c = c + (f ? "?cc=" + f : "") + (g ? (f ? "&" : "?") + "bcc=" + g : "")
          , c = c + (k ? (f || g ? "&" : "?") + "subject=" + k : "")
          , c = c + (l ? (f || g || k ? "&" : "?") + "newsgroups=" + l : "")
          , c = c + (h ? (f || g || k || l ? "&" : "?") + "followupto=" + h : "");
        s = '<a href="mailto:' + c + '" ' + n + ">" + e + "</a>";
        if ("javascript" == d) {
            s = "document.write('" + s + "');";
            e = "";
            for (d = 0; d < s.length; ++d)
                e += "%" + jSmart.prototype.PHPJS("bin2hex", "mailto").bin2hex(s.substr(d, 1));
            return '<script type="text/javascript">eval(unescape(\'' + e + "'))\x3c/script>"
        }
        if ("javascript_charcode" == d) {
            e = [];
            for (d = 0; d < s.length; ++d)
                e.push(jSmart.prototype.PHPJS("ord", "mailto").ord(s.substr(d, 1)));
            return '<script type="text/javascript" language="javascript">\n\x3c!--\n{document.write(String.fromCharCode(' + e.join(",") + "))}\n//--\x3e\n\x3c/script>\n"
        }
        if ("hex" == d) {
            if (c.match(/^.+\?.+$/))
                throw Error("mailto: hex encoding does not work with extra attributes. Try javascript.");
            f = "";
            for (d = 0; d < c.length; ++d)
                f = c.substr(d, 1).match(/\w/) ? f + ("%" + jSmart.prototype.PHPJS("bin2hex", "mailto").bin2hex(c.substr(d, 1))) : f + c.substr(d, 1);
            c = "";
            for (d = 0; d < e.length; ++d)
                c += "&#x" + jSmart.prototype.PHPJS("bin2hex", "mailto").bin2hex(e.substr(d, 1)) + ";";
            return '<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;' + f + '" ' + n + ">" + c + "</a>"
        }
        return s
    });
    jSmart.prototype.registerPlugin("function", "math", function(a, b) {
        with (Math)
            with (a)
                var c = eval(a.__get("equation", null).replace(/pi\(\s*\)/g, "PI"));
        "format"in a && (c = jSmart.prototype.PHPJS("sprintf", "math").sprintf(a.format, c));
        return "assign"in a ? (v(a.assign, c, b),
        "") : c
    });
    jSmart.prototype.registerPlugin("block", "nocache", function(a, b, c, d) {
        return b
    });
    jSmart.prototype.registerPlugin("block", "textformat", function(a, b, c, d) {
        if (!b)
            return "";
        d = a.__get("wrap", 80);
        var e = a.__get("wrap_char", "\n")
          , f = a.__get("wrap_cut", !1)
          , g = a.__get("indent_char", " ")
          , h = a.__get("indent", 0)
          , k = Array(h + 1).join(g)
          , l = a.__get("indent_first", 0)
          , g = Array(l + 1).join(g);
        "email" == a.__get("style", "") && (d = 72);
        b = b.split("\n");
        for (var n = 0; n < b.length; ++n) {
            var m = b[n];
            m && (m = m.replace(/^\s+|\s+$/, "").replace(/\s+/g, " "),
            l && (m = g + m),
            m = D.wordwrap(m, d - h, e, f),
            h && (m = m.replace(/^/mg, k)),
            b[n] = m)
        }
        d = b.join(e + e);
        return "assign"in a ? (v(a.assign, d, c),
        "") : d
    });
    jSmart.prototype.registerPlugin("modifier", "capitalize", function(a, b) {
        for (var c = RegExp(b ? "[\\W\\d]+" : "\\W+"), d = null, e = "", d = a.match(c); d; d = a.match(c)) {
            var f = a.slice(0, d.index)
              , e = f.match(/\d/) ? e + f : e + (f.charAt(0).toUpperCase() + f.slice(1))
              , e = e + a.slice(d.index, d.index + d[0].length);
            a = a.slice(d.index + d[0].length)
        }
        return a.match(/\d/) ? e + a : e + a.charAt(0).toUpperCase() + a.slice(1)
    });
    jSmart.prototype.registerPlugin("modifier", "cat", function(a, b) {
        return a + (b ? b : "")
    });
    jSmart.prototype.registerPlugin("modifier", "count", function(a, b) {
        if (null === a || "undefined" === typeof a)
            return 0;
        if (a.constructor !== Array && a.constructor !== Object)
            return 1;
        b = Boolean(b);
        var c, d = 0;
        for (c in a)
            a.hasOwnProperty(c) && (d++,
            b && a[c] && (a[c].constructor === Array || a[c].constructor === Object) && (d += D.count(a[c], !0)));
        return d
    });
    jSmart.prototype.registerPlugin("modifier", "count_characters", function(a, b) {
        return b ? a.length : a.replace(/\s/g, "").length
    });
    jSmart.prototype.registerPlugin("modifier", "count_paragraphs", function(a) {
        return (a = a.match(/\n+/g)) ? a.length + 1 : 1
    });
    jSmart.prototype.registerPlugin("modifier", "count_sentences", function(a) {
        return (a = a.match(/[^\s]\.(?!\w)/g)) ? a.length : 0
    });
    jSmart.prototype.registerPlugin("modifier", "count_words", function(a) {
        return (a = a.match(/\w+/g)) ? a.length : 0
    });
    jSmart.prototype.registerPlugin("modifier", "date_format", function(a, b, c) {
        return jSmart.prototype.PHPJS("strftime", "date_format").strftime(b ? b : "%b %e, %Y", jSmart.prototype.makeTimeStamp(a ? a : c))
    });
    jSmart.prototype.registerPlugin("modifier", "defaultValue", function(a, b) {
        return a && "null" != a && "undefined" != a ? a : b ? b : ""
    });
    jSmart.prototype.registerPlugin("modifier", "escape", function(a, b, c, d) {
        a = new String(a);
        c = c || "UTF-8";
        d = "undefined" != typeof d ? Boolean(d) : !0;
        switch (b || "html") {
        case "html":
            return d && (a = a.replace(/&/g, "&amp;")),
            a.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/'/g, "&#039;").replace(/"/g, "&quot;");
        case "htmlall":
            return jSmart.prototype.PHPJS("htmlentities", "escape").htmlentities(a, 3, c);
        case "url":
            return jSmart.prototype.PHPJS("rawurlencode", "escape").rawurlencode(a);
        case "urlpathinfo":
            return jSmart.prototype.PHPJS("rawurlencode", "escape").rawurlencode(a).replace(/%2F/g, "/");
        case "quotes":
            return a.replace(/(^|[^\\])'/g, "$1\\'");
        case "hex":
            b = "";
            for (c = 0; c < a.length; ++c)
                b += "%" + jSmart.prototype.PHPJS("bin2hex", "escape").bin2hex(a.substr(c, 1));
            return b;
        case "hexentity":
            b = "";
            for (c = 0; c < a.length; ++c)
                b += "&#x" + jSmart.prototype.PHPJS("bin2hex", "escape").bin2hex(a.substr(c, 1)).toUpperCase() + ";";
            return b;
        case "decentity":
            b = "";
            for (c = 0; c < a.length; ++c)
                b += "&#" + jSmart.prototype.PHPJS("ord", "escape").ord(a.substr(c, 1)) + ";";
            return b;
        case "mail":
            return a.replace(/@/g, " [AT] ").replace(/[.]/g, " [DOT] ");
        case "nonstd":
            b = "";
            for (c = 0; c < a.length; ++c)
                d = jSmart.prototype.PHPJS("ord", "escape").ord(a.substr(c, 1)),
                b = 126 <= d ? b + ("&#" + d + ";") : b + a.substr(c, 1);
            return b;
        case "javascript":
            return a.replace(/\\/g, "\\\\").replace(/'/g, "\\'").replace(/"/g, '\\"').replace(/\r/g, "\\r").replace(/\n/g, "\\n").replace(/<\//g, "</")
        }
        return a
    });
    jSmart.prototype.registerPlugin("modifier", "indent", function(a, b, c) {
        b = b ? b : 4;
        c = c ? c : " ";
        for (var d = ""; b--; )
            d += c;
        b = a.match(/\n+$/);
        return d + a.replace(/\n+$/, "").replace(/\n/g, "\n" + d) + (b ? b[0] : "")
    });
    jSmart.prototype.registerPlugin("modifier", "lower", function(a) {
        return a.toLowerCase()
    });
    jSmart.prototype.registerPlugin("modifier", "nl2br", function(a) {
        return a.replace(/\n/g, "<br />\n")
    });
    jSmart.prototype.registerPlugin("modifier", "regex_replace", function(a, b, c) {
        b = b.match(/^ *\/(.*)\/(.*) *$/);
        return (new String(a)).replace(RegExp(b[1], "g" + (1 < b.length ? b[2] : "")), c)
    });
    jSmart.prototype.registerPlugin("modifier", "replace", function(a, b, c) {
        if (!b)
            return a;
        a = new String(a);
        b = new String(b);
        c = new String(c);
        for (var d = "", e = -1, e = a.indexOf(b); 0 <= e; e = a.indexOf(b))
            d += a.slice(0, e) + c,
            e += b.length,
            a = a.slice(e);
        return d + a
    });
    jSmart.prototype.registerPlugin("modifier", "spacify", function(a, b) {
        b || (b = " ");
        return a.replace(/(\n|.)(?!$)/g, "$1" + b)
    });
    jSmart.prototype.registerPlugin("modifier", "string_format", function(a, b) {
        return jSmart.prototype.PHPJS("sprintf", "string_format").sprintf(b, a)
    });
    jSmart.prototype.registerPlugin("modifier", "strip", function(a, b) {
        b = b ? b : " ";
        return (new String(a)).replace(/[\s]+/g, b)
    });
    jSmart.prototype.registerPlugin("modifier", "strip_tags", function(a, b) {
        b = null == b ? !0 : b;
        return (new String(a)).replace(/<[^>]*?>/g, b ? " " : "")
    });
    jSmart.prototype.registerPlugin("modifier", "truncate", function(a, b, c, d, e) {
        b = b ? b : 80;
        c = null != c ? c : "...";
        if (a.length <= b)
            return a;
        b -= Math.min(b, c.length);
        if (e)
            return a.slice(0, Math.floor(b / 2)) + c + a.slice(a.length - Math.floor(b / 2));
        d || (a = a.slice(0, b + 1).replace(/\s+?(\S+)?$/, ""));
        return a.slice(0, b) + c
    });
    jSmart.prototype.registerPlugin("modifier", "upper", function(a) {
        return a.toUpperCase()
    });
    jSmart.prototype.registerPlugin("modifier", "wordwrap", function(a, b, c, d) {
        b = b || 80;
        c = c || "\n";
        a = a.split("\n");
        for (var e = 0; e < a.length; ++e) {
            for (var f = a[e], g = ""; f.length > b; ) {
                for (var h = 0, k = f.slice(h).match(/\s+/); k && h + k.index <= b; k = f.slice(h).match(/\s+/))
                    h += k.index + k[0].length;
                h = h || (d ? b : k ? k.index + k[0].length : f.length);
                g += f.slice(0, h).replace(/\s+$/, "");
                h < f.length && (g += c);
                f = f.slice(h)
            }
            a[e] = g + f
        }
        return a.join("\n")
    });
    String.prototype.fetch = function(a) {
        return (new jSmart(this)).fetch(a)
    }
}
)();
//XXX: Extend jSmart Custorm
jSmart.prototype.registerPlugin('modifier', 'upper', function(s) {
    return s.toUpperCase();
});
jSmart.prototype.registerPlugin('modifier', 'shuffle_array', function(s) {
    return s.sort(function() {
        return 0.5 - Math.random()
    });
});
jSmart.prototype.registerPlugin('modifier', 'random_clone_array', function(s) {
    var _clone = s.slice(0);
    return _clone.sort(function() {
        return 0.5 - Math.random()
    });
});
jSmart.prototype.registerPlugin('modifier', 'json_encode', function(s) {
    return JSON.stringify(s);
});
jSmart.prototype.registerPlugin('modifier', 'isEmptyObject', function(s) {
    return $.isEmptyObject(s);
});
jSmart.prototype.registerPlugin('modifier', 'isPlainObject', function(s) {
    return $.isPlainObject(s);
});
jSmart.prototype.registerPlugin('function', 'join', function(params, data) {
    return params.array.join(params.join_char);
});
jSmart.prototype.registerPlugin('function', 'merge', function(params, data) {
    return $.merge(params.arr1, params.arr2)
});
jSmart.prototype.registerPlugin('modifier', 'split_array', function(s) {
    return s.split(' ')
});
//XXX: JPlayer Audio
var jpswf = "//www.tienganh123.com/file/learn/child/dungchung/lib_new_en/Jplayer.swf";
$.fn.jpasb = function(options) {
    var $this = $(this);
    var defaults = {
        theme: "seekbar",
        index: $this.attr('id') || 0,
        parent: undefined
    };
    var settings = $.extend({}, defaults, options);
    $this.attr('theme', settings.theme).addClass('jp-audio');
    if (settings.theme == "circle") {
        if (settings.parent) {
            $(settings.parent).append('<div id="jp_container_' + settings.index + '" class="jp-audio jpcircle">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface jp-circle">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '<ul>' + '</div></div>');
        } else {
            $this.after('<div id="jp_container_' + settings.index + '" class="jp-audio jpcircle">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface jp-circle">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '<ul>' + '</div></div>');
        }
    } else if (settings.theme == "seekbar") {
        if (settings.parent) {
            $(settings.parent).append('<div id="jp_container_' + settings.index + '" class="jp-audio">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '</ul>' + '<div class="jp-border"></div>' + '<div class="jp-progress-slide"></div>' + '</div>' + '<div class="jp-time-holder">' + '<div class="jp-current-time">00:00</div>' + '</div>' + '</div>' + '<div class="jp-no-solution" style="display: none;"><span>Update Required</span> To play the media you will need to either update your browser to a recent version or update your <a target="_blank" href="http://get.adobe.com/flashplayer/">Flash plugin</a>.</div>' + '</div>');
        } else {
            $this.after('<div id="jp_container_' + settings.index + '" class="jp-audio">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '</ul>' + '<div class="jp-border"></div>' + '<div class="jp-progress-slide"></div>' + '</div>' + '<div class="jp-time-holder">' + '<div class="jp-current-time">00:00</div>' + '</div>' + '</div>' + '<div class="jp-no-solution" style="display: none;"><span>Update Required</span> To play the media you will need to either update your browser to a recent version or update your <a target="_blank" href="http://get.adobe.com/flashplayer/">Flash plugin</a>.</div>' + '</div>');
        }
    }
    var myPlayerData, fixFlash_mp4, fixFlash_mp4_id, ignore_timeupdate, options = {
        swfPath: jpswf,
        supplied: "mp3",
        preload: "auto",
        volume: 1,
        wmode: "window",
        solution: "html,flash",
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                mp3: $this.attr('src')
            });
        },
        timeupdate: function(event) {
            if (!ignore_timeupdate) {
                myControl.progress.slider("value", event.jPlayer.status.currentPercentAbsolute);
            }
        },
        volumechange: function(event) {
            if (event.jPlayer.options.muted) {
                myControl.volume.slider("value", 0);
            } else {
                myControl.volume.slider("value", event.jPlayer.options.volume);
            }
        },
        play: function() {
            $(this).jPlayer("pauseOthers");
            if ($(this).attr('theme') == "circle") {
                $(this).jPlayer("playHead", 0);
            }
        },
        stop: function() {
            $(this).jPlayer("playHead", 0);
        },
        ended: function() {
            $(this).jPlayer("playHead", 0);
        },
        cssSelectorAncestor: '#jp_container_' + settings.index,
    }, myControl = {
        progress: $(options.cssSelectorAncestor + " .jp-progress-slide"),
        volume: $(options.cssSelectorAncestor + " .jp-volume-slide")
    };
    $this.jPlayer(options);
    myPlayerData = $this.data("jPlayer");
    myControl.progress.slider({
        animate: "fast",
        max: 100,
        range: "min",
        step: 0.1,
        value: 0,
        slide: function(event, ui) {
            var sp = myPlayerData.status.seekPercent;
            if (sp > 0) {
                if (fixFlash_mp4) {
                    ignore_timeupdate = true;
                    clearTimeout(fixFlash_mp4_id);
                    fixFlash_mp4_id = setTimeout(function() {
                        ignore_timeupdate = false;
                    }, 1000);
                }
                $this.jPlayer("playHead", ui.value * (100 / sp));
            } else {
                setTimeout(function() {
                    myControl.progress.slider("value", 0);
                }, 0);
            }
        }
    });
}
$.fn.jpiah = function(options) {
    var defaults = {
        sr: '//www.tienganh123.com/file/learn/child/dungchung/lib_new_en/init',
        id: 'amn',
        parent: 'body'
    };
    var settings = $.extend({}, defaults, options);
    var jpahs = "html,flash";
    $(settings.parent).append('<div src="' + settings.sr + '.mp3" id="' + settings.id.replace(/\s+/g, '') + '" class="soundJplayer" init="' + settings.init + '" parent="' + settings.parent + '"></div>');
    $('#' + settings.id).attr({
        solution: 'jp'
    });
    var options = {
        swfPath: jpswf,
        supplied: "mp3",
        preload: "auto",
        volume: 1,
        wmode: "window",
        solution: jpahs,
        flashCanPlay: true,
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                mp3: settings.sr + '.mp3'
            })
        },
        loadstart: function(event) {},
        loadeddata: function(event) {},
        loadedmetadata: function(event) {},
        error: function(event) {
            console.log(event);
            $('#status').append('<p>error : - ' + event.target.id + ' : ' + JSON.stringify(event.jPlayer.error) + '</p>');
        },
        progress: function(event) {
            if (settings.canplay && !settings.callback_canplay && event.jPlayer.flash.used) {
                settings.callback_canplay = true;
                settings.canplay();
            }
        },
        canplay: function(event) {
            if (settings.canplay && !settings.callback_canplay && !event.jPlayer.flash.used) {
                settings.callback_canplay = true;
                settings.canplay();
            }
        },
    }
    $('#' + settings.id.replace(/\s+/g, '')).jPlayer(options);
}
$.fn.jppah = function(options) {
    var defaults = {
        stream: 0,
        reload: false,
        stop: undefined,
        callback: undefined
    };
    var settings = $.extend({}, defaults, options);
    if (settings.stopasm) {
        soundManager.stopAll();
    }
    ;if (settings.stopajp) {
        $(".soundJplayer:not(#" + settings.id + ")").jPlayer("stop");
    }
    ;if (settings.stopvjp) {
        $(".jp-video").jPlayer("stop");
    }
    ;if (settings.stopall) {
        $.fn.saah();
    }
    ;if (navigator.userAgent.match(/(Android)/)) {
        $('#' + settings.id).jPlayer("stop").jPlayer("play");
    } else if (navigator.userAgent.match(/(iPhone|iPod|iPad)/)) {
        $('#' + settings.id).jPlayer("stop").jPlayer("play");
    } else if (navigator.userAgent.match(/(IEMobile)/)) {
        $('#' + settings.id).jPlayer("stop").jPlayer("play");
    } else {
        $('#' + settings.id).jPlayer("stop").jPlayer('play', settings.stream);
    }
    $('#' + settings.id).unbind($.jPlayer.event.play).bind($.jPlayer.event.play, function() {
        if (settings.onplay) {
            settings.onplay();
        }
    });
    $('#' + settings.id).unbind($.jPlayer.event.ended).bind($.jPlayer.event.ended, function() {
        $(document).trigger(settings.id + '_ended');
        if (settings.callback) {
            settings.callback();
        }
        ;if ($.isNumeric(settings.loops) && settings.loops != 0) {
            settings.loops = (settings.loops != 0) ? (settings.loops - 1) : 0;
            $.fn.jppah(settings);
        }
        ;
    })
}
$.fn.jpsah = function(options) {
    if (jQuery.isEmptyObject(options)) {
        $(".jp-audio").jPlayer("stop");
        $(".soundJplayer").jPlayer("stop");
        $(".jp-video").jPlayer("stop");
    } else if (options.id) {
        $('#' + options.id).jPlayer("stop");
    } else {
        if (options.hidden) {
            $(".soundJplayer").jPlayer("stop");
        }
        if (options.seekbar) {
            $(".jp-audio").jPlayer("stop");
        }
        if (options.video) {
            $(".jp-video").jPlayer("stop");
        }
    }
}
;
//XXX: SoundManager 2 - V2.97a.20140901
(function(h, g) {
    function Q(P, Q) {
        function ha(b) {
            return c.preferFlash && F && !c.ignoreFlash && c.flash[b] !== g && c.flash[b]
        }
        function r(b) {
            return function(d) {
                var e = this._s;
                !e || !e._a ? (e && e.id ? c._wD(e.id + ": Ignoring " + d.type) : c._wD(sb + "Ignoring " + d.type),
                d = null) : d = b.call(this, d);
                return d
            }
        }
        this.setupOptions = {
            url: P || null,
            flashVersion: 8,
            debugMode: !0,
            debugFlash: !1,
            useConsole: !0,
            consoleOnly: !0,
            waitForWindowLoad: !1,
            bgColor: "#ffffff",
            useHighPerformance: !1,
            flashPollingInterval: null,
            html5PollingInterval: null,
            flashLoadTimeout: 1E3,
            wmode: null,
            allowScriptAccess: "always",
            useFlashBlock: !1,
            useHTML5Audio: !0,
            html5Test: /^(probably|maybe)$/i,
            preferFlash: !1,
            noSWFCache: !1,
            idPrefix: "sound"
        };
        this.defaultOptions = {
            autoLoad: !1,
            autoPlay: !1,
            from: null,
            loops: 1,
            onid3: null,
            onload: null,
            whileloading: null,
            onplay: null,
            onpause: null,
            onresume: null,
            whileplaying: null,
            onposition: null,
            onstop: null,
            onfailure: null,
            onfinish: null,
            multiShot: !0,
            multiShotEvents: !1,
            position: null,
            pan: 0,
            stream: !0,
            to: null,
            type: null,
            usePolicyFile: !1,
            volume: 100
        };
        this.flash9Options = {
            isMovieStar: null,
            usePeakData: !1,
            useWaveformData: !1,
            useEQData: !1,
            onbufferchange: null,
            ondataerror: null
        };
        this.movieStarOptions = {
            bufferTime: 3,
            serverURL: null,
            onconnect: null,
            duration: null
        };
        this.audioFormats = {
            mp3: {
                type: ['audio/mpeg; codecs\x3d"mp3"', "audio/mpeg", "audio/mp3", "audio/MPA", "audio/mpa-robust"],
                required: !0
            },
            mp4: {
                related: ["aac", "m4a", "m4b"],
                type: ['audio/mp4; codecs\x3d"mp4a.40.2"', "audio/aac", "audio/x-m4a", "audio/MP4A-LATM", "audio/mpeg4-generic"],
                required: !1
            },
            ogg: {
                type: ["audio/ogg; codecs\x3dvorbis"],
                required: !1
            },
            opus: {
                type: ["audio/ogg; codecs\x3dopus", "audio/opus"],
                required: !1
            },
            wav: {
                type: ['audio/wav; codecs\x3d"1"', "audio/wav", "audio/wave", "audio/x-wav"],
                required: !1
            }
        };
        this.movieID = "sm2-container";
        this.id = Q || "sm2movie";
        this.debugID = "soundmanager-debug";
        this.debugURLParam = /([#?&])debug=1/i;
        this.versionNumber = "V2.97a.20140901";
        this.altURL = this.movieURL = this.version = null;
        this.enabled = this.swfLoaded = !1;
        this.oMC = null;
        this.sounds = {};
        this.soundIDs = [];
        this.didFlashBlock = this.muted = !1;
        this.filePattern = null;
        this.filePatterns = {
            flash8: /\.mp3(\?.*)?$/i,
            flash9: /\.mp3(\?.*)?$/i
        };
        this.features = {
            buffering: !1,
            peakData: !1,
            waveformData: !1,
            eqData: !1,
            movieStar: !1
        };
        this.sandbox = {
            type: null,
            types: {
                remote: "remote (domain-based) rules",
                localWithFile: "local with file access (no internet access)",
                localWithNetwork: "local with network (internet access only, no local access)",
                localTrusted: "local, trusted (local+internet access)"
            },
            description: null,
            noRemote: null,
            noLocal: null
        };
        this.html5 = {
            usingFlash: null
        };
        this.flash = {};
        this.ignoreFlash = this.html5Only = !1;
        var Va, c = this, Wa = null, l = null, sb = "HTML5::", y, u = navigator.userAgent, W = h.location.href.toString(), m = document, xa, Xa, ya, n, G = [], za = !0, B, X = !1, Y = !1, q = !1, x = !1, ia = !1, p, tb = 0, Z, z, Aa, R, Ba, M, S, T, Ya, Ca, Da, ja, I, ka, Ea, N, Fa, $, la, ma, U, Za, Ga, $a = ["log", "info", "warn", "error"], ab, Ha, bb, aa = null, Ia = null, s, Ja, V, cb, na, oa, J, v, ba = !1, Ka = !1, db, eb, fb, pa = 0, ca = null, qa, O = [], da, t = null, gb, ra, ea, K, sa, La, hb, w, ib = Array.prototype.slice, D = !1, Ma, F, Na, jb, H, kb, Oa, ta, lb = 0, ua = u.match(/(ipad|iphone|ipod)/i), mb = u.match(/android/i), L = u.match(/msie/i), ub = u.match(/webkit/i), va = u.match(/safari/i) && !u.match(/chrome/i), Pa = u.match(/opera/i), Qa = u.match(/(mobile|pre\/|xoom)/i) || ua || mb, Ra = !W.match(/usehtml5audio/i) && !W.match(/sm2\-ignorebadua/i) && va && !u.match(/silk/i) && u.match(/OS X 10_6_([3-7])/i), fa = h.console !== g && console.log !== g, Sa = m.hasFocus !== g ? m.hasFocus() : null, wa = va && (m.hasFocus === g || !m.hasFocus()), nb = !wa, ob = /(mp3|mp4|mpa|m4a|m4b)/i, ga = m.location ? m.location.protocol.match(/http/i) : null, pb = !ga ? "http://" : "", qb = /^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i, rb = "mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "), vb = RegExp("\\.(" + rb.join("|") + ")(\\?.*)?$", "i");
        this.mimePattern = /^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;
        this.useAltURL = !ga;
        var Ta;
        try {
            Ta = Audio !== g && (Pa && opera !== g && 10 > opera.version() ? new Audio(null) : new Audio).canPlayType !== g
        } catch (wb) {
            Ta = !1
        }
        this.hasHTML5 = Ta;
        this.setup = function(b) {
            var d = !c.url;
            b !== g && (q && t && c.ok() && (b.flashVersion !== g || b.url !== g || b.html5Test !== g)) && J(s("setupLate"));
            Aa(b);
            b && (d && ($ && b.url !== g) && c.beginDelayedInit(),
            !$ && (b.url !== g && "complete" === m.readyState) && setTimeout(N, 1));
            return c
        }
        ;
        this.supported = this.ok = function() {
            return t ? q && !x : c.useHTML5Audio && c.hasHTML5
        }
        ;
        this.getMovie = function(c) {
            return y(c) || m[c] || h[c]
        }
        ;
        this.createSound = function(b, d) {
            function e() {
                f = na(f);
                c.sounds[f.id] = new Va(f);
                c.soundIDs.push(f.id);
                return c.sounds[f.id]
            }
            var a, f;
            a = null;
            a = "soundManager.createSound(): " + s(!q ? "notReady" : "notOK");
            if (!q || !c.ok())
                return J(a),
                !1;
            d !== g && (b = {
                id: b,
                url: d
            });
            f = z(b);
            f.url = qa(f.url);
            void 0 === f.id && (f.id = c.setupOptions.idPrefix + lb++);
            f.id.toString().charAt(0).match(/^[0-9]$/) && c._wD("soundManager.createSound(): " + s("badID", f.id), 2);
            c._wD("soundManager.createSound(): " + f.id + (f.url ? " (" + f.url + ")" : ""), 1);
            if (v(f.id, !0))
                return c._wD("soundManager.createSound(): " + f.id + " exists", 1),
                c.sounds[f.id];
            if (ra(f))
                a = e(),
                c._wD(f.id + ": Using HTML5"),
                a._setup_html5(f);
            else {
                if (c.html5Only)
                    return c._wD(f.id + ": No HTML5 support for this sound, and no Flash. Exiting."),
                    e();
                if (c.html5.usingFlash && f.url && f.url.match(/data\:/i))
                    return c._wD(f.id + ": data: URIs not supported via Flash. Exiting."),
                    e();
                8 < n && (null === f.isMovieStar && (f.isMovieStar = !(!f.serverURL && !(f.type && f.type.match(qb) || f.url && f.url.match(vb)))),
                f.isMovieStar && (c._wD("soundManager.createSound(): using MovieStar handling"),
                1 < f.loops && p("noNSLoop")));
                f = oa(f, "soundManager.createSound(): ");
                a = e();
                8 === n ? l._createSound(f.id, f.loops || 1, f.usePolicyFile) : (l._createSound(f.id, f.url, f.usePeakData, f.useWaveformData, f.useEQData, f.isMovieStar, f.isMovieStar ? f.bufferTime : !1, f.loops || 1, f.serverURL, f.duration || null, f.autoPlay, !0, f.autoLoad, f.usePolicyFile),
                f.serverURL || (a.connected = !0,
                f.onconnect && f.onconnect.apply(a)));
                !f.serverURL && (f.autoLoad || f.autoPlay) && a.load(f)
            }
            !f.serverURL && f.autoPlay && a.play();
            return a
        }
        ;
        this.destroySound = function(b, d) {
            if (!v(b))
                return !1;
            var e = c.sounds[b], a;
            e._iO = {};
            e.stop();
            e.unload();
            for (a = 0; a < c.soundIDs.length; a++)
                if (c.soundIDs[a] === b) {
                    c.soundIDs.splice(a, 1);
                    break
                }
            d || e.destruct(!0);
            delete c.sounds[b];
            return !0
        }
        ;
        this.load = function(b, d) {
            return !v(b) ? !1 : c.sounds[b].load(d)
        }
        ;
        this.unload = function(b) {
            return !v(b) ? !1 : c.sounds[b].unload()
        }
        ;
        this.onposition = this.onPosition = function(b, d, e, a) {
            return !v(b) ? !1 : c.sounds[b].onposition(d, e, a)
        }
        ;
        this.clearOnPosition = function(b, d, e) {
            return !v(b) ? !1 : c.sounds[b].clearOnPosition(d, e)
        }
        ;
        this.start = this.play = function(b, d) {
            var e = null
              , a = d && !(d instanceof Object);
            if (!q || !c.ok())
                return J("soundManager.play(): " + s(!q ? "notReady" : "notOK")),
                !1;
            if (v(b, a))
                a && (d = {
                    url: d
                });
            else {
                if (!a)
                    return !1;
                a && (d = {
                    url: d
                });
                d && d.url && (c._wD('soundManager.play(): Attempting to create "' + b + '"', 1),
                d.id = b,
                e = c.createSound(d).play())
            }
            null === e && (e = c.sounds[b].play(d));
            return e
        }
        ;
        this.setPosition = function(b, d) {
            return !v(b) ? !1 : c.sounds[b].setPosition(d)
        }
        ;
        this.stop = function(b) {
            if (!v(b))
                return !1;
            c._wD("soundManager.stop(" + b + ")", 1);
            return c.sounds[b].stop()
        }
        ;
        this.stopAll = function() {
            var b;
            c._wD("soundManager.stopAll()", 1);
            for (b in c.sounds)
                c.sounds.hasOwnProperty(b) && c.sounds[b].stop()
        }
        ;
        this.pause = function(b) {
            return !v(b) ? !1 : c.sounds[b].pause()
        }
        ;
        this.pauseAll = function() {
            var b;
            for (b = c.soundIDs.length - 1; 0 <= b; b--)
                c.sounds[c.soundIDs[b]].pause()
        }
        ;
        this.resume = function(b) {
            return !v(b) ? !1 : c.sounds[b].resume()
        }
        ;
        this.resumeAll = function() {
            var b;
            for (b = c.soundIDs.length - 1; 0 <= b; b--)
                c.sounds[c.soundIDs[b]].resume()
        }
        ;
        this.togglePause = function(b) {
            return !v(b) ? !1 : c.sounds[b].togglePause()
        }
        ;
        this.setPan = function(b, d) {
            return !v(b) ? !1 : c.sounds[b].setPan(d)
        }
        ;
        this.setVolume = function(b, d) {
            return !v(b) ? !1 : c.sounds[b].setVolume(d)
        }
        ;
        this.mute = function(b) {
            var d = 0;
            b instanceof String && (b = null);
            if (b) {
                if (!v(b))
                    return !1;
                c._wD('soundManager.mute(): Muting "' + b + '"');
                return c.sounds[b].mute()
            }
            c._wD("soundManager.mute(): Muting all sounds");
            for (d = c.soundIDs.length - 1; 0 <= d; d--)
                c.sounds[c.soundIDs[d]].mute();
            return c.muted = !0
        }
        ;
        this.muteAll = function() {
            c.mute()
        }
        ;
        this.unmute = function(b) {
            b instanceof String && (b = null);
            if (b) {
                if (!v(b))
                    return !1;
                c._wD('soundManager.unmute(): Unmuting "' + b + '"');
                return c.sounds[b].unmute()
            }
            c._wD("soundManager.unmute(): Unmuting all sounds");
            for (b = c.soundIDs.length - 1; 0 <= b; b--)
                c.sounds[c.soundIDs[b]].unmute();
            c.muted = !1;
            return !0
        }
        ;
        this.unmuteAll = function() {
            c.unmute()
        }
        ;
        this.toggleMute = function(b) {
            return !v(b) ? !1 : c.sounds[b].toggleMute()
        }
        ;
        this.getMemoryUse = function() {
            var c = 0;
            l && 8 !== n && (c = parseInt(l._getMemoryUse(), 10));
            return c
        }
        ;
        this.disable = function(b) {
            var d;
            b === g && (b = !1);
            if (x)
                return !1;
            x = !0;
            p("shutdown", 1);
            for (d = c.soundIDs.length - 1; 0 <= d; d--)
                ab(c.sounds[c.soundIDs[d]]);
            Z(b);
            w.remove(h, "load", S);
            return !0
        }
        ;
        this.canPlayMIME = function(b) {
            var d;
            c.hasHTML5 && (d = ea({
                type: b
            }));
            !d && t && (d = b && c.ok() ? !!(8 < n && b.match(qb) || b.match(c.mimePattern)) : null);
            return d
        }
        ;
        this.canPlayURL = function(b) {
            var d;
            c.hasHTML5 && (d = ea({
                url: b
            }));
            !d && t && (d = b && c.ok() ? !!b.match(c.filePattern) : null);
            return d
        }
        ;
        this.canPlayLink = function(b) {
            return b.type !== g && b.type && c.canPlayMIME(b.type) ? !0 : c.canPlayURL(b.href)
        }
        ;
        this.getSoundById = function(b, d) {
            if (!b)
                return null;
            var e = c.sounds[b];
            !e && !d && c._wD('soundManager.getSoundById(): Sound "' + b + '" not found.', 2);
            return e
        }
        ;
        this.onready = function(b, d) {
            if ("function" === typeof b)
                q && c._wD(s("queue", "onready")),
                d || (d = h),
                Ba("onready", b, d),
                M();
            else
                throw s("needFunction", "onready");
            return !0
        }
        ;
        this.ontimeout = function(b, d) {
            if ("function" === typeof b)
                q && c._wD(s("queue", "ontimeout")),
                d || (d = h),
                Ba("ontimeout", b, d),
                M({
                    type: "ontimeout"
                });
            else
                throw s("needFunction", "ontimeout");
            return !0
        }
        ;
        this._writeDebug = function(b, d) {
            var e, a;
            if (!c.debugMode)
                return !1;
            if (fa && c.useConsole) {
                if (d && "object" === typeof d)
                    console.log(b, d);
                else if ($a[d] !== g)
                    console[$a[d]](b);
                else
                    console.log(b);
                if (c.consoleOnly)
                    return !0
            }
            e = y("soundmanager-debug");
            if (!e)
                return !1;
            a = m.createElement("div");
            0 === ++tb % 2 && (a.className = "sm2-alt");
            d = d === g ? 0 : parseInt(d, 10);
            a.appendChild(m.createTextNode(b));
            d && (2 <= d && (a.style.fontWeight = "bold"),
            3 === d && (a.style.color = "#ff3333"));
            e.insertBefore(a, e.firstChild);
            return !0
        }
        ;
        -1 !== W.indexOf("sm2-debug\x3dalert") && (this._writeDebug = function(c) {
            h.alert(c)
        }
        );
        this._wD = this._writeDebug;
        this._debug = function() {
            var b, d;
            p("currentObj", 1);
            b = 0;
            for (d = c.soundIDs.length; b < d; b++)
                c.sounds[c.soundIDs[b]]._debug()
        }
        ;
        this.reboot = function(b, d) {
            c.soundIDs.length && c._wD("Destroying " + c.soundIDs.length + " SMSound object" + (1 !== c.soundIDs.length ? "s" : "") + "...");
            var e, a, f;
            for (e = c.soundIDs.length - 1; 0 <= e; e--)
                c.sounds[c.soundIDs[e]].destruct();
            if (l)
                try {
                    L && (Ia = l.innerHTML),
                    aa = l.parentNode.removeChild(l)
                } catch (g) {
                    p("badRemove", 2)
                }
            Ia = aa = t = l = null;
            c.enabled = $ = q = ba = Ka = X = Y = x = D = c.swfLoaded = !1;
            c.soundIDs = [];
            c.sounds = {};
            lb = 0;
            if (b)
                G = [];
            else
                for (e in G)
                    if (G.hasOwnProperty(e)) {
                        a = 0;
                        for (f = G[e].length; a < f; a++)
                            G[e][a].fired = !1
                    }
            d || c._wD("soundManager: Rebooting...");
            c.html5 = {
                usingFlash: null
            };
            c.flash = {};
            c.html5Only = !1;
            c.ignoreFlash = !1;
            h.setTimeout(function() {
                Ea();
                d || c.beginDelayedInit()
            }, 20);
            return c
        }
        ;
        this.reset = function() {
            p("reset");
            return c.reboot(!0, !0)
        }
        ;
        this.getMoviePercent = function() {
            return l && "PercentLoaded"in l ? l.PercentLoaded() : null
        }
        ;
        this.beginDelayedInit = function() {
            ia = !0;
            N();
            setTimeout(function() {
                if (Ka)
                    return !1;
                ma();
                ka();
                return Ka = !0
            }, 20);
            T()
        }
        ;
        this.destruct = function() {
            c._wD("soundManager.destruct()");
            c.disable(!0)
        }
        ;
        Va = function(b) {
            var d, e, a = this, f, h, k, E, m, q, r = !1, C = [], u = 0, Ua, x, t = null, y;
            e = d = null;
            this.sID = this.id = b.id;
            this.url = b.url;
            this._iO = this.instanceOptions = this.options = z(b);
            this.pan = this.options.pan;
            this.volume = this.options.volume;
            this.isHTML5 = !1;
            this._a = null;
            y = this.url ? !1 : !0;
            this.id3 = {};
            this._debug = function() {
                c._wD(a.id + ": Merged options:", a.options)
            }
            ;
            this.load = function(b) {
                var d = null, e;
                b !== g ? a._iO = z(b, a.options) : (b = a.options,
                a._iO = b,
                t && t !== a.url && (p("manURL"),
                a._iO.url = a.url,
                a.url = null));
                a._iO.url || (a._iO.url = a.url);
                a._iO.url = qa(a._iO.url);
                e = a.instanceOptions = a._iO;
                c._wD(a.id + ": load (" + e.url + ")");
                if (!e.url && !a.url)
                    return c._wD(a.id + ": load(): url is unassigned. Exiting.", 2),
                    a;
                !a.isHTML5 && (8 === n && !a.url && !e.autoPlay) && c._wD(a.id + ": Flash 8 load() limitation: Wait for onload() before calling play().", 1);
                if (e.url === a.url && 0 !== a.readyState && 2 !== a.readyState)
                    return p("onURL", 1),
                    3 === a.readyState && e.onload && ta(a, function() {
                        e.onload.apply(a, [!!a.duration])
                    }),
                    a;
                a.loaded = !1;
                a.readyState = 1;
                a.playState = 0;
                a.id3 = {};
                if (ra(e))
                    d = a._setup_html5(e),
                    d._called_load ? c._wD(a.id + ": Ignoring request to load again") : (a._html5_canplay = !1,
                    a.url !== e.url && (c._wD(p("manURL") + ": " + e.url),
                    a._a.src = e.url,
                    a.setPosition(0)),
                    a._a.autobuffer = "auto",
                    a._a.preload = "auto",
                    a._a._called_load = !0);
                else {
                    if (c.html5Only)
                        return c._wD(a.id + ": No flash support. Exiting."),
                        a;
                    if (a._iO.url && a._iO.url.match(/data\:/i))
                        return c._wD(a.id + ": data: URIs not supported via Flash. Exiting."),
                        a;
                    try {
                        a.isHTML5 = !1;
                        a._iO = oa(na(e));
                        if (a._iO.autoPlay && (a._iO.position || a._iO.from))
                            c._wD(a.id + ": Disabling autoPlay because of non-zero offset case"),
                            a._iO.autoPlay = !1;
                        e = a._iO;
                        8 === n ? l._load(a.id, e.url, e.stream, e.autoPlay, e.usePolicyFile) : l._load(a.id, e.url, !!e.stream, !!e.autoPlay, e.loops || 1, !!e.autoLoad, e.usePolicyFile)
                    } catch (f) {
                        p("smError", 2),
                        B("onload", !1),
                        U({
                            type: "SMSOUND_LOAD_JS_EXCEPTION",
                            fatal: !0
                        })
                    }
                }
                a.url = e.url;
                return a
            }
            ;
            this.unload = function() {
                0 !== a.readyState && (c._wD(a.id + ": unload()"),
                a.isHTML5 ? (E(),
                a._a && (a._a.pause(),
                t = sa(a._a))) : 8 === n ? l._unload(a.id, "about:blank") : l._unload(a.id),
                f());
                return a
            }
            ;
            this.destruct = function(b) {
                c._wD(a.id + ": Destruct");
                a.isHTML5 ? (E(),
                a._a && (a._a.pause(),
                sa(a._a),
                D || k(),
                a._a._s = null,
                a._a = null)) : (a._iO.onfailure = null,
                l._destroySound(a.id));
                b || c.destroySound(a.id, !0)
            }
            ;
            this.start = this.play = function(b, d) {
                var e, f, k, E, h, A = !0, A = null;
                e = a.id + ": play(): ";
                d = d === g ? !0 : d;
                b || (b = {});
                a.url && (a._iO.url = a.url);
                a._iO = z(a._iO, a.options);
                a._iO = z(b, a._iO);
                a._iO.url = qa(a._iO.url);
                a.instanceOptions = a._iO;
                if (!a.isHTML5 && a._iO.serverURL && !a.connected)
                    return a.getAutoPlay() || (c._wD(e + " Netstream not connected yet - setting autoPlay"),
                    a.setAutoPlay(!0)),
                    a;
                ra(a._iO) && (a._setup_html5(a._iO),
                m());
                1 === a.playState && !a.paused && ((f = a._iO.multiShot) ? c._wD(e + "Already playing (multi-shot)", 1) : (c._wD(e + "Already playing (one-shot)", 1),
                a.isHTML5 && a.setPosition(a._iO.position),
                A = a));
                if (null !== A)
                    return A;
                b.url && b.url !== a.url && (!a.readyState && !a.isHTML5 && 8 === n && y ? y = !1 : a.load(a._iO));
                a.loaded ? c._wD(e.substr(0, e.lastIndexOf(":"))) : 0 === a.readyState ? (c._wD(e + "Attempting to load"),
                !a.isHTML5 && !c.html5Only ? (a._iO.autoPlay = !0,
                a.load(a._iO)) : a.isHTML5 ? a.load(a._iO) : (c._wD(e + "Unsupported type. Exiting."),
                A = a),
                a.instanceOptions = a._iO) : 2 === a.readyState ? (c._wD(e + "Could not load - exiting", 2),
                A = a) : c._wD(e + "Loading - attempting to play...");
                if (null !== A)
                    return A;
                !a.isHTML5 && (9 === n && 0 < a.position && a.position === a.duration) && (c._wD(e + "Sound at end, resetting to position:0"),
                b.position = 0);
                if (a.paused && 0 <= a.position && (!a._iO.serverURL || 0 < a.position))
                    c._wD(e + "Resuming from paused state", 1),
                    a.resume();
                else {
                    a._iO = z(b, a._iO);
                    if ((!a.isHTML5 && null !== a._iO.position && 0 < a._iO.position || null !== a._iO.from && 0 < a._iO.from || null !== a._iO.to) && 0 === a.instanceCount && 0 === a.playState && !a._iO.serverURL) {
                        f = function() {
                            a._iO = z(b, a._iO);
                            a.play(a._iO)
                        }
                        ;
                        if (a.isHTML5 && !a._html5_canplay)
                            c._wD(e + "Beginning load for non-zero offset case"),
                            a.load({
                                _oncanplay: f
                            }),
                            A = !1;
                        else if (!a.isHTML5 && !a.loaded && (!a.readyState || 2 !== a.readyState))
                            c._wD(e + "Preloading for non-zero offset case"),
                            a.load({
                                onload: f
                            }),
                            A = !1;
                        if (null !== A)
                            return A;
                        a._iO = x()
                    }
                    (!a.instanceCount || a._iO.multiShotEvents || a.isHTML5 && a._iO.multiShot && !D || !a.isHTML5 && 8 < n && !a.getAutoPlay()) && a.instanceCount++;
                    a._iO.onposition && 0 === a.playState && q(a);
                    a.playState = 1;
                    a.paused = !1;
                    a.position = a._iO.position !== g && !isNaN(a._iO.position) ? a._iO.position : 0;
                    a.isHTML5 || (a._iO = oa(na(a._iO)));
                    a._iO.onplay && d && (a._iO.onplay.apply(a),
                    r = !0);
                    a.setVolume(a._iO.volume, !0);
                    a.setPan(a._iO.pan, !0);
                    a.isHTML5 ? 2 > a.instanceCount ? (m(),
                    e = a._setup_html5(),
                    a.setPosition(a._iO.position),
                    e.play()) : (c._wD(a.id + ": Cloning Audio() for instance #" + a.instanceCount + "..."),
                    k = new Audio(a._iO.url),
                    E = function() {
                        w.remove(k, "ended", E);
                        a._onfinish(a);
                        sa(k);
                        k = null
                    }
                    ,
                    h = function() {
                        w.remove(k, "canplay", h);
                        try {
                            k.currentTime = a._iO.position / 1E3
                        } catch (c) {
                            J(a.id + ": multiShot play() failed to apply position of " + a._iO.position / 1E3)
                        }
                        k.play()
                    }
                    ,
                    w.add(k, "ended", E),
                    void 0 !== a._iO.volume && (k.volume = Math.max(0, Math.min(1, a._iO.volume / 100))),
                    a.muted && (k.muted = !0),
                    a._iO.position ? w.add(k, "canplay", h) : k.play()) : (A = l._start(a.id, a._iO.loops || 1, 9 === n ? a.position : a.position / 1E3, a._iO.multiShot || !1),
                    9 === n && !A && (c._wD(e + "No sound hardware, or 32-sound ceiling hit", 2),
                    a._iO.onplayerror && a._iO.onplayerror.apply(a)))
                }
                return a
            }
            ;
            this.stop = function(b) {
                var d = a._iO;
                1 === a.playState && (c._wD(a.id + ": stop()"),
                a._onbufferchange(0),
                a._resetOnPosition(0),
                a.paused = !1,
                a.isHTML5 || (a.playState = 0),
                Ua(),
                d.to && a.clearOnPosition(d.to),
                a.isHTML5 ? a._a && (b = a.position,
                a.setPosition(0),
                a.position = b,
                a._a.pause(),
                a.playState = 0,
                a._onTimer(),
                E()) : (l._stop(a.id, b),
                d.serverURL && a.unload()),
                a.instanceCount = 0,
                a._iO = {},
                d.onstop && d.onstop.apply(a));
                return a
            }
            ;
            this.setAutoPlay = function(b) {
                c._wD(a.id + ": Autoplay turned " + (b ? "on" : "off"));
                a._iO.autoPlay = b;
                a.isHTML5 || (l._setAutoPlay(a.id, b),
                b && (!a.instanceCount && 1 === a.readyState) && (a.instanceCount++,
                c._wD(a.id + ": Incremented instance count to " + a.instanceCount)))
            }
            ;
            this.getAutoPlay = function() {
                return a._iO.autoPlay
            }
            ;
            this.setPosition = function(b) {
                b === g && (b = 0);
                var d = a.isHTML5 ? Math.max(b, 0) : Math.min(a.duration || a._iO.duration, Math.max(b, 0));
                a.position = d;
                b = a.position / 1E3;
                a._resetOnPosition(a.position);
                a._iO.position = d;
                if (a.isHTML5) {
                    if (a._a) {
                        if (a._html5_canplay) {
                            if (a._a.currentTime !== b) {
                                c._wD(a.id + ": setPosition(" + b + ")");
                                try {
                                    a._a.currentTime = b,
                                    (0 === a.playState || a.paused) && a._a.pause()
                                } catch (e) {
                                    c._wD(a.id + ": setPosition(" + b + ") failed: " + e.message, 2)
                                }
                            }
                        } else if (b)
                            return c._wD(a.id + ": setPosition(" + b + "): Cannot seek yet, sound not ready", 2),
                            a;
                        a.paused && a._onTimer(!0)
                    }
                } else
                    b = 9 === n ? a.position : b,
                    a.readyState && 2 !== a.readyState && l._setPosition(a.id, b, a.paused || !a.playState, a._iO.multiShot);
                return a
            }
            ;
            this.pause = function(b) {
                if (a.paused || 0 === a.playState && 1 !== a.readyState)
                    return a;
                c._wD(a.id + ": pause()");
                a.paused = !0;
                a.isHTML5 ? (a._setup_html5().pause(),
                E()) : (b || b === g) && l._pause(a.id, a._iO.multiShot);
                a._iO.onpause && a._iO.onpause.apply(a);
                return a
            }
            ;
            this.resume = function() {
                var b = a._iO;
                if (!a.paused)
                    return a;
                c._wD(a.id + ": resume()");
                a.paused = !1;
                a.playState = 1;
                a.isHTML5 ? (a._setup_html5().play(),
                m()) : (b.isMovieStar && !b.serverURL && a.setPosition(a.position),
                l._pause(a.id, b.multiShot));
                !r && b.onplay ? (b.onplay.apply(a),
                r = !0) : b.onresume && b.onresume.apply(a);
                return a
            }
            ;
            this.togglePause = function() {
                c._wD(a.id + ": togglePause()");
                if (0 === a.playState)
                    return a.play({
                        position: 9 === n && !a.isHTML5 ? a.position : a.position / 1E3
                    }),
                    a;
                a.paused ? a.resume() : a.pause();
                return a
            }
            ;
            this.setPan = function(b, c) {
                b === g && (b = 0);
                c === g && (c = !1);
                a.isHTML5 || l._setPan(a.id, b);
                a._iO.pan = b;
                c || (a.pan = b,
                a.options.pan = b);
                return a
            }
            ;
            this.setVolume = function(b, d) {
                b === g && (b = 100);
                d === g && (d = !1);
                a.isHTML5 ? a._a && (c.muted && !a.muted && (a.muted = !0,
                a._a.muted = !0),
                a._a.volume = Math.max(0, Math.min(1, b / 100))) : l._setVolume(a.id, c.muted && !a.muted || a.muted ? 0 : b);
                a._iO.volume = b;
                d || (a.volume = b,
                a.options.volume = b);
                return a
            }
            ;
            this.mute = function() {
                a.muted = !0;
                a.isHTML5 ? a._a && (a._a.muted = !0) : l._setVolume(a.id, 0);
                return a
            }
            ;
            this.unmute = function() {
                a.muted = !1;
                var b = a._iO.volume !== g;
                a.isHTML5 ? a._a && (a._a.muted = !1) : l._setVolume(a.id, b ? a._iO.volume : a.options.volume);
                return a
            }
            ;
            this.toggleMute = function() {
                return a.muted ? a.unmute() : a.mute()
            }
            ;
            this.onposition = this.onPosition = function(b, c, d) {
                C.push({
                    position: parseInt(b, 10),
                    method: c,
                    scope: d !== g ? d : a,
                    fired: !1
                });
                return a
            }
            ;
            this.clearOnPosition = function(a, b) {
                var c;
                a = parseInt(a, 10);
                if (isNaN(a))
                    return !1;
                for (c = 0; c < C.length; c++)
                    if (a === C[c].position && (!b || b === C[c].method))
                        C[c].fired && u--,
                        C.splice(c, 1)
            }
            ;
            this._processOnPosition = function() {
                var b, c;
                b = C.length;
                if (!b || !a.playState || u >= b)
                    return !1;
                for (b -= 1; 0 <= b; b--)
                    c = C[b],
                    !c.fired && a.position >= c.position && (c.fired = !0,
                    u++,
                    c.method.apply(c.scope, [c.position]));
                return !0
            }
            ;
            this._resetOnPosition = function(a) {
                var b, c;
                b = C.length;
                if (!b)
                    return !1;
                for (b -= 1; 0 <= b; b--)
                    c = C[b],
                    c.fired && a <= c.position && (c.fired = !1,
                    u--);
                return !0
            }
            ;
            x = function() {
                var b = a._iO, d = b.from, e = b.to, f, g;
                g = function() {
                    c._wD(a.id + ': "To" time of ' + e + " reached.");
                    a.clearOnPosition(e, g);
                    a.stop()
                }
                ;
                f = function() {
                    c._wD(a.id + ': Playing "from" ' + d);
                    if (null !== e && !isNaN(e))
                        a.onPosition(e, g)
                }
                ;
                null !== d && !isNaN(d) && (b.position = d,
                b.multiShot = !1,
                f());
                return b
            }
            ;
            q = function() {
                var b, c = a._iO.onposition;
                if (c)
                    for (b in c)
                        if (c.hasOwnProperty(b))
                            a.onPosition(parseInt(b, 10), c[b])
            }
            ;
            Ua = function() {
                var b, c = a._iO.onposition;
                if (c)
                    for (b in c)
                        c.hasOwnProperty(b) && a.clearOnPosition(parseInt(b, 10))
            }
            ;
            m = function() {
                a.isHTML5 && db(a)
            }
            ;
            E = function() {
                a.isHTML5 && eb(a)
            }
            ;
            f = function(b) {
                b || (C = [],
                u = 0);
                r = !1;
                a._hasTimer = null;
                a._a = null;
                a._html5_canplay = !1;
                a.bytesLoaded = null;
                a.bytesTotal = null;
                a.duration = a._iO && a._iO.duration ? a._iO.duration : null;
                a.durationEstimate = null;
                a.buffered = [];
                a.eqData = [];
                a.eqData.left = [];
                a.eqData.right = [];
                a.failures = 0;
                a.isBuffering = !1;
                a.instanceOptions = {};
                a.instanceCount = 0;
                a.loaded = !1;
                a.metadata = {};
                a.readyState = 0;
                a.muted = !1;
                a.paused = !1;
                a.peakData = {
                    left: 0,
                    right: 0
                };
                a.waveformData = {
                    left: [],
                    right: []
                };
                a.playState = 0;
                a.position = null;
                a.id3 = {}
            }
            ;
            f();
            this._onTimer = function(b) {
                var c, f = !1, g = {};
                if (a._hasTimer || b) {
                    if (a._a && (b || (0 < a.playState || 1 === a.readyState) && !a.paused))
                        c = a._get_html5_duration(),
                        c !== d && (d = c,
                        a.duration = c,
                        f = !0),
                        a.durationEstimate = a.duration,
                        c = 1E3 * a._a.currentTime || 0,
                        c !== e && (e = c,
                        f = !0),
                        (f || b) && a._whileplaying(c, g, g, g, g);
                    return f
                }
            }
            ;
            this._get_html5_duration = function() {
                var b = a._iO;
                return (b = a._a && a._a.duration ? 1E3 * a._a.duration : b && b.duration ? b.duration : null) && !isNaN(b) && Infinity !== b ? b : null
            }
            ;
            this._apply_loop = function(a, b) {
                !a.loop && 1 < b && c._wD("Note: Native HTML5 looping is infinite.", 1);
                a.loop = 1 < b ? "loop" : ""
            }
            ;
            this._setup_html5 = function(b) {
                b = z(a._iO, b);
                var c = D ? Wa : a._a, d = decodeURI(b.url), e;
                D ? d === decodeURI(Ma) && (e = !0) : d === decodeURI(t) && (e = !0);
                if (c) {
                    if (c._s)
                        if (D)
                            c._s && (c._s.playState && !e) && c._s.stop();
                        else if (!D && d === decodeURI(t))
                            return a._apply_loop(c, b.loops),
                            c;
                    e || (t && f(!1),
                    c.src = b.url,
                    Ma = t = a.url = b.url,
                    c._called_load = !1)
                } else
                    b.autoLoad || b.autoPlay ? (a._a = new Audio(b.url),
                    a._a.load()) : a._a = Pa && 10 > opera.version() ? new Audio(null) : new Audio,
                    c = a._a,
                    c._called_load = !1,
                    D && (Wa = c);
                a.isHTML5 = !0;
                a._a = c;
                c._s = a;
                h();
                a._apply_loop(c, b.loops);
                b.autoLoad || b.autoPlay ? a.load() : (c.autobuffer = !1,
                c.preload = "auto");
                return c
            }
            ;
            h = function() {
                if (a._a._added_events)
                    return !1;
                var b;
                a._a._added_events = !0;
                for (b in H)
                    H.hasOwnProperty(b) && a._a && a._a.addEventListener(b, H[b], !1);
                return !0
            }
            ;
            k = function() {
                var b;
                c._wD(a.id + ": Removing event listeners");
                a._a._added_events = !1;
                for (b in H)
                    H.hasOwnProperty(b) && a._a && a._a.removeEventListener(b, H[b], !1)
            }
            ;
            this._onload = function(b) {
                var d = !!b || !a.isHTML5 && 8 === n && a.duration;
                b = a.id + ": ";
                c._wD(b + (d ? "onload()" : "Failed to load / invalid sound?" + (!a.duration ? " Zero-length duration reported." : " -") + " (" + a.url + ")"), d ? 1 : 2);
                !d && !a.isHTML5 && (!0 === c.sandbox.noRemote && c._wD(b + s("noNet"), 1),
                !0 === c.sandbox.noLocal && c._wD(b + s("noLocal"), 1));
                a.loaded = d;
                a.readyState = d ? 3 : 2;
                a._onbufferchange(0);
                a._iO.onload && ta(a, function() {
                    a._iO.onload.apply(a, [d])
                });
                return !0
            }
            ;
            this._onbufferchange = function(b) {
                if (0 === a.playState || b && a.isBuffering || !b && !a.isBuffering)
                    return !1;
                a.isBuffering = 1 === b;
                a._iO.onbufferchange && (c._wD(a.id + ": Buffer state change: " + b),
                a._iO.onbufferchange.apply(a, [b]));
                return !0
            }
            ;
            this._onsuspend = function() {
                a._iO.onsuspend && (c._wD(a.id + ": Playback suspended"),
                a._iO.onsuspend.apply(a));
                return !0
            }
            ;
            this._onfailure = function(b, d, e) {
                a.failures++;
                c._wD(a.id + ": Failure (" + a.failures + "): " + b);
                if (a._iO.onfailure && 1 === a.failures)
                    a._iO.onfailure(b, d, e);
                else
                    c._wD(a.id + ": Ignoring failure")
            }
            ;
            this._onwarning = function(b, c, d) {
                if (a._iO.onwarning)
                    a._iO.onwarning(b, c, d)
            }
            ;
            this._onfinish = function() {
                var b = a._iO.onfinish;
                a._onbufferchange(0);
                a._resetOnPosition(0);
                if (a.instanceCount && (a.instanceCount--,
                a.instanceCount || (Ua(),
                a.playState = 0,
                a.paused = !1,
                a.instanceCount = 0,
                a.instanceOptions = {},
                a._iO = {},
                E(),
                a.isHTML5 && (a.position = 0)),
                (!a.instanceCount || a._iO.multiShotEvents) && b))
                    c._wD(a.id + ": onfinish()"),
                    ta(a, function() {
                        b.apply(a)
                    })
            }
            ;
            this._whileloading = function(b, c, d, e) {
                var f = a._iO;
                a.bytesLoaded = b;
                a.bytesTotal = c;
                a.duration = Math.floor(d);
                a.bufferLength = e;
                a.durationEstimate = !a.isHTML5 && !f.isMovieStar ? f.duration ? a.duration > f.duration ? a.duration : f.duration : parseInt(a.bytesTotal / a.bytesLoaded * a.duration, 10) : a.duration;
                a.isHTML5 || (a.buffered = [{
                    start: 0,
                    end: a.duration
                }]);
                (3 !== a.readyState || a.isHTML5) && f.whileloading && f.whileloading.apply(a)
            }
            ;
            this._whileplaying = function(b, c, d, e, f) {
                var k = a._iO;
                if (isNaN(b) || null === b)
                    return !1;
                a.position = Math.max(0, b);
                a._processOnPosition();
                !a.isHTML5 && 8 < n && (k.usePeakData && (c !== g && c) && (a.peakData = {
                    left: c.leftPeak,
                    right: c.rightPeak
                }),
                k.useWaveformData && (d !== g && d) && (a.waveformData = {
                    left: d.split(","),
                    right: e.split(",")
                }),
                k.useEQData && (f !== g && f && f.leftEQ) && (b = f.leftEQ.split(","),
                a.eqData = b,
                a.eqData.left = b,
                f.rightEQ !== g && f.rightEQ && (a.eqData.right = f.rightEQ.split(","))));
                1 === a.playState && (!a.isHTML5 && (8 === n && !a.position && a.isBuffering) && a._onbufferchange(0),
                k.whileplaying && k.whileplaying.apply(a));
                return !0
            }
            ;
            this._oncaptiondata = function(b) {
                c._wD(a.id + ": Caption data received.");
                a.captiondata = b;
                a._iO.oncaptiondata && a._iO.oncaptiondata.apply(a, [b])
            }
            ;
            this._onmetadata = function(b, d) {
                c._wD(a.id + ": Metadata received.");
                var e = {}, f, g;
                f = 0;
                for (g = b.length; f < g; f++)
                    e[b[f]] = d[f];
                a.metadata = e;
                console.log("updated metadata", a.metadata);
                a._iO.onmetadata && a._iO.onmetadata.call(a, a.metadata)
            }
            ;
            this._onid3 = function(b, d) {
                c._wD(a.id + ": ID3 data received.");
                var e = [], f, g;
                f = 0;
                for (g = b.length; f < g; f++)
                    e[b[f]] = d[f];
                a.id3 = z(a.id3, e);
                a._iO.onid3 && a._iO.onid3.apply(a)
            }
            ;
            this._onconnect = function(b) {
                b = 1 === b;
                c._wD(a.id + ": " + (b ? "Connected." : "Failed to connect? - " + a.url), b ? 1 : 2);
                if (a.connected = b)
                    a.failures = 0,
                    v(a.id) && (a.getAutoPlay() ? a.play(g, a.getAutoPlay()) : a._iO.autoLoad && a.load()),
                    a._iO.onconnect && a._iO.onconnect.apply(a, [b])
            }
            ;
            this._ondataerror = function(b) {
                0 < a.playState && (c._wD(a.id + ": Data error: " + b),
                a._iO.ondataerror && a._iO.ondataerror.apply(a))
            }
            ;
            this._debug()
        }
        ;
        la = function() {
            return m.body || m.getElementsByTagName("div")[0]
        }
        ;
        y = function(b) {
            return m.getElementById(b)
        }
        ;
        z = function(b, d) {
            var e = b || {}, a, f;
            a = d === g ? c.defaultOptions : d;
            for (f in a)
                a.hasOwnProperty(f) && e[f] === g && (e[f] = "object" !== typeof a[f] || null === a[f] ? a[f] : z(e[f], a[f]));
            return e
        }
        ;
        ta = function(b, c) {
            !b.isHTML5 && 8 === n ? h.setTimeout(c, 0) : c()
        }
        ;
        R = {
            onready: 1,
            ontimeout: 1,
            defaultOptions: 1,
            flash9Options: 1,
            movieStarOptions: 1
        };
        Aa = function(b, d) {
            var e, a = !0, f = d !== g, h = c.setupOptions;
            if (b === g) {
                a = [];
                for (e in h)
                    h.hasOwnProperty(e) && a.push(e);
                for (e in R)
                    R.hasOwnProperty(e) && ("object" === typeof c[e] ? a.push(e + ": {...}") : c[e]instanceof Function ? a.push(e + ": function() {...}") : a.push(e));
                c._wD(s("setup", a.join(", ")));
                return !1
            }
            for (e in b)
                if (b.hasOwnProperty(e))
                    if ("object" !== typeof b[e] || null === b[e] || b[e]instanceof Array || b[e]instanceof RegExp)
                        f && R[d] !== g ? c[d][e] = b[e] : h[e] !== g ? (c.setupOptions[e] = b[e],
                        c[e] = b[e]) : R[e] === g ? (J(s(c[e] === g ? "setupUndef" : "setupError", e), 2),
                        a = !1) : c[e]instanceof Function ? c[e].apply(c, b[e]instanceof Array ? b[e] : [b[e]]) : c[e] = b[e];
                    else if (R[e] === g)
                        J(s(c[e] === g ? "setupUndef" : "setupError", e), 2),
                        a = !1;
                    else
                        return Aa(b[e], e);
            return a
        }
        ;
        w = function() {
            function b(a) {
                a = ib.call(a);
                var b = a.length;
                e ? (a[1] = "on" + a[1],
                3 < b && a.pop()) : 3 === b && a.push(!1);
                return a
            }
            function c(b, d) {
                var g = b.shift()
                  , h = [a[d]];
                if (e)
                    g[h](b[0], b[1]);
                else
                    g[h].apply(g, b)
            }
            var e = h.attachEvent
              , a = {
                add: e ? "attachEvent" : "addEventListener",
                remove: e ? "detachEvent" : "removeEventListener"
            };
            return {
                add: function() {
                    c(b(arguments), "add")
                },
                remove: function() {
                    c(b(arguments), "remove")
                }
            }
        }();
        H = {
            abort: r(function() {
                c._wD(this._s.id + ": abort")
            }),
            canplay: r(function() {
                var b = this._s, d;
                if (b._html5_canplay)
                    return !0;
                b._html5_canplay = !0;
                c._wD(b.id + ": canplay");
                b._onbufferchange(0);
                d = b._iO.position !== g && !isNaN(b._iO.position) ? b._iO.position / 1E3 : null;
                if (this.currentTime !== d) {
                    c._wD(b.id + ": canplay: Setting position to " + d);
                    try {
                        this.currentTime = d
                    } catch (e) {
                        c._wD(b.id + ": canplay: Setting position of " + d + " failed: " + e.message, 2)
                    }
                }
                b._iO._oncanplay && b._iO._oncanplay()
            }),
            canplaythrough: r(function() {
                var b = this._s;
                b.loaded || (b._onbufferchange(0),
                b._whileloading(b.bytesLoaded, b.bytesTotal, b._get_html5_duration()),
                b._onload(!0))
            }),
            durationchange: r(function() {
                var b = this._s, d;
                d = b._get_html5_duration();
                !isNaN(d) && d !== b.duration && (c._wD(this._s.id + ": durationchange (" + d + ")" + (b.duration ? ", previously " + b.duration : "")),
                b.durationEstimate = b.duration = d)
            }),
            ended: r(function() {
                var b = this._s;
                c._wD(b.id + ": ended");
                b._onfinish()
            }),
            error: r(function() {
                c._wD(this._s.id + ": HTML5 error, code " + this.error.code);
                this._s._onload(!1)
            }),
            loadeddata: r(function() {
                var b = this._s;
                c._wD(b.id + ": loadeddata");
                !b._loaded && !va && (b.duration = b._get_html5_duration())
            }),
            loadedmetadata: r(function() {
                c._wD(this._s.id + ": loadedmetadata")
            }),
            loadstart: r(function() {
                c._wD(this._s.id + ": loadstart");
                this._s._onbufferchange(1)
            }),
            play: r(function() {
                this._s._onbufferchange(0)
            }),
            playing: r(function() {
                c._wD(this._s.id + ": playing " + String.fromCharCode(9835));
                this._s._onbufferchange(0)
            }),
            progress: r(function(b) {
                var d = this._s, e, a, f;
                e = 0;
                var g = "progress" === b.type
                  , k = b.target.buffered
                  , h = b.loaded || 0
                  , m = b.total || 1;
                d.buffered = [];
                if (k && k.length) {
                    e = 0;
                    for (a = k.length; e < a; e++)
                        d.buffered.push({
                            start: 1E3 * k.start(e),
                            end: 1E3 * k.end(e)
                        });
                    e = 1E3 * (k.end(0) - k.start(0));
                    h = Math.min(1, e / (1E3 * b.target.duration));
                    if (g && 1 < k.length) {
                        f = [];
                        a = k.length;
                        for (e = 0; e < a; e++)
                            f.push(1E3 * b.target.buffered.start(e) + "-" + 1E3 * b.target.buffered.end(e));
                        c._wD(this._s.id + ": progress, timeRanges: " + f.join(", "))
                    }
                    g && !isNaN(h) && c._wD(this._s.id + ": progress, " + Math.floor(100 * h) + "% loaded")
                }
                isNaN(h) || (d._whileloading(h, m, d._get_html5_duration()),
                h && (m && h === m) && H.canplaythrough.call(this, b))
            }),
            ratechange: r(function() {
                c._wD(this._s.id + ": ratechange")
            }),
            suspend: r(function(b) {
                var d = this._s;
                c._wD(this._s.id + ": suspend");
                H.progress.call(this, b);
                d._onsuspend()
            }),
            stalled: r(function() {
                c._wD(this._s.id + ": stalled")
            }),
            timeupdate: r(function() {
                this._s._onTimer()
            }),
            waiting: r(function() {
                var b = this._s;
                c._wD(this._s.id + ": waiting");
                b._onbufferchange(1)
            })
        };
        ra = function(b) {
            return !b || !b.type && !b.url && !b.serverURL ? !1 : b.serverURL || b.type && ha(b.type) ? !1 : b.type ? ea({
                type: b.type
            }) : ea({
                url: b.url
            }) || c.html5Only || b.url.match(/data\:/i)
        }
        ;
        sa = function(b) {
            var d;
            b && (d = va ? "about:blank" : c.html5.canPlayType("audio/wav") ? "data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w\x3d\x3d" : "about:blank",
            b.src = d,
            void 0 !== b._called_unload && (b._called_load = !1));
            D && (Ma = null);
            return d
        }
        ;
        ea = function(b) {
            if (!c.useHTML5Audio || !c.hasHTML5)
                return !1;
            var d = b.url || null;
            b = b.type || null;
            var e = c.audioFormats, a;
            if (b && c.html5[b] !== g)
                return c.html5[b] && !ha(b);
            if (!K) {
                K = [];
                for (a in e)
                    e.hasOwnProperty(a) && (K.push(a),
                    e[a].related && (K = K.concat(e[a].related)));
                K = RegExp("\\.(" + K.join("|") + ")(\\?.*)?$", "i")
            }
            a = d ? d.toLowerCase().match(K) : null;
            !a || !a.length ? b && (d = b.indexOf(";"),
            a = (-1 !== d ? b.substr(0, d) : b).substr(6)) : a = a[1];
            a && c.html5[a] !== g ? d = c.html5[a] && !ha(a) : (b = "audio/" + a,
            d = c.html5.canPlayType({
                type: b
            }),
            d = (c.html5[a] = d) && c.html5[b] && !ha(b));
            return d
        }
        ;
        hb = function() {
            function b(a) {
                var b, e = b = !1;
                if (!d || "function" !== typeof d.canPlayType)
                    return b;
                if (a instanceof Array) {
                    k = 0;
                    for (b = a.length; k < b; k++)
                        if (c.html5[a[k]] || d.canPlayType(a[k]).match(c.html5Test))
                            e = !0,
                            c.html5[a[k]] = !0,
                            c.flash[a[k]] = !!a[k].match(ob);
                    b = e
                } else
                    a = d && "function" === typeof d.canPlayType ? d.canPlayType(a) : !1,
                    b = !(!a || !a.match(c.html5Test));
                return b
            }
            if (!c.useHTML5Audio || !c.hasHTML5)
                return t = c.html5.usingFlash = !0,
                !1;
            var d = Audio !== g ? Pa && 10 > opera.version() ? new Audio(null) : new Audio : null, e, a, f = {}, h, k;
            h = c.audioFormats;
            for (e in h)
                if (h.hasOwnProperty(e) && (a = "audio/" + e,
                f[e] = b(h[e].type),
                f[a] = f[e],
                e.match(ob) ? (c.flash[e] = !0,
                c.flash[a] = !0) : (c.flash[e] = !1,
                c.flash[a] = !1),
                h[e] && h[e].related))
                    for (k = h[e].related.length - 1; 0 <= k; k--)
                        f["audio/" + h[e].related[k]] = f[e],
                        c.html5[h[e].related[k]] = f[e],
                        c.flash[h[e].related[k]] = f[e];
            f.canPlayType = d ? b : null;
            c.html5 = z(c.html5, f);
            c.html5.usingFlash = gb();
            t = c.html5.usingFlash;
            return !0
        }
        ;
        I = {
            notReady: "Unavailable - wait until onready() has fired.",
            notOK: "Audio support is not available.",
            domError: "soundManagerexception caught while appending SWF to DOM.",
            spcWmode: "Removing wmode, preventing known SWF loading issue(s)",
            swf404: "soundManager: Verify that %s is a valid path.",
            tryDebug: "Try soundManager.debugFlash \x3d true for more security details (output goes to SWF.)",
            checkSWF: "See SWF output for more debug info.",
            localFail: "soundManager: Non-HTTP page (" + m.location.protocol + " URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",
            waitFocus: "soundManager: Special case: Waiting for SWF to load with window focus...",
            waitForever: "soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",
            waitSWF: "soundManager: Waiting for 100% SWF load...",
            needFunction: "soundManager: Function object expected for %s",
            badID: 'Sound ID "%s" should be a string, starting with a non-numeric character',
            currentObj: "soundManager: _debug(): Current sound objects",
            waitOnload: "soundManager: Waiting for window.onload()",
            docLoaded: "soundManager: Document already loaded",
            onload: "soundManager: initComplete(): calling soundManager.onload()",
            onloadOK: "soundManager.onload() complete",
            didInit: "soundManager: init(): Already called?",
            secNote: "Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",
            badRemove: "soundManager: Failed to remove Flash node.",
            shutdown: "soundManager.disable(): Shutting down",
            queue: "soundManager: Queueing %s handler",
            smError: "SMSound.load(): Exception: JS-Flash communication failed, or JS error.",
            fbTimeout: "No flash response, applying .swf_timedout CSS...",
            fbLoaded: "Flash loaded",
            fbHandler: "soundManager: flashBlockHandler()",
            manURL: "SMSound.load(): Using manually-assigned URL",
            onURL: "soundManager.load(): current URL already assigned.",
            badFV: 'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',
            as2loop: "Note: Setting stream:false so looping can work (flash 8 limitation)",
            noNSLoop: "Note: Looping not implemented for MovieStar formats",
            needfl9: "Note: Switching to flash 9, required for MP4 formats.",
            mfTimeout: "Setting flashLoadTimeout \x3d 0 (infinite) for off-screen, mobile flash case",
            needFlash: "soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",
            gotFocus: "soundManager: Got window focus.",
            policy: "Enabling usePolicyFile for data access",
            setup: "soundManager.setup(): allowed parameters: %s",
            setupError: 'soundManager.setup(): "%s" cannot be assigned with this method.',
            setupUndef: 'soundManager.setup(): Could not find option "%s"',
            setupLate: "soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",
            noURL: "soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",
            sm2Loaded: "SoundManager 2: Ready. " + String.fromCharCode(10003),
            reset: "soundManager.reset(): Removing event callbacks",
            mobileUA: "Mobile UA detected, preferring HTML5 by default.",
            globalHTML5: "Using singleton HTML5 Audio() pattern for this device."
        };
        s = function() {
            var b, c, e, a;
            b = ib.call(arguments);
            c = b.shift();
            if ((a = I && I[c] ? I[c] : "") && b && b.length) {
                c = 0;
                for (e = b.length; c < e; c++)
                    a = a.replace("%s", b[c])
            }
            return a
        }
        ;
        na = function(b) {
            8 === n && (1 < b.loops && b.stream) && (p("as2loop"),
            b.stream = !1);
            return b
        }
        ;
        oa = function(b, d) {
            if (b && !b.usePolicyFile && (b.onid3 || b.usePeakData || b.useWaveformData || b.useEQData))
                c._wD((d || "") + s("policy")),
                b.usePolicyFile = !0;
            return b
        }
        ;
        J = function(b) {
            fa && console.warn !== g ? console.warn(b) : c._wD(b)
        }
        ;
        xa = function() {
            return !1
        }
        ;
        ab = function(b) {
            for (var c in b)
                b.hasOwnProperty(c) && "function" === typeof b[c] && (b[c] = xa)
        }
        ;
        Ha = function(b) {
            b === g && (b = !1);
            (x || b) && c.disable(b)
        }
        ;
        bb = function(b) {
            var d = null;
            if (b)
                if (b.match(/\.swf(\?.*)?$/i)) {
                    if (d = b.substr(b.toLowerCase().lastIndexOf(".swf?") + 4))
                        return b
                } else
                    b.lastIndexOf("/") !== b.length - 1 && (b += "/");
            b = (b && -1 !== b.lastIndexOf("/") ? b.substr(0, b.lastIndexOf("/") + 1) : "./") + c.movieURL;
            c.noSWFCache && (b += "?ts\x3d" + (new Date).getTime());
            return b
        }
        ;
        Da = function() {
            n = parseInt(c.flashVersion, 10);
            8 !== n && 9 !== n && (c._wD(s("badFV", n, 8)),
            c.flashVersion = n = 8);
            var b = c.debugMode || c.debugFlash ? "_debug.swf" : ".swf";
            c.useHTML5Audio && (!c.html5Only && c.audioFormats.mp4.required && 9 > n) && (c._wD(s("needfl9")),
            c.flashVersion = n = 9);
            c.version = c.versionNumber + (c.html5Only ? " (HTML5-only mode)" : 9 === n ? " (AS3/Flash 9)" : " (AS2/Flash 8)");
            8 < n ? (c.defaultOptions = z(c.defaultOptions, c.flash9Options),
            c.features.buffering = !0,
            c.defaultOptions = z(c.defaultOptions, c.movieStarOptions),
            c.filePatterns.flash9 = RegExp("\\.(mp3|" + rb.join("|") + ")(\\?.*)?$", "i"),
            c.features.movieStar = !0) : c.features.movieStar = !1;
            c.filePattern = c.filePatterns[8 !== n ? "flash9" : "flash8"];
            c.movieURL = (8 === n ? "soundmanager2.swf" : "soundmanager2_flash9.swf").replace(".swf", b);
            c.features.peakData = c.features.waveformData = c.features.eqData = 8 < n
        }
        ;
        Za = function(b, c) {
            if (!l)
                return !1;
            l._setPolling(b, c)
        }
        ;
        Ga = function() {
            c.debugURLParam.test(W) && (c.debugMode = !0);
            if (y(c.debugID))
                return !1;
            var b, d, e, a;
            if (c.debugMode && !y(c.debugID) && (!fa || !c.useConsole || !c.consoleOnly)) {
                b = m.createElement("div");
                b.id = c.debugID + "-toggle";
                d = {
                    position: "fixed",
                    bottom: "0px",
                    right: "0px",
                    width: "1.2em",
                    height: "1.2em",
                    lineHeight: "1.2em",
                    margin: "2px",
                    textAlign: "center",
                    border: "1px solid #999",
                    cursor: "pointer",
                    background: "#fff",
                    color: "#333",
                    zIndex: 10001
                };
                b.appendChild(m.createTextNode("-"));
                b.onclick = cb;
                b.title = "Toggle SM2 debug console";
                u.match(/msie 6/i) && (b.style.position = "absolute",
                b.style.cursor = "hand");
                for (a in d)
                    d.hasOwnProperty(a) && (b.style[a] = d[a]);
                d = m.createElement("div");
                d.id = c.debugID;
                d.style.display = c.debugMode ? "block" : "none";
                if (c.debugMode && !y(b.id)) {
                    try {
                        e = la(),
                        e.appendChild(b)
                    } catch (f) {
                        throw Error(s("domError") + " \n" + f.toString());
                    }
                    e.appendChild(d)
                }
            }
        }
        ;
        v = this.getSoundById;
        p = function(b, d) {
            return !b ? "" : c._wD(s(b), d)
        }
        ;
        cb = function() {
            var b = y(c.debugID)
              , d = y(c.debugID + "-toggle");
            if (!b)
                return !1;
            za ? (d.innerHTML = "+",
            b.style.display = "none") : (d.innerHTML = "-",
            b.style.display = "block");
            za = !za
        }
        ;
        B = function(b, c, e) {
            if (h.sm2Debugger !== g)
                try {
                    sm2Debugger.handleEvent(b, c, e)
                } catch (a) {
                    return !1
                }
            return !0
        }
        ;
        V = function() {
            var b = [];
            c.debugMode && b.push("sm2_debug");
            c.debugFlash && b.push("flash_debug");
            c.useHighPerformance && b.push("high_performance");
            return b.join(" ")
        }
        ;
        Ja = function() {
            var b = s("fbHandler")
              , d = c.getMoviePercent()
              , e = {
                type: "FLASHBLOCK"
            };
            if (c.html5Only)
                return !1;
            c.ok() ? (c.didFlashBlock && c._wD(b + ": Unblocked"),
            c.oMC && (c.oMC.className = [V(), "movieContainer", "swf_loaded" + (c.didFlashBlock ? " swf_unblocked" : "")].join(" "))) : (t && (c.oMC.className = V() + " movieContainer " + (null === d ? "swf_timedout" : "swf_error"),
            c._wD(b + ": " + s("fbTimeout") + (d ? " (" + s("fbLoaded") + ")" : ""))),
            c.didFlashBlock = !0,
            M({
                type: "ontimeout",
                ignoreInit: !0,
                error: e
            }),
            U(e))
        }
        ;
        Ba = function(b, c, e) {
            G[b] === g && (G[b] = []);
            G[b].push({
                method: c,
                scope: e || null,
                fired: !1
            })
        }
        ;
        M = function(b) {
            b || (b = {
                type: c.ok() ? "onready" : "ontimeout"
            });
            if (!q && b && !b.ignoreInit || "ontimeout" === b.type && (c.ok() || x && !b.ignoreInit))
                return !1;
            var d = {
                success: b && b.ignoreInit ? c.ok() : !x
            }, e = b && b.type ? G[b.type] || [] : [], a = [], f, d = [d], g = t && !c.ok();
            b.error && (d[0].error = b.error);
            b = 0;
            for (f = e.length; b < f; b++)
                !0 !== e[b].fired && a.push(e[b]);
            if (a.length) {
                b = 0;
                for (f = a.length; b < f; b++)
                    a[b].scope ? a[b].method.apply(a[b].scope, d) : a[b].method.apply(this, d),
                    g || (a[b].fired = !0)
            }
            return !0
        }
        ;
        S = function() {
            h.setTimeout(function() {
                c.useFlashBlock && Ja();
                M();
                "function" === typeof c.onload && (p("onload", 1),
                c.onload.apply(h),
                p("onloadOK", 1));
                c.waitForWindowLoad && w.add(h, "load", S)
            }, 1)
        }
        ;
        Na = function() {
            if (F !== g)
                return F;
            var b = !1, c = navigator, e = c.plugins, a, f = h.ActiveXObject;
            if (e && e.length)
                (c = c.mimeTypes) && (c["application/x-shockwave-flash"] && c["application/x-shockwave-flash"].enabledPlugin && c["application/x-shockwave-flash"].enabledPlugin.description) && (b = !0);
            else if (f !== g && !u.match(/MSAppHost/i)) {
                try {
                    a = new f("ShockwaveFlash.ShockwaveFlash")
                } catch (m) {
                    a = null
                }
                b = !!a
            }
            return F = b
        }
        ;
        gb = function() {
            var b, d, e = c.audioFormats;
            if (ua && u.match(/os (1|2|3_0|3_1)\s/i))
                c.hasHTML5 = !1,
                c.html5Only = !0,
                c.oMC && (c.oMC.style.display = "none");
            else if (c.useHTML5Audio) {
                if (!c.html5 || !c.html5.canPlayType)
                    c._wD("SoundManager: No HTML5 Audio() support detected."),
                    c.hasHTML5 = !1;
                Ra && c._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id\x3d32159 - " + (!F ? " would use flash fallback for MP3/MP4, but none detected." : "will use flash fallback for MP3/MP4, if available"), 1)
            }
            if (c.useHTML5Audio && c.hasHTML5)
                for (d in da = !0,
                e)
                    if (e.hasOwnProperty(d) && e[d].required)
                        if (c.html5.canPlayType(e[d].type)) {
                            if (c.preferFlash && (c.flash[d] || c.flash[e[d].type]))
                                b = !0
                        } else
                            da = !1,
                            b = !0;
            c.ignoreFlash && (b = !1,
            da = !0);
            c.html5Only = c.hasHTML5 && c.useHTML5Audio && !b;
            return !c.html5Only
        }
        ;
        qa = function(b) {
            var d, e, a = 0;
            if (b instanceof Array) {
                d = 0;
                for (e = b.length; d < e; d++)
                    if (b[d]instanceof Object) {
                        if (c.canPlayMIME(b[d].type)) {
                            a = d;
                            break
                        }
                    } else if (c.canPlayURL(b[d])) {
                        a = d;
                        break
                    }
                b[a].url && (b[a] = b[a].url);
                b = b[a]
            }
            return b
        }
        ;
        db = function(b) {
            b._hasTimer || (b._hasTimer = !0,
            !Qa && c.html5PollingInterval && (null === ca && 0 === pa && (ca = setInterval(fb, c.html5PollingInterval)),
            pa++))
        }
        ;
        eb = function(b) {
            b._hasTimer && (b._hasTimer = !1,
            !Qa && c.html5PollingInterval && pa--)
        }
        ;
        fb = function() {
            var b;
            if (null !== ca && !pa)
                return clearInterval(ca),
                ca = null,
                !1;
            for (b = c.soundIDs.length - 1; 0 <= b; b--)
                c.sounds[c.soundIDs[b]].isHTML5 && c.sounds[c.soundIDs[b]]._hasTimer && c.sounds[c.soundIDs[b]]._onTimer()
        }
        ;
        U = function(b) {
            b = b !== g ? b : {};
            "function" === typeof c.onerror && c.onerror.apply(h, [{
                type: b.type !== g ? b.type : null
            }]);
            b.fatal !== g && b.fatal && c.disable()
        }
        ;
        jb = function() {
            if (!Ra || !Na())
                return !1;
            var b = c.audioFormats, d, e;
            for (e in b)
                if (b.hasOwnProperty(e) && ("mp3" === e || "mp4" === e))
                    if (c._wD("soundManager: Using flash fallback for " + e + " format"),
                    c.html5[e] = !1,
                    b[e] && b[e].related)
                        for (d = b[e].related.length - 1; 0 <= d; d--)
                            c.html5[b[e].related[d]] = !1
        }
        ;
        this._setSandboxType = function(b) {
            var d = c.sandbox;
            d.type = b;
            d.description = d.types[d.types[b] !== g ? b : "unknown"];
            "localWithFile" === d.type ? (d.noRemote = !0,
            d.noLocal = !1,
            p("secNote", 2)) : "localWithNetwork" === d.type ? (d.noRemote = !1,
            d.noLocal = !0) : "localTrusted" === d.type && (d.noRemote = !1,
            d.noLocal = !1)
        }
        ;
        this._externalInterfaceOK = function(b) {
            if (c.swfLoaded)
                return !1;
            var d;
            B("swf", !0);
            B("flashtojs", !0);
            c.swfLoaded = !0;
            wa = !1;
            Ra && jb();
            if (!b || b.replace(/\+dev/i, "") !== c.versionNumber.replace(/\+dev/i, ""))
                return d = 'soundManager: Fatal: JavaScript file build "' + c.versionNumber + '" does not match Flash SWF build "' + b + '" at ' + c.url + ". Ensure both are up-to-date.",
                setTimeout(function() {
                    throw Error(d);
                }, 0),
                !1;
            setTimeout(ya, L ? 100 : 1)
        }
        ;
        ma = function(b, d) {
            function e() {
                var a = [], b, d = [];
                b = "SoundManager " + c.version + (!c.html5Only && c.useHTML5Audio ? c.hasHTML5 ? " + HTML5 audio" : ", no HTML5 audio support" : "");
                c.html5Only ? c.html5PollingInterval && a.push("html5PollingInterval (" + c.html5PollingInterval + "ms)") : (c.preferFlash && a.push("preferFlash"),
                c.useHighPerformance && a.push("useHighPerformance"),
                c.flashPollingInterval && a.push("flashPollingInterval (" + c.flashPollingInterval + "ms)"),
                c.html5PollingInterval && a.push("html5PollingInterval (" + c.html5PollingInterval + "ms)"),
                c.wmode && a.push("wmode (" + c.wmode + ")"),
                c.debugFlash && a.push("debugFlash"),
                c.useFlashBlock && a.push("flashBlock"));
                a.length && (d = d.concat([a.join(" + ")]));
                c._wD(b + (d.length ? " + " + d.join(", ") : ""), 1);
                kb()
            }
            function a(a, b) {
                return '\x3cparam name\x3d"' + a + '" value\x3d"' + b + '" /\x3e'
            }
            if (X && Y)
                return !1;
            if (c.html5Only)
                return Da(),
                e(),
                c.oMC = y(c.movieID),
                ya(),
                Y = X = !0,
                !1;
            var f = d || c.url, h = c.altURL || f, k = la(), l = V(), n = null, n = m.getElementsByTagName("html")[0], p, r, q, n = n && n.dir && n.dir.match(/rtl/i);
            b = b === g ? c.id : b;
            Da();
            c.url = bb(ga ? f : h);
            d = c.url;
            c.wmode = !c.wmode && c.useHighPerformance ? "transparent" : c.wmode;
            if (null !== c.wmode && (u.match(/msie 8/i) || !L && !c.useHighPerformance) && navigator.platform.match(/win32|win64/i))
                O.push(I.spcWmode),
                c.wmode = null;
            k = {
                name: b,
                id: b,
                src: d,
                quality: "high",
                allowScriptAccess: c.allowScriptAccess,
                bgcolor: c.bgColor,
                pluginspage: pb + "www.macromedia.com/go/getflashplayer",
                title: "JS/Flash audio component (SoundManager 2)",
                type: "application/x-shockwave-flash",
                wmode: c.wmode,
                hasPriority: "true"
            };
            c.debugFlash && (k.FlashVars = "debug\x3d1");
            c.wmode || delete k.wmode;
            if (L)
                f = m.createElement("div"),
                r = ['\x3cobject id\x3d"' + b + '" data\x3d"' + d + '" type\x3d"' + k.type + '" title\x3d"' + k.title + '" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase\x3d"' + pb + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version\x3d6,0,40,0"\x3e', a("movie", d), a("AllowScriptAccess", c.allowScriptAccess), a("quality", k.quality), c.wmode ? a("wmode", c.wmode) : "", a("bgcolor", c.bgColor), a("hasPriority", "true"), c.debugFlash ? a("FlashVars", k.FlashVars) : "", "\x3c/object\x3e"].join("");
            else
                for (p in f = m.createElement("embed"),
                k)
                    k.hasOwnProperty(p) && f.setAttribute(p, k[p]);
            Ga();
            l = V();
            if (k = la())
                if (c.oMC = y(c.movieID) || m.createElement("div"),
                c.oMC.id)
                    q = c.oMC.className,
                    c.oMC.className = (q ? q + " " : "movieContainer") + (l ? " " + l : ""),
                    c.oMC.appendChild(f),
                    L && (p = c.oMC.appendChild(m.createElement("div")),
                    p.className = "sm2-object-box",
                    p.innerHTML = r),
                    Y = !0;
                else {
                    c.oMC.id = c.movieID;
                    c.oMC.className = "movieContainer " + l;
                    p = l = null;
                    c.useFlashBlock || (c.useHighPerformance ? l = {
                        position: "fixed",
                        width: "8px",
                        height: "8px",
                        bottom: "0px",
                        left: "0px",
                        overflow: "hidden"
                    } : (l = {
                        position: "absolute",
                        width: "6px",
                        height: "6px",
                        top: "-9999px",
                        left: "-9999px"
                    },
                    n && (l.left = Math.abs(parseInt(l.left, 10)) + "px")));
                    ub && (c.oMC.style.zIndex = 1E4);
                    if (!c.debugFlash)
                        for (q in l)
                            l.hasOwnProperty(q) && (c.oMC.style[q] = l[q]);
                    try {
                        L || c.oMC.appendChild(f),
                        k.appendChild(c.oMC),
                        L && (p = c.oMC.appendChild(m.createElement("div")),
                        p.className = "sm2-object-box",
                        p.innerHTML = r),
                        Y = !0
                    } catch (t) {
                        throw Error(s("domError") + " \n" + t.toString());
                    }
                }
            X = !0;
            e();
            return !0
        }
        ;
        ka = function() {
            if (c.html5Only)
                return ma(),
                !1;
            if (l)
                return !1;
            if (!c.url)
                return p("noURL"),
                !1;
            l = c.getMovie(c.id);
            l || (aa ? (L ? c.oMC.innerHTML = Ia : c.oMC.appendChild(aa),
            aa = null,
            X = !0) : ma(c.id, c.url),
            l = c.getMovie(c.id));
            "function" === typeof c.oninitmovie && setTimeout(c.oninitmovie, 1);
            Oa();
            return !0
        }
        ;
        T = function() {
            setTimeout(Ya, 1E3)
        }
        ;
        Ca = function() {
            h.setTimeout(function() {
                J("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");
                c.setup({
                    preferFlash: !1
                }).reboot();
                c.didFlashBlock = !0;
                c.beginDelayedInit()
            }, 1)
        }
        ;
        Ya = function() {
            var b, d = !1;
            if (!c.url || ba)
                return !1;
            ba = !0;
            w.remove(h, "load", T);
            if (F && wa && !Sa)
                return p("waitFocus"),
                !1;
            q || (b = c.getMoviePercent(),
            0 < b && 100 > b && (d = !0));
            setTimeout(function() {
                b = c.getMoviePercent();
                if (d)
                    return ba = !1,
                    c._wD(s("waitSWF")),
                    h.setTimeout(T, 1),
                    !1;
                q || (c._wD("soundManager: No Flash response within expected time. Likely causes: " + (0 === b ? "SWF load failed, " : "") + "Flash blocked or JS-Flash security error." + (c.debugFlash ? " " + s("checkSWF") : ""), 2),
                !ga && b && (p("localFail", 2),
                c.debugFlash || p("tryDebug", 2)),
                0 === b && c._wD(s("swf404", c.url), 1),
                B("flashtojs", !1, ": Timed out" + ga ? " (Check flash security or flash blockers)" : " (No plugin/missing SWF?)"));
                !q && nb && (null === b ? c.useFlashBlock || 0 === c.flashLoadTimeout ? (c.useFlashBlock && Ja(),
                p("waitForever")) : !c.useFlashBlock && da ? Ca() : (p("waitForever"),
                M({
                    type: "ontimeout",
                    ignoreInit: !0,
                    error: {
                        type: "INIT_FLASHBLOCK"
                    }
                })) : 0 === c.flashLoadTimeout ? p("waitForever") : !c.useFlashBlock && da ? Ca() : Ha(!0))
            }, c.flashLoadTimeout)
        }
        ;
        ja = function() {
            if (Sa || !wa)
                return w.remove(h, "focus", ja),
                !0;
            Sa = nb = !0;
            p("gotFocus");
            ba = !1;
            T();
            w.remove(h, "focus", ja);
            return !0
        }
        ;
        Oa = function() {
            O.length && (c._wD("SoundManager 2: " + O.join(" "), 1),
            O = [])
        }
        ;
        kb = function() {
            Oa();
            var b, d = [];
            if (c.useHTML5Audio && c.hasHTML5) {
                for (b in c.audioFormats)
                    c.audioFormats.hasOwnProperty(b) && d.push(b + " \x3d " + c.html5[b] + (!c.html5[b] && t && c.flash[b] ? " (using flash)" : c.preferFlash && c.flash[b] && t ? " (preferring flash)" : !c.html5[b] ? " (" + (c.audioFormats[b].required ? "required, " : "") + "and no flash support)" : ""));
                c._wD("SoundManager 2 HTML5 support: " + d.join(", "), 1)
            }
        }
        ;
        Z = function(b) {
            if (q)
                return !1;
            if (c.html5Only)
                return p("sm2Loaded", 1),
                q = !0,
                S(),
                B("onload", !0),
                !0;
            var d = !0, e;
            if (!c.useFlashBlock || !c.flashLoadTimeout || c.getMoviePercent())
                q = !0;
            e = {
                type: !F && t ? "NO_FLASH" : "INIT_TIMEOUT"
            };
            c._wD("SoundManager 2 " + (x ? "failed to load" : "loaded") + " (" + (x ? "Flash security/load error" : "OK") + ") " + String.fromCharCode(x ? 10006 : 10003), x ? 2 : 1);
            x || b ? (c.useFlashBlock && c.oMC && (c.oMC.className = V() + " " + (null === c.getMoviePercent() ? "swf_timedout" : "swf_error")),
            M({
                type: "ontimeout",
                error: e,
                ignoreInit: !0
            }),
            B("onload", !1),
            U(e),
            d = !1) : B("onload", !0);
            x || (c.waitForWindowLoad && !ia ? (p("waitOnload"),
            w.add(h, "load", S)) : (c.waitForWindowLoad && ia && p("docLoaded"),
            S()));
            return d
        }
        ;
        Xa = function() {
            var b, d = c.setupOptions;
            for (b in d)
                d.hasOwnProperty(b) && (c[b] === g ? c[b] = d[b] : c[b] !== d[b] && (c.setupOptions[b] = c[b]))
        }
        ;
        ya = function() {
            if (q)
                return p("didInit"),
                !1;
            if (c.html5Only)
                return q || (w.remove(h, "load", c.beginDelayedInit),
                c.enabled = !0,
                Z()),
                !0;
            ka();
            try {
                l._externalInterfaceTest(!1),
                Za(!0, c.flashPollingInterval || (c.useHighPerformance ? 10 : 50)),
                c.debugMode || l._disableDebug(),
                c.enabled = !0,
                B("jstoflash", !0),
                c.html5Only || w.add(h, "unload", xa)
            } catch (b) {
                return c._wD("js/flash exception: " + b.toString()),
                B("jstoflash", !1),
                U({
                    type: "JS_TO_FLASH_EXCEPTION",
                    fatal: !0
                }),
                Ha(!0),
                Z(),
                !1
            }
            Z();
            w.remove(h, "load", c.beginDelayedInit);
            return !0
        }
        ;
        N = function() {
            if ($)
                return !1;
            $ = !0;
            Xa();
            Ga();
            var b = null
              , b = null
              , d = W.toLowerCase();
            -1 !== d.indexOf("sm2-usehtml5audio\x3d") && (b = "1" === d.charAt(d.indexOf("sm2-usehtml5audio\x3d") + 18),
            fa && console.log((b ? "Enabling " : "Disabling ") + "useHTML5Audio via URL parameter"),
            c.setup({
                useHTML5Audio: b
            }));
            -1 !== d.indexOf("sm2-preferflash\x3d") && (b = "1" === d.charAt(d.indexOf("sm2-preferflash\x3d") + 16),
            fa && console.log((b ? "Enabling " : "Disabling ") + "preferFlash via URL parameter"),
            c.setup({
                preferFlash: b
            }));
            !F && c.hasHTML5 && (c._wD("SoundManager 2: No Flash detected" + (!c.useHTML5Audio ? ", enabling HTML5." : ". Trying HTML5-only mode."), 1),
            c.setup({
                useHTML5Audio: !0,
                preferFlash: !1
            }));
            hb();
            !F && t && (O.push(I.needFlash),
            c.setup({
                flashLoadTimeout: 1
            }));
            m.removeEventListener && m.removeEventListener("DOMContentLoaded", N, !1);
            ka();
            return !0
        }
        ;
        La = function() {
            "complete" === m.readyState && (N(),
            m.detachEvent("onreadystatechange", La));
            return !0
        }
        ;
        Fa = function() {
            ia = !0;
            N();
            w.remove(h, "load", Fa)
        }
        ;
        Ea = function() {
            if (Qa && ((!c.setupOptions.useHTML5Audio || c.setupOptions.preferFlash) && O.push(I.mobileUA),
            c.setupOptions.useHTML5Audio = !0,
            c.setupOptions.preferFlash = !1,
            ua || mb && !u.match(/android\s2\.3/i)))
                O.push(I.globalHTML5),
                ua && (c.ignoreFlash = !0),
                D = !0
        }
        ;
        Ea();
        Na();
        w.add(h, "focus", ja);
        w.add(h, "load", T);
        w.add(h, "load", Fa);
        m.addEventListener ? m.addEventListener("DOMContentLoaded", N, !1) : m.attachEvent ? m.attachEvent("onreadystatechange", La) : (B("onload", !1),
        U({
            type: "NO_DOM2_EVENTS",
            fatal: !0
        }))
    }
    if (!h || !h.document)
        throw Error("SoundManager requires a browser with window and document objects.");
    var P = null;
    if (void 0 === h.SM2_DEFER || !SM2_DEFER)
        P = new Q;
    "object" === typeof module && module && "object" === typeof module.exports ? (h.soundManager = P,
    module.exports.SoundManager = Q,
    module.exports.soundManager = P) : "function" === typeof define && define.amd ? define("SoundManager", [], function() {
        return {
            SoundManager: Q,
            soundManager: P
        }
    }) : (h.SoundManager = Q,
    h.soundManager = P)
}
)(window);
//XXX: SoundManager
soundManager.setup({
    url: '/file/learn/child/dungchung/lib_new_en/smg/v297a-20140901/swf/',
    debugMode: false,
    useHTML5Audio: true,
    preferFlash: false,
    debugFlash: true,
    useFlashBlock: true
});
function smca(options) {
    soundManager.onready(function() {
        soundManager.createSound({
            id: options.id,
            url: options.url,
            multiShot: false
        })
    })
}
$.fn.smasb = function(options) {
    var $this = $(this);
    var defaults = {
        theme: "seekbar",
        index: $this.attr('id') || 0,
        solution: 'sm',
        parent: undefined
    };
    var settings = $.extend({}, defaults, options);
    $this.attr('theme', settings.theme);
    if (settings.theme == "circle") {
        if (settings.parent) {
            $(settings.parent).append('<div id="jp_container_' + settings.index + '" class="jp-audio jpcircle">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface jp-circle">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '<ul>' + '</div></div>');
        } else {
            $this.after('<div id="jp_container_' + settings.index + '" class="jp-audio jpcircle">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface jp-circle">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '<ul>' + '</div></div>');
        }
    } else if (settings.theme == "seekbar") {
        if (settings.parent) {
            $(settings.parent).append('<div id="jp_container_' + settings.index + '" class="jp-audio">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '</ul>' + '<div class="jp-border"></div>' + '<div class="jp-progress-slide">' + '</div>' + '<div class="jp-progress-slide ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><div class="ui-slider-range ui-widget-header ui-slider-range-min" style="width: 0%;"></div><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a></div>' + '</div>' + '<div class="jp-time-holder">' + '<div class="jp-current-time">00:00</div>' + '</div>' + '</div>' + '<div class="jp-no-solution" style="display: none;">' + '<span>Update Required</span> To play the media you will need to either update your browser to a recent version or update your <a target="_blank" href="http://get.adobe.com/flashplayer/">Flash plugin</a>.' + '</div>' + '</div>' + '</div>');
        } else {
            $this.after('<div id="jp_container_' + settings.index + '" class="jp-audio">' + '<div class="jp-type-single">' + '<div class="jp-gui jp-interface">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '</ul>' + '<div class="jp-border"></div>' + '<div class="jp-progress-slide">' + '</div>' + '<div class="jp-progress-slide ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><div class="ui-slider-range ui-widget-header ui-slider-range-min" style="width: 0%;"></div><a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a></div>' + '</div>' + '<div class="jp-time-holder">' + '<div class="jp-current-time">00:00</div>' + '</div>' + '</div>' + '<div class="jp-no-solution" style="display: none;">' + '<span>Update Required</span> To play the media you will need to either update your browser to a recent version or update your <a target="_blank" href="http://get.adobe.com/flashplayer/">Flash plugin</a>.' + '</div>' + '</div>' + '</div>');
        }
    }
    var $sma = new smca({
        id: 'jp_container_' + settings.index,
        url: $this.attr('src')
    });
    $('#jp_container_' + settings.index + '  .jp-pause').on(click, function(e) {
        e.preventDefault();
        soundManager.pause('jp_container_' + settings.index);
    })
    $('#jp_container_' + settings.index + ' .jp-play').on(click, function(e) {
        e.preventDefault();
        soundManager.play('jp_container_' + settings.index, {
            onbufferchange: function(param) {},
            onconnect: function(param) {},
            ondataerror: function(param) {},
            onfinish: function(param) {
                $('#' + this.id + ' .jp-play').css({
                    display: 'block'
                });
                $('#' + this.id + ' .jp-pause').css({
                    display: 'none'
                });
                $('#' + this.id + ' .ui-slider-range').css({
                    width: 0 + '%'
                });
                $('#' + this.id + ' .ui-slider-handle').css({
                    left: 0 + '%'
                });
                $('#' + this.id + ' .jp-current-time').html("00:00");
            },
            onload: function(param) {},
            onpause: function() {
                $('#' + this.id + ' .jp-play').css({
                    display: 'block'
                });
                $('#' + this.id + ' .jp-pause').css({
                    display: 'none'
                });
            },
            onplay: function(param) {
                $('#' + this.id + ' .jp-play').css({
                    display: 'none'
                });
                $('#' + this.id + ' .jp-pause').css({
                    display: 'block'
                });
            },
            onresume: function(param) {
                $('#' + this.id + ' .jp-play').css({
                    display: 'none'
                });
                $('#' + this.id + ' .jp-pause').css({
                    display: 'block'
                });
            },
            onsuspend: function(param) {},
            onstop: function(param) {
                $('#' + this.id + ' .jp-play').css({
                    display: 'block'
                });
                $('#' + this.id + ' .jp-pause').css({
                    display: 'none'
                });
            },
            whileloading: function(param) {},
            whileplaying: function() {
                var percent = Math.floor(((this.position / this.duration) * 100));
                $('#' + this.id + ' .ui-slider-range').css({
                    width: percent + '%'
                });
                $('#' + this.id + ' .ui-slider-handle').css({
                    left: percent + '%'
                });
                var position = Math.floor(this.position / 1000);
                var _min = Math.floor(position / 60);
                var _sec = Math.floor(position % 60);
                $('#jp_container_' + settings.index + ' .jp-current-time').html(((_min >= 10) ? _min : '0' + _min) + ':' + ((_sec >= 10) ? _sec : '0' + _sec));
            }
        });
    });
}
;
$.fn.smiah = function(options) {
    var defaults = {
        sr: '//www.tienganh123.com/file/learn/child/dungchung/lib_new_en/init',
        id: 'amn',
        parent: 'body',
        solution: 'sm'
    };
    var settings = $.extend({}, defaults, options);
    $(settings.parent).append('<div src="' + settings.sr + '.mp3" id="' + settings.id.replace(/\s+/g, '') + '" class="soundJplayer" init="' + settings.init + '" parent="' + settings.parent + '"></div>');
    $('#' + settings.id).attr({
        solution: 'sm'
    });
    smca({
        url: settings.sr + '.mp3',
        id: settings.id
    });
}
$.fn.smpah = function(options) {
    var defaults = {
        stream: 0,
        reload: false,
        stop: undefined,
        callback: undefined,
        loops: 0
    };
    var settings = $.extend({}, defaults, options);
    soundManager.setPosition(settings.id, 0);
    if (settings.stopasm) {
        soundManager.stopAll();
    }
    ;if (settings.stopajp) {
        $(".soundJplayer").jPlayer("stop");
    }
    ;if (settings.stopvjp) {
        $(".jp-video").jPlayer("stop");
    }
    ;if (settings.stopall) {
        $.fn.saah();
    }
    ;soundManager.play(settings.id, {
        onplay: function() {
            if (settings.onplay) {
                settings.onplay();
            }
        },
        onstop: function() {
            $(document).trigger(settings.id + "_stop");
        },
        onfinish: function() {
            $(document).trigger(settings.id + "_ended");
            if (settings.callback) {
                settings.callback();
            }
            ;if ($.isNumeric(settings.loops) && settings.loops != 0) {
                settings.loops = (settings.loops != 0) ? (settings.loops - 1) : 0;
                $.fn.smpah(settings);
            }
        }
    });
}
;
$.fn.smsah = function(options) {
    if (jQuery.isEmptyObject(options)) {
        soundManager.stopAll();
    } else if (options.id) {}
}
;
//XXX: Default Audio
$.fn.dfca = function(options) {
    var defaults = {
        id: undefined,
        parent: undefined,
        controls: undefined,
        mp3: undefined,
        ogg: undefined,
    };
    var settings = $.extend({}, defaults, options);
    var dfah = document.createElement('audio');
    if (settings.id) {
        dfah.setAttribute('id', settings.id);
    }
    ;if (settings.controls) {
        dfah.setAttribute('controls', true);
        dfah.setAttribute("class", "dfa dfa_controls");
    } else {
        dfah.setAttribute("class", "dfa dfa_hidden");
    }
    ;if (settings.parent) {
        $(settings.parent).append(dfah);
    } else {
        $('body').append(dfah);
    }
    ;if (dfah.canPlayType('audio/mpeg') && settings.mp3) {
        dfah.setAttribute('src', settings.mp3);
        dfah.setAttribute('solution', 'df');
    } else if (dfah.canPlayType('audio/ogg') && settings.ogg) {
        dfah.setAttribute('src', 'audiofile.ogg');
        dfah.setAttribute('solution', 'df');
    } else if (settings.notsupport) {
        settings.notsupport();
        dfah.setAttribute('solution', 'other');
    } else {
        console.log('not supporting audio tag');
        dfah.setAttribute('solution', 'undefined');
    }
    ;$('#' + settings.id).on('play', function() {
        if (settings.onplay) {
            settings.onplay();
        }
        ;
    });
    $('#' + settings.id).on('pause', function() {
        if (settings.onpause) {
            settings.onpause();
        }
        ;
    });
    $('#' + settings.id).on('ended', function() {
        $('#' + settings.id).prop("currentTime", 0);
        if (settings.onended) {
            settings.onended();
        }
        ;
    });
}
;
$.fn.dfpa = function(options) {
    var defaults = {
        id: undefined,
        stop: undefined
    };
    var settings = $.extend({}, defaults, options);
    var $this = document.getElementById(settings.id);
    if (settings.stop) {
        $('.dfa').trigger('pause');
        $('.dfa').prop("currentTime", 0);
    }
    ;if ($this.getAttribute('solution') == "df") {
        $('#' + settings.id).trigger('play');
        $('#' + settings.id).unbind('play').bind('play', function() {
            if (settings.onplay) {
                settings.onplay();
            }
            ;
        });
        $('#' + settings.id).unbind('pause').bind('pause', function() {
            if (settings.onpause) {
                settings.onpause();
            }
            ;
        });
        $('#' + settings.id).unbind('ended').bind('ended', function() {
            $('#' + settings.id).prop("currentTime", 0);
            if (settings.onended) {
                settings.onended();
            }
            ;
        });
    } else if ($this.getAttribute == 'solution' && settings.notsuport) {
        settings.notsuport();
    } else {
        console.log('cannot playing audio');
    }
    ;
}
;
//XXX: JPlayer Video
$.fn.jpvsb = function(options) {
    var $this = $(this);
    var defaults = {
        index: $this.attr('id') || 0,
        parent: undefined
    };
    var settings = $.extend({}, defaults, options);
    var $width = parseInt($this.attr("width"));
    var $height = parseInt($this.attr("height"));
    $leftime = $width - 78 + 30;
    $wiprogress = $leftime - 70;
    if (settings.parent) {
        $(settings.parent).append('<div id="jp_container_' + settings.index + '" class="jp-video" style="width: ' + $width + 'px;">' + '<div class="jp-type-single">' + '<div class="jp-gui-v">' + '<div class="jp-video-play" style="width: ' + $width + 'px;">' + '<a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>' + '</div>' + '<div class="jp-gui jp-interface jp-interface-video">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '</ul>' + '<div class="jp-border"></div>' + '<div class="jp-progress-slide" style="width: ' + $wiprogress + 'px;"></div>' + '<div class="jp-time-holder">' + '<div class="jp-current-time" style="margin-left: ' + $leftime + 'px">00:00</div>' + '</div>' + '</div>' + '</div>' + '</div>' + '</div>');
    } else {
        $this.after('<div id="jp_container_' + settings.index + '" class="jp-video" style="width: ' + $width + 'px;">' + '<div class="jp-type-single">' + '<div class="jp-gui-v">' + '<div class="jp-video-play" style="width: ' + $width + 'px;">' + '<a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>' + '</div>' + '<div class="jp-gui jp-interface jp-interface-video">' + '<ul class="jp-controls">' + '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' + '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' + '</ul>' + '<div class="jp-border"></div>' + '<div class="jp-progress-slide" style="width: ' + $wiprogress + 'px;"></div>' + '<div class="jp-time-holder">' + '<div class="jp-current-time" style="margin-left: ' + $leftime + 'px">00:00</div>' + '</div>' + '</div>' + '</div>' + '</div>' + '</div>');
    }
    var myPlayerData, fixFlash_mp4, fixFlash_mp4_id, ignore_timeupdate;
    var options = {
        swfPath: jpswf,
        supplied: "mp3",
        preload: "auto",
        volume: 1,
        wmode: "window",
        solution: "html,flash",
        size: {
            width: $width + "px",
            height: $height + "px",
        },
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                flv: $this.attr('flv'),
                m4v: $this.attr('mp4'),
                poster: $this.attr('poster')
            });
        },
        timeupdate: function(event) {
            if (!ignore_timeupdate) {
                myControl.progress.slider("value", event.jPlayer.status.currentPercentAbsolute);
            }
        },
        volumechange: function(event) {
            if (event.jPlayer.options.muted) {
                myControl.volume.slider("value", 0);
            } else {
                myControl.volume.slider("value", event.jPlayer.options.volume);
            }
        },
        play: function() {
            $(this).jPlayer("pauseOthers");
            $this.siblings('.jp-video').find('.jp-video-play').css({
                "display": "none"
            });
            if (settings.onplay) {
                settings.onplay();
            }
        },
        stop: function() {
            $this.siblings('.jp-video').find('.jp-video-play').css({
                "display": "block"
            });
            $(this).jPlayer("playHead", 0);
            if (settings.onstop) {
                settings.onstop();
            }
        },
        pause: function() {
            $this.siblings('.jp-video').find('.jp-video-play').css({
                "display": "block"
            });
            if (settings.onpause) {
                settings.onpause();
            }
        },
        ended: function() {
            $(this).jPlayer("playHead", 0);
            $this.siblings('.jp-video').find('.jp-video-play').css({
                "display": "block"
            });
            if (settings.onended) {
                settings.onended();
            }
        },
        cssSelectorAncestor: '#jp_container_' + settings.index,
    };
    var myControl = {
        progress: $(options.cssSelectorAncestor + " .jp-progress-slide"),
        volume: $(options.cssSelectorAncestor + " .jp-volume-slide")
    };
    $this.jPlayer(options);
    myPlayerData = $this.data("jPlayer");
    myControl.progress.slider({
        animate: "fast",
        max: 100,
        range: "min",
        step: 0.1,
        value: 0,
        slide: function(event, ui) {
            var sp = myPlayerData.status.seekPercent;
            if (sp > 0) {
                if (fixFlash_mp4) {
                    ignore_timeupdate = true;
                    clearTimeout(fixFlash_mp4_id);
                    fixFlash_mp4_id = setTimeout(function() {
                        ignore_timeupdate = false;
                    }, 1000);
                }
                $this.jPlayer("playHead", ui.value * (100 / sp));
            } else {
                setTimeout(function() {
                    myControl.progress.slider("value", 0);
                }, 0);
            }
        }
    });
}
;
//XXX: Default Video
$.fn.dfvsb = function(options) {
    var $this = $(this);
    var defaults = {
        id: 'dvsb_' + $this.attr('id'),
        parent: undefined
    };
    var settings = $.extend({}, defaults, options);
    var $video = '<video width="' + $this.attr("width") + '" height="' + $this.attr("height") + '" class="kidsvideo dvsb" id="' + settings.id + '" poster="' + $this.attr("poster") + '" controls="controls" preload="none">'
    if ($this.attr("mp4") && $this.attr("mp4") != "") {
        $video += '<source type="video/mp4" src="' + $this.attr("mp4") + '">';
    }
    ;if ($this.attr("webm") && $this.attr("webm") != "") {
        $video += '<source src="' + $this.attr("webm") + '" type="video/webm" />';
    }
    ;if ($this.attr("webm") && $this.attr("webm") != "") {
        $video += '<source src="' + $this.attr("ogv") + '" type="video/ogg" />';
    }
    ;if ($this.attr("flv") && $this.attr("flv") != "") {
        $video += '<source src="' + $this.attr("flv") + '" type="video/flv" />';
    }
    ;$video += '</video>';
    if (settings.parrent) {
        $(settings.parrent).append($video);
    } else {
        $this.after($video);
    }
    $('#' + settings.id).on('play', function() {
        if (settings.onplay) {
            settings.onplay();
        }
    });
    $('#' + settings.id).on('pause', function() {
        if (settings.onpause) {
            settings.onpause();
        }
    });
    $('#' + settings.id).on('ended', function() {
        if (settings.onended) {
            settings.onended();
        }
    });
}
;
//XXX: Detect Video
$.fn.kvsb = function(options) {
    var $this = $(this);
    var dvpfk = document.createElement('video');
    if (dvpfk.canPlayType && dvpfk.canPlayType('video/mp4').replace(/no/, '') && options.solution == 'default') {
        $this.dfvsb(options);
    } else {
        $this.jpvsb(options);
    }
    ;
}
;
//XXX: Stop All Audio
$.fn.saah = function(options) {
    soundManager.stopAll();
    $(".jp-audio").jPlayer("stop");
    $(".soundJplayer").jPlayer("stop");
    $(".jp-video").jPlayer("stop");
    $(".kidsvideo").trigger('pause');
}
;
//XXX: kids quiz
var $kq_param = {
    url: "/file/learn/child/pc/kids_quiz/temp/",
    url2: "//goldenkids-data.tienganh123.com/file/learn/child/pc/kids_quiz/temp/",
    url_data: "//goldenkids-data.tienganh123.com/file/learn/child/pc/"
};
$.fn.kq_practice = function(options) {
    var _this = $(this);
    var _index = options.index || _this.index('.kq_practice');
    _this.attr({
        id: 'kq_practice' + _index
    });
    $.ajax({
        url: _this.attr('json'),
        dataType: 'json',
        type: "GET",
        cache: false,
        timeout: 15000,
        beforeSend: function() {
            _this.html('<div class="kq_loading"><div class="gks_table"><div class="gks_table_cell"><img class="kq_loading_i" src="/file/learn/child/pc/public/img/loading/loading_i.gif"/></div></div></div>')
        },
        success: function(param) {
            if (window["kq_practice" + _index + "_detect_get_json"]) {
                clearTimeout(window["kq_practice" + _index + "_detect_get_json"]);
            }
            ;$.ajax({
                url: $kq_param["url"].concat("practice/index.tpl"),
                type: "GET",
                timeout: 15000,
                beforeSend: function() {
                    param.min_percent = 80;
                    param.point_each_question = 10;
                },
                success: function(temp) {
                    if (window["kq_practice" + _index + "_detect_get_temp"]) {
                        clearTimeout(window["kq_practice" + _index + "_detect_get_temp"]);
                    }
                    ;var _param = {
                        url: $kq_param["url"],
                        url_data: $kq_param["url_data"],
                        index: _index,
                        json: param,
                    };
                    var _tpl = new jSmart(temp);
                    var _res = _tpl.fetch(_param);
                    _this.html(_res);
                },
                error: function(er) {
                    var _this = this;
                    window["kq_practice" + _index + "_detect_get_temp"] = setTimeout(function() {
                        $.ajax(_this);
                    }, 15000);
                }
            });
        },
        error: function(er) {
            var _this = this;
            window["kq_practice" + _index + "_detect_get_json"] = setTimeout(function() {
                $.ajax(_this);
            }, 15000);
        }
    });
}
;
$.fn.kq_lecture = function(options) {
    var _this = $(this);
    var _index = options.index || _this.index('.kq_lecture');
    _this.attr({
        id: 'kq_lecture' + _index
    });
    $.ajax({
        url: _this.attr('json'),
        dataType: 'json',
        type: "GET",
        cache: false,
        timeout: 15000,
        beforeSend: function() {
            _this.html('<div class="kq_loading"><div class="gks_table"><div class="gks_table_cell"><img class="kq_loading_i" src="/file/learn/child/pc/public/img/loading/loading_i.gif"/></div></div></div>')
        },
        success: function(param) {
            if (window["kq_lecture" + _index + "_detect_get_json"]) {
                clearTimeout(window["kq_lecture" + _index + "_detect_get_json"]);
            }
            ;$.ajax({
                url: $kq_param["url"].concat("lecture/index.tpl"),
                type: "GET",
                timeout: 15000,
                beforeSend: function() {
                    param.min_percent = 80;
                    param.point_each_question = 10;
                },
                success: function(temp) {
                    if (window["kq_lecture" + _index + "_detect_get_temp"]) {
                        clearTimeout(window["kq_lecture" + _index + "_detect_get_temp"]);
                    }
                    ;var _param = {
                        url: $kq_param["url"],
                        url_data: $kq_param["url_data"],
                        index: _index,
                        json: param,
                    };
                    var _tpl = new jSmart(temp);
                    var _res = _tpl.fetch(_param);
                    _this.html(_res);
                },
                error: function(er) {
                    var _this = this;
                    window["kq_lecture" + _index + "_detect_get_temp"] = setTimeout(function() {
                        $.ajax(_this);
                    }, 15000);
                }
            });
        },
        error: function(er) {
            var _this = this;
            window["kq_lecture" + _index + "_detect_get_json"] = setTimeout(function() {
                $.ajax(_this);
            }, 15000);
        }
    });
}
;
$.fn.kq_video = function(options) {
    var _this = $(this);
    var _index = options.index || _this.index('.kq_video');
    $.ajax({
        url: _this.attr('json'),
        dataType: 'json',
        type: "GET",
        cache: false,
        timeout: 15000,
        success: function(param) {
            if (window["kq_video" + _index + "_detect_get_json"]) {
                clearTimeout(window["kq_video" + _index + "_detect_get_json"]);
            }
            ;$.ajax({
                url: $kq_param["url"].concat("video/index.tpl"),
                type: "GET",
                timeout: 15000,
                beforeSend: function() {
                    _this.html('<div class="kq_loading"><div class="gks_table"><div class="gks_table_cell"><img class="kq_loading_i" src="/file/learn/child/pc/public/img/loading/loading_i.gif"/></div></div></div>')
                },
                success: function(temp) {
                    if (window["kq_video" + _index + "_detect_get_temp"]) {
                        clearTimeout(window["kq_video" + _index + "_detect_get_temp"]);
                    }
                    ;param.url = $kq_param["url"];
                    param.url_data = $kq_param["url_data"];
                    param.index = _index;
                    var _tpl = new jSmart(temp);
                    var _res = _tpl.fetch(param);
                    _this.html(_res);
                },
                error: function(er) {
                    var _this = this;
                    window["kq_video" + _index + "_detect_get_temp"] = setTimeout(function() {
                        $.ajax(_this);
                    }, 15000);
                }
            });
        },
        error: function(er) {
            var _this = this;
            window["kq_video" + _index + "_detect_get_json"] = setTimeout(function() {
                $.ajax(_this);
            }, 15000);
        }
    });
}
;
$.fn.kq_game = function(options) {
    var _this = $(this);
    var _index = options.index || _this.index('.kq_game');
    _this.attr({
        id: 'kq_game' + _index
    });
    $.ajax({
        url: _this.attr('json'),
        dataType: 'json',
        type: "GET",
        cache: false,
        timeout: 15000,
        beforeSend: function() {
            _this.html('<div class="kq_loading"><div class="gks_table"><div class="gks_table_cell"><img class="kq_loading_i" src="/file/learn/child/pc/public/img/loading/loading_i.gif"/></div></div></div>')
        },
        success: function(param) {
            if (window["kq_game" + _index + "_detect_get_json"]) {
                clearTimeout(window["kq_game" + _index + "_detect_get_json"]);
            }
            ;$.ajax({
                url: $kq_param["url"].concat("game/temp/", _this.attr('type'), "/index.tpl"),
                type: "GET",
                timeout: 15000,
                beforeSend: function() {},
                success: function(temp) {
                    if (window["kq_game" + _index + "_detect_get_temp"]) {
                        clearTimeout(window["kq_game" + _index + "_detect_get_temp"]);
                    }
                    ;var _param = {
                        url: $kq_param["url"],
                        url_data: $kq_param["url_data"],
                        index: _index,
                        json: param,
                        type: _this.attr('type')
                    };
                    var _tpl = new jSmart(temp);
                    var _res = _tpl.fetch(_param);
                    _this.html(_res);
                },
                error: function(er) {
                    var _this = this;
                    window["kq_game" + _index + "_detect_get_temp"] = setTimeout(function() {
                        $.ajax(_this);
                    }, 15000);
                }
            });
        },
        error: function(er) {
            var _this = this;
            window["kq_game" + _index + "_detect_get_json"] = setTimeout(function() {
                $.ajax(_this);
            }, 15000);
        }
    });
}
;
$(function() {
    $('.kq_video').each(function(index, ele) {
        $(this).kq_video({});
    });
    $('.kq_lecture').each(function(index, ele) {
        $(this).kq_lecture({});
    });
    $('.kq_practice').each(function(index, ele) {
        $(this).kq_practice({});
    });
    $('.kq_game').each(function(index, ele) {
        $(this).kq_game({});
    });
});
//XXX: load script
function loadScript(url, callback) {
    $.getScript(url, function(data, textStatus, jqxhr) {
        if (jqxhr.status != 200) {
            loadScript(url);
        } else {
            callback();
        }
    });
}
// XXX: kinetic
/*! KineticJS v4.7.4 2013-11-08 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
var Kinetic = {};
!function() {
    Kinetic = {
        version: "4.7.4",
        stages: [],
        idCounter: 0,
        ids: {},
        names: {},
        shapes: {},
        listenClickTap: !1,
        inDblClickWindow: !1,
        enableTrace: !1,
        traceArrMax: 100,
        dblClickWindow: 400,
        pixelRatio: void 0,
        UA: function() {
            var a = navigator.userAgent.toLowerCase()
              , b = /(chrome)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];
            return {
                browser: b[1] || "",
                version: b[2] || "0"
            }
        }(),
        Filters: {},
        Node: function(a) {
            this._init(a)
        },
        Shape: function(a) {
            this.__init(a)
        },
        Container: function(a) {
            this.__init(a)
        },
        Stage: function(a) {
            this.___init(a)
        },
        Layer: function(a) {
            this.___init(a)
        },
        Group: function(a) {
            this.___init(a)
        },
        isDragging: function() {
            var a = Kinetic.DD;
            return a ? a.isDragging : !1
        },
        isDragReady: function() {
            var a = Kinetic.DD;
            return a ? !!a.node : !1
        },
        _addId: function(a, b) {
            void 0 !== b && (this.ids[b] = a)
        },
        _removeId: function(a) {
            void 0 !== a && delete this.ids[a]
        },
        _addName: function(a, b) {
            void 0 !== b && (void 0 === this.names[b] && (this.names[b] = []),
            this.names[b].push(a))
        },
        _removeName: function(a, b) {
            if (void 0 !== a) {
                var c = this.names[a];
                if (void 0 !== c) {
                    for (var d = 0; d < c.length; d++) {
                        var e = c[d];
                        e._id === b && c.splice(d, 1)
                    }
                    0 === c.length && delete this.names[a]
                }
            }
        }
    }
}(),
function(a, b) {
    "object" == typeof exports ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.returnExports = b()
}(this, function() {
    return Kinetic
}),
function() {
    Kinetic.Collection = function() {
        var a = [].slice.call(arguments)
          , b = a.length
          , c = 0;
        for (this.length = b; b > c; c++)
            this[c] = a[c];
        return this
    }
    ,
    Kinetic.Collection.prototype = [],
    Kinetic.Collection.prototype.each = function(a) {
        for (var b = 0; b < this.length; b++)
            a(this[b], b)
    }
    ,
    Kinetic.Collection.prototype.toArray = function() {
        var a, b = [], c = this.length;
        for (a = 0; c > a; a++)
            b.push(this[a]);
        return b
    }
    ,
    Kinetic.Collection.toCollection = function(a) {
        var b, c = new Kinetic.Collection, d = a.length;
        for (b = 0; d > b; b++)
            c.push(a[b]);
        return c
    }
    ,
    Kinetic.Collection.mapMethods = function(a) {
        var b, c = a.length;
        for (b = 0; c > b; b++)
            !function(b) {
                var c = a[b];
                Kinetic.Collection.prototype[c] = function() {
                    var a, b = this.length;
                    for (args = [].slice.call(arguments),
                    a = 0; b > a; a++)
                        this[a][c].apply(this[a], args)
                }
            }(b)
    }
    ,
    Kinetic.Transform = function() {
        this.m = [1, 0, 0, 1, 0, 0]
    }
    ,
    Kinetic.Transform.prototype = {
        translate: function(a, b) {
            this.m[4] += this.m[0] * a + this.m[2] * b,
            this.m[5] += this.m[1] * a + this.m[3] * b
        },
        scale: function(a, b) {
            this.m[0] *= a,
            this.m[1] *= a,
            this.m[2] *= b,
            this.m[3] *= b
        },
        rotate: function(a) {
            var b = Math.cos(a)
              , c = Math.sin(a)
              , d = this.m[0] * b + this.m[2] * c
              , e = this.m[1] * b + this.m[3] * c
              , f = this.m[0] * -c + this.m[2] * b
              , g = this.m[1] * -c + this.m[3] * b;
            this.m[0] = d,
            this.m[1] = e,
            this.m[2] = f,
            this.m[3] = g
        },
        getTranslation: function() {
            return {
                x: this.m[4],
                y: this.m[5]
            }
        },
        skew: function(a, b) {
            var c = this.m[0] + this.m[2] * b
              , d = this.m[1] + this.m[3] * b
              , e = this.m[2] + this.m[0] * a
              , f = this.m[3] + this.m[1] * a;
            this.m[0] = c,
            this.m[1] = d,
            this.m[2] = e,
            this.m[3] = f
        },
        multiply: function(a) {
            var b = this.m[0] * a.m[0] + this.m[2] * a.m[1]
              , c = this.m[1] * a.m[0] + this.m[3] * a.m[1]
              , d = this.m[0] * a.m[2] + this.m[2] * a.m[3]
              , e = this.m[1] * a.m[2] + this.m[3] * a.m[3]
              , f = this.m[0] * a.m[4] + this.m[2] * a.m[5] + this.m[4]
              , g = this.m[1] * a.m[4] + this.m[3] * a.m[5] + this.m[5];
            this.m[0] = b,
            this.m[1] = c,
            this.m[2] = d,
            this.m[3] = e,
            this.m[4] = f,
            this.m[5] = g
        },
        invert: function() {
            var a = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2])
              , b = this.m[3] * a
              , c = -this.m[1] * a
              , d = -this.m[2] * a
              , e = this.m[0] * a
              , f = a * (this.m[2] * this.m[5] - this.m[3] * this.m[4])
              , g = a * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);
            this.m[0] = b,
            this.m[1] = c,
            this.m[2] = d,
            this.m[3] = e,
            this.m[4] = f,
            this.m[5] = g
        },
        getMatrix: function() {
            return this.m
        },
        setAbsolutePosition: function(a, b) {
            var c = this.m[0]
              , d = this.m[1]
              , e = this.m[2]
              , f = this.m[3]
              , g = this.m[4]
              , h = this.m[5]
              , i = (c * (b - h) - d * (a - g)) / (c * f - d * e)
              , j = (a - g - e * i) / c;
            this.translate(j, i)
        }
    };
    var a = "canvas"
      , b = "2d"
      , c = "[object Array]"
      , d = "[object Number]"
      , e = "[object String]"
      , f = Math.PI / 180
      , g = 180 / Math.PI
      , h = "#"
      , i = ""
      , j = "0"
      , k = "Kinetic warning: "
      , l = "Kinetic error: "
      , m = "rgb("
      , n = {
        aqua: [0, 255, 255],
        lime: [0, 255, 0],
        silver: [192, 192, 192],
        black: [0, 0, 0],
        maroon: [128, 0, 0],
        teal: [0, 128, 128],
        blue: [0, 0, 255],
        navy: [0, 0, 128],
        white: [255, 255, 255],
        fuchsia: [255, 0, 255],
        olive: [128, 128, 0],
        yellow: [255, 255, 0],
        orange: [255, 165, 0],
        gray: [128, 128, 128],
        purple: [128, 0, 128],
        green: [0, 128, 0],
        red: [255, 0, 0],
        pink: [255, 192, 203],
        cyan: [0, 255, 255],
        transparent: [255, 255, 255, 0]
    }
      , o = /rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;
    Kinetic.Util = {
        _isElement: function(a) {
            return !(!a || 1 != a.nodeType)
        },
        _isFunction: function(a) {
            return !!(a && a.constructor && a.call && a.apply)
        },
        _isObject: function(a) {
            return !!a && a.constructor == Object
        },
        _isArray: function(a) {
            return Object.prototype.toString.call(a) == c
        },
        _isNumber: function(a) {
            return Object.prototype.toString.call(a) == d
        },
        _isString: function(a) {
            return Object.prototype.toString.call(a) == e
        },
        _hasMethods: function(a) {
            var b, c = [];
            for (b in a)
                this._isFunction(a[b]) && c.push(b);
            return c.length > 0
        },
        _isInDocument: function(a) {
            for (; a = a.parentNode; )
                if (a == document)
                    return !0;
            return !1
        },
        _simplifyArray: function(a) {
            var b, c, d = [], e = a.length, f = Kinetic.Util;
            for (b = 0; e > b; b++)
                c = a[b],
                f._isNumber(c) ? c = Math.round(1e3 * c) / 1e3 : f._isString(c) || (c = c.toString()),
                d.push(c);
            return d
        },
        _getXY: function(a) {
            if (this._isNumber(a))
                return {
                    x: a,
                    y: a
                };
            if (this._isArray(a)) {
                if (1 === a.length) {
                    var b = a[0];
                    if (this._isNumber(b))
                        return {
                            x: b,
                            y: b
                        };
                    if (this._isArray(b))
                        return {
                            x: b[0],
                            y: b[1]
                        };
                    if (this._isObject(b))
                        return b
                } else if (a.length >= 2)
                    return {
                        x: a[0],
                        y: a[1]
                    }
            } else if (this._isObject(a))
                return a;
            return null
        },
        _getSize: function(a) {
            if (this._isNumber(a))
                return {
                    width: a,
                    height: a
                };
            if (this._isArray(a))
                if (1 === a.length) {
                    var b = a[0];
                    if (this._isNumber(b))
                        return {
                            width: b,
                            height: b
                        };
                    if (this._isArray(b)) {
                        if (b.length >= 4)
                            return {
                                width: b[2],
                                height: b[3]
                            };
                        if (b.length >= 2)
                            return {
                                width: b[0],
                                height: b[1]
                            }
                    } else if (this._isObject(b))
                        return b
                } else {
                    if (a.length >= 4)
                        return {
                            width: a[2],
                            height: a[3]
                        };
                    if (a.length >= 2)
                        return {
                            width: a[0],
                            height: a[1]
                        }
                }
            else if (this._isObject(a))
                return a;
            return null
        },
        _getPoints: function(a) {
            var b, c, d = [];
            if (void 0 === a)
                return [];
            if (c = a.length,
            this._isArray(a[0])) {
                for (b = 0; c > b; b++)
                    d.push({
                        x: a[b][0],
                        y: a[b][1]
                    });
                return d
            }
            if (this._isObject(a[0]))
                return a;
            for (b = 0; c > b; b += 2)
                d.push({
                    x: a[b],
                    y: a[b + 1]
                });
            return d
        },
        _getImage: function(c, d) {
            var e, f;
            c ? this._isElement(c) ? d(c) : this._isString(c) ? (e = new Image,
            e.onload = function() {
                d(e)
            }
            ,
            e.src = c) : c.data ? (f = document.createElement(a),
            f.width = c.width,
            f.height = c.height,
            _context = f.getContext(b),
            _context.putImageData(c, 0, 0),
            this._getImage(f.toDataURL(), d)) : d(null) : d(null)
        },
        _rgbToHex: function(a, b, c) {
            return ((1 << 24) + (a << 16) + (b << 8) + c).toString(16).slice(1)
        },
        _hexToRgb: function(a) {
            a = a.replace(h, i);
            var b = parseInt(a, 16);
            return {
                r: 255 & b >> 16,
                g: 255 & b >> 8,
                b: 255 & b
            }
        },
        getRandomColor: function() {
            for (var a = (16777215 * Math.random() << 0).toString(16); a.length < 6; )
                a = j + a;
            return h + a
        },
        get: function(a, b) {
            return void 0 === a ? b : a
        },
        getRGB: function(a) {
            var b;
            return a in n ? (b = n[a],
            {
                r: b[0],
                g: b[1],
                b: b[2]
            }) : a[0] === h ? this._hexToRgb(a.substring(1)) : a.substr(0, 4) === m ? (b = o.exec(a.replace(/ /g, "")),
            {
                r: parseInt(b[1], 10),
                g: parseInt(b[2], 10),
                b: parseInt(b[3], 10)
            }) : {
                r: 0,
                g: 0,
                b: 0
            }
        },
        _merge: function(a, b) {
            var c = this._clone(b);
            for (var d in a)
                c[d] = this._isObject(a[d]) ? this._merge(a[d], c[d]) : a[d];
            return c
        },
        _clone: function(a) {
            var b = {};
            for (var c in a)
                b[c] = this._isObject(a[c]) ? this._clone(a[c]) : a[c];
            return b
        },
        _degToRad: function(a) {
            return a * f
        },
        _radToDeg: function(a) {
            return a * g
        },
        _capitalize: function(a) {
            return a.charAt(0).toUpperCase() + a.slice(1)
        },
        error: function(a) {
            throw new Error(l + a)
        },
        warn: function(a) {
            window.console && console.warn && console.warn(k + a)
        },
        extend: function(a, b) {
            for (var c in b.prototype)
                c in a.prototype || (a.prototype[c] = b.prototype[c])
        },
        addMethods: function(a, b) {
            var c;
            for (c in b)
                a.prototype[c] = b[c]
        },
        _getControlPoints: function(a, b, c, d) {
            var e = a.x
              , f = a.y
              , g = b.x
              , h = b.y
              , i = c.x
              , j = c.y
              , k = Math.sqrt(Math.pow(g - e, 2) + Math.pow(h - f, 2))
              , l = Math.sqrt(Math.pow(i - g, 2) + Math.pow(j - h, 2))
              , m = d * k / (k + l)
              , n = d * l / (k + l)
              , o = g - m * (i - e)
              , p = h - m * (j - f)
              , q = g + n * (i - e)
              , r = h + n * (j - f);
            return [{
                x: o,
                y: p
            }, {
                x: q,
                y: r
            }]
        },
        _expandPoints: function(a, b) {
            var c, d, e = a.length, f = [];
            for (c = 1; e - 1 > c; c++)
                d = Kinetic.Util._getControlPoints(a[c - 1], a[c], a[c + 1], b),
                f.push(d[0]),
                f.push(a[c]),
                f.push(d[1]);
            return f
        },
        _removeLastLetter: function(a) {
            return a.substring(0, a.length - 1)
        }
    }
}(),
function() {
    var a = document.createElement("canvas")
      , b = a.getContext("2d")
      , c = window.devicePixelRatio || 1
      , d = b.webkitBackingStorePixelRatio || b.mozBackingStorePixelRatio || b.msBackingStorePixelRatio || b.oBackingStorePixelRatio || b.backingStorePixelRatio || 1
      , e = c / d;
    Kinetic.Canvas = function(a) {
        this.init(a)
    }
    ,
    Kinetic.Canvas.prototype = {
        init: function(a) {
            a = a || {};
            var b = a.pixelRatio || Kinetic.pixelRatio || e;
            this.pixelRatio = b,
            this._canvas = document.createElement("canvas"),
            this._canvas.style.padding = 0,
            this._canvas.style.margin = 0,
            this._canvas.style.border = 0,
            this._canvas.style.background = "transparent",
            this._canvas.style.position = "absolute",
            this._canvas.style.top = 0,
            this._canvas.style.left = 0
        },
        getContext: function() {
            return this.context
        },
        getPixelRatio: function() {
            return this.pixelRatio
        },
        setPixelRatio: function(a) {
            this.pixelRatio = a,
            this.setSize(this.getWidth(), this.getHeight())
        },
        setWidth: function(a) {
            this.width = this._canvas.width = a * this.pixelRatio,
            this._canvas.style.width = a + "px"
        },
        setHeight: function(a) {
            this.height = this._canvas.height = a * this.pixelRatio,
            this._canvas.style.height = a + "px"
        },
        getWidth: function() {
            return this.width
        },
        getHeight: function() {
            return this.height
        },
        setSize: function(a, b) {
            this.setWidth(a),
            this.setHeight(b)
        },
        toDataURL: function(a, b) {
            try {
                return this._canvas.toDataURL(a, b)
            } catch (c) {
                try {
                    return this._canvas.toDataURL()
                } catch (d) {
                    return Kinetic.Util.warn("Unable to get data URL. " + d.message),
                    ""
                }
            }
        }
    },
    Kinetic.SceneCanvas = function(a) {
        a = a || {};
        var b = a.width || 0
          , c = a.height || 0;
        Kinetic.Canvas.call(this, a),
        this.context = new Kinetic.SceneContext(this),
        this.setSize(b, c)
    }
    ,
    Kinetic.SceneCanvas.prototype = {
        setWidth: function(a) {
            var b = this.pixelRatio
              , c = this.getContext()._context;
            Kinetic.Canvas.prototype.setWidth.call(this, a),
            c.scale(b, b)
        },
        setHeight: function(a) {
            var b = this.pixelRatio
              , c = this.getContext()._context;
            Kinetic.Canvas.prototype.setHeight.call(this, a),
            c.scale(b, b)
        }
    },
    Kinetic.Util.extend(Kinetic.SceneCanvas, Kinetic.Canvas),
    Kinetic.HitCanvas = function(a) {
        a = a || {};
        var b = a.width || 0
          , c = a.height || 0;
        Kinetic.Canvas.call(this, a),
        this.context = new Kinetic.HitContext(this),
        this.setSize(b, c)
    }
    ,
    Kinetic.Util.extend(Kinetic.HitCanvas, Kinetic.Canvas)
}(),
function() {
    var a = ","
      , b = "("
      , c = ")"
      , d = "(["
      , e = "])"
      , f = ";"
      , g = "()"
      , h = "="
      , i = ["arc", "arcTo", "beginPath", "bezierCurveTo", "clearRect", "clip", "closePath", "createLinearGradient", "createPattern", "createRadialGradient", "drawImage", "fill", "fillText", "getImageData", "lineTo", "moveTo", "putImageData", "quadraticCurveTo", "rect", "restore", "rotate", "save", "scale", "setLineDash", "setTransform", "stroke", "strokeText", "transform", "translate"];
    Kinetic.Context = function(a) {
        this.init(a)
    }
    ,
    Kinetic.Context.prototype = {
        init: function(a) {
            this.canvas = a,
            this._context = a._canvas.getContext("2d"),
            Kinetic.enableTrace && (this.traceArr = [],
            this._enableTrace())
        },
        fillShape: function(a) {
            a.getFillEnabled() && this._fill(a)
        },
        strokeShape: function(a) {
            a.getStrokeEnabled() && this._stroke(a)
        },
        fillStrokeShape: function(a) {
            var b = a.getFillEnabled();
            b && this._fill(a),
            a.getStrokeEnabled() && this._stroke(a)
        },
        getTrace: function(i) {
            var j, k, l, m, n = this.traceArr, o = n.length, p = "";
            for (j = 0; o > j; j++)
                k = n[j],
                l = k.method,
                l ? (m = k.args,
                p += l,
                p += i ? g : Kinetic.Util._isArray(m[0]) ? d + m.join(a) + e : b + m.join(a) + c) : (p += k.property,
                i || (p += h + k.val)),
                p += f;
            return p
        },
        clearTrace: function() {
            this.traceArr = []
        },
        _trace: function(a) {
            var b, c = this.traceArr;
            c.push(a),
            b = c.length,
            b >= Kinetic.traceArrMax && c.shift()
        },
        reset: function() {
            var a = this.getCanvas().getPixelRatio();
            this.setTransform(1 * a, 0, 0, 1 * a, 0, 0)
        },
        getCanvas: function() {
            return this.canvas
        },
        clear: function() {
            var a, b, c = [].slice.call(arguments), d = this.getCanvas();
            c.length ? (a = Kinetic.Util._getXY(c),
            b = Kinetic.Util._getSize(c),
            this.clearRect(a.x || 0, a.y || 0, b.width, b.height)) : this.clearRect(0, 0, d.getWidth(), d.getHeight())
        },
        _applyLineCap: function(a) {
            var b = a.getLineCap();
            b && this.setAttr("lineCap", b)
        },
        _applyOpacity: function(a) {
            var b = a.getAbsoluteOpacity();
            1 !== b && this.setAttr("globalAlpha", b)
        },
        _applyLineJoin: function(a) {
            var b = a.getLineJoin();
            b && this.setAttr("lineJoin", b)
        },
        _applyAncestorTransforms: function(a) {
            var b = a.getAbsoluteTransform().getMatrix();
            this.transform(b[0], b[1], b[2], b[3], b[4], b[5])
        },
        _clip: function(a) {
            var b = a.getClipX() || 0
              , c = a.getClipY() || 0
              , d = a.getClipWidth()
              , e = a.getClipHeight();
            this.save(),
            this._applyAncestorTransforms(a),
            this.beginPath(),
            this.rect(b, c, d, e),
            this.clip(),
            this.reset(),
            a._drawChildren(this.getCanvas()),
            this.restore()
        },
        setAttr: function(a, b) {
            this._context[a] = b
        },
        arc: function() {
            var a = arguments;
            this._context.arc(a[0], a[1], a[2], a[3], a[4], a[5])
        },
        beginPath: function() {
            this._context.beginPath()
        },
        bezierCurveTo: function() {
            var a = arguments;
            this._context.bezierCurveTo(a[0], a[1], a[2], a[3], a[4], a[5])
        },
        clearRect: function() {
            var a = arguments;
            this._context.clearRect(a[0], a[1], a[2], a[3])
        },
        clip: function() {
            this._context.clip()
        },
        closePath: function() {
            this._context.closePath()
        },
        createLinearGradient: function() {
            var a = arguments;
            return this._context.createLinearGradient(a[0], a[1], a[2], a[3])
        },
        createPattern: function() {
            var a = arguments;
            return this._context.createPattern(a[0], a[1])
        },
        createRadialGradient: function() {
            var a = arguments;
            return this._context.createRadialGradient(a[0], a[1], a[2], a[3], a[4], a[5])
        },
        drawImage: function() {
            var a = arguments
              , b = this._context;
            3 === a.length ? b.drawImage(a[0], a[1], a[2]) : 5 === a.length ? b.drawImage(a[0], a[1], a[2], a[3], a[4]) : 9 === a.length && b.drawImage(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8])
        },
        fill: function() {
            this._context.fill()
        },
        fillText: function() {
            var a = arguments;
            this._context.fillText(a[0], a[1], a[2])
        },
        getImageData: function() {
            var a = arguments;
            return this._context.getImageData(a[0], a[1], a[2], a[3])
        },
        lineTo: function() {
            var a = arguments;
            this._context.lineTo(a[0], a[1])
        },
        moveTo: function() {
            var a = arguments;
            this._context.moveTo(a[0], a[1])
        },
        rect: function() {
            var a = arguments;
            this._context.rect(a[0], a[1], a[2], a[3])
        },
        putImageData: function() {
            var a = arguments;
            this._context.putImageData(a[0], a[1], a[2])
        },
        quadraticCurveTo: function() {
            var a = arguments;
            this._context.quadraticCurveTo(a[0], a[1], a[2], a[3])
        },
        restore: function() {
            this._context.restore()
        },
        rotate: function() {
            var a = arguments;
            this._context.rotate(a[0])
        },
        save: function() {
            this._context.save()
        },
        scale: function() {
            var a = arguments;
            this._context.scale(a[0], a[1])
        },
        setLineDash: function() {
            var a = arguments
              , b = this._context;
            this._context.setLineDash ? b.setLineDash(a[0]) : "mozDash"in b ? b.mozDash = a[0] : "webkitLineDash"in b && (b.webkitLineDash = a[0])
        },
        setTransform: function() {
            var a = arguments;
            this._context.setTransform(a[0], a[1], a[2], a[3], a[4], a[5])
        },
        stroke: function() {
            this._context.stroke()
        },
        strokeText: function() {
            var a = arguments;
            this._context.strokeText(a[0], a[1], a[2])
        },
        transform: function() {
            var a = arguments;
            this._context.transform(a[0], a[1], a[2], a[3], a[4], a[5])
        },
        translate: function() {
            var a = arguments;
            this._context.translate(a[0], a[1])
        },
        _enableTrace: function() {
            var a, b, c = this, d = i.length, e = Kinetic.Util._simplifyArray, f = this.setAttr;
            for (a = 0; d > a; a++)
                !function(a) {
                    var d, f = c[a];
                    c[a] = function() {
                        return b = e(Array.prototype.slice.call(arguments, 0)),
                        d = f.apply(c, arguments),
                        c._trace({
                            method: a,
                            args: b
                        }),
                        d
                    }
                }(i[a]);
            c.setAttr = function() {
                f.apply(c, arguments),
                c._trace({
                    property: arguments[0],
                    val: arguments[1]
                })
            }
        }
    },
    Kinetic.SceneContext = function(a) {
        Kinetic.Context.call(this, a)
    }
    ,
    Kinetic.SceneContext.prototype = {
        _fillColor: function(a) {
            var b = a.getFill();
            this.setAttr("fillStyle", b),
            a._fillFunc(this)
        },
        _fillPattern: function(a) {
            var b = a.getFillPatternImage()
              , c = a.getFillPatternX()
              , d = a.getFillPatternY()
              , e = a.getFillPatternScale()
              , f = a.getFillPatternRotation()
              , g = a.getFillPatternOffset()
              , h = a.getFillPatternRepeat();
            (c || d) && this.translate(c || 0, d || 0),
            f && this.rotate(f),
            e && this.scale(e.x, e.y),
            g && this.translate(-1 * g.x, -1 * g.y),
            this.setAttr("fillStyle", this.createPattern(b, h || "repeat")),
            this.fill()
        },
        _fillLinearGradient: function(a) {
            var b = a.getFillLinearGradientStartPoint()
              , c = a.getFillLinearGradientEndPoint()
              , d = a.getFillLinearGradientColorStops()
              , e = this.createLinearGradient(b.x, b.y, c.x, c.y);
            if (d) {
                for (var f = 0; f < d.length; f += 2)
                    e.addColorStop(d[f], d[f + 1]);
                this.setAttr("fillStyle", e),
                this.fill()
            }
        },
        _fillRadialGradient: function(a) {
            for (var b = a.getFillRadialGradientStartPoint(), c = a.getFillRadialGradientEndPoint(), d = a.getFillRadialGradientStartRadius(), e = a.getFillRadialGradientEndRadius(), f = a.getFillRadialGradientColorStops(), g = this.createRadialGradient(b.x, b.y, d, c.x, c.y, e), h = 0; h < f.length; h += 2)
                g.addColorStop(f[h], f[h + 1]);
            this.setAttr("fillStyle", g),
            this.fill()
        },
        _fill: function(a) {
            var b = a.getFill()
              , c = a.getFillPatternImage()
              , d = a.getFillLinearGradientColorStops()
              , e = a.getFillRadialGradientColorStops()
              , f = a.getFillPriority();
            b && "color" === f ? this._fillColor(a) : c && "pattern" === f ? this._fillPattern(a) : d && "linear-gradient" === f ? this._fillLinearGradient(a) : e && "radial-gradient" === f ? this._fillRadialGradient(a) : b ? this._fillColor(a) : c ? this._fillPattern(a) : d ? this._fillLinearGradient(a) : e && this._fillRadialGradient(a)
        },
        _stroke: function(a) {
            var b = a.getStroke()
              , c = a.getStrokeWidth()
              , d = a.getDashArray()
              , e = a.getStrokeScaleEnabled();
            a.hasStroke() && (e || (this.save(),
            this.setTransform(1, 0, 0, 1, 0, 0)),
            this._applyLineCap(a),
            d && a.getDashArrayEnabled() && this.setLineDash(d),
            this.setAttr("lineWidth", c || 2),
            this.setAttr("strokeStyle", b || "black"),
            a._strokeFunc(this),
            e || this.restore())
        },
        _applyShadow: function(a) {
            var b = Kinetic.Util
              , c = a.getAbsoluteOpacity()
              , d = b.get(a.getShadowColor(), "black")
              , e = b.get(a.getShadowBlur(), 5)
              , f = b.get(a.getShadowOpacity(), 0)
              , g = b.get(a.getShadowOffset(), {
                x: 0,
                y: 0
            });
            f && this.setAttr("globalAlpha", f * c),
            this.setAttr("shadowColor", d),
            this.setAttr("shadowBlur", e),
            this.setAttr("shadowOffsetX", g.x),
            this.setAttr("shadowOffsetY", g.y)
        }
    },
    Kinetic.Util.extend(Kinetic.SceneContext, Kinetic.Context),
    Kinetic.HitContext = function(a) {
        Kinetic.Context.call(this, a)
    }
    ,
    Kinetic.HitContext.prototype = {
        _fill: function(a) {
            this.save(),
            this.setAttr("fillStyle", a.colorKey),
            a._fillFuncHit(this),
            this.restore()
        },
        _stroke: function(a) {
            var b = a.getStroke()
              , c = a.getStrokeWidth();
            (b || c) && (this._applyLineCap(a),
            this.setAttr("lineWidth", c || 2),
            this.setAttr("strokeStyle", a.colorKey),
            a._strokeFuncHit(this))
        }
    },
    Kinetic.Util.extend(Kinetic.HitContext, Kinetic.Context)
}(),
function() {
    var a = "add"
      , b = "b"
      , c = "Deg"
      , d = "g"
      , e = "get"
      , f = "#"
      , g = "r"
      , h = "RGB"
      , i = "set"
      , j = "B"
      , k = "G"
      , l = "Height"
      , m = "R"
      , n = "Width"
      , o = "X"
      , p = "Y";
    Kinetic.Factory = {
        addGetterSetter: function(a, b, c) {
            this.addGetter(a, b, c),
            this.addSetter(a, b)
        },
        addPointGetterSetter: function(a, b, c) {
            this.addPointGetter(a, b, c),
            this.addPointSetter(a, b),
            this.addGetter(a, b + o, c),
            this.addGetter(a, b + p, c),
            this.addSetter(a, b + o),
            this.addSetter(a, b + p)
        },
        addBoxGetterSetter: function(a, b, c) {
            this.addBoxGetter(a, b, c),
            this.addBoxSetter(a, b),
            this.addGetter(a, b + o, c),
            this.addGetter(a, b + p, c),
            this.addGetter(a, b + n, c),
            this.addGetter(a, b + l, c),
            this.addSetter(a, b + o),
            this.addSetter(a, b + p),
            this.addSetter(a, b + n),
            this.addSetter(a, b + l)
        },
        addPointsGetterSetter: function(a, b) {
            this.addPointsGetter(a, b),
            this.addPointsSetter(a, b),
            this.addPointAdder(a, b)
        },
        addRotationGetterSetter: function(a, b, c) {
            this.addRotationGetter(a, b, c),
            this.addRotationSetter(a, b)
        },
        addColorGetterSetter: function(a, c) {
            this.addGetter(a, c),
            this.addSetter(a, c),
            this.addColorRGBGetter(a, c),
            this.addColorComponentGetter(a, c, g),
            this.addColorComponentGetter(a, c, d),
            this.addColorComponentGetter(a, c, b),
            this.addColorRGBSetter(a, c),
            this.addColorComponentSetter(a, c, g),
            this.addColorComponentSetter(a, c, d),
            this.addColorComponentSetter(a, c, b)
        },
        addColorRGBGetter: function(a, b) {
            var c = e + Kinetic.Util._capitalize(b) + h;
            a.prototype[c] = function() {
                return Kinetic.Util.getRGB(this.attrs[b])
            }
        },
        addColorComponentGetter: function(a, b, c) {
            var d = e + Kinetic.Util._capitalize(b)
              , f = d + Kinetic.Util._capitalize(c);
            a.prototype[f] = function() {
                return this[d + h]()[c]
            }
        },
        addPointsGetter: function(a, b) {
            var c = e + Kinetic.Util._capitalize(b);
            a.prototype[c] = function() {
                var a = this.attrs[b];
                return void 0 === a ? [] : a
            }
        },
        addGetter: function(a, b, c) {
            var d = e + Kinetic.Util._capitalize(b);
            a.prototype[d] = function() {
                var a = this.attrs[b];
                return void 0 === a ? c : a
            }
        },
        addPointGetter: function(a, b) {
            var c = e + Kinetic.Util._capitalize(b);
            a.prototype[c] = function() {
                var a = this;
                return {
                    x: a[c + o](),
                    y: a[c + p]()
                }
            }
        },
        addBoxGetter: function(a, b) {
            var c = e + Kinetic.Util._capitalize(b);
            a.prototype[c] = function() {
                var a = this;
                return {
                    x: a[c + o](),
                    y: a[c + p](),
                    width: a[c + n](),
                    height: a[c + l]()
                }
            }
        },
        addRotationGetter: function(a, b, d) {
            var f = e + Kinetic.Util._capitalize(b);
            a.prototype[f] = function() {
                var a = this.attrs[b];
                return void 0 === a && (a = d),
                a
            }
            ,
            a.prototype[f + c] = function() {
                var a = this.attrs[b];
                return void 0 === a && (a = d),
                Kinetic.Util._radToDeg(a)
            }
        },
        addColorRGBSetter: function(a, b) {
            var c = i + Kinetic.Util._capitalize(b) + h;
            a.prototype[c] = function(a) {
                var c = a && void 0 !== a.r ? 0 | a.r : this.getAttr(b + m)
                  , d = a && void 0 !== a.g ? 0 | a.g : this.getAttr(b + k)
                  , e = a && void 0 !== a.b ? 0 | a.b : this.getAttr(b + j);
                this._setAttr(b, f + Kinetic.Util._rgbToHex(c, d, e))
            }
        },
        addColorComponentSetter: function(a, b, c) {
            var d = i + Kinetic.Util._capitalize(b)
              , e = d + Kinetic.Util._capitalize(c);
            a.prototype[e] = function(a) {
                var b = {};
                b[c] = a,
                this[d + h](b)
            }
        },
        addPointsSetter: function(a, b) {
            var c = i + Kinetic.Util._capitalize(b);
            a.prototype[c] = function(a) {
                var b = Kinetic.Util._getPoints(a);
                this._setAttr("points", b)
            }
        },
        addSetter: function(a, b) {
            var c = i + Kinetic.Util._capitalize(b);
            a.prototype[c] = function(a) {
                this._setAttr(b, a)
            }
        },
        addPointSetter: function(a, b) {
            var c = i + Kinetic.Util._capitalize(b);
            a.prototype[c] = function() {
                var a = Kinetic.Util._getXY([].slice.call(arguments))
                  , d = this.attrs[b]
                  , e = 0
                  , f = 0;
                a && (e = a.x,
                f = a.y,
                this._fireBeforeChangeEvent(b, d, a),
                void 0 !== e && this[c + o](e),
                void 0 !== f && this[c + p](f),
                this._fireChangeEvent(b, d, a))
            }
        },
        addBoxSetter: function(a, b) {
            var c = i + Kinetic.Util._capitalize(b);
            a.prototype[c] = function() {
                var a, d, e, f, g = [].slice.call(arguments), h = Kinetic.Util._getXY(g), i = Kinetic.Util._getSize(g), j = Kinetic.Util._merge(h, i), k = this.attrs[b];
                j && (a = j.x,
                d = j.y,
                e = j.width,
                f = j.height,
                this._fireBeforeChangeEvent(b, k, j),
                void 0 !== a && this[c + o](a),
                void 0 !== d && this[c + p](d),
                void 0 !== e && this[c + n](e),
                void 0 !== f && this[c + l](f),
                this._fireChangeEvent(b, k, j))
            }
        },
        addRotationSetter: function(a, b) {
            var d = i + Kinetic.Util._capitalize(b);
            a.prototype[d] = function(a) {
                this._setAttr(b, a)
            }
            ,
            a.prototype[d + c] = function(a) {
                this._setAttr(b, Kinetic.Util._degToRad(a))
            }
        },
        addPointAdder: function(b, c) {
            var d = a + Kinetic.Util._removeLastLetter(Kinetic.Util._capitalize(c));
            b.prototype[d] = function() {
                var a = Kinetic.Util._getXY([].slice.call(arguments))
                  , b = this.attrs[c];
                a && (this._fireBeforeChangeEvent(c, b, a),
                this.attrs[c].push(a),
                this._fireChangeEvent(c, b, a))
            }
        }
    }
}(),
function() {
    var a = "absoluteOpacity"
      , b = "absoluteTransform"
      , c = "before"
      , d = "Change"
      , e = "children"
      , f = "."
      , g = ""
      , h = "get"
      , i = "id"
      , j = "kinetic"
      , k = "listening"
      , l = "mouseenter"
      , m = "mouseleave"
      , n = "name"
      , o = "set"
      , p = "Shape"
      , q = " "
      , r = "stage"
      , s = "transform"
      , t = "Stage"
      , u = "visible"
      , v = ["xChange.kinetic", "yChange.kinetic", "scaleXChange.kinetic", "scaleYChange.kinetic", "skewXChange.kinetic", "skewYChange.kinetic", "rotationChange.kinetic", "offsetXChange.kinetic", "offsetYChange.kinetic"].join(q);
    Kinetic.Util.addMethods(Kinetic.Node, {
        _init: function(c) {
            var d = this;
            this._id = Kinetic.idCounter++,
            this.eventListeners = {},
            this.attrs = {},
            this.cache = {},
            this.setAttrs(c),
            this.on(v, function() {
                this._clearCache(s),
                d._clearSelfAndChildrenCache(b)
            }),
            this.on("visibleChange.kinetic", function() {
                d._clearSelfAndChildrenCache(u)
            }),
            this.on("listeningChange.kinetic", function() {
                d._clearSelfAndChildrenCache(k)
            }),
            this.on("opacityChange.kinetic", function() {
                d._clearSelfAndChildrenCache(a)
            })
        },
        clearCache: function() {
            this.cache = {}
        },
        _clearCache: function(a) {
            delete this.cache[a]
        },
        _getCache: function(a, b) {
            var c = this.cache[a];
            return void 0 === c && (this.cache[a] = b.call(this)),
            this.cache[a]
        },
        _clearSelfAndChildrenCache: function(a) {
            this._clearCache(a),
            this.children && this.getChildren().each(function(b) {
                b._clearSelfAndChildrenCache(a)
            })
        },
        on: function(a, b) {
            var c, d, e, h, i, j = a.split(q), k = j.length;
            for (c = 0; k > c; c++)
                d = j[c],
                e = d.split(f),
                h = e[0],
                i = e[1] || g,
                this.eventListeners[h] || (this.eventListeners[h] = []),
                this.eventListeners[h].push({
                    name: i,
                    handler: b
                });
            return this
        },
        off: function(a) {
            var b, c, d, e, g, h, i = a.split(q), j = i.length;
            for (b = 0; j > b; b++)
                if (d = i[b],
                e = d.split(f),
                g = e[0],
                h = e[1],
                g)
                    this.eventListeners[g] && this._off(g, h);
                else
                    for (c in this.eventListeners)
                        this._off(c, h);
            return this
        },
        remove: function() {
            var c = this.getParent();
            return c && c.children && (c.children.splice(this.index, 1),
            c._setChildrenIndices(),
            delete this.parent),
            this._clearSelfAndChildrenCache(r),
            this._clearSelfAndChildrenCache(b),
            this._clearSelfAndChildrenCache(u),
            this._clearSelfAndChildrenCache(k),
            this._clearSelfAndChildrenCache(a),
            this
        },
        destroy: function() {
            Kinetic._removeId(this.getId()),
            Kinetic._removeName(this.getName(), this._id),
            this.remove()
        },
        getAttr: function(a) {
            var b = h + Kinetic.Util._capitalize(a);
            return Kinetic.Util._isFunction(this[b]) ? this[b]() : this.attrs[a]
        },
        getAncestors: function() {
            for (var a = this.getParent(), b = new Kinetic.Collection; a; )
                b.push(a),
                a = a.getParent();
            return b
        },
        setAttr: function() {
            var a = Array.prototype.slice.call(arguments)
              , b = a[0]
              , c = o + Kinetic.Util._capitalize(b)
              , d = this[c];
            return a.shift(),
            Kinetic.Util._isFunction(d) ? d.apply(this, a) : this.attrs[b] = a[0],
            this
        },
        getAttrs: function() {
            return this.attrs || {}
        },
        setAttrs: function(a) {
            var b, c;
            if (a)
                for (b in a)
                    b === e || (c = o + Kinetic.Util._capitalize(b),
                    Kinetic.Util._isFunction(this[c]) ? this[c](a[b]) : this._setAttr(b, a[b]));
            return this
        },
        isListening: function() {
            return this._getCache(k, this._isListening)
        },
        _isListening: function() {
            var a = this.getListening()
              , b = this.getParent();
            return a && b && !b.isListening() ? !1 : a
        },
        isVisible: function() {
            return this._getCache(u, this._isVisible)
        },
        _isVisible: function() {
            var a = this.getVisible()
              , b = this.getParent();
            return a && b && !b.isVisible() ? !1 : a
        },
        show: function() {
            return this.setVisible(!0),
            this
        },
        hide: function() {
            return this.setVisible(!1),
            this
        },
        getZIndex: function() {
            return this.index || 0
        },
        getAbsoluteZIndex: function() {
            function a(i) {
                for (b = [],
                c = i.length,
                d = 0; c > d; d++)
                    e = i[d],
                    h++,
                    e.nodeType !== p && (b = b.concat(e.getChildren().toArray())),
                    e._id === g._id && (d = c);
                b.length > 0 && b[0].getLevel() <= f && a(b)
            }
            var b, c, d, e, f = this.getLevel(), g = this, h = 0;
            return g.nodeType !== t && a(g.getStage().getChildren()),
            h
        },
        getLevel: function() {
            for (var a = 0, b = this.parent; b; )
                a++,
                b = b.parent;
            return a
        },
        setPosition: function() {
            var a = Kinetic.Util._getXY([].slice.call(arguments));
            return this.setX(a.x),
            this.setY(a.y),
            this
        },
        getPosition: function() {
            return {
                x: this.getX(),
                y: this.getY()
            }
        },
        getAbsolutePosition: function() {
            var a = this.getAbsoluteTransform().getMatrix()
              , b = new Kinetic.Transform
              , c = this.getOffset();
            return b.m = a.slice(),
            b.translate(c.x, c.y),
            b.getTranslation()
        },
        setAbsolutePosition: function() {
            var a, b = Kinetic.Util._getXY([].slice.call(arguments)), c = this._clearTransform();
            return this.attrs.x = c.x,
            this.attrs.y = c.y,
            delete c.x,
            delete c.y,
            a = this.getAbsoluteTransform(),
            a.invert(),
            a.translate(b.x, b.y),
            b = {
                x: this.attrs.x + a.getTranslation().x,
                y: this.attrs.y + a.getTranslation().y
            },
            this.setPosition(b.x, b.y),
            this._setTransform(c),
            this
        },
        _setTransform: function(a) {
            var c;
            for (c in a)
                this.attrs[c] = a[c];
            this._clearCache(s),
            this._clearSelfAndChildrenCache(b)
        },
        _clearTransform: function() {
            var a = {
                x: this.getX(),
                y: this.getY(),
                rotation: this.getRotation(),
                scaleX: this.getScaleX(),
                scaleY: this.getScaleY(),
                offsetX: this.getOffsetX(),
                offsetY: this.getOffsetY(),
                skewX: this.getSkewX(),
                skewY: this.getSkewY()
            };
            return this.attrs.x = 0,
            this.attrs.y = 0,
            this.attrs.rotation = 0,
            this.attrs.scaleX = 1,
            this.attrs.scaleY = 1,
            this.attrs.offsetX = 0,
            this.attrs.offsetY = 0,
            this.attrs.skewX = 0,
            this.attrs.skewY = 0,
            this._clearCache(s),
            this._clearSelfAndChildrenCache(b),
            a
        },
        move: function() {
            var a = Kinetic.Util._getXY([].slice.call(arguments))
              , b = this.getX()
              , c = this.getY();
            return void 0 !== a.x && (b += a.x),
            void 0 !== a.y && (c += a.y),
            this.setPosition(b, c),
            this
        },
        _eachAncestorReverse: function(a, b) {
            var c, d, e = [], f = this.getParent();
            for (b && e.unshift(this); f; )
                e.unshift(f),
                f = f.parent;
            for (c = e.length,
            d = 0; c > d; d++)
                a(e[d])
        },
        rotate: function(a) {
            return this.setRotation(this.getRotation() + a),
            this
        },
        rotateDeg: function(a) {
            return this.setRotation(this.getRotation() + Kinetic.Util._degToRad(a)),
            this
        },
        moveToTop: function() {
            var a = this.index;
            return this.parent.children.splice(a, 1),
            this.parent.children.push(this),
            this.parent._setChildrenIndices(),
            !0
        },
        moveUp: function() {
            var a = this.index
              , b = this.parent.getChildren().length;
            return b - 1 > a ? (this.parent.children.splice(a, 1),
            this.parent.children.splice(a + 1, 0, this),
            this.parent._setChildrenIndices(),
            !0) : !1
        },
        moveDown: function() {
            var a = this.index;
            return a > 0 ? (this.parent.children.splice(a, 1),
            this.parent.children.splice(a - 1, 0, this),
            this.parent._setChildrenIndices(),
            !0) : !1
        },
        moveToBottom: function() {
            var a = this.index;
            return a > 0 ? (this.parent.children.splice(a, 1),
            this.parent.children.unshift(this),
            this.parent._setChildrenIndices(),
            !0) : !1
        },
        setZIndex: function(a) {
            var b = this.index;
            return this.parent.children.splice(b, 1),
            this.parent.children.splice(a, 0, this),
            this.parent._setChildrenIndices(),
            this
        },
        getAbsoluteOpacity: function() {
            return this._getCache(a, this._getAbsoluteOpacity)
        },
        _getAbsoluteOpacity: function() {
            var a = this.getOpacity();
            return this.getParent() && (a *= this.getParent().getAbsoluteOpacity()),
            a
        },
        moveTo: function(a) {
            return Kinetic.Node.prototype.remove.call(this),
            a.add(this),
            this
        },
        toObject: function() {
            var a, b, c = Kinetic.Util, d = {}, e = this.getAttrs();
            d.attrs = {};
            for (a in e)
                b = e[a],
                c._isFunction(b) || c._isElement(b) || c._isObject(b) && c._hasMethods(b) || (d.attrs[a] = b);
            return d.className = this.getClassName(),
            d
        },
        toJSON: function() {
            return JSON.stringify(this.toObject())
        },
        getParent: function() {
            return this.parent
        },
        getLayer: function() {
            return this.getParent().getLayer()
        },
        getStage: function() {
            return this._getCache(r, this._getStage)
        },
        _getStage: function() {
            var a = this.getParent();
            return a ? a.getStage() : void 0
        },
        fire: function(a, b, c) {
            return c ? this._fireAndBubble(a, b || {}) : this._fire(a, b || {}),
            this
        },
        getAbsoluteTransform: function() {
            return this._getCache(b, this._getAbsoluteTransform)
        },
        _getAbsoluteTransform: function() {
            var a, b = new Kinetic.Transform;
            return this._eachAncestorReverse(function(c) {
                a = c.getTransform(),
                b.multiply(a)
            }, !0),
            b
        },
        _getTransform: function() {
            var a = new Kinetic.Transform
              , b = this.getX()
              , c = this.getY()
              , d = this.getRotation()
              , e = this.getScaleX()
              , f = this.getScaleY()
              , g = this.getSkewX()
              , h = this.getSkewY()
              , i = this.getOffsetX()
              , j = this.getOffsetY();
            return (0 !== b || 0 !== c) && a.translate(b, c),
            0 !== d && a.rotate(d),
            (0 !== g || 0 !== h) && a.skew(g, h),
            (1 !== e || 1 !== f) && a.scale(e, f),
            (0 !== i || 0 !== j) && a.translate(-1 * i, -1 * j),
            a
        },
        clone: function(a) {
            var b, c, d, e, f, g = this.getClassName(), h = new Kinetic[g](this.attrs);
            for (b in this.eventListeners)
                for (c = this.eventListeners[b],
                d = c.length,
                e = 0; d > e; e++)
                    f = c[e],
                    f.name.indexOf(j) < 0 && (h.eventListeners[b] || (h.eventListeners[b] = []),
                    h.eventListeners[b].push(f));
            return h.setAttrs(a),
            h
        },
        toDataURL: function(a) {
            a = a || {};
            var b = a.mimeType || null
              , c = a.quality || null
              , d = this.getStage()
              , e = a.x || 0
              , f = a.y || 0
              , g = new Kinetic.SceneCanvas({
                width: a.width || d.getWidth(),
                height: a.height || d.getHeight(),
                pixelRatio: 1
            })
              , h = g.getContext();
            return h.save(),
            (e || f) && h.translate(-1 * e, -1 * f),
            this.drawScene(g),
            h.restore(),
            g.toDataURL(b, c)
        },
        toImage: function(a) {
            Kinetic.Util._getImage(this.toDataURL(a), function(b) {
                a.callback(b)
            })
        },
        setSize: function() {
            var a = Kinetic.Util._getSize(Array.prototype.slice.call(arguments));
            return this.setWidth(a.width),
            this.setHeight(a.height),
            this
        },
        getSize: function() {
            return {
                width: this.getWidth(),
                height: this.getHeight()
            }
        },
        getWidth: function() {
            return this.attrs.width || 0
        },
        getHeight: function() {
            return this.attrs.height || 0
        },
        getClassName: function() {
            return this.className || this.nodeType
        },
        getType: function() {
            return this.nodeType
        },
        _get: function(a) {
            return this.nodeType === a ? [this] : []
        },
        _off: function(a, b) {
            var c, d, e = this.eventListeners[a];
            for (c = 0; c < e.length; c++)
                if (d = e[c].name,
                !("kinetic" === d && "kinetic" !== b || b && d !== b)) {
                    if (e.splice(c, 1),
                    0 === e.length) {
                        delete this.eventListeners[a];
                        break
                    }
                    c--
                }
        },
        _fireBeforeChangeEvent: function(a, b, e) {
            this._fire(c + Kinetic.Util._capitalize(a) + d, {
                oldVal: b,
                newVal: e
            })
        },
        _fireChangeEvent: function(a, b, c) {
            this._fire(a + d, {
                oldVal: b,
                newVal: c
            })
        },
        setId: function(a) {
            var b = this.getId();
            return Kinetic._removeId(b),
            Kinetic._addId(this, a),
            this._setAttr(i, a),
            this
        },
        setName: function(a) {
            var b = this.getName();
            return Kinetic._removeName(b, this._id),
            Kinetic._addName(this, a),
            this._setAttr(n, a),
            this
        },
        _setAttr: function(a, b) {
            var c;
            void 0 !== b && (c = this.attrs[a],
            this._fireBeforeChangeEvent(a, c, b),
            this.attrs[a] = b,
            this._fireChangeEvent(a, c, b))
        },
        _fireAndBubble: function(a, b, c) {
            var d = !0;
            b && this.nodeType === p && (b.targetNode = this),
            a === l && c && this._id === c._id ? d = !1 : a === m && c && this._id === c._id && (d = !1),
            d && (this._fire(a, b),
            b && !b.cancelBubble && this.parent && (c && c.parent ? this._fireAndBubble.call(this.parent, a, b, c.parent) : this._fireAndBubble.call(this.parent, a, b)))
        },
        _fire: function(a, b) {
            var c, d = this.eventListeners[a];
            if (d)
                for (c = 0; c < d.length; c++)
                    d[c].handler.call(this, b)
        },
        draw: function() {
            return this.drawScene(),
            this.drawHit(),
            this
        },
        shouldDrawHit: function() {
            return this.isListening() && this.isVisible() && !Kinetic.isDragging()
        },
        isDraggable: function() {
            return !1
        },
        getTransform: function() {
            return this._getCache(s, this._getTransform)
        }
    }),
    Kinetic.Node.create = function(a, b) {
        return this._createNode(JSON.parse(a), b)
    }
    ,
    Kinetic.Node._createNode = function(a, b) {
        var c, d, e, f = Kinetic.Node.prototype.getClassName.call(a), g = a.children;
        if (b && (a.attrs.container = b),
        c = new Kinetic[f](a.attrs),
        g)
            for (d = g.length,
            e = 0; d > e; e++)
                c.add(this._createNode(g[e]));
        return c
    }
    ,
    Kinetic.Factory.addGetterSetter(Kinetic.Node, "x", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Node, "y", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Node, "opacity", 1),
    Kinetic.Factory.addGetter(Kinetic.Node, "name"),
    Kinetic.Factory.addGetter(Kinetic.Node, "id"),
    Kinetic.Factory.addRotationGetterSetter(Kinetic.Node, "rotation", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, "scale", 1),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, "skew", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, "offset", 0),
    Kinetic.Factory.addSetter(Kinetic.Node, "width"),
    Kinetic.Factory.addSetter(Kinetic.Node, "height"),
    Kinetic.Factory.addGetterSetter(Kinetic.Node, "listening", !0),
    Kinetic.Factory.addGetterSetter(Kinetic.Node, "visible", !0),
    Kinetic.Collection.mapMethods(["on", "off", "remove", "destroy", "show", "hide", "move", "rotate", "moveToTop", "moveUp", "moveDown", "moveToBottom", "moveTo", "fire", "draw"])
}(),
function() {
    function a(a) {
        window.setTimeout(a, 1e3 / 60)
    }
    var b = 500;
    Kinetic.Animation = function(a, b) {
        this.func = a,
        this.setLayers(b),
        this.id = Kinetic.Animation.animIdCounter++,
        this.frame = {
            time: 0,
            timeDiff: 0,
            lastTime: (new Date).getTime()
        }
    }
    ,
    Kinetic.Animation.prototype = {
        setLayers: function(a) {
            var b = [];
            b = a ? a.length > 0 ? a : [a] : [],
            this.layers = b
        },
        getLayers: function() {
            return this.layers
        },
        addLayer: function(a) {
            var b, c, d = this.layers;
            if (d) {
                for (b = d.length,
                c = 0; b > c; c++)
                    if (d[c]._id === a._id)
                        return !1
            } else
                this.layers = [];
            return this.layers.push(a),
            !0
        },
        isRunning: function() {
            for (var a = Kinetic.Animation, b = a.animations, c = 0; c < b.length; c++)
                if (b[c].id === this.id)
                    return !0;
            return !1
        },
        start: function() {
            this.stop(),
            this.frame.timeDiff = 0,
            this.frame.lastTime = (new Date).getTime(),
            Kinetic.Animation._addAnimation(this)
        },
        stop: function() {
            Kinetic.Animation._removeAnimation(this)
        },
        _updateFrameObject: function(a) {
            this.frame.timeDiff = a - this.frame.lastTime,
            this.frame.lastTime = a,
            this.frame.time += this.frame.timeDiff,
            this.frame.frameRate = 1e3 / this.frame.timeDiff
        }
    },
    Kinetic.Animation.animations = [],
    Kinetic.Animation.animIdCounter = 0,
    Kinetic.Animation.animRunning = !1,
    Kinetic.Animation._addAnimation = function(a) {
        this.animations.push(a),
        this._handleAnimation()
    }
    ,
    Kinetic.Animation._removeAnimation = function(a) {
        for (var b = a.id, c = this.animations, d = c.length, e = 0; d > e; e++)
            if (c[e].id === b) {
                this.animations.splice(e, 1);
                break
            }
    }
    ,
    Kinetic.Animation._runFrames = function() {
        var a, b, c, d, e, f, g, h, i = {}, j = this.animations;
        for (d = 0; d < j.length; d++) {
            for (a = j[d],
            b = a.layers,
            c = a.func,
            a._updateFrameObject((new Date).getTime()),
            f = b.length,
            e = 0; f > e; e++)
                g = b[e],
                void 0 !== g._id && (i[g._id] = g);
            c && c.call(a, a.frame)
        }
        for (h in i)
            i[h].draw()
    }
    ,
    Kinetic.Animation._animationLoop = function() {
        var a = this;
        this.animations.length > 0 ? (this._runFrames(),
        Kinetic.Animation.requestAnimFrame(function() {
            a._animationLoop()
        })) : this.animRunning = !1
    }
    ,
    Kinetic.Animation._handleAnimation = function() {
        var a = this;
        this.animRunning || (this.animRunning = !0,
        a._animationLoop())
    }
    ;
    var c = function() {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || a
    }();
    Kinetic.Animation.requestAnimFrame = function(b) {
        var d = Kinetic.isDragging ? a : c;
        d(b)
    }
    ;
    var d = Kinetic.Node.prototype.moveTo;
    Kinetic.Node.prototype.moveTo = function(a) {
        d.call(this, a)
    }
    ,
    Kinetic.Layer.prototype.batchDraw = function() {
        var a = this;
        this.batchAnim || (this.batchAnim = new Kinetic.Animation(function() {
            a.lastBatchDrawTime && (new Date).getTime() - a.lastBatchDrawTime > b && a.batchAnim.stop()
        }
        ,this)),
        this.lastBatchDrawTime = (new Date).getTime(),
        this.batchAnim.isRunning() || (this.draw(),
        this.batchAnim.start())
    }
    ,
    Kinetic.Stage.prototype.batchDraw = function() {
        this.getChildren().each(function(a) {
            a.batchDraw()
        })
    }
}(),
function() {
    var a = {
        node: 1,
        duration: 1,
        easing: 1,
        onFinish: 1,
        yoyo: 1
    }
      , b = 1
      , c = 2
      , d = 3
      , e = 0;
    Kinetic.Tween = function(b) {
        var c, d = this, g = b.node, h = g._id, i = b.duration || 1, j = b.easing || Kinetic.Easings.Linear, k = !!b.yoyo;
        this.node = g,
        this._id = e++,
        this.anim = new Kinetic.Animation(function() {
            d.tween.onEnterFrame()
        }
        ,g.getLayer() || g.getLayers()),
        this.tween = new f(c,function(a) {
            d._tweenFunc(a)
        }
        ,j,0,1,1e3 * i,k),
        this._addListeners(),
        Kinetic.Tween.attrs[h] || (Kinetic.Tween.attrs[h] = {}),
        Kinetic.Tween.attrs[h][this._id] || (Kinetic.Tween.attrs[h][this._id] = {}),
        Kinetic.Tween.tweens[h] || (Kinetic.Tween.tweens[h] = {});
        for (c in b)
            void 0 === a[c] && this._addAttr(c, b[c]);
        this.reset(),
        this.onFinish = b.onFinish,
        this.onReset = b.onReset
    }
    ,
    Kinetic.Tween.attrs = {},
    Kinetic.Tween.tweens = {},
    Kinetic.Tween.prototype = {
        _addAttr: function(a, b) {
            var c, d, e, f, g, h, i, j = this.node, k = j._id;
            if (e = Kinetic.Tween.tweens[k][a],
            e && delete Kinetic.Tween.attrs[k][e][a],
            c = j.getAttr(a),
            Kinetic.Util._isArray(b))
                for (b = Kinetic.Util._getPoints(b),
                d = [],
                g = b.length,
                f = 0; g > f; f++)
                    h = c[f],
                    i = b[f],
                    d.push({
                        x: i.x - h.x,
                        y: i.y - h.y
                    });
            else
                d = b - c;
            Kinetic.Tween.attrs[k][this._id][a] = {
                start: c,
                diff: d
            },
            Kinetic.Tween.tweens[k][a] = this._id
        },
        _tweenFunc: function(a) {
            var b, c, d, e, f, g, h, i, j, k = this.node, l = Kinetic.Tween.attrs[k._id][this._id];
            for (b in l) {
                if (c = l[b],
                d = c.start,
                e = c.diff,
                Kinetic.Util._isArray(d))
                    for (f = [],
                    h = d.length,
                    g = 0; h > g; g++)
                        i = d[g],
                        j = e[g],
                        f.push({
                            x: i.x + j.x * a,
                            y: i.y + j.y * a
                        });
                else
                    f = d + e * a;
                k.setAttr(b, f)
            }
        },
        _addListeners: function() {
            var a = this;
            this.tween.onPlay = function() {
                a.anim.start()
            }
            ,
            this.tween.onReverse = function() {
                a.anim.start()
            }
            ,
            this.tween.onPause = function() {
                a.anim.stop()
            }
            ,
            this.tween.onFinish = function() {
                a.onFinish && a.onFinish()
            }
            ,
            this.tween.onReset = function() {
                a.onReset && a.onReset()
            }
        },
        play: function() {
            return this.tween.play(),
            this
        },
        reverse: function() {
            return this.tween.reverse(),
            this
        },
        reset: function() {
            var a = this.node;
            return this.tween.reset(),
            (a.getLayer() || a.getLayers()).draw(),
            this
        },
        seek: function(a) {
            var b = this.node;
            return this.tween.seek(1e3 * a),
            (b.getLayer() || b.getLayers()).draw(),
            this
        },
        pause: function() {
            return this.tween.pause(),
            this
        },
        finish: function() {
            var a = this.node;
            return this.tween.finish(),
            (a.getLayer() || a.getLayers()).draw(),
            this
        },
        destroy: function() {
            var a, b = this.node._id, c = this._id, d = Kinetic.Tween.tweens[b];
            this.pause();
            for (a in d)
                delete Kinetic.Tween.tweens[b][a];
            delete Kinetic.Tween.attrs[b][c]
        }
    };
    var f = function(a, b, c, d, e, f, g) {
        this.prop = a,
        this.propFunc = b,
        this.begin = d,
        this._pos = d,
        this.duration = f,
        this._change = 0,
        this.prevPos = 0,
        this.yoyo = g,
        this._time = 0,
        this._position = 0,
        this._startTime = 0,
        this._finish = 0,
        this.func = c,
        this._change = e - this.begin,
        this.pause()
    };
    f.prototype = {
        fire: function(a) {
            var b = this[a];
            b && b()
        },
        setTime: function(a) {
            a > this.duration ? this.yoyo ? (this._time = this.duration,
            this.reverse()) : this.finish() : 0 > a ? this.yoyo ? (this._time = 0,
            this.play()) : this.reset() : (this._time = a,
            this.update())
        },
        getTime: function() {
            return this._time
        },
        setPosition: function(a) {
            this.prevPos = this._pos,
            this.propFunc(a),
            this._pos = a
        },
        getPosition: function(a) {
            return void 0 === a && (a = this._time),
            this.func(a, this.begin, this._change, this.duration)
        },
        play: function() {
            this.state = c,
            this._startTime = this.getTimer() - this._time,
            this.onEnterFrame(),
            this.fire("onPlay")
        },
        reverse: function() {
            this.state = d,
            this._time = this.duration - this._time,
            this._startTime = this.getTimer() - this._time,
            this.onEnterFrame(),
            this.fire("onReverse")
        },
        seek: function(a) {
            this.pause(),
            this._time = a,
            this.update(),
            this.fire("onSeek")
        },
        reset: function() {
            this.pause(),
            this._time = 0,
            this.update(),
            this.fire("onReset")
        },
        finish: function() {
            this.pause(),
            this._time = this.duration,
            this.update(),
            this.fire("onFinish")
        },
        update: function() {
            this.setPosition(this.getPosition(this._time))
        },
        onEnterFrame: function() {
            var a = this.getTimer() - this._startTime;
            this.state === c ? this.setTime(a) : this.state === d && this.setTime(this.duration - a)
        },
        pause: function() {
            this.state = b,
            this.fire("onPause")
        },
        getTimer: function() {
            return (new Date).getTime()
        }
    },
    Kinetic.Easings = {
        BackEaseIn: function(a, b, c, d) {
            var e = 1.70158;
            return c * (a /= d) * a * ((e + 1) * a - e) + b
        },
        BackEaseOut: function(a, b, c, d) {
            var e = 1.70158;
            return c * ((a = a / d - 1) * a * ((e + 1) * a + e) + 1) + b
        },
        BackEaseInOut: function(a, b, c, d) {
            var e = 1.70158;
            return (a /= d / 2) < 1 ? c / 2 * a * a * (((e *= 1.525) + 1) * a - e) + b : c / 2 * ((a -= 2) * a * (((e *= 1.525) + 1) * a + e) + 2) + b
        },
        ElasticEaseIn: function(a, b, c, d, e, f) {
            var g = 0;
            return 0 === a ? b : 1 == (a /= d) ? b + c : (f || (f = .3 * d),
            !e || e < Math.abs(c) ? (e = c,
            g = f / 4) : g = f / (2 * Math.PI) * Math.asin(c / e),
            -(e * Math.pow(2, 10 * (a -= 1)) * Math.sin((a * d - g) * 2 * Math.PI / f)) + b)
        },
        ElasticEaseOut: function(a, b, c, d, e, f) {
            var g = 0;
            return 0 === a ? b : 1 == (a /= d) ? b + c : (f || (f = .3 * d),
            !e || e < Math.abs(c) ? (e = c,
            g = f / 4) : g = f / (2 * Math.PI) * Math.asin(c / e),
            e * Math.pow(2, -10 * a) * Math.sin((a * d - g) * 2 * Math.PI / f) + c + b)
        },
        ElasticEaseInOut: function(a, b, c, d, e, f) {
            var g = 0;
            return 0 === a ? b : 2 == (a /= d / 2) ? b + c : (f || (f = d * .3 * 1.5),
            !e || e < Math.abs(c) ? (e = c,
            g = f / 4) : g = f / (2 * Math.PI) * Math.asin(c / e),
            1 > a ? -.5 * e * Math.pow(2, 10 * (a -= 1)) * Math.sin((a * d - g) * 2 * Math.PI / f) + b : .5 * e * Math.pow(2, -10 * (a -= 1)) * Math.sin((a * d - g) * 2 * Math.PI / f) + c + b)
        },
        BounceEaseOut: function(a, b, c, d) {
            return (a /= d) < 1 / 2.75 ? c * 7.5625 * a * a + b : 2 / 2.75 > a ? c * (7.5625 * (a -= 1.5 / 2.75) * a + .75) + b : 2.5 / 2.75 > a ? c * (7.5625 * (a -= 2.25 / 2.75) * a + .9375) + b : c * (7.5625 * (a -= 2.625 / 2.75) * a + .984375) + b
        },
        BounceEaseIn: function(a, b, c, d) {
            return c - Kinetic.Easings.BounceEaseOut(d - a, 0, c, d) + b
        },
        BounceEaseInOut: function(a, b, c, d) {
            return d / 2 > a ? .5 * Kinetic.Easings.BounceEaseIn(2 * a, 0, c, d) + b : .5 * Kinetic.Easings.BounceEaseOut(2 * a - d, 0, c, d) + .5 * c + b
        },
        EaseIn: function(a, b, c, d) {
            return c * (a /= d) * a + b
        },
        EaseOut: function(a, b, c, d) {
            return -c * (a /= d) * (a - 2) + b
        },
        EaseInOut: function(a, b, c, d) {
            return (a /= d / 2) < 1 ? c / 2 * a * a + b : -c / 2 * (--a * (a - 2) - 1) + b
        },
        StrongEaseIn: function(a, b, c, d) {
            return c * (a /= d) * a * a * a * a + b
        },
        StrongEaseOut: function(a, b, c, d) {
            return c * ((a = a / d - 1) * a * a * a * a + 1) + b
        },
        StrongEaseInOut: function(a, b, c, d) {
            return (a /= d / 2) < 1 ? c / 2 * a * a * a * a * a + b : c / 2 * ((a -= 2) * a * a * a * a + 2) + b
        },
        Linear: function(a, b, c, d) {
            return c * a / d + b
        }
    }
}(),
function() {
    Kinetic.DD = {
        anim: new Kinetic.Animation,
        isDragging: !1,
        offset: {
            x: 0,
            y: 0
        },
        node: null,
        _drag: function(a) {
            var b = Kinetic.DD
              , c = b.node;
            c && (c._setDragPosition(a),
            b.isDragging || (b.isDragging = !0,
            c.fire("dragstart", a, !0)),
            c.fire("dragmove", a, !0))
        },
        _endDragBefore: function(a) {
            var b, c, d = Kinetic.DD, e = d.node;
            e && (b = e.nodeType,
            c = e.getLayer(),
            d.anim.stop(),
            d.isDragging && (d.isDragging = !1,
            Kinetic.listenClickTap = !1,
            a && (a.dragEndNode = e)),
            delete d.node,
            (c || e).draw())
        },
        _endDragAfter: function(a) {
            a = a || {};
            var b = a.dragEndNode;
            a && b && b.fire("dragend", a, !0)
        }
    },
    Kinetic.Node.prototype.startDrag = function() {
        var a = Kinetic.DD
          , b = this.getStage()
          , c = this.getLayer()
          , d = b.getPointerPosition()
          , e = this.getAbsolutePosition();
        d && (a.node && a.node.stopDrag(),
        a.node = this,
        a.offset.x = d.x - e.x,
        a.offset.y = d.y - e.y,
        a.anim.setLayers(c || this.getLayers()),
        a.anim.start(),
        this._setDragPosition())
    }
    ,
    Kinetic.Node.prototype._setDragPosition = function(a) {
        var b = Kinetic.DD
          , c = this.getStage().getPointerPosition()
          , d = this.getDragBoundFunc()
          , e = {
            x: c.x - b.offset.x,
            y: c.y - b.offset.y
        };
        void 0 !== d && (e = d.call(this, e, a)),
        this.setAbsolutePosition(e)
    }
    ,
    Kinetic.Node.prototype.stopDrag = function() {
        var a = Kinetic.DD
          , b = {};
        a._endDragBefore(b),
        a._endDragAfter(b)
    }
    ,
    Kinetic.Node.prototype.setDraggable = function(a) {
        this._setAttr("draggable", a),
        this._dragChange()
    }
    ;
    var a = Kinetic.Node.prototype.destroy;
    Kinetic.Node.prototype.destroy = function() {
        var b = Kinetic.DD;
        b.node && b.node._id === this._id && this.stopDrag(),
        a.call(this)
    }
    ,
    Kinetic.Node.prototype.isDragging = function() {
        var a = Kinetic.DD;
        return a.node && a.node._id === this._id && a.isDragging
    }
    ,
    Kinetic.Node.prototype._listenDrag = function() {
        var a = this;
        this._dragCleanup(),
        "Stage" === this.getClassName() ? this.on("contentMousedown.kinetic contentTouchstart.kinetic", function(b) {
            Kinetic.DD.node || a.startDrag(b)
        }) : this.on("mousedown.kinetic touchstart.kinetic", function(b) {
            Kinetic.DD.node || a.startDrag(b)
        })
    }
    ,
    Kinetic.Node.prototype._dragChange = function() {
        if (this.attrs.draggable)
            this._listenDrag();
        else {
            this._dragCleanup();
            var a = this.getStage()
              , b = Kinetic.DD;
            a && b.node && b.node._id === this._id && b.node.stopDrag()
        }
    }
    ,
    Kinetic.Node.prototype._dragCleanup = function() {
        this.off("mousedown.kinetic"),
        this.off("touchstart.kinetic")
    }
    ,
    Kinetic.Factory.addGetterSetter(Kinetic.Node, "dragBoundFunc"),
    Kinetic.Factory.addGetter(Kinetic.Node, "draggable", !1),
    Kinetic.Node.prototype.isDraggable = Kinetic.Node.prototype.getDraggable;
    var b = document.documentElement;
    b.addEventListener("mouseup", Kinetic.DD._endDragBefore, !0),
    b.addEventListener("touchend", Kinetic.DD._endDragBefore, !0),
    b.addEventListener("mouseup", Kinetic.DD._endDragAfter, !1),
    b.addEventListener("touchend", Kinetic.DD._endDragAfter, !1)
}(),
function() {
    Kinetic.Util.addMethods(Kinetic.Container, {
        __init: function(a) {
            this.children = new Kinetic.Collection,
            Kinetic.Node.call(this, a)
        },
        getChildren: function() {
            return this.children
        },
        hasChildren: function() {
            return this.getChildren().length > 0
        },
        removeChildren: function() {
            for (var a, b = this.children; b.length > 0; )
                a = b[0],
                a.hasChildren() && a.removeChildren(),
                a.remove();
            return this
        },
        destroyChildren: function() {
            for (var a = this.children; a.length > 0; )
                a[0].destroy();
            return this
        },
        add: function(a) {
            var b = this.children;
            return this._validateAdd(a),
            a.index = b.length,
            a.parent = this,
            b.push(a),
            this._fire("add", {
                child: a
            }),
            this
        },
        destroy: function() {
            this.hasChildren() && this.destroyChildren(),
            Kinetic.Node.prototype.destroy.call(this)
        },
        find: function(a) {
            var b, c, d, e, f, g, h, i = [], j = a.replace(/ /g, "").split(","), k = j.length;
            for (b = 0; k > b; b++)
                if (d = j[b],
                "#" === d.charAt(0))
                    f = this._getNodeById(d.slice(1)),
                    f && i.push(f);
                else if ("." === d.charAt(0))
                    e = this._getNodesByName(d.slice(1)),
                    i = i.concat(e);
                else
                    for (g = this.getChildren(),
                    h = g.length,
                    c = 0; h > c; c++)
                        i = i.concat(g[c]._get(d));
            return Kinetic.Collection.toCollection(i)
        },
        _getNodeById: function(a) {
            var b = Kinetic.ids[a];
            return void 0 !== b && this.isAncestorOf(b) ? b : null
        },
        _getNodesByName: function(a) {
            var b = Kinetic.names[a] || [];
            return this._getDescendants(b)
        },
        _get: function(a) {
            for (var b = Kinetic.Node.prototype._get.call(this, a), c = this.getChildren(), d = c.length, e = 0; d > e; e++)
                b = b.concat(c[e]._get(a));
            return b
        },
        toObject: function() {
            var a = Kinetic.Node.prototype.toObject.call(this);
            a.children = [];
            for (var b = this.getChildren(), c = b.length, d = 0; c > d; d++) {
                var e = b[d];
                a.children.push(e.toObject())
            }
            return a
        },
        _getDescendants: function(a) {
            for (var b = [], c = a.length, d = 0; c > d; d++) {
                var e = a[d];
                this.isAncestorOf(e) && b.push(e)
            }
            return b
        },
        isAncestorOf: function(a) {
            for (var b = a.getParent(); b; ) {
                if (b._id === this._id)
                    return !0;
                b = b.getParent()
            }
            return !1
        },
        clone: function(a) {
            var b = Kinetic.Node.prototype.clone.call(this, a);
            return this.getChildren().each(function(a) {
                b.add(a.clone())
            }),
            b
        },
        getAllIntersections: function() {
            for (var a = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)), b = [], c = this.find("Shape"), d = c.length, e = 0; d > e; e++) {
                var f = c[e];
                f.isVisible() && f.intersects(a) && b.push(f)
            }
            return b
        },
        _setChildrenIndices: function() {
            this.children.each(function(a, b) {
                a.index = b
            })
        },
        drawScene: function(a) {
            var b = this.getLayer()
              , c = this.getClipWidth() && this.getClipHeight();
            return !a && b && (a = b.getCanvas()),
            this.isVisible() && (c ? a.getContext()._clip(this) : this._drawChildren(a)),
            this
        },
        _drawChildren: function(a) {
            this.children.each(function(b) {
                b.drawScene(a)
            })
        },
        drawHit: function() {
            var a, b = this.getClipWidth() && this.getClipHeight() && "Stage" !== this.nodeType, c = 0, d = 0, e = [];
            if (this.shouldDrawHit()) {
                for (b && (a = this.getLayer().hitCanvas,
                a.getContext()._clip(this)),
                e = this.children,
                d = e.length,
                c = 0; d > c; c++)
                    e[c].drawHit();
                b && a.getContext()._context.restore()
            }
            return this
        }
    }),
    Kinetic.Util.extend(Kinetic.Container, Kinetic.Node),
    Kinetic.Container.prototype.get = Kinetic.Container.prototype.find,
    Kinetic.Factory.addBoxGetterSetter(Kinetic.Container, "clip")
}(),
function() {
    function a(a) {
        a.fill()
    }
    function b(a) {
        a.stroke()
    }
    function c(a) {
        a.fill()
    }
    function d(a) {
        a.stroke()
    }
    function e() {
        this._clearCache(f)
    }
    var f = "hasShadow";
    Kinetic.Util.addMethods(Kinetic.Shape, {
        __init: function(f) {
            this.nodeType = "Shape",
            this._fillFunc = a,
            this._strokeFunc = b,
            this._fillFuncHit = c,
            this._strokeFuncHit = d;
            for (var g, h = Kinetic.shapes; ; )
                if (g = Kinetic.Util.getRandomColor(),
                g && !(g in h))
                    break;
            this.colorKey = g,
            h[g] = this,
            Kinetic.Node.call(this, f),
            this._setDrawFuncs(),
            this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChanged.kinetic", e)
        },
        hasChildren: function() {
            return !1
        },
        getChildren: function() {
            return []
        },
        getContext: function() {
            return this.getLayer().getContext()
        },
        getCanvas: function() {
            return this.getLayer().getCanvas()
        },
        hasShadow: function() {
            return this._getCache(f, this._hasShadow)
        },
        _hasShadow: function() {
            return this.getShadowEnabled() && 0 !== this.getShadowOpacity() && !!(this.getShadowColor() || this.getShadowBlur() || this.getShadowOffsetX() || this.getShadowOffsetY())
        },
        hasFill: function() {
            return !!(this.getFill() || this.getFillPatternImage() || this.getFillLinearGradientColorStops() || this.getFillRadialGradientColorStops())
        },
        hasStroke: function() {
            return !(!this.getStroke() && !this.getStrokeWidth())
        },
        _get: function(a) {
            return this.className === a || this.nodeType === a ? [this] : []
        },
        intersects: function() {
            var a, b = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)), c = this.getStage(), d = c.bufferHitCanvas;
            return d.getContext().clear(),
            this.drawScene(d),
            a = d.context.getImageData(0 | b.x, 0 | b.y, 1, 1).data,
            a[3] > 0
        },
        enableFill: function() {
            return this._setAttr("fillEnabled", !0),
            this
        },
        disableFill: function() {
            return this._setAttr("fillEnabled", !1),
            this
        },
        enableStroke: function() {
            return this._setAttr("strokeEnabled", !0),
            this
        },
        disableStroke: function() {
            return this._setAttr("strokeEnabled", !1),
            this
        },
        enableStrokeScale: function() {
            return this._setAttr("strokeScaleEnabled", !0),
            this
        },
        disableStrokeScale: function() {
            return this._setAttr("strokeScaleEnabled", !1),
            this
        },
        enableShadow: function() {
            return this._setAttr("shadowEnabled", !0),
            this
        },
        disableShadow: function() {
            return this._setAttr("shadowEnabled", !1),
            this
        },
        enableDashArray: function() {
            return this._setAttr("dashArrayEnabled", !0),
            this
        },
        disableDashArray: function() {
            return this._setAttr("dashArrayEnabled", !1),
            this
        },
        destroy: function() {
            return Kinetic.Node.prototype.destroy.call(this),
            delete Kinetic.shapes[this.colorKey],
            this
        },
        _useBufferCanvas: function() {
            return (this.hasShadow() || 1 !== this.getAbsoluteOpacity()) && this.hasFill() && this.hasStroke()
        },
        drawScene: function(a) {
            var b, c, d, e = a || this.getLayer().getCanvas(), f = e.getContext(), g = this.getDrawFunc(), h = this.hasShadow();
            return g && this.isVisible() && (this._useBufferCanvas() ? (b = this.getStage(),
            c = b.bufferCanvas,
            d = c.getContext(),
            d.clear(),
            d.save(),
            d._applyLineJoin(this),
            d._applyAncestorTransforms(this),
            g.call(this, d),
            d.restore(),
            f.save(),
            h && (f.save(),
            f._applyShadow(this),
            f.drawImage(c._canvas, 0, 0),
            f.restore()),
            f._applyOpacity(this),
            f.drawImage(c._canvas, 0, 0),
            f.restore()) : (f.save(),
            f._applyLineJoin(this),
            f._applyAncestorTransforms(this),
            h && (f.save(),
            f._applyShadow(this),
            g.call(this, f),
            f.restore()),
            f._applyOpacity(this),
            g.call(this, f),
            f.restore())),
            this
        },
        drawHit: function() {
            var a = this.getAttrs()
              , b = a.drawHitFunc || a.drawFunc
              , c = this.getLayer().hitCanvas
              , d = c.getContext();
            return b && this.shouldDrawHit() && (d.save(),
            d._applyLineJoin(this),
            d._applyAncestorTransforms(this),
            b.call(this, d),
            d.restore()),
            this
        },
        _setDrawFuncs: function() {
            !this.attrs.drawFunc && this.drawFunc && this.setDrawFunc(this.drawFunc),
            !this.attrs.drawHitFunc && this.drawHitFunc && this.setDrawHitFunc(this.drawHitFunc)
        }
    }),
    Kinetic.Util.extend(Kinetic.Shape, Kinetic.Node),
    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, "stroke"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "lineJoin"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "lineCap"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "strokeWidth"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "drawFunc"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "drawHitFunc"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "dashArray"),
    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, "shadowColor"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "shadowBlur"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "shadowOpacity"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillPatternImage"),
    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, "fill"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillPatternX"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillPatternY"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillLinearGradientColorStops"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillRadialGradientStartRadius"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillRadialGradientEndRadius"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillRadialGradientColorStops"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillPatternRepeat"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillEnabled", !0),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "strokeEnabled", !0),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "shadowEnabled", !0),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "dashArrayEnabled", !0),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "fillPriority", "color"),
    Kinetic.Factory.addGetterSetter(Kinetic.Shape, "strokeScaleEnabled", !0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "fillPatternOffset", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "fillPatternScale", 1),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "fillLinearGradientStartPoint", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "fillLinearGradientEndPoint", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "fillRadialGradientStartPoint", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "fillRadialGradientEndPoint", 0),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, "shadowOffset", 0),
    Kinetic.Factory.addRotationGetterSetter(Kinetic.Shape, "fillPatternRotation", 0)
}(),
function() {
    function a(a, b) {
        a.content.addEventListener(b, function(c) {
            a[I + b](c)
        }, !1)
    }
    var b = "Stage"
      , c = "string"
      , d = "px"
      , e = "mouseout"
      , f = "mouseleave"
      , g = "mouseover"
      , h = "mouseenter"
      , i = "mousemove"
      , j = "mousedown"
      , k = "mouseup"
      , l = "click"
      , m = "dblclick"
      , n = "touchstart"
      , o = "touchend"
      , p = "tap"
      , q = "dbltap"
      , r = "touchmove"
      , s = "contentMouseout"
      , t = "contentMouseover"
      , u = "contentMousemove"
      , v = "contentMousedown"
      , w = "contentMouseup"
      , x = "contentClick"
      , y = "contentDblclick"
      , z = "contentTouchstart"
      , A = "contentTouchend"
      , B = "contentDbltap"
      , C = "contentTouchmove"
      , D = "div"
      , E = "relative"
      , F = "inline-block"
      , G = "kineticjs-content"
      , H = " "
      , I = "_"
      , J = "container"
      , K = ""
      , L = [j, i, k, e, n, r, o, g]
      , M = L.length;
    Kinetic.Util.addMethods(Kinetic.Stage, {
        ___init: function(a) {
            this.nodeType = b,
            Kinetic.Container.call(this, a),
            this._id = Kinetic.idCounter++,
            this._buildDOM(),
            this._bindContentEvents(),
            Kinetic.stages.push(this)
        },
        _validateAdd: function(a) {
            "Layer" !== a.getType() && Kinetic.Util.error("You may only add layers to the stage.")
        },
        setContainer: function(a) {
            return typeof a === c && (a = document.getElementById(a)),
            this._setAttr(J, a),
            this
        },
        draw: function() {
            return Kinetic.Node.prototype.draw.call(this),
            this
        },
        setHeight: function(a) {
            return Kinetic.Node.prototype.setHeight.call(this, a),
            this._resizeDOM(),
            this
        },
        setWidth: function(a) {
            return Kinetic.Node.prototype.setWidth.call(this, a),
            this._resizeDOM(),
            this
        },
        clear: function() {
            var a, b = this.children, c = b.length;
            for (a = 0; c > a; a++)
                b[a].clear();
            return this
        },
        destroy: function() {
            var a = this.content;
            Kinetic.Container.prototype.destroy.call(this),
            a && Kinetic.Util._isInDocument(a) && this.getContainer().removeChild(a)
        },
        getPointerPosition: function() {
            return this.pointerPos
        },
        getStage: function() {
            return this
        },
        getContent: function() {
            return this.content
        },
        toDataURL: function(a) {
            function b(e) {
                var f = i[e]
                  , j = f.toDataURL()
                  , k = new Image;
                k.onload = function() {
                    h.drawImage(k, 0, 0),
                    e < i.length - 1 ? b(e + 1) : a.callback(g.toDataURL(c, d))
                }
                ,
                k.src = j
            }
            a = a || {};
            var c = a.mimeType || null
              , d = a.quality || null
              , e = a.x || 0
              , f = a.y || 0
              , g = new Kinetic.SceneCanvas({
                width: a.width || this.getWidth(),
                height: a.height || this.getHeight(),
                pixelRatio: 1
            })
              , h = g.getContext()._context
              , i = this.children;
            (e || f) && h.translate(-1 * e, -1 * f),
            b(0)
        },
        toImage: function(a) {
            var b = a.callback;
            a.callback = function(a) {
                Kinetic.Util._getImage(a, function(a) {
                    b(a)
                })
            }
            ,
            this.toDataURL(a)
        },
        getIntersection: function() {
            var a, b, c = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)), d = this.getChildren(), e = d.length, f = e - 1;
            for (a = f; a >= 0; a--)
                if (b = d[a].getIntersection(c))
                    return b;
            return null
        },
        _resizeDOM: function() {
            if (this.content) {
                var a, b, c = this.getWidth(), e = this.getHeight(), f = this.getChildren(), g = f.length;
                for (this.content.style.width = c + d,
                this.content.style.height = e + d,
                this.bufferCanvas.setSize(c, e),
                this.bufferHitCanvas.setSize(c, e),
                a = 0; g > a; a++)
                    b = f[a],
                    b.getCanvas().setSize(c, e),
                    b.hitCanvas.setSize(c, e),
                    b.draw()
            }
        },
        add: function(a) {
            return Kinetic.Container.prototype.add.call(this, a),
            a.canvas.setSize(this.attrs.width, this.attrs.height),
            a.hitCanvas.setSize(this.attrs.width, this.attrs.height),
            a.draw(),
            this.content.appendChild(a.canvas._canvas),
            this
        },
        getParent: function() {
            return null
        },
        getLayer: function() {
            return null
        },
        getLayers: function() {
            return this.getChildren()
        },
        _bindContentEvents: function() {
            var b;
            for (b = 0; M > b; b++)
                a(this, L[b])
        },
        _mouseover: function(a) {
            this._fire(t, a)
        },
        _mouseout: function(a) {
            this._setPointerPosition(a);
            var b = this.targetShape;
            b && !Kinetic.isDragging() && (b._fireAndBubble(e, a),
            b._fireAndBubble(f, a),
            this.targetShape = null),
            this.pointerPos = void 0,
            this._fire(s, a)
        },
        _mousemove: function(a) {
            this._setPointerPosition(a);
            var b = Kinetic.DD
              , c = this.getIntersection(this.getPointerPosition())
              , d = c && c.shape ? c.shape : void 0;
            d ? Kinetic.isDragging() || 255 !== c.pixel[3] || this.targetShape && this.targetShape._id === d._id ? d._fireAndBubble(i, a) : (this.targetShape && (this.targetShape._fireAndBubble(e, a, d),
            this.targetShape._fireAndBubble(f, a, d)),
            d._fireAndBubble(g, a, this.targetShape),
            d._fireAndBubble(h, a, this.targetShape),
            this.targetShape = d) : this.targetShape && !Kinetic.isDragging() && (this.targetShape._fireAndBubble(e, a),
            this.targetShape._fireAndBubble(f, a),
            this.targetShape = null),
            this._fire(u, a),
            b && b._drag(a),
            a.preventDefault && a.preventDefault()
        },
        _mousedown: function(a) {
            this._setPointerPosition(a);
            var b = this.getIntersection(this.getPointerPosition())
              , c = b && b.shape ? b.shape : void 0;
            Kinetic.listenClickTap = !0,
            c && (this.clickStartShape = c,
            c._fireAndBubble(j, a)),
            this._fire(v, a),
            a.preventDefault && a.preventDefault()
        },
        _mouseup: function(a) {
            this._setPointerPosition(a);
            var b = this.getIntersection(this.getPointerPosition())
              , c = b && b.shape ? b.shape : void 0
              , d = !1;
            Kinetic.inDblClickWindow ? (d = !0,
            Kinetic.inDblClickWindow = !1) : Kinetic.inDblClickWindow = !0,
            setTimeout(function() {
                Kinetic.inDblClickWindow = !1
            }, Kinetic.dblClickWindow),
            c && (c._fireAndBubble(k, a),
            Kinetic.listenClickTap && c._id === this.clickStartShape._id && (c._fireAndBubble(l, a),
            d && c._fireAndBubble(m, a))),
            this._fire(w, a),
            Kinetic.listenClickTap && (this._fire(x, a),
            d && this._fire(y, a)),
            Kinetic.listenClickTap = !1,
            a.preventDefault && a.preventDefault()
        },
        _touchstart: function(a) {
            this._setPointerPosition(a);
            var b = this.getIntersection(this.getPointerPosition())
              , c = b && b.shape ? b.shape : void 0;
            Kinetic.listenClickTap = !0,
            c && (this.tapStartShape = c,
            c._fireAndBubble(n, a),
            c.isListening() && a.preventDefault && a.preventDefault()),
            this._fire(z, a)
        },
        _touchend: function(a) {
            this._setPointerPosition(a);
            var b = this.getIntersection(this.getPointerPosition())
              , c = b && b.shape ? b.shape : void 0
              , d = !1;
            Kinetic.inDblClickWindow ? (d = !0,
            Kinetic.inDblClickWindow = !1) : Kinetic.inDblClickWindow = !0,
            setTimeout(function() {
                Kinetic.inDblClickWindow = !1
            }, Kinetic.dblClickWindow),
            c && (c._fireAndBubble(o, a),
            Kinetic.listenClickTap && c._id === this.tapStartShape._id && (c._fireAndBubble(p, a),
            d && c._fireAndBubble(q, a)),
            c.isListening() && a.preventDefault && a.preventDefault()),
            Kinetic.listenClickTap && (this._fire(A, a),
            d && this._fire(B, a)),
            Kinetic.listenClickTap = !1
        },
        _touchmove: function(a) {
            this._setPointerPosition(a);
            var b = Kinetic.DD
              , c = this.getIntersection(this.getPointerPosition())
              , d = c && c.shape ? c.shape : void 0;
            d && (d._fireAndBubble(r, a),
            d.isListening() && a.preventDefault && a.preventDefault()),
            this._fire(C, a),
            b && b._drag(a)
        },
        _setPointerPosition: function(a) {
            var b, a = a ? a : window.event, c = this._getContentPosition(), d = a.offsetX, e = a.clientX, f = null, g = null;
            void 0 !== a.touches ? 1 === a.touches.length && (b = a.touches[0],
            f = b.clientX - c.left,
            g = b.clientY - c.top) : void 0 !== d ? (f = d,
            g = a.offsetY) : "mozilla" === Kinetic.UA.browser ? (f = a.layerX,
            g = a.layerY) : void 0 !== e && c && (f = e - c.left,
            g = a.clientY - c.top),
            null !== f && null !== g && (this.pointerPos = {
                x: f,
                y: g
            })
        },
        _getContentPosition: function() {
            var a = this.content.getBoundingClientRect ? this.content.getBoundingClientRect() : {
                top: 0,
                left: 0
            };
            return {
                top: a.top,
                left: a.left
            }
        },
        _buildDOM: function() {
            var a = this.getContainer();
            a.innerHTML = K,
            this.content = document.createElement(D),
            this.content.style.position = E,
            this.content.style.display = F,
            this.content.className = G,
            this.content.setAttribute("role", "presentation"),
            a.appendChild(this.content),
            this.bufferCanvas = new Kinetic.SceneCanvas({
                pixelRatio: 1
            }),
            this.bufferHitCanvas = new Kinetic.HitCanvas,
            this._resizeDOM()
        },
        _onContent: function(a, b) {
            var c, d, e = a.split(H), f = e.length;
            for (c = 0; f > c; c++)
                d = e[c],
                this.content.addEventListener(d, b, !1)
        }
    }),
    Kinetic.Util.extend(Kinetic.Stage, Kinetic.Container),
    Kinetic.Factory.addGetter(Kinetic.Stage, "container")
}(),
function() {
    var a = "#"
      , b = "beforeDraw"
      , c = "draw";
    Kinetic.Util.addMethods(Kinetic.Layer, {
        ___init: function(a) {
            this.nodeType = "Layer",
            this.canvas = new Kinetic.SceneCanvas,
            this.hitCanvas = new Kinetic.HitCanvas,
            Kinetic.Container.call(this, a)
        },
        _validateAdd: function(a) {
            var b = a.getType();
            "Group" !== b && "Shape" !== b && Kinetic.Util.error("You may only add groups and shapes to a layer.")
        },
        getIntersection: function() {
            var b, c, d, e = Kinetic.Util._getXY(Array.prototype.slice.call(arguments));
            if (this.isVisible() && this.isListening()) {
                if (b = this.hitCanvas.context._context.getImageData(0 | e.x, 0 | e.y, 1, 1).data,
                255 === b[3])
                    return c = Kinetic.Util._rgbToHex(b[0], b[1], b[2]),
                    d = Kinetic.shapes[a + c],
                    {
                        shape: d,
                        pixel: b
                    };
                if (b[0] > 0 || b[1] > 0 || b[2] > 0 || b[3] > 0)
                    return {
                        pixel: b
                    }
            }
            return null
        },
        drawScene: function(a) {
            return a = a || this.getCanvas(),
            this._fire(b, {
                node: this
            }),
            this.getClearBeforeDraw() && a.getContext().clear(),
            Kinetic.Container.prototype.drawScene.call(this, a),
            this._fire(c, {
                node: this
            }),
            this
        },
        drawHit: function() {
            var a = this.getLayer();
            return a && a.getClearBeforeDraw() && a.getHitCanvas().getContext().clear(),
            Kinetic.Container.prototype.drawHit.call(this),
            this
        },
        getCanvas: function() {
            return this.canvas
        },
        getHitCanvas: function() {
            return this.hitCanvas
        },
        getContext: function() {
            return this.getCanvas().getContext()
        },
        clear: function() {
            var a = this.getContext()
              , b = this.getHitCanvas().getContext();
            return a.clear.apply(a, arguments),
            b.clear.apply(b, arguments),
            this
        },
        setVisible: function(a) {
            return Kinetic.Node.prototype.setVisible.call(this, a),
            a ? (this.getCanvas()._canvas.style.display = "block",
            this.hitCanvas._canvas.style.display = "block") : (this.getCanvas()._canvas.style.display = "none",
            this.hitCanvas._canvas.style.display = "none"),
            this
        },
        setZIndex: function(a) {
            Kinetic.Node.prototype.setZIndex.call(this, a);
            var b = this.getStage();
            return b && (b.content.removeChild(this.getCanvas()._canvas),
            a < b.getChildren().length - 1 ? b.content.insertBefore(this.getCanvas()._canvas, b.getChildren()[a + 1].getCanvas()._canvas) : b.content.appendChild(this.getCanvas()._canvas)),
            this
        },
        moveToTop: function() {
            Kinetic.Node.prototype.moveToTop.call(this);
            var a = this.getStage();
            a && (a.content.removeChild(this.getCanvas()._canvas),
            a.content.appendChild(this.getCanvas()._canvas))
        },
        moveUp: function() {
            if (Kinetic.Node.prototype.moveUp.call(this)) {
                var a = this.getStage();
                a && (a.content.removeChild(this.getCanvas()._canvas),
                this.index < a.getChildren().length - 1 ? a.content.insertBefore(this.getCanvas()._canvas, a.getChildren()[this.index + 1].getCanvas()._canvas) : a.content.appendChild(this.getCanvas()._canvas))
            }
        },
        moveDown: function() {
            if (Kinetic.Node.prototype.moveDown.call(this)) {
                var a = this.getStage();
                if (a) {
                    var b = a.getChildren();
                    a.content.removeChild(this.getCanvas()._canvas),
                    a.content.insertBefore(this.getCanvas()._canvas, b[this.index + 1].getCanvas()._canvas)
                }
            }
        },
        moveToBottom: function() {
            if (Kinetic.Node.prototype.moveToBottom.call(this)) {
                var a = this.getStage();
                if (a) {
                    var b = a.getChildren();
                    a.content.removeChild(this.getCanvas()._canvas),
                    a.content.insertBefore(this.getCanvas()._canvas, b[1].getCanvas()._canvas)
                }
            }
        },
        getLayer: function() {
            return this
        },
        remove: function() {
            var a = this.getStage()
              , b = this.getCanvas()
              , c = b._canvas;
            return Kinetic.Node.prototype.remove.call(this),
            a && c && Kinetic.Util._isInDocument(c) && a.content.removeChild(c),
            this
        },
        getStage: function() {
            return this.parent
        }
    }),
    Kinetic.Util.extend(Kinetic.Layer, Kinetic.Container),
    Kinetic.Factory.addGetterSetter(Kinetic.Layer, "clearBeforeDraw", !0)
}(),
function() {
    Kinetic.Util.addMethods(Kinetic.Group, {
        ___init: function(a) {
            this.nodeType = "Group",
            Kinetic.Container.call(this, a)
        },
        _validateAdd: function(a) {
            var b = a.getType();
            "Group" !== b && "Shape" !== b && Kinetic.Util.error("You may only add groups and shapes to groups.")
        }
    }),
    Kinetic.Util.extend(Kinetic.Group, Kinetic.Container)
}(),
function() {
    Kinetic.Rect = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Rect.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Rect"
        },
        drawFunc: function(a) {
            var b = this.getCornerRadius()
              , c = this.getWidth()
              , d = this.getHeight();
            a.beginPath(),
            b ? (a.moveTo(b, 0),
            a.lineTo(c - b, 0),
            a.arc(c - b, b, b, 3 * Math.PI / 2, 0, !1),
            a.lineTo(c, d - b),
            a.arc(c - b, d - b, b, 0, Math.PI / 2, !1),
            a.lineTo(b, d),
            a.arc(b, d - b, b, Math.PI / 2, Math.PI, !1),
            a.lineTo(0, b),
            a.arc(b, b, b, Math.PI, 3 * Math.PI / 2, !1)) : a.rect(0, 0, c, d),
            a.closePath(),
            a.fillStrokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Rect, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Rect, "cornerRadius", 0)
}(),
function() {
    var a = 2 * Math.PI - 1e-4
      , b = "Circle";
    Kinetic.Circle = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Circle.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = b
        },
        drawFunc: function(b) {
            b.beginPath(),
            b.arc(0, 0, this.getRadius(), 0, a, !1),
            b.closePath(),
            b.fillStrokeShape(this)
        },
        getWidth: function() {
            return 2 * this.getRadius()
        },
        getHeight: function() {
            return 2 * this.getRadius()
        },
        setWidth: function(a) {
            Kinetic.Node.prototype.setWidth.call(this, a),
            this.setRadius(a / 2)
        },
        setHeight: function(a) {
            Kinetic.Node.prototype.setHeight.call(this, a),
            this.setRadius(a / 2)
        }
    },
    Kinetic.Util.extend(Kinetic.Circle, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Circle, "radius", 0)
}(),
function() {
    var a = 2 * Math.PI - 1e-4
      , b = "Ellipse";
    Kinetic.Ellipse = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Ellipse.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = b
        },
        drawFunc: function(b) {
            var c = this.getRadius();
            b.beginPath(),
            b.save(),
            c.x !== c.y && b.scale(1, c.y / c.x),
            b.arc(0, 0, c.x, 0, a, !1),
            b.restore(),
            b.closePath(),
            b.fillStrokeShape(this)
        },
        getWidth: function() {
            return 2 * this.getRadius().x
        },
        getHeight: function() {
            return 2 * this.getRadius().y
        },
        setWidth: function(a) {
            Kinetic.Node.prototype.setWidth.call(this, a),
            this.setRadius({
                x: a / 2
            })
        },
        setHeight: function(a) {
            Kinetic.Node.prototype.setHeight.call(this, a),
            this.setRadius({
                y: a / 2
            })
        }
    },
    Kinetic.Util.extend(Kinetic.Ellipse, Kinetic.Shape),
    Kinetic.Factory.addPointGetterSetter(Kinetic.Ellipse, "radius", 0)
}(),
function() {
    Kinetic.Wedge = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Wedge.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Wedge"
        },
        drawFunc: function(a) {
            a.beginPath(),
            a.arc(0, 0, this.getRadius(), 0, this.getAngle(), this.getClockwise()),
            a.lineTo(0, 0),
            a.closePath(),
            a.fillStrokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Wedge, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Wedge, "radius", 0),
    Kinetic.Factory.addRotationGetterSetter(Kinetic.Wedge, "angle", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Wedge, "clockwise", !1)
}(),
function() {
    var a = "Image"
      , b = "set";
    Kinetic.Image = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Image.prototype = {
        ___init: function(b) {
            Kinetic.Shape.call(this, b),
            this.className = a
        },
        _useBufferCanvas: function() {
            return (this.hasShadow() || 1 !== this.getAbsoluteOpacity()) && this.hasStroke()
        },
        drawFunc: function(a) {
            var b, c, d, e = this.getWidth(), f = this.getHeight();
            this.getFilter() && this._applyFilter && (this.applyFilter(),
            this._applyFilter = !1),
            this.filterCanvas ? (d = this.filterCanvas._canvas,
            c = [d, 0, 0, e, f]) : (d = this.getImage(),
            d && (b = this.getCrop(),
            b ? (b.x = b.x || 0,
            b.y = b.y || 0,
            b.width = b.width || d.width - b.x,
            b.height = b.height || d.height - b.y,
            c = [d, b.x, b.y, b.width, b.height, 0, 0, e, f]) : c = [d, 0, 0, e, f])),
            a.beginPath(),
            a.rect(0, 0, e, f),
            a.closePath(),
            a.fillStrokeShape(this),
            d && a.drawImage.apply(a, c)
        },
        drawHitFunc: function(a) {
            var b = this.getWidth()
              , c = this.getHeight()
              , d = this.imageHitRegion;
            d ? (a.drawImage(d, 0, 0),
            a.beginPath(),
            a.rect(0, 0, b, c),
            a.closePath(),
            a.strokeShape(this)) : (a.beginPath(),
            a.rect(0, 0, b, c),
            a.closePath(),
            a.fillStrokeShape(this))
        },
        applyFilter: function() {
            var a, b, c, d = this.getImage(), e = (this.getWidth(),
            this.getHeight(),
            this.getFilter()), f = this.getCrop() || {};
            f.x = f.x || 0,
            f.y = f.y || 0,
            f.width = f.width || d.width - f.x,
            f.height = f.height || d.height - f.y,
            this.filterCanvas && this.filterCanvas.getWidth() === f.width && this.filterCanvas.getHeight() === f.height ? (a = this.filterCanvas,
            a.getContext().clear()) : a = this.filterCanvas = new Kinetic.SceneCanvas({
                width: f.width,
                height: f.height,
                pixelRatio: 1
            }),
            b = a.getContext();
            try {
                b.drawImage(d, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height),
                c = b.getImageData(0, 0, f.width, f.height),
                e.call(this, c),
                b.putImageData(c, 0, 0)
            } catch (g) {
                this.clearFilter(),
                Kinetic.Util.warn("Unable to apply filter. " + g.message)
            }
        },
        clearFilter: function() {
            this.filterCanvas = null,
            this._applyFilter = !1
        },
        createImageHitRegion: function(a) {
            var b, c, d, e, f, g = this, h = this.getWidth(), i = this.getHeight(), j = new Kinetic.SceneCanvas({
                width: h,
                height: i,
                pixelRatio: 1
            }), k = j.getContext()._context, l = this.getImage();
            k.drawImage(l, 0, 0);
            try {
                for (b = k.getImageData(0, 0, h, i),
                c = b.data,
                f = c.length,
                d = Kinetic.Util._hexToRgb(this.colorKey),
                e = 0; f > e; e += 4)
                    c[e + 3] > 0 && (c[e] = d.r,
                    c[e + 1] = d.g,
                    c[e + 2] = d.b);
                Kinetic.Util._getImage(b, function(b) {
                    g.imageHitRegion = b,
                    a && a()
                })
            } catch (m) {
                Kinetic.Util.warn("Unable to create image hit region. " + m.message)
            }
        },
        clearImageHitRegion: function() {
            delete this.imageHitRegion
        },
        getWidth: function() {
            var a = this.getImage();
            return this.attrs.width || (a ? a.width : 0)
        },
        getHeight: function() {
            var a = this.getImage();
            return this.attrs.height || (a ? a.height : 0)
        },
        destroy: function() {
            return Kinetic.Shape.prototype.destroy.call(this),
            delete this.filterCanvas,
            delete this.attrs,
            this
        }
    },
    Kinetic.Util.extend(Kinetic.Image, Kinetic.Shape),
    Kinetic.Factory.addFilterGetterSetter = function(a, b, c) {
        this.addGetter(a, b, c),
        this.addFilterSetter(a, b)
    }
    ,
    Kinetic.Factory.addFilterSetter = function(a, c) {
        var d = b + Kinetic.Util._capitalize(c);
        a.prototype[d] = function(a) {
            this._setAttr(c, a),
            this._applyFilter = !0
        }
    }
    ,
    Kinetic.Factory.addGetterSetter(Kinetic.Image, "image"),
    Kinetic.Factory.addBoxGetterSetter(Kinetic.Image, "crop"),
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filter")
}(),
function() {
    Kinetic.Polygon = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Polygon.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Polygon"
        },
        drawFunc: function(a) {
            var b = this.getPoints()
              , c = b.length;
            a.beginPath(),
            a.moveTo(b[0].x, b[0].y);
            for (var d = 1; c > d; d++)
                a.lineTo(b[d].x, b[d].y);
            a.closePath(),
            a.fillStrokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Polygon, Kinetic.Shape),
    Kinetic.Factory.addPointsGetterSetter(Kinetic.Polygon, "points")
}(),
function() {
    function a(a) {
        a.fillText(this.partialText, 0, 0)
    }
    function b(a) {
        a.strokeText(this.partialText, 0, 0)
    }
    var c = "auto"
      , d = "canvas"
      , e = "center"
      , f = "Change.kinetic"
      , g = "2d"
      , h = "-"
      , i = ""
      , j = "left"
      , k = "text"
      , l = "Text"
      , m = "middle"
      , n = "normal"
      , o = "px "
      , p = " "
      , q = "right"
      , r = "word"
      , s = "char"
      , t = "none"
      , u = ["fontFamily", "fontSize", "fontStyle", "padding", "align", "lineHeight", "text", "width", "height", "wrap"]
      , v = u.length
      , w = document.createElement(d).getContext(g);
    Kinetic.Text = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Text.prototype = {
        ___init: function(d) {
            var e = this;
            void 0 === d.width && (d.width = c),
            void 0 === d.height && (d.height = c),
            Kinetic.Shape.call(this, d),
            this._fillFunc = a,
            this._strokeFunc = b,
            this.className = l;
            for (var g = 0; v > g; g++)
                this.on(u[g] + f, e._setTextData);
            this._setTextData()
        },
        drawFunc: function(a) {
            var b = this.getPadding()
              , c = (this.getFontStyle(),
            this.getFontSize(),
            this.getFontFamily(),
            this.getTextHeight())
              , d = this.getLineHeight() * c
              , f = this.textArr
              , g = f.length
              , h = this.getWidth();
            a.setAttr("font", this._getContextFont()),
            a.setAttr("textBaseline", m),
            a.setAttr("textAlign", j),
            a.save(),
            a.translate(b, 0),
            a.translate(0, b + c / 2);
            for (var i = 0; g > i; i++) {
                var k = f[i]
                  , l = k.text
                  , n = k.width;
                a.save(),
                this.getAlign() === q ? a.translate(h - n - 2 * b, 0) : this.getAlign() === e && a.translate((h - n - 2 * b) / 2, 0),
                this.partialText = l,
                a.fillStrokeShape(this),
                a.restore(),
                a.translate(0, d)
            }
            a.restore()
        },
        drawHitFunc: function(a) {
            var b = this.getWidth()
              , c = this.getHeight();
            a.beginPath(),
            a.rect(0, 0, b, c),
            a.closePath(),
            a.fillStrokeShape(this)
        },
        setText: function(a) {
            var b = Kinetic.Util._isString(a) ? a : a.toString();
            this._setAttr(k, b)
        },
        getWidth: function() {
            return this.attrs.width === c ? this.getTextWidth() + 2 * this.getPadding() : this.attrs.width
        },
        getHeight: function() {
            return this.attrs.height === c ? this.getTextHeight() * this.textArr.length * this.getLineHeight() + 2 * this.getPadding() : this.attrs.height
        },
        getTextWidth: function() {
            return this.textWidth
        },
        getTextHeight: function() {
            return this.textHeight
        },
        _getTextSize: function(a) {
            var b, c = w, d = this.getFontSize();
            return c.save(),
            c.font = this._getContextFont(),
            b = c.measureText(a),
            c.restore(),
            {
                width: b.width,
                height: parseInt(d, 10)
            }
        },
        _getContextFont: function() {
            return this.getFontStyle() + p + this.getFontSize() + o + this.getFontFamily()
        },
        _addTextLine: function(a, b) {
            return this.textArr.push({
                text: a,
                width: b
            })
        },
        _getTextWidth: function(a) {
            return w.measureText(a).width
        },
        _setTextData: function() {
            var a = this.getText().split("\n")
              , b = +this.getFontSize()
              , d = 0
              , e = this.getLineHeight() * b
              , f = this.attrs.width
              , g = this.attrs.height
              , i = f !== c
              , j = g !== c
              , k = this.getPadding()
              , l = f - 2 * k
              , m = g - 2 * k
              , n = 0
              , q = this.getWrap()
              , r = q !== t
              , u = q !== s && r;
            this.textArr = [],
            w.save(),
            w.font = this.getFontStyle() + p + b + o + this.getFontFamily();
            for (var v = 0, x = a.length; x > v; ++v) {
                var y = a[v]
                  , z = this._getTextWidth(y);
                if (i && z > l)
                    for (; y.length > 0; ) {
                        for (var A = 0, B = y.length, C = "", D = 0; B > A; ) {
                            var E = A + B >>> 1
                              , F = y.slice(0, E + 1)
                              , G = this._getTextWidth(F);
                            l >= G ? (A = E + 1,
                            C = F,
                            D = G) : B = E
                        }
                        if (!C)
                            break;
                        if (u) {
                            var H = Math.max(C.lastIndexOf(p), C.lastIndexOf(h)) + 1;
                            H > 0 && (A = H,
                            C = C.slice(0, A),
                            D = this._getTextWidth(C))
                        }
                        if (this._addTextLine(C, D),
                        n += e,
                        !r || j && n + e > m)
                            break;
                        if (y = y.slice(A),
                        y.length > 0 && (z = this._getTextWidth(y),
                        l >= z)) {
                            this._addTextLine(y, z),
                            n += e;
                            break
                        }
                    }
                else
                    this._addTextLine(y, z),
                    n += e,
                    d = Math.max(d, z);
                if (j && n + e > m)
                    break
            }
            w.restore(),
            this.textHeight = b,
            this.textWidth = d
        }
    },
    Kinetic.Util.extend(Kinetic.Text, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "fontFamily", "Arial"),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "fontSize", 12),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "fontStyle", n),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "padding", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "align", j),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "lineHeight", 1),
    Kinetic.Factory.addGetterSetter(Kinetic.Text, "wrap", r),
    Kinetic.Factory.addGetter(Kinetic.Text, k, i),
    Kinetic.Factory.addSetter(Kinetic.Text, "width"),
    Kinetic.Factory.addSetter(Kinetic.Text, "height")
}(),
function() {
    Kinetic.Line = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Line.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Line"
        },
        drawFunc: function(a) {
            var b, c, d = this.getPoints(), e = d.length;
            for (a.beginPath(),
            a.moveTo(d[0].x, d[0].y),
            b = 1; e > b; b++)
                c = d[b],
                a.lineTo(c.x, c.y);
            a.strokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Line, Kinetic.Shape),
    Kinetic.Factory.addPointsGetterSetter(Kinetic.Line, "points")
}(),
function() {
    Kinetic.Spline = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Spline.prototype = {
        ___init: function(a) {
            var b = this;
            Kinetic.Shape.call(this, a),
            this.className = "Spline",
            this.on("pointsChange.kinetic tensionChange.kinetic", function() {
                b._setAllPoints()
            }),
            this._setAllPoints()
        },
        drawFunc: function(a) {
            var b, c, d, e, f = this.getPoints(), g = f.length, h = this.getTension();
            if (a.beginPath(),
            a.moveTo(f[0].x, f[0].y),
            0 !== h && g > 2) {
                for (b = this.allPoints,
                c = b.length,
                d = 2,
                a.quadraticCurveTo(b[0].x, b[0].y, b[1].x, b[1].y); c - 1 > d; )
                    a.bezierCurveTo(b[d].x, b[d++].y, b[d].x, b[d++].y, b[d].x, b[d++].y);
                a.quadraticCurveTo(b[c - 1].x, b[c - 1].y, f[g - 1].x, f[g - 1].y)
            } else
                for (d = 1; g > d; d++)
                    e = f[d],
                    a.lineTo(e.x, e.y);
            a.strokeShape(this)
        },
        _setAllPoints: function() {
            this.allPoints = Kinetic.Util._expandPoints(this.getPoints(), this.getTension())
        }
    },
    Kinetic.Util.extend(Kinetic.Spline, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Spline, "tension", 1),
    Kinetic.Factory.addPointsGetterSetter(Kinetic.Spline, "points")
}(),
function() {
    Kinetic.Blob = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Blob.prototype = {
        ___init: function(a) {
            var b = this;
            Kinetic.Shape.call(this, a),
            this.className = "Blob",
            this.on("pointsChange.kinetic tensionChange.kinetic", function() {
                b._setAllPoints()
            }),
            this._setAllPoints()
        },
        drawFunc: function(a) {
            var b, c, d, e, f = this.getPoints(), g = f.length, h = this.getTension();
            if (a.beginPath(),
            a.moveTo(f[0].x, f[0].y),
            0 !== h && g > 2)
                for (b = this.allPoints,
                c = b.length,
                d = 0; c - 1 > d; )
                    a.bezierCurveTo(b[d].x, b[d++].y, b[d].x, b[d++].y, b[d].x, b[d++].y);
            else
                for (d = 1; g > d; d++)
                    e = f[d],
                    a.lineTo(e.x, e.y);
            a.closePath(),
            a.fillStrokeShape(this)
        },
        _setAllPoints: function() {
            var a = this.getPoints()
              , b = a.length
              , c = this.getTension()
              , d = Kinetic.Util
              , e = d._getControlPoints(a[b - 1], a[0], a[1], c)
              , f = d._getControlPoints(a[b - 2], a[b - 1], a[0], c);
            this.allPoints = Kinetic.Util._expandPoints(this.getPoints(), this.getTension()),
            this.allPoints.unshift(e[1]),
            this.allPoints.push(f[0]),
            this.allPoints.push(a[b - 1]),
            this.allPoints.push(f[1]),
            this.allPoints.push(e[0]),
            this.allPoints.push(a[0])
        }
    },
    Kinetic.Util.extend(Kinetic.Blob, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Blob, "tension", 1),
    Kinetic.Factory.addPointsGetterSetter(Kinetic.Blob, "points")
}(),
function() {
    Kinetic.Sprite = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Sprite.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Sprite",
            this.anim = new Kinetic.Animation;
            var b = this;
            this.on("animationChange.kinetic", function() {
                b.setIndex(0)
            })
        },
        drawFunc: function(a) {
            var b = this.getAnimation()
              , c = this.getIndex()
              , d = this.getAnimations()[b][c]
              , e = this.getImage();
            e && a.drawImage(e, d.x, d.y, d.width, d.height, 0, 0, d.width, d.height)
        },
        drawHitFunc: function(a) {
            var b = this.getAnimation()
              , c = this.getIndex()
              , d = this.getAnimations()[b][c];
            a.beginPath(),
            a.rect(0, 0, d.width, d.height),
            a.closePath(),
            a.fillShape(this)
        },
        _useBufferCanvas: function() {
            return (this.hasShadow() || 1 !== this.getAbsoluteOpacity()) && this.hasStroke()
        },
        start: function() {
            var a = this
              , b = this.getLayer();
            this.anim.setLayers(b),
            this.interval = setInterval(function() {
                var b = a.getIndex();
                a._updateIndex(),
                a.afterFrameFunc && b === a.afterFrameIndex && (a.afterFrameFunc(),
                delete a.afterFrameFunc,
                delete a.afterFrameIndex)
            }, 1e3 / this.getFrameRate()),
            this.anim.start()
        },
        stop: function() {
            this.anim.stop(),
            clearInterval(this.interval)
        },
        afterFrame: function(a, b) {
            this.afterFrameIndex = a,
            this.afterFrameFunc = b
        },
        _updateIndex: function() {
            var a = this.getIndex()
              , b = this.getAnimation()
              , c = this.getAnimations()
              , d = c[b]
              , e = d.length;
            e - 1 > a ? this.setIndex(a + 1) : this.setIndex(0)
        }
    },
    Kinetic.Util.extend(Kinetic.Sprite, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, "animation"),
    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, "animations"),
    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, "image"),
    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, "index", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, "frameRate", 17)
}(),
function() {
    Kinetic.Path = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Path.prototype = {
        ___init: function(a) {
            this.dataArray = [];
            var b = this;
            Kinetic.Shape.call(this, a),
            this.className = "Path",
            this.dataArray = Kinetic.Path.parsePathData(this.getData()),
            this.on("dataChange.kinetic", function() {
                b.dataArray = Kinetic.Path.parsePathData(this.getData())
            })
        },
        drawFunc: function(a) {
            var b = this.dataArray
              , c = !1;
            a.beginPath();
            for (var d = 0; d < b.length; d++) {
                var e = b[d].command
                  , f = b[d].points;
                switch (e) {
                case "L":
                    a.lineTo(f[0], f[1]);
                    break;
                case "M":
                    a.moveTo(f[0], f[1]);
                    break;
                case "C":
                    a.bezierCurveTo(f[0], f[1], f[2], f[3], f[4], f[5]);
                    break;
                case "Q":
                    a.quadraticCurveTo(f[0], f[1], f[2], f[3]);
                    break;
                case "A":
                    var g = f[0]
                      , h = f[1]
                      , i = f[2]
                      , j = f[3]
                      , k = f[4]
                      , l = f[5]
                      , m = f[6]
                      , n = f[7]
                      , o = i > j ? i : j
                      , p = i > j ? 1 : i / j
                      , q = i > j ? j / i : 1;
                    a.translate(g, h),
                    a.rotate(m),
                    a.scale(p, q),
                    a.arc(0, 0, o, k, k + l, 1 - n),
                    a.scale(1 / p, 1 / q),
                    a.rotate(-m),
                    a.translate(-g, -h);
                    break;
                case "z":
                    a.closePath(),
                    c = !0
                }
            }
            c ? a.fillStrokeShape(this) : a.strokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Path, Kinetic.Shape),
    Kinetic.Path.getLineLength = function(a, b, c, d) {
        return Math.sqrt((c - a) * (c - a) + (d - b) * (d - b))
    }
    ,
    Kinetic.Path.getPointOnLine = function(a, b, c, d, e, f, g) {
        void 0 === f && (f = b),
        void 0 === g && (g = c);
        var h = (e - c) / (d - b + 1e-8)
          , i = Math.sqrt(a * a / (1 + h * h));
        b > d && (i *= -1);
        var j, k = h * i;
        if (d === b)
            j = {
                x: f,
                y: g + k
            };
        else if ((g - c) / (f - b + 1e-8) === h)
            j = {
                x: f + i,
                y: g + k
            };
        else {
            var l, m, n = this.getLineLength(b, c, d, e);
            if (1e-8 > n)
                return void 0;
            var o = (f - b) * (d - b) + (g - c) * (e - c);
            o /= n * n,
            l = b + o * (d - b),
            m = c + o * (e - c);
            var p = this.getLineLength(f, g, l, m)
              , q = Math.sqrt(a * a - p * p);
            i = Math.sqrt(q * q / (1 + h * h)),
            b > d && (i *= -1),
            k = h * i,
            j = {
                x: l + i,
                y: m + k
            }
        }
        return j
    }
    ,
    Kinetic.Path.getPointOnCubicBezier = function(a, b, c, d, e, f, g, h, i) {
        function j(a) {
            return a * a * a
        }
        function k(a) {
            return 3 * a * a * (1 - a)
        }
        function l(a) {
            return 3 * a * (1 - a) * (1 - a)
        }
        function m(a) {
            return (1 - a) * (1 - a) * (1 - a)
        }
        var n = h * j(a) + f * k(a) + d * l(a) + b * m(a)
          , o = i * j(a) + g * k(a) + e * l(a) + c * m(a);
        return {
            x: n,
            y: o
        }
    }
    ,
    Kinetic.Path.getPointOnQuadraticBezier = function(a, b, c, d, e, f, g) {
        function h(a) {
            return a * a
        }
        function i(a) {
            return 2 * a * (1 - a)
        }
        function j(a) {
            return (1 - a) * (1 - a)
        }
        var k = f * h(a) + d * i(a) + b * j(a)
          , l = g * h(a) + e * i(a) + c * j(a);
        return {
            x: k,
            y: l
        }
    }
    ,
    Kinetic.Path.getPointOnEllipticalArc = function(a, b, c, d, e, f) {
        var g = Math.cos(f)
          , h = Math.sin(f)
          , i = {
            x: c * Math.cos(e),
            y: d * Math.sin(e)
        };
        return {
            x: a + (i.x * g - i.y * h),
            y: b + (i.x * h + i.y * g)
        }
    }
    ,
    Kinetic.Path.parsePathData = function(a) {
        if (!a)
            return [];
        var b = a
          , c = ["m", "M", "l", "L", "v", "V", "h", "H", "z", "Z", "c", "C", "q", "Q", "t", "T", "s", "S", "a", "A"];
        b = b.replace(new RegExp(" ","g"), ",");
        for (var d = 0; d < c.length; d++)
            b = b.replace(new RegExp(c[d],"g"), "|" + c[d]);
        var e = b.split("|")
          , f = []
          , g = 0
          , h = 0;
        for (d = 1; d < e.length; d++) {
            var i = e[d]
              , j = i.charAt(0);
            i = i.slice(1),
            i = i.replace(new RegExp(",-","g"), "-"),
            i = i.replace(new RegExp("-","g"), ",-"),
            i = i.replace(new RegExp("e,-","g"), "e-");
            var k = i.split(",");
            k.length > 0 && "" === k[0] && k.shift();
            for (var l = 0; l < k.length; l++)
                k[l] = parseFloat(k[l]);
            for (; k.length > 0 && !isNaN(k[0]); ) {
                var m, n, o, p, q, r, s, t, u, v, w = null, x = [], y = g, z = h;
                switch (j) {
                case "l":
                    g += k.shift(),
                    h += k.shift(),
                    w = "L",
                    x.push(g, h);
                    break;
                case "L":
                    g = k.shift(),
                    h = k.shift(),
                    x.push(g, h);
                    break;
                case "m":
                    g += k.shift(),
                    h += k.shift(),
                    w = "M",
                    x.push(g, h),
                    j = "l";
                    break;
                case "M":
                    g = k.shift(),
                    h = k.shift(),
                    w = "M",
                    x.push(g, h),
                    j = "L";
                    break;
                case "h":
                    g += k.shift(),
                    w = "L",
                    x.push(g, h);
                    break;
                case "H":
                    g = k.shift(),
                    w = "L",
                    x.push(g, h);
                    break;
                case "v":
                    h += k.shift(),
                    w = "L",
                    x.push(g, h);
                    break;
                case "V":
                    h = k.shift(),
                    w = "L",
                    x.push(g, h);
                    break;
                case "C":
                    x.push(k.shift(), k.shift(), k.shift(), k.shift()),
                    g = k.shift(),
                    h = k.shift(),
                    x.push(g, h);
                    break;
                case "c":
                    x.push(g + k.shift(), h + k.shift(), g + k.shift(), h + k.shift()),
                    g += k.shift(),
                    h += k.shift(),
                    w = "C",
                    x.push(g, h);
                    break;
                case "S":
                    n = g,
                    o = h,
                    m = f[f.length - 1],
                    "C" === m.command && (n = g + (g - m.points[2]),
                    o = h + (h - m.points[3])),
                    x.push(n, o, k.shift(), k.shift()),
                    g = k.shift(),
                    h = k.shift(),
                    w = "C",
                    x.push(g, h);
                    break;
                case "s":
                    n = g,
                    o = h,
                    m = f[f.length - 1],
                    "C" === m.command && (n = g + (g - m.points[2]),
                    o = h + (h - m.points[3])),
                    x.push(n, o, g + k.shift(), h + k.shift()),
                    g += k.shift(),
                    h += k.shift(),
                    w = "C",
                    x.push(g, h);
                    break;
                case "Q":
                    x.push(k.shift(), k.shift()),
                    g = k.shift(),
                    h = k.shift(),
                    x.push(g, h);
                    break;
                case "q":
                    x.push(g + k.shift(), h + k.shift()),
                    g += k.shift(),
                    h += k.shift(),
                    w = "Q",
                    x.push(g, h);
                    break;
                case "T":
                    n = g,
                    o = h,
                    m = f[f.length - 1],
                    "Q" === m.command && (n = g + (g - m.points[0]),
                    o = h + (h - m.points[1])),
                    g = k.shift(),
                    h = k.shift(),
                    w = "Q",
                    x.push(n, o, g, h);
                    break;
                case "t":
                    n = g,
                    o = h,
                    m = f[f.length - 1],
                    "Q" === m.command && (n = g + (g - m.points[0]),
                    o = h + (h - m.points[1])),
                    g += k.shift(),
                    h += k.shift(),
                    w = "Q",
                    x.push(n, o, g, h);
                    break;
                case "A":
                    p = k.shift(),
                    q = k.shift(),
                    r = k.shift(),
                    s = k.shift(),
                    t = k.shift(),
                    u = g,
                    v = h,
                    g = k.shift(),
                    h = k.shift(),
                    w = "A",
                    x = this.convertEndpointToCenterParameterization(u, v, g, h, s, t, p, q, r);
                    break;
                case "a":
                    p = k.shift(),
                    q = k.shift(),
                    r = k.shift(),
                    s = k.shift(),
                    t = k.shift(),
                    u = g,
                    v = h,
                    g += k.shift(),
                    h += k.shift(),
                    w = "A",
                    x = this.convertEndpointToCenterParameterization(u, v, g, h, s, t, p, q, r)
                }
                f.push({
                    command: w || j,
                    points: x,
                    start: {
                        x: y,
                        y: z
                    },
                    pathLength: this.calcLength(y, z, w || j, x)
                })
            }
            ("z" === j || "Z" === j) && f.push({
                command: "z",
                points: [],
                start: void 0,
                pathLength: 0
            })
        }
        return f
    }
    ,
    Kinetic.Path.calcLength = function(a, b, c, d) {
        var e, f, g, h = Kinetic.Path;
        switch (c) {
        case "L":
            return h.getLineLength(a, b, d[0], d[1]);
        case "C":
            for (e = 0,
            f = h.getPointOnCubicBezier(0, a, b, d[0], d[1], d[2], d[3], d[4], d[5]),
            t = .01; 1 >= t; t += .01)
                g = h.getPointOnCubicBezier(t, a, b, d[0], d[1], d[2], d[3], d[4], d[5]),
                e += h.getLineLength(f.x, f.y, g.x, g.y),
                f = g;
            return e;
        case "Q":
            for (e = 0,
            f = h.getPointOnQuadraticBezier(0, a, b, d[0], d[1], d[2], d[3]),
            t = .01; 1 >= t; t += .01)
                g = h.getPointOnQuadraticBezier(t, a, b, d[0], d[1], d[2], d[3]),
                e += h.getLineLength(f.x, f.y, g.x, g.y),
                f = g;
            return e;
        case "A":
            e = 0;
            var i = d[4]
              , j = d[5]
              , k = d[4] + j
              , l = Math.PI / 180;
            if (Math.abs(i - k) < l && (l = Math.abs(i - k)),
            f = h.getPointOnEllipticalArc(d[0], d[1], d[2], d[3], i, 0),
            0 > j)
                for (t = i - l; t > k; t -= l)
                    g = h.getPointOnEllipticalArc(d[0], d[1], d[2], d[3], t, 0),
                    e += h.getLineLength(f.x, f.y, g.x, g.y),
                    f = g;
            else
                for (t = i + l; k > t; t += l)
                    g = h.getPointOnEllipticalArc(d[0], d[1], d[2], d[3], t, 0),
                    e += h.getLineLength(f.x, f.y, g.x, g.y),
                    f = g;
            return g = h.getPointOnEllipticalArc(d[0], d[1], d[2], d[3], k, 0),
            e += h.getLineLength(f.x, f.y, g.x, g.y)
        }
        return 0
    }
    ,
    Kinetic.Path.convertEndpointToCenterParameterization = function(a, b, c, d, e, f, g, h, i) {
        var j = i * (Math.PI / 180)
          , k = Math.cos(j) * (a - c) / 2 + Math.sin(j) * (b - d) / 2
          , l = -1 * Math.sin(j) * (a - c) / 2 + Math.cos(j) * (b - d) / 2
          , m = k * k / (g * g) + l * l / (h * h);
        m > 1 && (g *= Math.sqrt(m),
        h *= Math.sqrt(m));
        var n = Math.sqrt((g * g * h * h - g * g * l * l - h * h * k * k) / (g * g * l * l + h * h * k * k));
        e == f && (n *= -1),
        isNaN(n) && (n = 0);
        var o = n * g * l / h
          , p = n * -h * k / g
          , q = (a + c) / 2 + Math.cos(j) * o - Math.sin(j) * p
          , r = (b + d) / 2 + Math.sin(j) * o + Math.cos(j) * p
          , s = function(a) {
            return Math.sqrt(a[0] * a[0] + a[1] * a[1])
        }
          , t = function(a, b) {
            return (a[0] * b[0] + a[1] * b[1]) / (s(a) * s(b))
        }
          , u = function(a, b) {
            return (a[0] * b[1] < a[1] * b[0] ? -1 : 1) * Math.acos(t(a, b))
        }
          , v = u([1, 0], [(k - o) / g, (l - p) / h])
          , w = [(k - o) / g, (l - p) / h]
          , x = [(-1 * k - o) / g, (-1 * l - p) / h]
          , y = u(w, x);
        return t(w, x) <= -1 && (y = Math.PI),
        t(w, x) >= 1 && (y = 0),
        0 === f && y > 0 && (y -= 2 * Math.PI),
        1 == f && 0 > y && (y += 2 * Math.PI),
        [q, r, g, h, v, y, j, f]
    }
    ,
    Kinetic.Factory.addGetterSetter(Kinetic.Path, "data")
}(),
function() {
    function a(a) {
        a.fillText(this.partialText, 0, 0)
    }
    function b(a) {
        a.strokeText(this.partialText, 0, 0)
    }
    var c = ""
      , d = "Calibri"
      , e = "normal";
    Kinetic.TextPath = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.TextPath.prototype = {
        ___init: function(c) {
            var d = this;
            this.dummyCanvas = document.createElement("canvas"),
            this.dataArray = [],
            Kinetic.Shape.call(this, c),
            this._fillFunc = a,
            this._strokeFunc = b,
            this._fillFuncHit = a,
            this._strokeFuncHit = b,
            this.className = "TextPath",
            this.dataArray = Kinetic.Path.parsePathData(this.attrs.data),
            this.on("dataChange.kinetic", function() {
                d.dataArray = Kinetic.Path.parsePathData(this.attrs.data)
            }),
            this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic", d._setTextData),
            d._setTextData()
        },
        drawFunc: function(a) {
            a.setAttr("font", this._getContextFont()),
            a.setAttr("textBaseline", "middle"),
            a.setAttr("textAlign", "left"),
            a.save();
            for (var b = this.glyphInfo, c = 0; c < b.length; c++) {
                a.save();
                var d = b[c].p0;
                a.translate(d.x, d.y),
                a.rotate(b[c].rotation),
                this.partialText = b[c].text,
                a.fillStrokeShape(this),
                a.restore()
            }
            a.restore()
        },
        getTextWidth: function() {
            return this.textWidth
        },
        getTextHeight: function() {
            return this.textHeight
        },
        setText: function(a) {
            Kinetic.Text.prototype.setText.call(this, a)
        },
        _getTextSize: function(a) {
            var b = this.dummyCanvas
              , c = b.getContext("2d");
            c.save(),
            c.font = this._getContextFont();
            var d = c.measureText(a);
            return c.restore(),
            {
                width: d.width,
                height: parseInt(this.attrs.fontSize, 10)
            }
        },
        _setTextData: function() {
            var a = this
              , b = this._getTextSize(this.attrs.text);
            this.textWidth = b.width,
            this.textHeight = b.height,
            this.glyphInfo = [];
            for (var c, d, e, f = this.attrs.text.split(""), g = -1, h = 0, i = function() {
                h = 0;
                for (var b = a.dataArray, d = g + 1; d < b.length; d++) {
                    if (b[d].pathLength > 0)
                        return g = d,
                        b[d];
                    "M" == b[d].command && (c = {
                        x: b[d].points[0],
                        y: b[d].points[1]
                    })
                }
                return {}
            }, j = function(b) {
                var f = a._getTextSize(b).width
                  , g = 0
                  , j = 0;
                for (d = void 0; Math.abs(f - g) / f > .01 && 25 > j; ) {
                    j++;
                    for (var k = g; void 0 === e; )
                        e = i(),
                        e && k + e.pathLength < f && (k += e.pathLength,
                        e = void 0);
                    if (e === {} || void 0 === c)
                        return void 0;
                    var l = !1;
                    switch (e.command) {
                    case "L":
                        Kinetic.Path.getLineLength(c.x, c.y, e.points[0], e.points[1]) > f ? d = Kinetic.Path.getPointOnLine(f, c.x, c.y, e.points[0], e.points[1], c.x, c.y) : e = void 0;
                        break;
                    case "A":
                        var m = e.points[4]
                          , n = e.points[5]
                          , o = e.points[4] + n;
                        0 === h ? h = m + 1e-8 : f > g ? h += Math.PI / 180 * n / Math.abs(n) : h -= Math.PI / 360 * n / Math.abs(n),
                        (0 > n && o > h || n >= 0 && h > o) && (h = o,
                        l = !0),
                        d = Kinetic.Path.getPointOnEllipticalArc(e.points[0], e.points[1], e.points[2], e.points[3], h, e.points[6]);
                        break;
                    case "C":
                        0 === h ? h = f > e.pathLength ? 1e-8 : f / e.pathLength : f > g ? h += (f - g) / e.pathLength : h -= (g - f) / e.pathLength,
                        h > 1 && (h = 1,
                        l = !0),
                        d = Kinetic.Path.getPointOnCubicBezier(h, e.start.x, e.start.y, e.points[0], e.points[1], e.points[2], e.points[3], e.points[4], e.points[5]);
                        break;
                    case "Q":
                        0 === h ? h = f / e.pathLength : f > g ? h += (f - g) / e.pathLength : h -= (g - f) / e.pathLength,
                        h > 1 && (h = 1,
                        l = !0),
                        d = Kinetic.Path.getPointOnQuadraticBezier(h, e.start.x, e.start.y, e.points[0], e.points[1], e.points[2], e.points[3])
                    }
                    void 0 !== d && (g = Kinetic.Path.getLineLength(c.x, c.y, d.x, d.y)),
                    l && (l = !1,
                    e = void 0)
                }
            }, k = 0; k < f.length && (j(f[k]),
            void 0 !== c && void 0 !== d); k++) {
                var l = Kinetic.Path.getLineLength(c.x, c.y, d.x, d.y)
                  , m = 0
                  , n = Kinetic.Path.getPointOnLine(m + l / 2, c.x, c.y, d.x, d.y)
                  , o = Math.atan2(d.y - c.y, d.x - c.x);
                this.glyphInfo.push({
                    transposeX: n.x,
                    transposeY: n.y,
                    text: f[k],
                    rotation: o,
                    p0: c,
                    p1: d
                }),
                c = d
            }
        }
    },
    Kinetic.TextPath.prototype._getContextFont = Kinetic.Text.prototype._getContextFont,
    Kinetic.Util.extend(Kinetic.TextPath, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, "fontFamily", d),
    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, "fontSize", 12),
    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, "fontStyle", e),
    Kinetic.Factory.addGetter(Kinetic.TextPath, "text", c)
}(),
function() {
    Kinetic.RegularPolygon = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.RegularPolygon.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "RegularPolygon"
        },
        drawFunc: function(a) {
            var b, c, d, e = this.attrs.sides, f = this.attrs.radius;
            for (a.beginPath(),
            a.moveTo(0, 0 - f),
            b = 1; e > b; b++)
                c = f * Math.sin(2 * b * Math.PI / e),
                d = -1 * f * Math.cos(2 * b * Math.PI / e),
                a.lineTo(c, d);
            a.closePath(),
            a.fillStrokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.RegularPolygon, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon, "radius", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon, "sides", 0)
}(),
function() {
    Kinetic.Star = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Star.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Star"
        },
        drawFunc: function(a) {
            var b = a._context
              , c = this.attrs.innerRadius
              , d = this.attrs.outerRadius
              , e = this.attrs.numPoints;
            b.beginPath(),
            b.moveTo(0, 0 - this.attrs.outerRadius);
            for (var f = 1; 2 * e > f; f++) {
                var g = 0 === f % 2 ? d : c
                  , h = g * Math.sin(f * Math.PI / e)
                  , i = -1 * g * Math.cos(f * Math.PI / e);
                b.lineTo(h, i)
            }
            b.closePath(),
            a.fillStrokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Star, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Star, "numPoints", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Star, "innerRadius", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Star, "outerRadius", 0)
}(),
function() {
    var a = ["fontFamily", "fontSize", "fontStyle", "padding", "lineHeight", "text"]
      , b = "Change.kinetic"
      , c = "none"
      , d = "up"
      , e = "right"
      , f = "down"
      , g = "left"
      , h = "Label"
      , i = a.length;
    Kinetic.Label = function(a) {
        this.____init(a)
    }
    ,
    Kinetic.Label.prototype = {
        ____init: function(a) {
            var b = this;
            this.className = h,
            Kinetic.Group.call(this, a),
            this.on("add.kinetic", function(a) {
                b._addListeners(a.child),
                b._sync()
            })
        },
        getText: function() {
            return this.find("Text")[0]
        },
        getTag: function() {
            return this.find("Tag")[0]
        },
        _addListeners: function(c) {
            var d, e = this, f = function() {
                e._sync()
            };
            for (d = 0; i > d; d++)
                c.on(a[d] + b, f)
        },
        getWidth: function() {
            return this.getText().getWidth()
        },
        getHeight: function() {
            return this.getText().getHeight()
        },
        _sync: function() {
            var a, b, c, h, i, j, k = this.getText(), l = this.getTag();
            if (k && l) {
                switch (a = k.getWidth(),
                b = k.getHeight(),
                c = l.getPointerDirection(),
                h = l.getPointerWidth(),
                pointerHeight = l.getPointerHeight(),
                i = 0,
                j = 0,
                c) {
                case d:
                    i = a / 2,
                    j = -1 * pointerHeight;
                    break;
                case e:
                    i = a + h,
                    j = b / 2;
                    break;
                case f:
                    i = a / 2,
                    j = b + pointerHeight;
                    break;
                case g:
                    i = -1 * h,
                    j = b / 2
                }
                l.setAttrs({
                    x: -1 * i,
                    y: -1 * j,
                    width: a,
                    height: b
                }),
                k.setAttrs({
                    x: -1 * i,
                    y: -1 * j
                })
            }
        }
    },
    Kinetic.Util.extend(Kinetic.Label, Kinetic.Group),
    Kinetic.Tag = function(a) {
        this.___init(a)
    }
    ,
    Kinetic.Tag.prototype = {
        ___init: function(a) {
            Kinetic.Shape.call(this, a),
            this.className = "Tag"
        },
        drawFunc: function(a) {
            var b = this.getWidth()
              , c = this.getHeight()
              , h = this.getPointerDirection()
              , i = this.getPointerWidth()
              , j = this.getPointerHeight();
            this.getCornerRadius(),
            a.beginPath(),
            a.moveTo(0, 0),
            h === d && (a.lineTo((b - i) / 2, 0),
            a.lineTo(b / 2, -1 * j),
            a.lineTo((b + i) / 2, 0)),
            a.lineTo(b, 0),
            h === e && (a.lineTo(b, (c - j) / 2),
            a.lineTo(b + i, c / 2),
            a.lineTo(b, (c + j) / 2)),
            a.lineTo(b, c),
            h === f && (a.lineTo((b + i) / 2, c),
            a.lineTo(b / 2, c + j),
            a.lineTo((b - i) / 2, c)),
            a.lineTo(0, c),
            h === g && (a.lineTo(0, (c + j) / 2),
            a.lineTo(-1 * i, c / 2),
            a.lineTo(0, (c - j) / 2)),
            a.closePath(),
            a.fillStrokeShape(this)
        }
    },
    Kinetic.Util.extend(Kinetic.Tag, Kinetic.Shape),
    Kinetic.Factory.addGetterSetter(Kinetic.Tag, "pointerDirection", c),
    Kinetic.Factory.addGetterSetter(Kinetic.Tag, "pointerWidth", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Tag, "pointerHeight", 0),
    Kinetic.Factory.addGetterSetter(Kinetic.Tag, "cornerRadius", 0)
}(),
function() {
    Kinetic.Filters.Grayscale = function(a) {
        for (var b = a.data, c = 0; c < b.length; c += 4) {
            var d = .34 * b[c] + .5 * b[c + 1] + .16 * b[c + 2];
            b[c] = d,
            b[c + 1] = d,
            b[c + 2] = d
        }
    }
}(),
function() {
    Kinetic.Filters.Brighten = function(a) {
        for (var b = this.getFilterBrightness(), c = a.data, d = 0; d < c.length; d += 4)
            c[d] += b,
            c[d + 1] += b,
            c[d + 2] += b
    }
    ,
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filterBrightness", 0)
}(),
function() {
    Kinetic.Filters.Invert = function(a) {
        for (var b = a.data, c = 0; c < b.length; c += 4)
            b[c] = 255 - b[c],
            b[c + 1] = 255 - b[c + 1],
            b[c + 2] = 255 - b[c + 2]
    }
}(),
function() {
    function a() {
        this.r = 0,
        this.g = 0,
        this.b = 0,
        this.a = 0,
        this.next = null
    }
    function b(b, e) {
        var f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D = b.data, E = b.width, F = b.height, G = e + e + 1, H = E - 1, I = F - 1, J = e + 1, K = J * (J + 1) / 2, L = new a, M = null, N = L, O = null, P = null, Q = c[e], R = d[e];
        for (h = 1; G > h; h++)
            N = N.next = new a,
            h == J && (M = N);
        for (N.next = L,
        l = k = 0,
        g = 0; F > g; g++) {
            for (u = v = w = x = m = n = o = p = 0,
            q = J * (y = D[k]),
            r = J * (z = D[k + 1]),
            s = J * (A = D[k + 2]),
            t = J * (B = D[k + 3]),
            m += K * y,
            n += K * z,
            o += K * A,
            p += K * B,
            N = L,
            h = 0; J > h; h++)
                N.r = y,
                N.g = z,
                N.b = A,
                N.a = B,
                N = N.next;
            for (h = 1; J > h; h++)
                i = k + ((h > H ? H : h) << 2),
                m += (N.r = y = D[i]) * (C = J - h),
                n += (N.g = z = D[i + 1]) * C,
                o += (N.b = A = D[i + 2]) * C,
                p += (N.a = B = D[i + 3]) * C,
                u += y,
                v += z,
                w += A,
                x += B,
                N = N.next;
            for (O = L,
            P = M,
            f = 0; E > f; f++)
                D[k + 3] = B = p * Q >> R,
                0 !== B ? (B = 255 / B,
                D[k] = (m * Q >> R) * B,
                D[k + 1] = (n * Q >> R) * B,
                D[k + 2] = (o * Q >> R) * B) : D[k] = D[k + 1] = D[k + 2] = 0,
                m -= q,
                n -= r,
                o -= s,
                p -= t,
                q -= O.r,
                r -= O.g,
                s -= O.b,
                t -= O.a,
                i = l + ((i = f + e + 1) < H ? i : H) << 2,
                u += O.r = D[i],
                v += O.g = D[i + 1],
                w += O.b = D[i + 2],
                x += O.a = D[i + 3],
                m += u,
                n += v,
                o += w,
                p += x,
                O = O.next,
                q += y = P.r,
                r += z = P.g,
                s += A = P.b,
                t += B = P.a,
                u -= y,
                v -= z,
                w -= A,
                x -= B,
                P = P.next,
                k += 4;
            l += E
        }
        for (f = 0; E > f; f++) {
            for (v = w = x = u = n = o = p = m = 0,
            k = f << 2,
            q = J * (y = D[k]),
            r = J * (z = D[k + 1]),
            s = J * (A = D[k + 2]),
            t = J * (B = D[k + 3]),
            m += K * y,
            n += K * z,
            o += K * A,
            p += K * B,
            N = L,
            h = 0; J > h; h++)
                N.r = y,
                N.g = z,
                N.b = A,
                N.a = B,
                N = N.next;
            for (j = E,
            h = 1; e >= h; h++)
                k = j + f << 2,
                m += (N.r = y = D[k]) * (C = J - h),
                n += (N.g = z = D[k + 1]) * C,
                o += (N.b = A = D[k + 2]) * C,
                p += (N.a = B = D[k + 3]) * C,
                u += y,
                v += z,
                w += A,
                x += B,
                N = N.next,
                I > h && (j += E);
            for (k = f,
            O = L,
            P = M,
            g = 0; F > g; g++)
                i = k << 2,
                D[i + 3] = B = p * Q >> R,
                B > 0 ? (B = 255 / B,
                D[i] = (m * Q >> R) * B,
                D[i + 1] = (n * Q >> R) * B,
                D[i + 2] = (o * Q >> R) * B) : D[i] = D[i + 1] = D[i + 2] = 0,
                m -= q,
                n -= r,
                o -= s,
                p -= t,
                q -= O.r,
                r -= O.g,
                s -= O.b,
                t -= O.a,
                i = f + ((i = g + J) < I ? i : I) * E << 2,
                m += u += O.r = D[i],
                n += v += O.g = D[i + 1],
                o += w += O.b = D[i + 2],
                p += x += O.a = D[i + 3],
                O = O.next,
                q += y = P.r,
                r += z = P.g,
                s += A = P.b,
                t += B = P.a,
                u -= y,
                v -= z,
                w -= A,
                x -= B,
                P = P.next,
                k += E
        }
    }
    var c = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259]
      , d = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];
    Kinetic.Filters.Blur = function(a) {
        var c = 0 | this.getFilterRadius();
        c > 0 && b(a, c)
    }
    ,
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filterRadius", 0)
}(),
function() {
    function a(a, b, c) {
        var d = 4 * (c * a.width + b)
          , e = [];
        return e.push(a.data[d++], a.data[d++], a.data[d++], a.data[d++]),
        e
    }
    function b(a, b) {
        return Math.sqrt(Math.pow(a[0] - b[0], 2) + Math.pow(a[1] - b[1], 2) + Math.pow(a[2] - b[2], 2))
    }
    function c(a) {
        for (var b = [0, 0, 0], c = 0; c < a.length; c++)
            b[0] += a[c][0],
            b[1] += a[c][1],
            b[2] += a[c][2];
        return b[0] /= a.length,
        b[1] /= a.length,
        b[2] /= a.length,
        b
    }
    function d(d, e) {
        var f = a(d, 0, 0)
          , g = a(d, d.width - 1, 0)
          , h = a(d, 0, d.height - 1)
          , i = a(d, d.width - 1, d.height - 1)
          , j = e || 10;
        if (b(f, g) < j && b(g, i) < j && b(i, h) < j && b(h, f) < j) {
            for (var k = c([g, f, i, h]), l = [], m = 0; m < d.width * d.height; m++) {
                var n = b(k, [d.data[4 * m], d.data[4 * m + 1], d.data[4 * m + 2]]);
                l[m] = j > n ? 0 : 255
            }
            return l
        }
    }
    function e(a, b) {
        for (var c = 0; c < a.width * a.height; c++)
            a.data[4 * c + 3] = b[c]
    }
    function f(a, b, c) {
        for (var d = [1, 1, 1, 1, 0, 1, 1, 1, 1], e = Math.round(Math.sqrt(d.length)), f = Math.floor(e / 2), g = [], h = 0; c > h; h++)
            for (var i = 0; b > i; i++) {
                for (var j = h * b + i, k = 0, l = 0; e > l; l++)
                    for (var m = 0; e > m; m++) {
                        var n = h + l - f
                          , o = i + m - f;
                        if (n >= 0 && c > n && o >= 0 && b > o) {
                            var p = n * b + o
                              , q = d[l * e + m];
                            k += a[p] * q
                        }
                    }
                g[j] = 2040 === k ? 255 : 0
            }
        return g
    }
    function g(a, b, c) {
        for (var d = [1, 1, 1, 1, 1, 1, 1, 1, 1], e = Math.round(Math.sqrt(d.length)), f = Math.floor(e / 2), g = [], h = 0; c > h; h++)
            for (var i = 0; b > i; i++) {
                for (var j = h * b + i, k = 0, l = 0; e > l; l++)
                    for (var m = 0; e > m; m++) {
                        var n = h + l - f
                          , o = i + m - f;
                        if (n >= 0 && c > n && o >= 0 && b > o) {
                            var p = n * b + o
                              , q = d[l * e + m];
                            k += a[p] * q
                        }
                    }
                g[j] = k >= 1020 ? 255 : 0
            }
        return g
    }
    function h(a, b, c) {
        for (var d = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9], e = Math.round(Math.sqrt(d.length)), f = Math.floor(e / 2), g = [], h = 0; c > h; h++)
            for (var i = 0; b > i; i++) {
                for (var j = h * b + i, k = 0, l = 0; e > l; l++)
                    for (var m = 0; e > m; m++) {
                        var n = h + l - f
                          , o = i + m - f;
                        if (n >= 0 && c > n && o >= 0 && b > o) {
                            var p = n * b + o
                              , q = d[l * e + m];
                            k += a[p] * q
                        }
                    }
                g[j] = k
            }
        return g
    }
    Kinetic.Filters.Mask = function(a) {
        var b = this.getFilterThreshold()
          , c = d(a, b);
        return c && (c = f(c, a.width, a.height),
        c = g(c, a.width, a.height),
        c = h(c, a.width, a.height),
        e(a, c)),
        a
    }
    ,
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filterThreshold", 0)
}(),
function() {
    var a = function(a, b, c) {
        a /= 255,
        b /= 255,
        c /= 255;
        var d = Math.max(a, b, c)
          , e = Math.min(a, b, c)
          , f = d - e
          , g = f / 2
          , h = f / (1 - Math.abs(2 * g - 1))
          , i = 0;
        return d == a ? i = (b - c) / f % 6 : d == b ? i = (c - a) / f + 2 : d == c && (i = (a - b) / f + 4),
        [(60 * i + 360) % 360, h, g]
    }
      , b = function(a, b, c, d) {
        a /= 255,
        b /= 255,
        c /= 255;
        var e = Math.max(a, b, c)
          , f = Math.min(a, b, c)
          , g = e - f
          , h = g / 2
          , i = (g / (1 - Math.abs(2 * h - 1)),
        0);
        e == a ? i = (b - c) / g % 6 : e == b ? i = (c - a) / g + 2 : e == c && (i = (a - b) / g + 4),
        i *= 60,
        i %= 360,
        i += d,
        i %= 360,
        i /= 60;
        var j = 0
          , k = 0
          , l = 0
          , m = g * (1 - Math.abs(i % 2 - 1))
          , n = h - g / 2;
        return i >= 0 && 1 > i ? (j = g,
        k = m) : i >= 1 && 2 > i ? (k = g,
        j = m) : i >= 2 && 3 > i ? (k = g,
        l = m) : i >= 3 && 4 > i ? (l = g,
        k = m) : i >= 4 && 5 > i ? (l = g,
        j = m) : i >= 5 && 6 > i && (j = g,
        l = m),
        j += n,
        k += n,
        l += n,
        j = 255 * j,
        k = 255 * k,
        l = 255 * l,
        [j, k, l]
    }
      , c = function(a, c) {
        for (var d, e = a.data, f = 0; f < e.length; f += 4)
            d = b(e[f + 0], e[f + 1], e[f + 2], c),
            e[f + 0] = d[0],
            e[f + 1] = d[1],
            e[f + 2] = d[2]
    };
    Kinetic.Filters.ShiftHue = function(a) {
        c(a, this.getFilterHueShiftDeg() % 360)
    }
    ,
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filterHueShiftDeg", 0),
    Kinetic.Filters.Colorize = function(b) {
        for (var d = b.data, e = this.getFilterColorizeColor(), f = a(e[0], e[1], e[2]), g = f[0], h = 0; h < d.length; h += 4)
            d[h + 1] = 0,
            d[h + 2] = 0;
        c(b, g)
    }
    ,
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filterColorizeColor", [255, 0, 0])
}(),
function() {
    var a = function(a, b) {
        var c = a.data
          , d = a.width
          , e = a.height
          , f = d * e
          , g = [];
        g.length = 4 * d * e;
        var h, i, j, k, l, m, n, o, p, q, r, s = b.length, t = b[0].length, u = Math.floor(b.length / 2), v = Math.floor(b[0].length / 2);
        for (m = 0; e > m; m += 1)
            for (l = 0; d > l; l += 1) {
                for (h = 0,
                i = 0,
                j = 0,
                k = 0,
                q = 0; s > q; q += 1)
                    for (r = 0; t > r; r += 1)
                        n = (l + q - u) % d,
                        n = n > 0 ? n : -n,
                        o = (m + q - v) % e,
                        o = o > 0 ? o : -o,
                        p = 4 * (o * d + n),
                        h += b[r][q] * c[p + 0],
                        i += b[r][q] * c[p + 1],
                        j += b[r][q] * c[p + 2];
                p = 4 * (m * d + l),
                g[p + 0] = h,
                g[p + 1] = i,
                g[p + 2] = j
            }
        var w = 4 * f;
        for (p = 0; w > p; p += 4)
            c[p + 0] = g[p + 0],
            c[p + 1] = g[p + 1],
            c[p + 2] = g[p + 2]
    }
      , b = function(a, b, c) {
        var d = a - b;
        return Math.pow(Math.E, -d * d / (2 * c * c))
    }
      , c = function(a, c, d) {
        0 === a % 2 && (a += 1);
        var e, f, g, h = [];
        for (e = 0; a > e; e += 1) {
            for (g = [],
            f = 0; a > f; f += 1)
                g.push(c * b(e, a / 2, d) * b(f, a / 2, d));
            h.push(g)
        }
        return h
    }
      , d = function(a, b) {
        var d = c(a, b, 1)
          , e = Math.floor(a / 2);
        return d[e][e] += 1 - b,
        d
    }
      , e = function(a, b) {
        var d = c(a, -b, 1)
          , e = Math.floor(a / 2);
        return d[e][e] += 1 + b,
        d
    };
    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, "filterAmount", 50),
    Kinetic.Filters.UnsharpMask = function(b) {
        a(b, e(5, this.getFilterAmount() / 100))
    }
    ,
    Kinetic.Filters.SoftBlur = function(b) {
        a(b, d(5, this.getFilterAmount() / 100))
    }
    ,
    Kinetic.Filters.Edge = function(b) {
        var c = this.getFilterAmount() / 100;
        0 !== c && a(b, [[0, -1 * c, 0], [-1 * c, 1 - c + 4 * c, -1 * c], [0, -1 * c, 0]])
    }
    ,
    Kinetic.Filters.Emboss = function(b) {
        var c = this.getFilterAmount() / 100;
        0 !== c && a(b, [[-1 * c, -.5 * c, 0], [-.5 * c, 1 + .5 * c, .5 * c], [0, .5 * c, 1 * c]])
    }
}();
